public void testWriteEmbeddedObjectWithByteArray() throws IOException {
    JsonFactory jsonFactory = new JsonFactory();
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    JsonGenerator jsonGenerator = jsonFactory.createGenerator(output);

    byte[] data = new byte[] {1, 2, 3, 4};

    jsonGenerator.writeStartObject();
    try {
        jsonGenerator.writeFieldName("binaryData");
        jsonGenerator.writeEmbeddedObject(data);
        jsonGenerator.writeEndObject();
    } catch (UnsupportedOperationException e) {
        fail("writeEmbeddedObject should be supported for byte[]");
    } finally {
        jsonGenerator.close();
    }

    String json = output.toString();
    assertTrue(json.contains("binaryData"));
}