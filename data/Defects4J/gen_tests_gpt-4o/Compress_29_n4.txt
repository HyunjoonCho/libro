public void testArchiveStreamFactoryEncoding() throws Exception {
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    String encoding = "UTF-8";
    
    // ArjArchiveInputStream
    ByteArrayInputStream arjInput = new ByteArrayInputStream(new byte[0]);
    ArjArchiveInputStream arjStream = (ArjArchiveInputStream) factory.createArchiveInputStream("arj", arjInput, encoding);
    assertEquals(encoding, arjStream.getEncoding());

    // CpioArchiveInputStream
    ByteArrayInputStream cpioInput = new ByteArrayInputStream(new byte[0]);
    CpioArchiveInputStream cpioStream = (CpioArchiveInputStream) factory.createArchiveInputStream("cpio", cpioInput, encoding);
    assertEquals(encoding, cpioStream.getEncoding());

    // DumpArchiveInputStream
    ByteArrayInputStream dumpInput = new ByteArrayInputStream(new byte[0]);
    DumpArchiveInputStream dumpStream = (DumpArchiveInputStream) factory.createArchiveInputStream("dump", dumpInput, encoding);
    assertEquals(encoding, dumpStream.getEncoding());

    // JarArchiveInputStream
    ByteArrayInputStream jarInput = new ByteArrayInputStream(new byte[0]);
    JarArchiveInputStream jarStream = (JarArchiveInputStream) factory.createArchiveInputStream("jar", jarInput, encoding);
    assertEquals(encoding, jarStream.getEncoding());

    // JarArchiveOutputStream
    ByteArrayOutputStream jarOutput = new ByteArrayOutputStream();
    JarArchiveOutputStream jarOutStream = (JarArchiveOutputStream) factory.createArchiveOutputStream("jar", jarOutput, encoding);
    assertEquals(encoding, jarOutStream.getEncoding());
}