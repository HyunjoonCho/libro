
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.junit.Test;
import org.junit.Assert;

public class JsoupTemplateTagTest {

    @Test
    public void testParserErrorOnTemplateInsideTr() {
        String html = 
            "<table>" +
                "<tr>" +
                    "<th></th>" +
                    "<th>Name</th>" +
                    "<template is=\"dom-if\" if=\"{{smoothingEnabled}}\">" +
                        "<th>Smoothed</th>" +
                    "</template>" +
                    "<th>Value</th>" +
                    "<th>Step</th>" +
                    "<th>Time</th>" +
                    "<th>Relative</th>" +
                "</tr>" +
            "</table>";

        try {
            Document doc = Jsoup.parse(html, "", Parser.htmlParser());
            // If no exception was encountered, check the parsed structure
            Assert.assertEquals("table", doc.body().child(0).tagName());
        } catch (Exception e) {
            Assert.fail("Parsing failed with exception: " + e.getMessage());
        }
    }
}
