
import org.junit.Test;
import static org.junit.Assert.*;

public class UnescapeTest {

    public String unescape(String input) {
        StringBuilder builder = new StringBuilder();
        boolean isEscape = false;

        for (char c : input.toCharArray()) {
            if (isEscape) {
                // Assuming current behavior is to remove escape character
                // if it's not one of the known escape sequences
                if (c == '\\') {
                    builder.append('\\');
                } else if (c == 'u') {
                    // Simulate the issue with incorrect Unicode escape handling
                    // Normally, handle Unicode properly
                    builder.append('\\').append(c);
                } else {
                    // Skip the escape character, add current character
                    builder.append(c);
                }
                isEscape = false;
            } else if (c == '\\') {
                isEscape = true;
            } else {
                builder.append(c);
            }
        }

        if (isEscape) {
            // Ends with escape character, add it
            builder.append('\\');
        }

        return builder.toString();
    }

    @Test
    public void testUnrecognizedEscapeHandling() {
        String input = "Hello\\u0041"; // Expecting to preserve \u0041 as is
        String expectedOutput = "Hello\\u0041"; // Unicode escape should be preserved
        String actualOutput = unescape(input);

        assertEquals("Unrecognized escape sequence should be preserved", expectedOutput, actualOutput);
    }
}
