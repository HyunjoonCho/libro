
import org.junit.Test;
import static org.junit.Assert.*;

public class CompilerBugTest {

    @Test
    public void testAssignmentRemovedInArrayPush() {
        // Initialize function f
        class TestFunction {
            public Object[] f() {
                Object[] a = new Object[1];
                Object[] b;
                a[0] = (b = new Object[1]); // Assigning b and pushing to array a
                b[0] = 1; // Setting the first element of b
                return a;
            }
        }

        TestFunction testFunction = new TestFunction();
        Object[] result = testFunction.f();

        // Check the contents of the array returned by f
        // The first element of the first element (a[0][0]) should be 1
        assertNotNull(result[0]);
        assertEquals(1, ((Object[]) result[0])[0]);
    }
}
