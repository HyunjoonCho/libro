
import org.apache.commons.cli.*;

import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class HelpFormatterTest {

    @Test
    public void testSetArgNameHasNoEffect() {
        // Create an Options object and add an option that requires an argument
        Options options = new Options();
        options.addOption(Option.builder("t")
                .longOpt("test")
                .hasArg()
                .desc("Test option")
                .build());

        // Create a HelpFormatter object and set a custom argument name
        HelpFormatter formatter = new HelpFormatter();
        formatter.setArgName("customArg");

        // Capture the help output in a PrintWriter
        java.io.StringWriter out = new java.io.StringWriter();
        java.io.PrintWriter pw = new java.io.PrintWriter(out);
        formatter.printHelp(pw, 80, "app", null, options, 2, 2, null);

        // Flush the PrintWriter
        pw.flush();

        // Check if the customArg name is reflected in the help output
        String helpOutput = out.toString();
        System.out.println(helpOutput);

        // Assert that the help output contains "customArg" instead of "arg"
        assertTrue("Expected 'customArg' not found in help output", helpOutput.contains("customArg"));
        assertTrue("Unexpected 'arg' found in help output", !helpOutput.contains(" arg "));
    }
}
