
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class JscompWarningTest {

    public static void main(String[] args) {
        try {
            String resultNormal = runClosureCompiler("--js test.js");
            String resultVerbose = runClosureCompiler("--js test.js --warning_level VERBOSE");
            String resultGlobalThis = runClosureCompiler("--js test.js --jscomp_warning globalThis");
            String resultCheckVars = runClosureCompiler("--js test.js --jscomp_warning checkVars");
            String resultUndefinedVars = runClosureCompiler("--js test.js --jscomp_warning undefinedVars");

            System.out.println("Normal Compilation Output:");
            System.out.println(resultNormal);
            System.out.println("\nVerbose Warning Level Output:");
            System.out.println(resultVerbose);
            System.out.println("\nGlobal This Warning Output:");
            System.out.println(resultGlobalThis);
            System.out.println("\nCheck Vars Warning Output:");
            System.out.println(resultCheckVars);
            System.out.println("\nUndefined Vars Warning Output:");
            System.out.println(resultUndefinedVars);
            
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static String runClosureCompiler(String options) throws IOException {
        ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", options.split(" "));
        Process process = processBuilder.start();

        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        StringBuilder result = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            result.append(line).append("\n");
        }
        return result.toString();
    }

}
