public void testCheckVarsAndUndefinedVarsDiagnostics() throws IOException {
    String[] command1 = {"java", "-jar", "compiler.jar", "--js", "test.js"};
    String[] command2 = {"java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "checkVars"};
    String[] command3 = {"java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "undefinedVars"};
    
    Process process1 = Runtime.getRuntime().exec(command1);
    Process process2 = Runtime.getRuntime().exec(command2);
    Process process3 = Runtime.getRuntime().exec(command3);
    
    BufferedReader stdInput1 = new BufferedReader(new InputStreamReader(process1.getInputStream()));
    BufferedReader stdInput2 = new BufferedReader(new InputStreamReader(process2.getInputStream()));
    BufferedReader stdInput3 = new BufferedReader(new InputStreamReader(process3.getInputStream()));

    // Collect and compare outputs
    String output1 = stdInput1.lines().collect(Collectors.joining("\n"));
    String output2 = stdInput2.lines().collect(Collectors.joining("\n"));
    String output3 = stdInput3.lines().collect(Collectors.joining("\n"));
    
    assertFalse(output1.contains("ERROR - variable foo is undefined"));
    assertFalse(output2.contains("ERROR - variable foo is undefined"));
    assertFalse(output3.contains("ERROR - variable foo is undefined"));
}