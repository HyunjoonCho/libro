
import org.junit.Test;
import static org.junit.Assert.fail;
import org.apache.commons.lang.SystemUtils;

public class SystemUtilsTest {

    @Test
    public void testGetJavaVersionAsFloatOnDalvik() {
        try {
            // Forcefully set the Java version string to mimic a Dalvik VM environment
            // Simulate the environment on Android runtime/Dalvik
            System.setProperty("java.specification.version", "0"); // Dalvik uses 0
            float javaVersion = SystemUtils.getJavaVersionAsFloat();
            System.out.println("Java version as float: " + javaVersion);
        } catch (StringIndexOutOfBoundsException e) {
            fail("SystemUtils.getJavaVersionAsFloat should not throw StringIndexOutOfBoundsException");
        } catch (Exception e) {
            // Other exceptions can also be checked/scanned as needed
            fail("Unexpected exception: " + e.getMessage());
        } finally {
            // Reset the system property if it affects other tests
            System.clearProperty("java.specification.version");
        }
    }
}
