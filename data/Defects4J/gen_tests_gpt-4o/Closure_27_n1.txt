
import com.google.javascript.rhino.IR;
import com.google.javascript.rhino.Node;
import org.junit.Test;

public class IRBlockTest {

    @Test(expected = RuntimeException.class)
    public void testTryCatchBlockCreationError() {
        // Create a `try` block that initializes a variable
        Node nodeTry = IR.block(
            IR.var(
                IR.name("testing"),
                IR.number(11)
            )
        );

        // Create a `catch` block that also initializes a variable
        Node nodeCatch = IR.catchNode(
            IR.name("blabla"),
            IR.block(
                IR.var(
                    IR.name("testing"),
                    IR.number(22)
                )
            )
        );

        // Attempt to create a try-catch block, which is expected to fail
        // due to the node structures being incorrectly validated
        Node rootNode = IR.tryCatch(nodeTry, nodeCatch);

        // Since this example is meant to demonstrate an error in the creation,
        // The expectation is that invoking this will lead to an internal compiler error.
    }
}
