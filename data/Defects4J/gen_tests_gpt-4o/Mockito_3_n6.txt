
import static org.junit.Assert.assertArrayEquals;
import static org.mockito.Mockito.*;

import java.util.Arrays;
import java.util.List;

import org.junit.Test;
import org.mockito.ArgumentCaptor;

// Example service interface to be mocked
interface MyService {
    void performAction(String... actions);
}

// Test class
public class ArgumentCaptorVarargsTest {

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Mock the service
        MyService mockService = mock(MyService.class);

        // Capture the varargs
        ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);

        // Call the method with varargs
        mockService.performAction("action1", "action2", "action3");

        // Verify and capture arguments
        verify(mockService).performAction(captor.capture());

        // Get the captured arguments
        String[] capturedArgs = captor.getValue();

        // Assert that the captured arguments match the input
        String[] expectedArgs = {"action1", "action2", "action3"};
        assertArrayEquals("The captured varargs are not as expected", expectedArgs, capturedArgs);
    }
}
