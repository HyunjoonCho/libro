
import static org.junit.Assert.assertArrayEquals;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.Mockito.*;

import java.util.List;

import org.junit.Test;
import org.mockito.ArgumentCaptor;

public class VarargsArgumentCaptorTest {

    interface VarargsService {
        void process(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Create a mock of the service
        VarargsService mockService = mock(VarargsService.class);

        // Call the method with varargs on the mock
        mockService.process("arg1", "arg2", "arg3");

        // Capture the arguments using ArgumentCaptor
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
        verify(mockService).process(captor.capture());

        // Verify the captured arguments
        List<String> capturedArgs = captor.getAllValues();
        String[] expectedArgs = {"arg1", "arg2", "arg3"};
        assertArrayEquals(expectedArgs, capturedArgs.toArray(new String[0]));
    }
}
