
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonValue;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class EnumSerializationTest {

    public enum TestEnum {
        @JsonProperty("value1") VALUE_ONE("value1");

        private String valueInJson;

        private TestEnum(String valueInJson) {
            this.valueInJson = valueInJson;
        }

        @JsonCreator
        public static TestEnum forValue(String value) {
            for (TestEnum testEnum : values()) {
                if (testEnum.valueInJson.equals(value)) {
                    return testEnum;
                }
            }
            throw new IllegalArgumentException("Unknown value: " + value);
        }

        @JsonValue
        public String toValue() {
            return valueInJson;
        }
    }

    @Test
    public void testEnumDeserialization() throws Exception {
        String json = "\"value1\""; // JSON representation of VALUE_ONE
        ObjectMapper mapper = new ObjectMapper();
        TestEnum result = mapper.readValue(json, TestEnum.class);
        assertEquals(TestEnum.VALUE_ONE, result);
    }

    @Test
    public void testEnumSerialization() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        String json = mapper.writeValueAsString(TestEnum.VALUE_ONE);
        assertEquals("\"value1\"", json); // Ensure it serializes correctly to "value1"
    }
}
