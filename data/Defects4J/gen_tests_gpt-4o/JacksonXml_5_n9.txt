public void testJacksonXmlRootElementWithMultipleMappers() throws Exception {
    final ObjectMapper xmlMapper = new XmlMapper();
    final ObjectMapper noAnnotationsXmlMapper = xmlMapper.copy()
            .configure(MapperFeature.USE_ANNOTATIONS, false)
            .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);

    XMLTest xmlTestInstance = new XMLTest();
    
    String resultWithoutAnnotations = noAnnotationsXmlMapper.writeValueAsString(xmlTestInstance);
    String resultWithAnnotations = xmlMapper.writeValueAsString(xmlTestInstance);

    assertEquals("<XMLTest/>", resultWithoutAnnotations);
    assertEquals("<myname/>", resultWithAnnotations);
}