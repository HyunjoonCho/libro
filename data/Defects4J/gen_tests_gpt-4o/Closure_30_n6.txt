public void testCombiningTemporaryStrings() {
    sgxColorRGBA color = new sgxColorRGBA(0.5f, 0.4f, 0.3f, 0.2f);
    String expectedHex = "7f66524d";
    assertEquals(expectedHex, color.asHex());
}

private static class sgxColorRGBA {
    float r, g, b, a;

    sgxColorRGBA(float r, float g, float b, float a) {
        this.r = r;
        this.g = g;
        this.b = b;
        this.a = a;
    }

    String asHex() {
        // Using explicit "var str" declarations to avoid the bug
        var hexString = new StringBuilder();

        var str = Integer.toHexString(Math.round(this.r * 255));
        if (str.length() < 2) { str = "0" + str; }
        hexString.append(str);

        str = Integer.toHexString(Math.round(this.g * 255));
        if (str.length() < 2) { str = "0" + str; }
        hexString.append(str);

        str = Integer.toHexString(Math.round(this.b * 255));
        if (str.length() < 2) { str = "0" + str; }
        hexString.append(str);

        str = Integer.toHexString(Math.round(this.a * 255));
        if (str.length() < 2) { str = "0" + str; }
        hexString.append(str);

        return hexString.toString();
    }
}