public void testCpioUnexpectedEOF() throws Exception {
    File input = new File("path/to/cmdcreated.cpio");
    InputStream in = new FileInputStream(input);
    CpioArchiveInputStream cin = new CpioArchiveInputStream(in);

    try {
        CpioArchiveEntry entry = null;
        while ((entry = cin.getNextCPIOEntry()) != null) {
            // Simulate a copy to trigger the EOFException
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            IOUtils.copy(cin, out);
            out.close();
        }
        fail("Expected EOFException not thrown");
    } catch (EOFException e) {
        // Expected exception
    } finally {
        cin.close();
        in.close();
    }
}