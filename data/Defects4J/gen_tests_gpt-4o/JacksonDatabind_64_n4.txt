
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

public class JsonIncludeNonDefaultTest {

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    static class TestClass {
        public String field1 = "default";
        public String field2 = null;
    }

    @Test
    public void testNonDefaultExcludeNullStrings() throws JsonProcessingException {
        ObjectMapper objectMapper = new ObjectMapper();
        TestClass testObj = new TestClass();
        
        String jsonString = objectMapper.writeValueAsString(testObj);

        // Assert that the serialization does not include the null field
        assertFalse(jsonString.contains("field2"));

        // Assert that the serialization includes the non-null field
        assertTrue(jsonString.contains("field1"));
    }
}
