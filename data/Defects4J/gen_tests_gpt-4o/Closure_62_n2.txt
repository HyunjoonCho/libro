
import java.io.*;

public class CompilerErrorTest {

    public static void main(String[] args) throws IOException {
        // Test case 1: Missing caret in error output without line break after semicolon
        String jsContent1 = "alert(1;";
        runTest(jsContent1, "Test 1");

        // Test case 2: Caret appears in error output with line break after semicolon
        String jsContent2 = "alert(1;\n";
        runTest(jsContent2, "Test 2");
    }

    private static void runTest(String jsContent, String testName) throws IOException {
        // Write the JavaScript content to a temporary file
        File tempJsFile = File.createTempFile("test", ".js");
        try (BufferedWriter writer = new BufferedWriter(new FileWriter(tempJsFile))) {
            writer.write(jsContent);
        }

        // Call the compiler and capture the output
        ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", tempJsFile.getAbsolutePath());
        processBuilder.redirectErrorStream(true);
        Process process = processBuilder.start();
        try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
            String line;
            System.out.println("Output for " + testName + ":");
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        }

        // Clean up the temporary file
        tempJsFile.delete();
    }
}
