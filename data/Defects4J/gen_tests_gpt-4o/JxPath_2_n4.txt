public void testNodeSetReturnedByExtensionFunction() {
    JXPathContext context = JXPathContext.newContext(new Object());
    
    // Register a namespace for the extension
    NamespaceResolver nsResolver = context.getNamespaceResolver();
    nsResolver.registerNamespace("ems", "http://example.com/ems");
    
    // Register the extension function
    context.setFunctions(new ClassFunctions(YourExtensionClass.class, "ems"));
    
    // Call the extension function
    List<Object> result = context.selectNodes("ems:observations()");
    
    // Assuming observations() should return a NodeSet with multiple Nodes
    // Checking if the result is not just a single node containing the NodeSet
    assertTrue(result instanceof List);
    assertFalse(result.isEmpty());
    
    // Additional assertions can be made about the contents of the result
}