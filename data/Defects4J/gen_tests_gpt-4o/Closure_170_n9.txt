public void testOverlyAggressiveCommaRemoval() {
    String originalCode = 
        "function Test(n) {" +
        "    var i = 0;" +
        "    return typeof n !== \"undefined\" ? (i = n.length) : (n = \"foo\"), i;" +
        "}" +
        "var dummy = \"6chars\";" +
        "console && console.log(Test(dummy));";
    
    // Assuming compileAndExecute returns the output of executing the compiled code
    String optimizedCode = 
        "function Test(a) {" +
        "    return 0;" +
        "}" +
        "var dummy = \"6chars\";" +
        "console && console.log(Test(dummy));";
    
    assertNotEquals(executeCode(originalCode), executeCode(optimizedCode));
}

private String executeCode(String code) {
    // Mocked method to simulate executing the code string and returning the console output
    return ""; // Adjust this method to integrate with a real JavaScript engine if necessary.
}