
import org.apache.commons.lang3.LocaleUtils;
import org.junit.Test;

import java.util.Locale;

import static org.junit.Assert.assertEquals;

public class LocaleUtilsTest {

    @Test
    public void testToLocaleWithUnderscorePrefix() {
        // Expected locale (language is missing, so only variant is specified)
        Locale expectedLocale = new Locale("", "", "P");

        // String starting with an underscore representing a Locale without language
        String localeString = "__P";

        // Use LocaleUtils.toLocale to parse the string
        Locale parsedLocale = null;
        try {
             parsedLocale = LocaleUtils.toLocale(localeString);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
            // Fails the test if the parsing throws an exception
            org.junit.Assert.fail("Parsing failed with exception: " + e.getMessage());
        }

        // Assert that the parsed locale matches the expected locale
        assertEquals(expectedLocale, parsedLocale);
    }
}
