
import org.apache.commons.lang3.time.FastDateParser;
import org.junit.Test;
import java.text.SimpleDateFormat;
import java.text.ParseException;
import java.util.Date;
import java.util.Locale;

import static org.junit.Assert.*;

public class FastDateParserWhitespaceTest {

    @Test
    public void testWhiteSpaceHandling() {
        String pattern = "yyyy-MM-dd";
        String inputWithExtraSpaces = "2023-01-01";
        String inputWithNoSpaces = "2023-01-01";

        SimpleDateFormat sdf = new SimpleDateFormat(pattern, Locale.US);
        FastDateParser fdp = new FastDateParser(pattern, Locale.US);

        try {
            // Using SimpleDateFormat
            Date sdfDate = sdf.parse(inputWithNoSpaces);
            try {
                // This should fail with extra spaces as SimpleDateFormat is strict with spaces
                sdf.parse(inputWithExtraSpaces);
                fail("SimpleDateFormat should fail when extra spaces are present.");
            } catch (ParseException e) {
                // Expected exception
            }

            // Using FastDateParser
            Date fdpDate = fdp.parse(inputWithExtraSpaces);

            // Check if FDB produces the same date object as SDF, disregarding the spaces
            assertEquals("FastDateParser should produce correct date with extra spaces", sdfDate, fdpDate);
        } catch (ParseException e) {
            fail("Parsing failed unexpectedly: " + e.getMessage());
        }
    }
}
