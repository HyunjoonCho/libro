public void testArgumentsScopeWithAdvancedOptimizations() {
    // Using a mock setTimeout function to capture the argument passed to it
    final Object[] capturedArgs = new Object[1];
    
    Function<Object, Void> mockSetTimeout = new Function<Object, Void>() {
        public Void apply(Object arg) {
            capturedArgs[0] = arg;
            return null;
        }
    };
    
    Function<Void, Void> functionUnderTest = new Function<Void, Void>() {
        public Void apply(Void input) {
            final Object[] args = new Object[]{1, 2, 3};
            mockSetTimeout.apply(new Function<Void, Void>() {
                public Void apply(Void input) {
                    assertArrayEquals(args, arguments);
                    return null;
                }
            });
            return null;
        }
    };
    
    functionUnderTest.apply(null);
}