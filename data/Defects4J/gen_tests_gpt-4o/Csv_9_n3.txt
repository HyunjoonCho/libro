
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVParser;
import org.apache.commons.csv.CSVRecord;
import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.io.StringReader;

import static org.junit.jupiter.api.Assertions.assertNull;
import static org.junit.jupiter.api.Assertions.fail;

public class CSVRecordTest {

    @Test
    public void testToMapWithoutHeaders() {
        String csvData = "value1,value2,value3";
        CSVFormat format = CSVFormat.DEFAULT; // No headers specified

        try (CSVParser parser = CSVParser.parse(new StringReader(csvData), format)) {
            CSVRecord record = parser.getRecords().get(0);
            // Act
            try {
                assertNull(record.toMap(), "Expected 'toMap()' to return null when no headers are used");
            } catch (NullPointerException e) {
                fail("CSVRecord.toMap() should return null, not throw NullPointerException");
            }
        } catch (IOException e) {
            fail("IOException was thrown during test setup: " + e.getMessage());
        }
    }
}
