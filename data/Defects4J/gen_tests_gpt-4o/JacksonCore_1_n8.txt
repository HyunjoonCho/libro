
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonFactory;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.JsonNode;
import org.junit.Test;

import java.io.IOException;

public class NaNBigDecimalTest {

    @Test(expected = NumberFormatException.class)
    public void testNaNAsBigDecimal() throws IOException {
        String json = "{\"value\": NaN}";

        JsonFactory factory = new JsonFactory();
        factory.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);
        
        ObjectMapper mapper = new ObjectMapper(factory);
        JsonNode rootNode = mapper.readTree(json);

        // Attempting to get a BigDecimal value from NaN
        rootNode.get("value").decimalValue();
    }
}
