
import org.apache.commons.math3.stat.inference.MannWhitneyUTest;
import org.junit.Test;
import static org.junit.Assert.assertFalse;

public class MannWhitneyUTestOverflowTest {

    @Test
    public void testMannWhitneyUOverflowWithLargeDataSets() {
        // Creating two large data sets with 1500 elements each
        double[] dataset1 = new double[1500];
        double[] dataset2 = new double[1500];

        // Initialize datasets with some arbitrary large values
        for (int i = 0; i < 1500; i++) {
            dataset1[i] = i + 10000; // any large number
            dataset2[i] = i;
        }

        // Create instance of MannWhitneyUTest
        MannWhitneyUTest mannWhitneyUTest = new MannWhitneyUTest();

        // Perform the test and obtain the p-value
        double pValue = mannWhitneyUTest.mannWhitneyUTest(dataset1, dataset2);

        // Assert that the p-value is not NaN, indicating an overflow occurred
        assertFalse("P-value should not be NaN", Double.isNaN(pValue));
    }
}
