
import static org.junit.jupiter.api.Assertions.assertArrayEquals;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.mock;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

public class ArgumentCaptorVarargsTest {

    interface SomeService {
        void doSomething(String arg, String... varargs);
    }

    private SomeService mockService;

    @BeforeEach
    public void setUp() {
        mockService = mock(SomeService.class);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Act
        mockService.doSomething("fixedArg", "vararg1", "vararg2");

        // Create ArgumentCaptor for varargs
        ArgumentCaptor<String> varargsCaptor = ArgumentCaptor.forClass(String.class);
        
        // Verify and capture
        verify(mockService).doSomething(Mockito.eq("fixedArg"), varargsCaptor.capture());
        
        // Assert
        assertArrayEquals(new String[]{"vararg1", "vararg2"}, varargsCaptor.getAllValues().toArray(new String[0]));
    }
}
