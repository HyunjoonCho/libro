public void testUnionTypeCastingError() {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setCreateNameMapFiles(true);
    options.setWarningLevel(DiagnosticGroups.MISSING_PROPERTIES, CheckLevel.WARNING);
    options.setWarningLevel(DiagnosticGroups.UNDEFINED_VARIABLES, CheckLevel.WARNING);
    options.setWarningLevel(DiagnosticGroups.CHECK_TYPES, CheckLevel.WARNING);
    options.setWarningLevel(DiagnosticGroups.STRICT_MODULE_DEP_CHECK, CheckLevel.ERROR);
    options.setWarningLevel(DiagnosticGroups.INVALID_CASTS, CheckLevel.ERROR);
    options.setWarningLevel(DiagnosticGroups.VERBOSE, CheckLevel.WARNING);
    options.setSummaryDetailLevel(3);
    options.setProcessClosurePrimitives(true);
    options.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);

    String jsCode = "var x = function(param) { return param.prop; };";  // Hypothetical JS code that utilizes complex union types.

    try {
        compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", jsCode), options);
        fail("Expected a ClassCastException due to a UnionType/ObjectType casting issue.");
    } catch (RuntimeException e) {
        assertTrue(e.getCause() instanceof ClassCastException);
        assertTrue(e.getCause().getMessage().contains("com.google.javascript.rhino.jstype.UnionType cannot be cast to com.google.javascript.rhino.jstype.ObjectType"));
    }
}