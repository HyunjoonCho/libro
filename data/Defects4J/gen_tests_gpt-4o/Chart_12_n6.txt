
import org.jfree.chart.plot.MultiplePiePlot;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.data.general.DatasetChangeListener;
import org.jfree.data.general.DatasetChangeEvent;
import org.junit.Test;
import static org.junit.Assert.*;

public class MultiplePiePlotTest {

    @Test
    public void testConstructorWiresDatasetToListener() {
        // Create a simple category dataset
        DefaultCategoryDataset dataset = new DefaultCategoryDataset();
        dataset.addValue(1.0, "Row1", "Column1");

        // Create a MultiplePiePlot with the dataset
        MultiplePiePlot plot = new MultiplePiePlot(dataset);

        // Check if the dataset has any listeners
        ListenerCheck listenerCheck = new ListenerCheck();
        dataset.addChangeListener(listenerCheck);

        // Trigger a dataset change
        dataset.setValue(2.0, "Row1", "Column1");

        // If the dataset is properly wired, a change event should be registered
        assertTrue("Dataset should have a listener wired by constructor", listenerCheck.isChanged());
    }

    private static class ListenerCheck implements DatasetChangeListener {
        private boolean changed = false;

        @Override
        public void datasetChanged(DatasetChangeEvent event) {
            changed = true;
        }

        public boolean isChanged() {
            return changed;
        }
    }
}
