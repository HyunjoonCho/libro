
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import java.util.Map;

import static org.junit.Assert.assertEquals;

public class CharSequenceKeyDeserializerTest {

    @Test
    public void testCharSequenceKeyDeserialization() throws Exception {
        // Setup ObjectMapper
        ObjectMapper objectMapper = new ObjectMapper();

        // JSON data with CharSequence keys
        String json = "{\"key1\":\"value1\",\"key2\":\"value2\"}";

        // Attempt to deserialize JSON into a Map with CharSequence keys
        Map<CharSequence, String> map = objectMapper.readValue(json, new TypeReference<Map<CharSequence, String>>() {});

        // Check size of the map to see if deserialization succeeded
        assertEquals(2, map.size());

        // Verify the values are correctly placed in the map
        assertEquals("value1", map.get("key1"));
        assertEquals("value2", map.get("key2"));
    }
}
