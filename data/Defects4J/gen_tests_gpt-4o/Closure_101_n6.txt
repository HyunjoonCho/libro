public void testProcessClosurePrimitivesFlag() throws Exception {
    CompilerOptions options = new CompilerOptions();
    Compiler compiler = new Compiler();

    CommandLineRunner.runCommandLine(new String[]{"--process_closure_primitives=false"}, options, compiler);
    String resultFalse = compiler.toSource();

    CommandLineRunner.runCommandLine(new String[]{"--process_closure_primitives=true"}, options, compiler);
    String resultTrue = compiler.toSource();

    assertNotEquals("Both the results should be different when the flag is set to false", resultTrue, resultFalse);
}