html
<!DOCTYPE html>
<html>
<head>
    <title>IE Bug Reproduction</title>
    <script>
        // Original source without compilation changes
        function sortByThreshold(originalArray, threshold) {
            var modifiedArray = originalArray.slice(); // Copy the array

            modifiedArray.sort(function(a, b) {
                return a[0] - b[0]; // Simple comparator
            });

            // Return the modified array based on threshold
            return modifiedArray.length < threshold ? modifiedArray : [];
        }

        // This function mimics a simplified compiled version that might be produced with Closure Compiler
        function compiledSortByThreshold(originalArray, threshold) {
            originalArray.sort(function(a, b) {
                return a[0] - b[0]; // Sort is in-place
            });

            return originalArray.length < threshold ? originalArray : [];
        }

        function testSortFunction() {
            var threshold = 300;
            var data = [];
            for (var i = 0; i < threshold; i++) {
                data.push([Math.random(), i]);
            }

            // Expected output
            var expectedResult = sortByThreshold(data, threshold);

            // Triggering the issue
            var actualResult = compiledSortByThreshold(data, threshold);

            // Logging results
            console.log("Expected Result Length:", expectedResult.length);
            console.log("Actual Result Length:", actualResult.length);

            if (expectedResult.length !== actualResult.length) {
                console.error("Test failed: Mismatch in length");
            } else {
                console.log("Test passed: Expected and actual lengths match");
            }
        }
    </script>
</head>
<body onload="testSortFunction()">
    <h1>IE Bug Reproduction Test Page</h1>
    <p>Open the console in IE6+ (including in Compatibility View in IE8+) to see the results.</p>
</body>
</html>
