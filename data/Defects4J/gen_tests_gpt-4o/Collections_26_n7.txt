public void testMultiKeyDeserializationIssue() throws IOException, ClassNotFoundException {
    class MultiKey2<A, B> extends MultiKey {
        private static final long serialVersionUID = 1928896152249821416L;

        public MultiKey2(A key1, B key2) {
            super(key1, key2);
        }
    }
    
    MultiKey2<String, String> originalMultiKey = new MultiKey2<>("key1", "key2");
    int originalHashCode = originalMultiKey.hashCode();
    
    ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
    ObjectOutputStream out = new ObjectOutputStream(byteOut);
    out.writeObject(originalMultiKey);
    out.close();
    
    byte[] serializedData = byteOut.toByteArray();
    ByteArrayInputStream byteIn = new ByteArrayInputStream(serializedData);
    ObjectInputStream in = new ObjectInputStream(byteIn);
    MultiKey2<String, String> deserializedMultiKey = (MultiKey2<String, String>) in.readObject();
    
    int deserializedHashCode = deserializedMultiKey.hashCode();
    assertEquals("hashCode must be equal - please check for protected readResolve in MultiKey",
                 originalHashCode, deserializedHashCode);
}