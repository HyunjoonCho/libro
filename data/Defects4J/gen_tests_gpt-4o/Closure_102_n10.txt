
import org.junit.Test;
import javax.script.*;

import static org.junit.Assert.assertEquals;

public class CompilerShadowingTest {

    @Test
    public void testArgumentsShadowing() throws ScriptException {
        // Set up the JavaScript engine
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");

        // Original JavaScript code
        String jsCode = 
                "function name() {" +
                "    var arguments = Array.prototype.slice.call(arguments, 0);" +
                "    return arguments.length;" +
                "}" +
                "name(1, 2, 3);";

        // Evaluate the code using the JavaScript engine
        Object result = engine.eval(jsCode);

        // Verify that the function works correctly and returns the length of arguments
        assertEquals(3, result);
    }
}
