public void testLongJsonKey() {
    char[] chars = new char[262145];
    Arrays.fill(chars, 'a');
    String longKey = new String(chars);
    String json = "{\"" + longKey + "\": \"value\"}";

    try {
        JsonFactory factory = new JsonFactory();
        JsonParser parser = factory.createParser(json);
        while (parser.nextToken() != null) {
            // noop
        }
        fail("Expected an ArrayIndexOutOfBoundsException to be thrown");
    } catch (ArrayIndexOutOfBoundsException e) {
        // Test succeeds - exception is expected
    } catch (IOException e) {
        fail("Expected an ArrayIndexOutOfBoundsException, but got: " + e);
    }
}