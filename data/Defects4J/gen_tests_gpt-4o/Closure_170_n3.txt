
import static org.junit.Assert.assertEquals;
import org.junit.Test;

public class CommaRemovalTest {

    public int Test(String n) {
        int i = 0;
        return (n != null && !n.equals("undefined")) ? (i = n.length()) : (n = "foo"), i;
    }

    @Test
    public void testCommaRemovalBug() {
        // Simulating the behavior of the optimized code
        int expected = 0; // What the incorrect compile result would return
        int actual = Test("6chars"); // Calling the manually ported 'Test' function

        assertEquals("The optimized code incorrectly modifies the behavior", expected, actual);
        
        // Now verify the correct behavior
        assertEquals("Expected length of input string", 7, Test("6chars"));
    }
}
