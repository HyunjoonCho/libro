
import org.apache.commons.math3.distribution.GammaDistribution;
import org.junit.Test;
import java.io.*;

import static org.junit.Assert.assertEquals;

public class GammaDistributionTest {

    @Test
    public void testGammaDistributionSerialization() throws IOException, ClassNotFoundException {
        GammaDistribution originalDistribution = new GammaDistribution(2.0, 2.0);

        // Generate a sample from the original distribution
        double originalSample = originalDistribution.sample();

        // Serialize the GammaDistribution
        ByteArrayOutputStream byteOutStream = new ByteArrayOutputStream();
        ObjectOutputStream objectOutStream = new ObjectOutputStream(byteOutStream);
        objectOutStream.writeObject(originalDistribution);
        objectOutStream.close();

        // Deserialize the GammaDistribution
        ByteArrayInputStream byteInStream = new ByteArrayInputStream(byteOutStream.toByteArray());
        ObjectInputStream objectInStream = new ObjectInputStream(byteInStream);
        GammaDistribution deserializedDistribution = (GammaDistribution) objectInStream.readObject();
        objectInStream.close();

        // Generate a sample from the deserialized distribution
        double deserializedSample = deserializedDistribution.sample();

        // Assert that samples from the original and deserialized distributions are the same
        assertEquals("Deserialized GammaDistribution does not produce the same sample.", originalSample, deserializedSample, 1e-9);
    }
}
