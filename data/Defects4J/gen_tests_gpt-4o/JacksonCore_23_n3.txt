public void testCreateInstanceSubClass() {
    class CustomPrettyPrinter extends DefaultPrettyPrinter {}

    DefaultPrettyPrinter customPrinter = new CustomPrettyPrinter();
    try {
        DefaultPrettyPrinter newInstance = customPrinter.createInstance();
        fail("Expected an IllegalStateException when calling createInstance on a subclass.");
    } catch (IllegalStateException e) {
        assertEquals("Cannot call createInstance() on a subclass implementation.", e.getMessage());
    }
}