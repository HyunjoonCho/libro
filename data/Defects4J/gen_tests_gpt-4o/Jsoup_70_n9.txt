
import static org.junit.jupiter.api.Assertions.assertEquals;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.jupiter.api.Test;

public class PreTagWhitespaceTest {

    @Test
    public void testWhitespaceHandlingInPreTag() {
        String inputHtml = "<pre><code>\n"
                + "  message <span style=\"color:red\"> other   \n    message  with \n"
                + "   whitespaces      </span>\n"
                + "</code></pre>";

        String expectedOutputHtml = "<pre><code>\n"
                + "  message <span style=\"color:red\"> other   \n    message  with \n"
                + "   whitespaces      </span>\n"
                + "</code></pre>";

        Document doc = Jsoup.parse(inputHtml);
        String actualOutputHtml = doc.select("pre").first().outerHtml();

        // This assertion will fail, demonstrating the issue
        assertEquals(expectedOutputHtml, actualOutputHtml);
    }
}
