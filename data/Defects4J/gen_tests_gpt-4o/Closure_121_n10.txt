public void testOverzealousOptimizationConfusesVariables() {
    String original = "var uid; function reset() { uid = Math.random(); } " +
                      "function doStuff() { reset(); var _uid = uid; " +
                      "if (uid < 0.5) { doStuff(); } " +
                      "if (_uid !== uid) { throw 'reset() was called'; } } doStuff();";
    String optimized = "var a;function b(){a=Math.random();0.5>a&&b();if(a!==a)throw'reset() was called';}b();";

    // Simulate the bug by comparing the expected optimized code to the actual one
    assertNotEquals(optimized, Compiler.optimizeWithAdvancedOptimizations(original));
}