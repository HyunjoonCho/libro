
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class JsoupDuplicatedAttributeTest {

    @Test
    public void testDuplicatedAttributeParsing() {
        // HTML snippet with duplicated attributes
        String html = "<div id='first' id='second'>Test</div>";

        // Parse with Jsoup
        Document doc = Jsoup.parse(html);
        Element div = doc.selectFirst("div");

        // Jsoup will take the last attribute value
        String jsoupId = div.attr("id");
        assertEquals("second", jsoupId);

        // Expectation based on Chrome's behavior: should take the first attribute value
        String expectedId = "first";

        // Check if the expected behavior matches what Jsoup provides
        // In a correct test, these values would not be the same, showcasing the discrepancy
        assertEquals("Jsoup takes the last attribute instead of the first like browsers", expectedId, jsoupId);
    }
}
