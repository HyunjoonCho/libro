
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.deser.FromXmlParser;
import com.fasterxml.jackson.dataformat.xml.deser.FromXmlParser.Feature;
import org.junit.Test;

import java.io.ByteArrayInputStream;

import static org.junit.Assert.assertEquals;

public class FromXmlParserTest {

    @Test
    public void testNextTextValueForAttribute() throws Exception {
        String xml = "<root attribute=\"value\"/>";

        XmlMapper xmlMapper = new XmlMapper();
        xmlMapper.configure(Feature.EMPTY_ELEMENT_AS_NULL, true);

        try (FromXmlParser parser = (FromXmlParser) xmlMapper.getFactory().createParser(new ByteArrayInputStream(xml.getBytes()))) {
            assertEquals(FromXmlParser.Feature.EMPTY_ELEMENT_AS_NULL, parser.nextToken());
            assertEquals("value", parser.nextTextValue());
        }
    }
}
