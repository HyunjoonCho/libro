
import org.apache.commons.lang3.time.DurationFormatUtils;
import org.junit.Test;

import java.util.Calendar;

import static org.junit.Assert.assertEquals;

public class DurationFormatUtilsTest {

    @Test
    public void testFormatPeriodWithEndOfYear() {
        // Set the calendar to December 31, 2005
        Calendar cal = Calendar.getInstance();
        cal.set(Calendar.MONTH, Calendar.DECEMBER);
        cal.set(Calendar.DAY_OF_MONTH, 31);
        cal.set(Calendar.YEAR, 2005);
        cal.set(Calendar.HOUR_OF_DAY, 0);
        cal.set(Calendar.MINUTE, 0);
        cal.set(Calendar.SECOND, 0);
        cal.set(Calendar.MILLISECOND, 0);

        // Format period from December 31, 2005 to current time
        String result = DurationFormatUtils.formatPeriod(cal.getTimeInMillis(), System.currentTimeMillis(), "MM");

        // Expected result must be manually verified, as the bug report claims a result of "-2"
        // We can print it out for inspection during the test run because the expected value in the bug report
        // suggests an obviously incorrect value
        System.out.println("Formatted result: " + result);

        // For demonstration purposes, let's assert it equals "-2" but in reality, the expected correct value logic 
        // should be compared if the bug is patched or resolved.
        assertEquals("-2", result);

        // Note: This test condition assumes the bug is still present for demonstration purposes. 
        // The expected value should be verified against a correct implementation if fixed.
    }
}
