
import org.apache.commons.math3.stat.descriptive.moment.Variance;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class VarianceTest {

    @Test
    public void testVarianceEvaluateWithLength() {
        // Test data
        double[] values = {1.0, 2.0, 3.0, 4.0, 5.0}; // Full dataset
        double[] weights = {1.0, 1.0, 1.0, 1.0, 1.0}; // Equal weights
        double mean = 2.5; // Mean of a specific part of the data
        int begin = 0; // Starting from index 0
        int length = 3; // Only take the first three elements [1.0, 2.0, 3.0]

        // Expected variance is calculated for the subset [1.0, 2.0, 3.0]
        double expectedVariance = 1.0; // Variance of [1.0, 2.0, 3.0] with mean 2.5

        // Compute the variance
        Variance variance = new Variance();
        double result = variance.evaluate(values, weights, mean, begin, length);

        // Assert if the calculated variance is as expected
        assertEquals("Variance calculation is incorrect.", expectedVariance, result, 1e-9);
    }
}
