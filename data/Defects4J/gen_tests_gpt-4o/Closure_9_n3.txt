public void testCompilerAMDModuleResolution() {
    try {
        ProcessBuilder builder = new ProcessBuilder(
            "java", "-jar", "compiler.jar",
            "--transform_amd_modules",
            "--process_common_js_modules",
            "--common_js_entry_module=Bar.js",
            "--compilation_level=ADVANCED_OPTIMIZATIONS",
            "--js_output_file=out.js",
            "--js=Bar.js",
            "--js=lib/Foo.js"
        );
        builder.redirectErrorStream(true);
        Process process = builder.start();
        String errorMessage = new BufferedReader(new InputStreamReader(process.getInputStream()))
            .lines().collect(Collectors.joining("\n"));
        int exitCode = process.waitFor();
        assertEquals("Process completed with errors", 0, exitCode);
        assertFalse("Expected no error message but found: " + errorMessage, 
            errorMessage.contains("required entry point \"module$lib$Foo\" never provided"));
    } catch (Exception e) {
        fail("Test execution failed with exception: " + e.getMessage());
    }
}