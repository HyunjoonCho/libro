
import static org.junit.Assert.assertEquals;

import java.util.Calendar;
import java.util.TimeZone;
import java.util.Date;

import org.apache.commons.lang3.time.DateUtils;
import org.junit.Test;

public class DateUtilsTest {

    @Test
    public void testTruncateWithDSTSwitchingHours() {
        // Set the timezone to MDT/MST (Mountain Daylight/Standard Time)
        TimeZone timeZone = TimeZone.getTimeZone("America/Denver"); 
        
        // Create a Calendar instance in the specified timezone
        Calendar calendar = Calendar.getInstance(timeZone);
        
        // Set the date to 2004-10-31 01:00:00 MDT
        calendar.set(2004, Calendar.OCTOBER, 31, 1, 0, 0);
        calendar.set(Calendar.MILLISECOND, 0);
        
        // Get the Date object for the above calendar
        Date oct31_01MDT = calendar.getTime();
        
        // Truncate the date by hour
        Date result = DateUtils.truncate(oct31_01MDT, Calendar.HOUR_OF_DAY);
        
        // Assert that the truncated date is equal to the original date
        assertEquals(oct31_01MDT, result);
    }
}
