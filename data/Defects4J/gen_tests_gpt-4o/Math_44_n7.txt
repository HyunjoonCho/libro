public void testIncompleteReinitializationWithEvents() {
    EventSystem eventSystem = new EventSystem();
    MockStatefulObject statefulObject = new MockStatefulObject();
    eventSystem.registerListener(statefulObject);

    // Simulate two events occurring at the same step
    Event event1 = new Event("RESET_STATE");
    Event event2 = new Event("PROCESS_DATA");

    eventSystem.triggerEvent(event1); // This should reset the state
    eventSystem.triggerEvent(event2); // This should fail if reinitialization is incomplete

    // Assert that the state has been fully reinitialized before processing the second event
    assertTrue(statefulObject.isStateInitialized());
    assertTrue(statefulObject.isDataProcessed());
}