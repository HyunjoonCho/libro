public void testTokenBufferDeserializationWithJsonCreator() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{ \"a\":1, \"b\":null }";

    JsonParser parser = mapper.getFactory().createParser(json);
    TokenBuffer tokenBuffer = new TokenBuffer(mapper, false);
    parser.nextToken(); // Move to START_OBJECT
    tokenBuffer.copyCurrentStructure(parser);

    assertEquals(JsonToken.START_OBJECT, tokenBuffer.asParser().nextToken());
    assertEquals(JsonToken.FIELD_NAME, tokenBuffer.asParser().nextToken());
    assertEquals("a", tokenBuffer.asParser().getCurrentName());
    assertEquals(JsonToken.VALUE_NUMBER_INT, tokenBuffer.asParser().nextToken());
    assertEquals(1, tokenBuffer.asParser().getIntValue());
    assertEquals(JsonToken.FIELD_NAME, tokenBuffer.asParser().nextToken());
    assertEquals("b", tokenBuffer.asParser().getCurrentName());
    assertEquals(JsonToken.VALUE_NULL, tokenBuffer.asParser().nextToken());
    assertEquals(JsonToken.END_OBJECT, tokenBuffer.asParser().nextToken());
}