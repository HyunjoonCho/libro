
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.Parser;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class ElementHtmlWhitespaceTest {

    @Test
    public void testWhitespacePreservationInElementHtml() {
        // Original document with significant whitespaces
        String inputHtml = "<html><head></head><body>\n    <div>   Content with leading whitespace</div>\n</body></html>";

        // Parse the document with XML parser and no pretty printing
        Document document = Jsoup.parse(inputHtml, "", Parser.xmlParser());
        document.outputSettings().prettyPrint(false);

        // Convert the document back to HTML
        Element body = document.body();
        String outputHtml = body.html();

        // Expected body html should retain whitespace in the div
        String expectedHtml = "\n    <div>   Content with leading whitespace</div>\n";

        // Verify the outputHtml has preserved the whitespace
        assertEquals(expectedHtml, outputHtml);
    }
}
