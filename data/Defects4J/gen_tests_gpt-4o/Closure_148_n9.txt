
import com.google.javascript.jscomp.*;
import com.google.javascript.rhino.*;

public class CssWritingModeTest {

    public void testWritingModeProperty() {
        // Sample JavaScript code with CSS property: writingMode
        String jsCode = "element.style.writingMode = 'vertical-rl';";

        // Initialize a simple compiler
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();

        // Enable ADVANCED_OPTIMIZATIONS
        CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
        WarningLevel.QUIET.setOptionsForWarningLevel(options);

        // Compile the JavaScript code
        Node parseTree = new JsAst(SourceFile.fromCode("testcode", jsCode)).getAstRoot(compiler);
        compiler.compile(
            externs(),
            ImmutableList.of(parseTree),
            options
        );

        // Get the compiled result
        String compiledCode = compiler.toSource();

        // Check if the writingMode property is still present
        assertTrue("writingMode should not have been renamed", compiledCode.contains("writingMode"));
    }

    private static ImmutableList<SourceFile> externs() {
        return AbstractCommandLineRunner.getBuiltinExterns(CompilerOptions.Environment.BROWSER);
    }
}
