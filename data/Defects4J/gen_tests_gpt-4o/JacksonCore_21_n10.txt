public void testFilteringParserDelegateMissesLastClosingEndObject() throws IOException {
    String json = "{"
            + "\"a\":123,"
            + "\"array\":[1,2],"
            + "\"ob\": {"
            + "\"value0\":2,"
            + "\"value\":3,"
            + "\"value2\":4"
            + "},"
            + "\"b\":true"
            + "}";
    
    JsonFactory factory = new JsonFactory();
    JsonParser p0 = factory.createParser(json);
    JsonParser p = new FilteringParserDelegate(p0,
            new NameMatchFilter("value"),
            true, // includePath
            false // multipleMatches
    );
    
    StringWriter resultWriter = new StringWriter();
    JsonGenerator generator = factory.createGenerator(resultWriter);

    while (p.nextToken() != null) {
        generator.copyCurrentEvent(p);
    }
    p.close();
    generator.close();

    assertEquals("{\"ob\":{\"value\":3}}", resultWriter.toString());
}