public void testJsonGenerationExceptionSplitSurrogate() throws IOException {
    JsonFactory jsonFactory = new JsonFactory();
    String problematicContent = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\ud83d\ude80";
    StringWriter writer = new StringWriter();
    JsonGenerator generator = jsonFactory.createGenerator(writer);

    try {
        generator.writeStartObject();
        generator.writeRawField("key", problematicContent);
        generator.writeEndObject();
        generator.close();
        fail("Expected a JsonGenerationException to be thrown");
    } catch (JsonGenerationException e) {
        assertTrue(e.getMessage().contains("Split surrogate on writeRaw() input"));
    }
}