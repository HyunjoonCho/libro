
import org.apache.commons.jxpath.JXPathContext;
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;
import org.w3c.dom.Document;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

public class JXPathTest {

    @Test
    public void testDescendantOrSelfAxisAtRootNode() throws Exception {
        // Set up the XML document
        String xml = "<root id=\"1234\"/>";
        
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc = builder.parse(new java.io.ByteArrayInputStream(xml.getBytes("UTF-8")));

        // Set up the JXPath context
        JXPathContext context = JXPathContext.newContext(doc);

        // Execute the XPath expression
        String result = (String) context.getValue("//root/@id");

        // Assert the expected value
        assertEquals("1234", result);
        
        // Check the node for exact XPath (though not the method causing the issue)
        Object textNode = context.selectSingleNode("//root/@id/text()");
        assertNull(textNode); // Based on the bug report, we are expecting null here
    }
}
