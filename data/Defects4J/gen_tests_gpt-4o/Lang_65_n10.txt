public void testTruncateDuringDSTSwitch() {
    TimeZone mdt = TimeZone.getTimeZone("America/Denver");
    TimeZone msk = TimeZone.getTimeZone("Europe/Moscow");
    TimeZone.setDefault(mdt);

    Calendar cal = Calendar.getInstance();
    cal.setTimeZone(mdt);
    cal.set(Calendar.YEAR, 2004);
    cal.set(Calendar.MONTH, Calendar.OCTOBER);
    cal.set(Calendar.DAY_OF_MONTH, 31);
    cal.set(Calendar.HOUR_OF_DAY, 1);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);

    Date oct31_01MDT = cal.getTime();
    Date result = DateUtils.truncate(oct31_01MDT, Calendar.HOUR_OF_DAY);

    assertEquals(oct31_01MDT, result);
}