
import org.joda.time.DateTimeZone;
import org.joda.time.MutableDateTime;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class MutableDateTimeTest {

    @Test
    public void testAddDaysZeroBug() {
        MutableDateTime mdt = new MutableDateTime(2011, 10, 30, 3, 0, 0, 0, DateTimeZone.forID("Europe/Berlin"));
        long initialMillis = mdt.toInstant().getMillis();

        mdt.addHours(-1);
        assertEquals("Add -1 hour", 1319936400000L, mdt.toInstant().getMillis());

        mdt.addHours(0);
        assertEquals("Add 0 hours", 1319936400000L, mdt.toInstant().getMillis());

        mdt.addDays(0);
        assertEquals("Add 0 days should not change the millis", initialMillis - 3600000, mdt.toInstant().getMillis()); // Bug: Expects no change
    }
}
