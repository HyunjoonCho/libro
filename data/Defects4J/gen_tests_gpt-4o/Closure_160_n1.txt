public void testCheckVarsAndUndefinedVarsDiagnostics() {
    String[] commands;
    ProcessBuilder processBuilder;
    Process process;
    int exitCode;

    // Test with --jscomp_warning checkVars
    commands = new String[]{"java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "checkVars"};
    processBuilder = new ProcessBuilder(commands);
    try {
        process = processBuilder.start();
        exitCode = process.waitFor();
        assertEquals(0, exitCode);
    } catch (Exception e) {
        fail("Process failed: " + e.getMessage());
    }

    // Test with --jscomp_warning undefinedVars
    commands = new String[]{"java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "undefinedVars"};
    processBuilder = new ProcessBuilder(commands);
    try {
        process = processBuilder.start();
        exitCode = process.waitFor();
        assertEquals(0, exitCode);
    } catch (Exception e) {
        fail("Process failed: " + e.getMessage());
    }
}