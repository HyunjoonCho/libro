
import org.junit.Test;
import static org.junit.Assert.*;

public class ThisTypeCheckingTest {

    /** @constructor */
    static class F {
        void bar() { this.baz(); }
        void baz() { /* Implementation here */ }
    }

    /** @constructor */
    static class G {
        void bar() { /* Implementation here */ }
    }

    @Test
    public void testThisTypeChecking() {
        F f = new F();
        f.bar(); // Should work without issues
        
        G g = new G();
        
        // Simulate G reusing F's bar method;
        try {
            F.class.getDeclaredMethod("bar").invoke(g);
            fail("Expected an NoSuchMethodException because G does not have baz()");
        } catch (Exception e) {
            assertTrue(e.getCause() instanceof NoSuchMethodException);
        }
    }
}
