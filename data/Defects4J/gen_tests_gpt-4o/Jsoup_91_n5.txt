
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;
import java.nio.charset.StandardCharsets;

public class JsoupHangTest {

    @Test(timeout = 5000)
    public void testParseBogusInput() {
        // Simulating bogus binary input that causes Jsoup to hang
        byte[] bogusInput = new byte[]{(byte) 0x91, (byte) 0x92, (byte) 0x93, (byte) 0x94};
        String inputString = new String(bogusInput, StandardCharsets.ISO_8859_1);

        // Attempt to parse the bogus input with Jsoup
        Document doc = Jsoup.parse(inputString);

        // Check for null document or empty body to ensure no infinite loop occurs
        if (doc != null) {
            assertTrue(doc.body().isEmpty());
        }
    }
}
