
import com.fasterxml.jackson.core.JsonFactory;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonProcessingException;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.IOException;

import static org.junit.Assert.fail;

public class JsonGeneratorTest {

    @Test
    public void testWriteEmbeddedObjectWithByteArray() {
        JsonFactory jsonFactory = new JsonFactory();
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

        try (JsonGenerator jsonGenerator = jsonFactory.createGenerator(outputStream)) {
            byte[] data = { 0x01, 0x02, 0x03, 0x04 };

            try {
                jsonGenerator.writeStartObject();
                jsonGenerator.writeFieldName("data");
                jsonGenerator.writeEmbeddedObject(data);
                jsonGenerator.writeEndObject();
                fail("Expected UnsupportedOperationException to be thrown");
            } catch (UnsupportedOperationException e) {
                // Expected exception
                System.out.println("Exception caught as expected: " + e.getMessage());
            }
        } catch (IOException e) {
            fail("Unexpected IOException: " + e.getMessage());
        }
    }
}
