
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.ParseSettings;
import org.jsoup.parser.Parser;
import org.junit.Test;
import static org.junit.Assert.*;

public class JsoupParseTest {

    @Test
    public void testPreserveCaseParsingIssue() {
        Parser parser = Parser.htmlParser();
        parser.settings(ParseSettings.preserveCase);  // Set case preservation
        String html = "<div class=\"bdsharebuttonbox\">"
                + "<A class=bds_more href=\"http://share.baidu.com/code#\" data-cmd=\"more\">分享到：</A>"
                + "<A title=分享到QQ空间 class=bds_qzone href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\">"
                + "</A><A title=分享到新浪微博 class=bds_tsina href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"></A>"
                + "<A title=分享到腾讯微博 class=bds_tqq href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"></A>"
                + "<A title=分享到人人网 class=bds_renren href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"></A>"
                + "<A title=分享到微信 class=bds_weixin href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"></A>"
                + "</div>";

        Document doc = Jsoup.parse(html, "", parser);

        // Check if the structure is correct
        // Expected structure:
        // <a class="bds_more" href="http://share.baidu.com/code#" data-cmd="more">分享到：</a>
        // <a title="分享到QQ空间" class="bds_qzone" href="http://share.baidu.com/code#" data-cmd="qzone"></a>
        // <a title="分享到新浪微博" class="bds_tsina" href="http://share.baidu.com/code#" data-cmd="tsina"></a>
        // <a title="分享到腾讯微博" class="bds_tqq" href="http://share.baidu.com/code#" data-cmd="tqq"></a>
        // <a title="分享到人人网" class="bds_renren" href="http://share.baidu.com/code#" data-cmd="renren"></a>
        // <a title="分享到微信" class="bds_weixin" href="http://share.baidu.com/code#" data-cmd="weixin"></a>

        // Get the outerHTML to compare
        String resultHtml = doc.body().html().trim();

        String expectedHtml = "<div class=\"bdsharebuttonbox\">"
                + "<A class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\">分享到：</A>"
                + "<A title=\"分享到QQ空间\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"></A>"
                + "<A title=\"分享到新浪微博\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"></A>"
                + "<A title=\"分享到腾讯微博\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"></A>"
                + "<A title=\"分享到人人网\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"></A>"
                + "<A title=\"分享到微信\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"></A>"
                + "</div>";

        assertEquals(expectedHtml, resultHtml);
    }

    @Test
    public void testDefaultParsing() {
        Parser parser = Parser.htmlParser();
        String html = "<div class=\"bdsharebuttonbox\">"
                + "<A class=bds_more href=\"http://share.baidu.com/code#\" data-cmd=\"more\">分享到：</A>"
                + "<A title=分享到QQ空间 class=bds_qzone href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\">"
                + "</A><A title=分享到新浪微博 class=bds_tsina href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"></A>"
                + "<A title=分享到腾讯微博 class=bds_tqq href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"></A>"
                + "<A title=分享到人人网 class=bds_renren href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"></A>"
                + "<A title=分享到微信 class=bds_weixin href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"></A>"
                + "</div>";

        Document doc = Jsoup.parse(html, "", parser);

        String resultHtml = doc.body().html().trim();

        String expectedHtml = "<div class=\"bdsharebuttonbox\">"
                + "<a class=\"bds_more\" href=\"http://share.baidu.com/code#\" data-cmd=\"more\">分享到：</a>"
                + "<a title=\"分享到QQ空间\" class=\"bds_qzone\" href=\"http://share.baidu.com/code#\" data-cmd=\"qzone\"></a>"
                + "<a title=\"分享到新浪微博\" class=\"bds_tsina\" href=\"http://share.baidu.com/code#\" data-cmd=\"tsina\"></a>"
                + "<a title=\"分享到腾讯微博\" class=\"bds_tqq\" href=\"http://share.baidu.com/code#\" data-cmd=\"tqq\"></a>"
                + "<a title=\"分享到人人网\" class=\"bds_renren\" href=\"http://share.baidu.com/code#\" data-cmd=\"renren\"></a>"
                + "<a title=\"分享到微信\" class=\"bds_weixin\" href=\"http://share.baidu.com/code#\" data-cmd=\"weixin\"></a>"
                + "</div>";

        assertEquals(expectedHtml, resultHtml);
    }
}
