script
/**
 * @constructor
 * @template CLASS
 */
var Class = function() {};

/**
 * @param {function(CLASS):CLASS} a
 * @template T
 */
Class.prototype.foo = function(a) {
    return 'string';
};

/** @param {number} a
 *  @return {string} */
var aFunction = function(a) { return ''; };

// Test case
function testTemplateTypeInference() {
    try {
        var result = new Class().foo(aFunction);
        console.log('Result:', result);
        console.assert(result === 'string', 'Expected foo() to return "string" without compilation errors');
    } catch (error) {
        console.error('Test failed due to error:', error);
    }
}

// Run the test
testTemplateTypeInference();
