
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.exc.InvalidFormatException;
import org.junit.Test;

import java.time.OffsetDateTime;

import static org.junit.Assert.fail;

public class Iso8601DateParsingTest {

    private final ObjectMapper objectMapper = new ObjectMapper();

    @Test
    public void testIso8601DateFormats() {
        assertValidISO8601Date("2014-10-03T18:00:00.6-05:00");
        assertValidISO8601Date("2014-10-03T18:00:00.61-05:00");
        assertValidISO8601Date("1997-07-16T19:20+01:00");
        assertValidISO8601Date("1997-07-16T19:20:30.45+01:00");
    }

    private void assertValidISO8601Date(String dateString) {
        try {
            OffsetDateTime parsedDate = objectMapper.readValue("\"" + dateString + "\"", OffsetDateTime.class);
            System.out.println("Successfully parsed: " + parsedDate);
        } catch (InvalidFormatException e) {
            fail("Failed to parse ISO-8601 compliant date: " + dateString);
        } catch (Exception e) {
            fail("An unexpected exception occurred: " + e.getMessage());
        }
    }
}
