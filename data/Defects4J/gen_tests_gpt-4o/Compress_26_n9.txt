public void testIOUtilsSkip() throws IOException {
    byte[] data = new byte[2048];
    new Random().nextBytes(data);
    
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(data);
    Cipher cipher;
    try {
        cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(new byte[16], "AES"));
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
    
    CipherInputStream cipherInputStream = new CipherInputStream(byteArrayInputStream, cipher);
    long numToSkip = 100;
    long totalSkipped = 0;
    
    while (totalSkipped < numToSkip) {
        long skipped = IOUtils.skip(cipherInputStream, numToSkip - totalSkipped);
        if (skipped == 0) {
            break;
        }
        totalSkipped += skipped;
    }
    
    assertEquals(numToSkip, totalSkipped);
    cipherInputStream.close();
}