
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import java.util.EnumMap;
import java.util.Map;

import static org.junit.Assert.assertEquals;

public class EnumMapJsonPropertyTest {

    enum SampleEnum {
        @JsonProperty("value_one")
        VALUE_ONE,
        @JsonProperty("value_two")
        VALUE_TWO
    }

    @Test
    public void testEnumMapSerializationWithJsonProperty() throws Exception {
        ObjectMapper objectMapper = new ObjectMapper();

        // Set up an EnumMap with the enum as keys
        EnumMap<SampleEnum, String> map = new EnumMap<>(SampleEnum.class);
        map.put(SampleEnum.VALUE_ONE, "First");
        map.put(SampleEnum.VALUE_TWO, "Second");

        // Serialize the EnumMap
        String jsonResult = objectMapper.writeValueAsString(map);

        // Expected JSON uses the @JsonProperty values for the keys
        String expectedJson = "{\"value_one\":\"First\",\"value_two\":\"Second\"}";

        // Comparing the serialized JSON with the expected JSON
        assertEquals(expectedJson, jsonResult);
    }
}
