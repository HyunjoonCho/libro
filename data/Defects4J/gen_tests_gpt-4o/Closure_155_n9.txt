public void testOverzealousArgumentsOptimisation() {
    ScriptEngine engine = new ScriptEngineManager().getEngineByName("nashorn");
    try {
        String script = "function d3_call(callback) {\n" +
                        "  var f = callback;\n" +
                        "  arguments[0] = this;\n" +
                        "  return f.apply(this, arguments);\n" +
                        "}\n" +
                        "var result;\n" +
                        "var obj = {val: 42};\n" +
                        "d3_call.call(obj, function(arg) { result = arg.val; });\n" +
                        "result;";
        Object result = engine.eval(script);
        assertEquals(42, ((Number) result).intValue());
    } catch (ScriptException e) {
        fail("Script execution failed: " + e.getMessage());
    }
}