script
// testExample.js

var assert = require('assert');
var execSync = require('child_process').execSync;

describe('Closure Compiler Typed Coverage Test', function() {
    it('should have 100% typed coverage', function() {
        // Writing the JavaScript content to a file
        const fs = require('fs');
        const jsContent = `
        /*global window*/
        /*jslint sub: true*/
        /**
         * @constructor
         * @param {!Element} element
         */
        function Example(element) {
            /**
             * @param {!string} ns
             * @param {!string} name
             * @return {undefined}
             */
            this.appendElement = function appendElement(ns, name) {
                var e = element.ownerDocument.createElementNS(ns, name);
                element.appendChild(e);
            };
        }
        window["Example"] = Example;
        `;
        fs.writeFileSync('v.js', jsContent);

        // Compile the JavaScript code using Closure Compiler
        const output = execSync('java -jar compiler.jar --jscomp_error checkTypes --summary_detail_level 3 --js v.js --js_output_file compiled.js').toString();
        
        // Extract the typed coverage percentage from the output
        const typedCoverageMatch = output.match(/(\d+(\.\d+)?)% typed/);
        assert(typedCoverageMatch, 'Typed coverage percentage not found in the output');
        
        const typedCoverage = parseFloat(typedCoverageMatch[1]);
        assert.strictEqual(typedCoverage, 100, 'Expected 100% typed coverage');
    });
});
