public void testJoinOptimization() throws IOException {
    List<String> jsCode = Arrays.asList(
        "var variable = confirm('value from user');",
        "var array = ['constant', variable];",
        "alert(array.join(','));"
    );
    
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    
    SourceFile input = SourceFile.fromCode("test.js", String.join("\n", jsCode));
    SourceFile externs = SourceFile.fromCode("externs.js", "");

    Compiler compiler = new Compiler();
    compiler.compile(externs, input, options);
    
    String compiledCode = compiler.toSource();
    assertTrue(compiledCode.contains("alert(a.join())"));
}