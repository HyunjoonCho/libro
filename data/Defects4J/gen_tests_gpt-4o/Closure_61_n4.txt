public void testClosureRemovesNeededCode() {
    String inputCode = "Math.blah = function(test) { test.a = 5; }; var test = new Object(); Math.blah(test);";
    String optimizedCode = ClosureCompiler.compile(inputCode, CompilationLevel.SIMPLE_OPTIMIZATIONS, new CompilerOptions());

    assertFalse("Closure incorrectly removed the method call.", optimizedCode.equals("Math.blah=function(a){a.a=5};var test={};"));
}