
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import java.util.List;

import static org.junit.Assert.assertArrayEquals;
import static org.mockito.Mockito.*;

public class VarargsCaptorTest {

    interface Service {
        void performAction(String... values);
    }

    @Test
    public void testArgumentCaptorForVarargs() {
        // Create a mock of the service
        Service service = mock(Service.class);

        // Call the method with varargs
        service.performAction("value1", "value2", "value3");

        // Capture the arguments
        ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);
        verify(service).performAction(captor.capture());

        // Assert the captured values
        String[] capturedValues = captor.getValue();
        assertArrayEquals(new String[]{"value1", "value2", "value3"}, capturedValues);
    }
}
