public void testStringUtilsJoinWithNullToString() {
    try {
        String result = StringUtils.join(new Object[]{
            new Object() {
                @Override
                public String toString() {
                    return null;
                }
            }
        }, ',');
        fail("Expected NullPointerException to be thrown but got result: " + result);
    } catch (NullPointerException e) {
        // Expected exception
    }
}