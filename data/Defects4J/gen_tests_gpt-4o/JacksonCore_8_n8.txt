
import com.fasterxml.jackson.core.util.TextBuffer;
import org.junit.Test;

import static org.junit.Assert.*;

public class TextBufferTest {

    @Test
    public void testGetTextBufferReturnsConsistentEmptyRepresentation() {
        TextBuffer buffer = new TextBuffer(new com.fasterxml.jackson.core.util.BufferRecycler());
        
        // Reset the buffer to its empty state
        buffer.resetWithEmpty();
        
        // First call to getTextBuffer
        char[] firstCallResult = buffer.getTextBuffer();
        // Verify it returns either null or an empty array
        assertTrue(firstCallResult == null || firstCallResult.length == 0);
        
        // Call contentsAsString to convert buffer to a string
        String contents = buffer.contentsAsString();
        assertEquals("", contents);
        
        // Second call to getTextBuffer
        char[] secondCallResult = buffer.getTextBuffer();
        // Check if the result is consistent with the firstCallResult
        if (firstCallResult == null) {
            assertTrue(secondCallResult == null || secondCallResult.length == 0);
        } else {
            assertEquals(0, secondCallResult.length);
        }
    }
}
