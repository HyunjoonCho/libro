public void testTextBufferGetTextBufferInconsistency() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    
    char[] firstCall = buffer.getTextBuffer();
    assertNull(firstCall);  // Expected to be null
    
    buffer.contentsAsString(); // This should ready the buffer
    
    char[] secondCall = buffer.getTextBuffer();
    assertEquals(0, secondCall.length);  // Expected to be empty array
}