public void testJscompFlagOrderPreservation() {
    CompilerOptions options = new CompilerOptions();
    options.setWarningLevel(DiagnosticGroups.ALL_DIAGNOSTICS, CheckLevel.WARNING);
    options.setErrorLevel(DiagnosticGroups.ALL_DIAGNOSTICS, CheckLevel.ERROR);
    options.setWarningLevel(DiagnosticGroups.ALL_DIAGNOSTICS, CheckLevel.OFF);

    Compiler compiler = new Compiler();
    compiler.initOptions(options);

    // The expected behavior should respect the last set flag, 
    // hence the diagnostic should be OFF, not ERROR.
    assertEquals(CheckLevel.OFF, compiler.getOptions().getWarningLevel(DiagnosticGroups.ALL_DIAGNOSTICS));
}