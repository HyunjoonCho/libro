@Test
public void testThreadLocalMemoryLeakInToStringStyle() throws Exception {
    // Simulate usage of ToStringStyle in a web application
    for (int i = 0; i < 100; i++) {
        String result = new ToStringBuilder(this, ToStringStyle.DEFAULT_STYLE)
                .append("testField", "testValue")
                .toString();
        assertNotNull(result); // sanity check
    }

    // Attempt to force garbage collection
    System.gc();

    // Simulate web application context reload
    Field threadLocalField = ToStringStyle.class.getDeclaredField("threadLocal");
    threadLocalField.setAccessible(true);
    ThreadLocal<?> threadLocal = (ThreadLocal<?>) threadLocalField.get(null);

    // Verify if the ThreadLocal has been cleaned up
    if (threadLocal != null) {
        assertNull("ThreadLocal should be null to avoid memory leaks", threadLocal.get());
    }
}