
import org.junit.Test;

import static org.junit.Assert.*;

public class OrphanToStringTest {

    private class Node {
        private String data;
        private Node parent;

        public Node(String data) {
            this.data = data;
        }

        public void removeParent() {
            this.parent = null;
        }

        @Override
        public String toString() {
            // Simulate a toString operation that doesn't handle a null parent gracefully
            return "Node{" +
                    "data='" + data + '\'' +
                    ", parent=" + parent.toString() + // Potential NPE here if parent is null
                    '}';
        }
    }
    
    @Test
    public void testToStringNPEForOrphans() {
        Node node = new Node("TestNode");
        node.removeParent();  // Simulating removal from the parent

        try {
            String result = node.toString();
            fail("Expected a NullPointerException due to calling toString() on a detached node.");
        } catch (NullPointerException e) {
            // Expected exception caught
            System.out.println("Caught expected NullPointerException: " + e.getMessage());
        }
    }
}
