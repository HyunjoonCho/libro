public void testClosureCompilerDefineAnnotation() throws Exception {
    String jsCode = "/** @define {string} */\n"
                  + "var CONSTANT = \"some very long string name that I want to wrap \" +\n"
                  + " \"and so break using a + since I don't want to \" +\n"
                  + " \"introduce a newline into the string.\";";
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.SIMPLE_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", jsCode), options);
    assertTrue("Compilation should fail due to line splitting with '+' in @define annotation.", result.errors.length > 0);
}