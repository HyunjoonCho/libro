public void testPrototypeThisTypeWarning() {
    try {
        Function fConstructor = new Function("F", "this.baz();");
        fConstructor.prototype = new Function() {
            public void bar() {
                this.baz();
            }
        };

        Function gConstructor = new Function("G", "");
        gConstructor.prototype = new Function() {
            public void bar() {
                // Intentionally using F's prototype bar method
                this.baz();
            }
        };

        gConstructor.prototype.bar = fConstructor.prototype.bar;

        // Simulate method calls to check for the type warning
        Function gInstance = (Function) gConstructor.newInstance();
        gInstance.bar();

        fail("Expected a type warning due to mismatched 'this' type.");

    } catch (Throwable e) {
        assertTrue(e.getMessage().contains("mismatched 'this' type"));
    }
}