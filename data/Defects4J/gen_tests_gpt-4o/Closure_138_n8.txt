public void testInvalidJscDeterministicTest() throws Exception {
    String inputCode = "var t = null; window.test = function() { if (t != null) { t = null; } t = 1; };";
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    SourceFile extern = SourceFile.fromCode("externs.js", "var window;");
    SourceFile input = SourceFile.fromCode("input.js", inputCode);
    Result result = compiler.compile(extern, input, options);
    assertFalse("Compiler should not have any warnings", result.hasWarnings());
    assertEquals("Output code", "var a=null;window.a=function(){a=1};", compiler.toSource());
}