
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

public class DeeplyNestedHtmlTest {

    @Test(timeout = 10000) // sets a timeout of 10 seconds to demonstrate the issue
    public void testDeeplyNestedHtmlParsing() {
        StringBuilder nestedHtml = new StringBuilder();
        int depth = 10000; // specify a large depth to observe performance issues
        for (int i = 0; i < depth; i++) {
            nestedHtml.append("<div>");
        }
        for (int i = 0; i < depth; i++) {
            nestedHtml.append("</div>");
        }

        // Measure the time taken to parse the deeply nested HTML
        long startTime = System.currentTimeMillis();
        Document doc = Jsoup.parse(nestedHtml.toString());
        long endTime = System.currentTimeMillis();

        System.out.println("Time taken to parse: " + (endTime - startTime) + " ms");
        
        // Optional assertion
        assert doc != null; // Just to ensure that the parsing happened
    }
}
