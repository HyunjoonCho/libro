public void testScriptTagParsing() {
    String htmlContent = "<HTML>\n" +
            "<body>\n" +
            " <div class=vsc sig=Uga>\n" +
            "  <div class=before></div>\n" +
            "  <script type=\"text/javascript\">\n" +
            "   header = jQuery('#header\\_features');\n" +
            "   if(header.length){\n" +
            "    header\n" +
            "     .prepend('<a class=\"prevPage browse left \" />')\n" +
            "     .append('<a class=\"nextPage browse right\" />');\n" +
            "\n" +
            "    items\n" +
            "     .wrapAll('<div class=\"scrollable\"/>')\n" +
            "     .wrapAll('<ul class=\"items\"/>')\n" +
            "     .wrap('<li/>');\n" +
            "   }\n" +
            "   </script>\n" +
            "   <div class=after></div>\n" +
            " </div>\n" +
            "</body>\n" +
            "</HTML>";

    Document document = Jsoup.parse(htmlContent);

    Element script = document.selectFirst("script[type=\"text/javascript\"]");
    assertNotNull("Script tag should be present", script);

    String expectedScriptContent = "header = jQuery('#header\\_features');\n" +
                                   "   if(header.length){\n" +
                                   "    header\n" +
                                   "     .prepend('<a class=\"prevPage browse left \" />')\n" +
                                   "     .append('<a class=\"nextPage browse right\" />');\n" +
                                   "\n" +
                                   "    items\n" +
                                   "     .wrapAll('<div class=\"scrollable\"/>')\n" +
                                   "     .wrapAll('<ul class=\"items\"/>')\n" +
                                   "     .wrap('<li/>');\n" +
                                   "   }";
    assertEquals("Script content should match", expectedScriptContent.trim(), script.html().trim());

    Element afterDiv = document.selectFirst("div.after");
    assertNotNull("After div should be present and not be inside the script tag", afterDiv);
}