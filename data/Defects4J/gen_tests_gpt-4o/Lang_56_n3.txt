
import org.apache.commons.lang3.time.FastDateFormat;
import org.junit.Test;
import java.io.*;

import static org.junit.Assert.assertEquals;

public class FastDateFormatSerializationTest {

    @Test
    public void testFastDateFormatSerialization() throws IOException, ClassNotFoundException {
        FastDateFormat originalFormat = FastDateFormat.getInstance("yyyy-MM-dd");

        // Serialize the FastDateFormat instance
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(bos);
        oos.writeObject(originalFormat);
        oos.flush();
        oos.close();

        // Deserialize the FastDateFormat instance
        ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
        ObjectInputStream ois = new ObjectInputStream(bis);
        FastDateFormat deserializedFormat = (FastDateFormat) ois.readObject();
        ois.close();

        // Check that they produce the same formatted date
        String dateStr = "2023-10-01";
        assertEquals(originalFormat.format(dateStr), deserializedFormat.format(dateStr));
    }
}
