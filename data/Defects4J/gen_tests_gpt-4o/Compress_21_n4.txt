public void testSevenZEmptyEntryCorruption() throws IOException {
    File testDir = new File("testDir");
    testDir.mkdir();

    // Create 8 empty files
    for (int i = 0; i < 8; i++) {
        File file = new File(testDir, "emptyFile" + i + ".txt");
        file.createNewFile();
    }

    File archive = new File("testArchive.7z");
    try (SevenZOutputFile out = new SevenZOutputFile(archive)) {
        File[] files = testDir.listFiles();
        if (files != null) {
            for (File file : files) {
                out.putArchiveEntry(new SevenZArchiveEntry(file, file.getName()));
                out.closeArchiveEntry();
            }
        }
    }

    assertTrue(archive.exists());
    try {
        new SevenZFile(archive).close();
    } catch (IOException e) {
        fail("Failed to open 7z archive with empty files: " + e.getMessage());
    } finally {
        for (File file : testDir.listFiles()) {
            file.delete();
        }
        testDir.delete();
        archive.delete();
    }
}