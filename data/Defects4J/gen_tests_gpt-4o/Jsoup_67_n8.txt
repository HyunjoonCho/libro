
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

public class JsoupPerformanceTest {

    @Test(timeout = 5000)  // 5 seconds timeout to prevent too long execution
    public void testDeeplyNestedHtmlPerformance() {
        // Generate deeply nested HTML
        StringBuilder html = new StringBuilder("<div>");
        for (int i = 0; i < 10000; i++) { // Adjust depth as needed
            html.append("<div>");
        }
        for (int i = 0; i < 10000; i++) {
            html.append("</div>");
        }
        html.append("</div>");

        // Parse using Jsoup
        Document doc = Jsoup.parse(html.toString());

        // Validate by checking a property (e.g., ensure parsing is done with the expected outer element).
        assertNotNull(doc);
        assertEquals("div", doc.body().child(0).tagName());
    }

    private void assertNotNull(Document doc) {
        if (doc == null) {
            throw new AssertionError("Parsed document should not be null");
        }
    }
}
