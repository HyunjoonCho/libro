
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.TextNode;
import org.jsoup.parser.Parser;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class JapaneseXmlTagParsingTest {

    @Test
    public void testParsingJapaneseXmlTags() {
        String xmlString = "<進捗推移グラフ>" +
                "<開始予定凡例名 表示状態=\"0\" 線色=\"00CED1\">" +
                "&#9312;&#35373;&#35336; &#38283;&#22987;&#20104;&#23450;" +
                "</開始予定凡例名>" +
                "</進捗推移グラフ>";

        Document doc = Jsoup.parse(xmlString, "", Parser.xmlParser());

        List<Element> objElementCollection = doc.getAllElements();
        assertTrue("Document should not be empty.", objElementCollection.size() > 0);

        boolean foundJapaneseTag = false;
        boolean foundExpectedText = false;

        for (Element objCurrent : objElementCollection) {
            String szTag = objCurrent.tagName();
            if (szTag.equals("開始予定凡例名")) {
                foundJapaneseTag = true;
                for (TextNode tnTextNode : objCurrent.textNodes()) {
                    String szVal = tnTextNode.text();
                    if (szVal.equals("①設定 開始予定")) {
                        foundExpectedText = true;
                        break;
                    }
                }
            }
        }

        assertTrue("Japanese tag <開始予定凡例名> should be found.", foundJapaneseTag);
        assertTrue("Text inside the Japanese tag should match expected value.", foundExpectedText);
    }
}
