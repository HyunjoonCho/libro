public void testOverzealousOptimization() {
    // Assuming the use of a JavaScript engine within the test environment like Nashorn (not recommended for production as it's deprecated) or any other compatible JS engine.
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("JavaScript");

    String script = ""
        + "var uid; "
        + "function reset() { uid = Math.random(); } "
        + "function doStuff() { "
        + "  reset(); "
        + "  var _uid = uid; "
        + "  if (uid < 0.5) { doStuff(); } "
        + "  if (_uid !== uid) { throw 'reset() was called'; } "
        + "} "
        + "doStuff();";

    try {
        engine.eval(script);
        fail("Expected an exception to be thrown");
    } catch (ScriptException e) {
        assertTrue(e.getMessage().contains("reset() was called"));
    }
}