
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Node;
import org.jsoup.Jsoup;
import org.junit.Test;

import java.util.ArrayList;

import static org.junit.Assert.assertEquals;

public class ElementInsertChildrenTest {

    @Test
    public void mustCorrectlyMoveChildrenInsideOneParentElement() {
        Document doc = Jsoup.parse("<body><div1></div1><div2></div2><div3></div3><div4></div4></body>");
        Element body = doc.body();
        Element div3 = body.selectFirst("div3");
        Element div4 = body.selectFirst("div4");

        ArrayList<Node> toMove = new ArrayList<Node>() {
            {
                add(div3);
                add(div4);
            }
        };

        body.insertChildren(0, toMove);

        String result = doc.body().html().replaceAll("\\s+", "");
        assertEquals("<div3></div3><div4></div4><div1></div1><div2></div2>", result);
    }

}
