
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.CommandLineParser;
import org.apache.commons.cli.DefaultParser;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.Options;
import org.junit.Test;
import static org.junit.Assert.*;

public class CommandLineTest {

    @Test
    public void testGetOptionValueUsingLongOpt() throws Exception {
        String debugOpt = "debug";
        
        // Create an option with a long and short name
        Option debug = Option.builder("d")
                             .longOpt(debugOpt)
                             .desc("turn on debugging")
                             .hasArg()
                             .build();
        
        Options options = new Options();
        options.addOption(debug);
        
        CommandLineParser parser = new DefaultParser();
        String[] args = {"-d", "true"};
        CommandLine commandLine = parser.parse(options, args);
        
        // Test accessing the option value using the long option name
        // This should work as per the documentation and expectation
        String dbgLongOpt = commandLine.getOptionValue(debugOpt);
        assertEquals("true", dbgLongOpt);
        
        // Test accessing the option value using the short option name
        String dbgShortOpt = commandLine.getOptionValue("d");
        assertEquals("true", dbgShortOpt);
    }
}
