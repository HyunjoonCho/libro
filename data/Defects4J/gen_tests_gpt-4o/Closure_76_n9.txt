
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class ClosureCompilerIssueTest {

    // Echo function to mimic behavior in the original JavaScript
    private boolean echo(boolean value) {
        System.out.println(value);
        return value;
    }

    // Original function
    private Boolean originalReduction() {
        Boolean a, b;
        if (echo(b = true) || echo(b = false)) {
            a = b;
        } else {
            a = null;
        }
        return a;
    }

    // Compiled function
    private Boolean compiledReduction() {
        Boolean a;
        return echo(true) || echo(a = false) ? a : null;
    }

    @Test
    public void testReductionBehavior() {
        // Original should return true
        assertEquals(Boolean.TRUE, originalReduction());
        
        // Compiled should also return true, but due to the bug it might not
        assertEquals(Boolean.TRUE, compiledReduction());
    }
}
