public void testBOBYQAOptimizerFailure() {
    int dim = 5; // For example, the dimension of the optimization problem
    MultivariateFunction func = new MultivariateFunction() {
        @Override
        public double value(double[] point) {
            double sum = 0;
            for (double x : point) {
                sum += x * x;
            }
            return sum;
        }
    };
    
    double[] startPoint = new double[dim];
    Arrays.fill(startPoint, 1.0);
    
    BOBYQAOptimizer optim = new BOBYQAOptimizer(2 * dim + 2);
    try {
        optim.optimize(1000, func, GoalType.MINIMIZE, startPoint);
        fail("Expected an exception when number of interpolation points is greater than 2*dim+1");
    } catch (Exception e) {
        // Expected behavior, exception should be thrown
        assertTrue(e.getMessage().contains("interpolationPoints.setEntry"));
    }
}