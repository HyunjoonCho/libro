
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.exc.InvalidFormatException;
import org.junit.jupiter.api.Test;

import java.io.IOException;

import static org.junit.jupiter.api.Assertions.assertThrows;

public class ISO8601DateFormatTest {

    private final ObjectMapper objectMapper = new ObjectMapper();

    @Test
    public void testParseISO8601Dates() {
        assertThrows(InvalidFormatException.class, () -> parseDate("2014-10-03T18:00:00.6-05:00"));
        assertThrows(InvalidFormatException.class, () -> parseDate("2014-10-03T18:00:00.61-05:00"));
        assertThrows(InvalidFormatException.class, () -> parseDate("1997-07-16T19:20+01:00"));
        assertThrows(InvalidFormatException.class, () -> parseDate("1997-07-16T19:20:30.45+01:00"));
    }

    private void parseDate(String dateStr) throws IOException {
        objectMapper.readValue("\"" + dateStr + "\"", java.util.Date.class);
    }
}
