public void testAppendTableRowIssue() {
    StringBuilder html = new StringBuilder("<table><tbody>");
    html.append("<tr><td>Data</td></tr>");
    html.append("</tbody></table>");
    
    int tableCount = countOccurrences(html.toString(), "<table>");
    int trCount = countOccurrences(html.toString(), "<tr>");
    
    assertEquals(1, tableCount);
    assertEquals(1, trCount);
}

private int countOccurrences(String str, String subStr) {
    int count = 0;
    int idx = 0;
    while ((idx = str.indexOf(subStr, idx)) != -1) {
        count++;
        idx += subStr.length();
    }
    return count;
}