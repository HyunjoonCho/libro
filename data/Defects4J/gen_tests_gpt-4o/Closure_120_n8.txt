public void testOverzealousOptimizationConfusesVariables() {
    // Setting up the environment to mimic the Closure Compiler's ADVANCED_OPTIMIZATIONS
    double uid;
    class ClosureCompilerTest {

        double uid;

        void reset() {
            uid = Math.random();
        }

        void doStuff() {
            reset();
            double _uid = uid;

            if (uid < 0.5) {
                doStuff();
            }

            if (_uid != uid) {
                throw new RuntimeException("reset() was called");
            }
        }
    }

    ClosureCompilerTest test = new ClosureCompilerTest();
    try {
        test.doStuff();
        fail("Expected RuntimeException due to incorrect optimization was not thrown");
    } catch (RuntimeException e) {
        assertEquals("reset() was called", e.getMessage());
    }
}