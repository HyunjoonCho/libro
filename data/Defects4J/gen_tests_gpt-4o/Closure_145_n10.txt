public void testLabeledLoopsAndBreaks() {
    String code = "var i = 0;" +
                  "lab1: do{" +
                  "  lab2: do{" +
                  "    i++;" +
                  "    if (1) {" +
                  "      break lab2;" +
                  "    } else {" +
                  "      break lab1;" +
                  "    }" +
                  "  } while(false);" +
                  "} while(false);" +
                  "console.log(i);";

    CompilerOptions options = new CompilerOptions();
    // Here, we assume options are set not to use PRETTY_PRINT
    
    Compiler compiler = new Compiler();
    compiler.compile(SourceFile.fromCode("externs.js", ""), 
                     SourceFile.fromCode("test.js", code), 
                     options);
    String compiledCode = compiler.toSource();

    assertEquals("var a=0;do b:do{a++;break b}while(0);while(0);console.log(a);", compiledCode);
}