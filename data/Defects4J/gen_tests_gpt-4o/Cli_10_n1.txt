
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.GnuParser;
import org.apache.commons.cli.MissingOptionException;
import org.apache.commons.cli.OptionBuilder;
import org.apache.commons.cli.Options;
import org.apache.commons.cli.ParseException;
import org.junit.Test;

public class CommandLineTest {

    @Test(expected = MissingOptionException.class)
    public void testMissingRequiredOptionsThrowsException() throws ParseException {
        // Prepare first arguments with required option
        String[] firstArgs = { "-v" };
        // Prepare second arguments missing the required option
        String[] secondArgs = {};

        // Create options and add a required option
        Options opts = new Options();
        opts.addOption(OptionBuilder.isRequired().create('v'));

        // Parse the first arguments (this should work fine)
        GnuParser parser = new GnuParser();
        CommandLine firstCL = parser.parse(opts, firstArgs);

        // Parse the second arguments (this should throw MissingOptionException)
        CommandLine secondCL = parser.parse(opts, secondArgs);

        // If exception is not thrown, print a statement indicating the test is wrong,
        // which in proper case should never be reached
        System.out.println("Test failed: MissingOptionException was not thrown.");
    }
}
