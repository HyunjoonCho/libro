public void testJsonParserSequenceSkipsToken() throws IOException {
    String json1 = "{\"key1\":\"value1\"}";
    String json2 = "{\"key2\":\"value2\"}";

    JsonFactory jsonFactory = new JsonFactory();
    JsonParser parser1 = jsonFactory.createParser(json1);
    JsonParser parser2 = jsonFactory.createParser(json2);

    JsonParserSequence sequence = JsonParserSequence.createFlattened(parser1, parser2);

    // Advance parser1 to the end
    while (sequence.nextToken() != null) {}

    // Next token should be START_OBJECT from parser2, but it gets skipped
    assertEquals(JsonToken.START_OBJECT, sequence.nextToken());

    // Check that the next token properly corresponds to the key within parser2's JSON
    assertEquals(JsonToken.FIELD_NAME, sequence.nextToken());
    assertEquals("key2", sequence.getCurrentName());
}