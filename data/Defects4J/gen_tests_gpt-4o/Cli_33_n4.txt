
import org.apache.commons.cli.*;

import org.junit.Test;
import static org.junit.Assert.*;

public class HelpFormatterTest {

    @Test
    public void testHelpFormatterStripsLeadingWhitespacesInFooter() {
        Options options = new Options();
        HelpFormatter formatter = new HelpFormatter();
        String header = "header";
        String footer = "line1:\n line2:\n";

        StringBuilder out = new StringBuilder();
        java.io.PrintStream originalOut = System.out;
        
        try {
            java.io.ByteArrayOutputStream baos = new java.io.ByteArrayOutputStream();
            java.io.PrintStream newOut = new java.io.PrintStream(baos);
            System.setOut(newOut);

            // Print help with footer
            formatter.printHelp("testapp", header, options, footer);

            System.out.flush();
            String helpOutput = baos.toString();
            out.append(helpOutput);

        } finally {
            System.setOut(originalOut);
        }

        // Assert if the output contains a leading space for line2 which it originally stripped off
        String expectedOutput = "line1:\n line2:\n";
        assertTrue("The help footer should maintain leading spaces in line2.", out.toString().contains(expectedOutput));
    }
}
