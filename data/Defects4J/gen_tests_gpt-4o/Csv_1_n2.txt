
import org.junit.Test;
import static org.junit.Assert.*;

import java.io.StringReader;
import java.io.BufferedReader;
import java.io.IOException;

public class ExtendedBufferReaderTest {

    @Test
    public void testLineCountingWithDifferentEOL() throws IOException {
        String content = "Line 1\nLine 2\rLine 3\r\nLine 4";
        StringReader stringReader = new StringReader(content);
        ExtendedBufferReader reader = new ExtendedBufferReader(stringReader);

        int lineCount = 0;
        while (reader.readLine() != null) {
            lineCount++;
        }

        // Based on the correct behavior, we expect 4 lines to be counted.
        assertEquals(4, lineCount);
    }

    // This could be assumed to be the problematic class needing testing.
    // Note: The real ExtendedBufferReader implementation would be needed here.
    static class ExtendedBufferReader extends BufferedReader {
        
        private int lineCount;

        public ExtendedBufferReader(StringReader reader) {
            super(reader);
            this.lineCount = 0;
        }

        @Override
        public String readLine() throws IOException {
            String line = super.readLine();
            if (line != null) {
                lineCount++;
            }
            return line;
        }

        public int getLineCount() {
            return lineCount;
        }
    }
}
