public void testTruncatedZipArchiveInputStream() throws IOException {
    byte[] truncatedZip = {80, 75, 3, 4, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
    ByteArrayInputStream bais = new ByteArrayInputStream(truncatedZip);
    ZipArchiveInputStream zipInputStream = new ZipArchiveInputStream(bais);

    try {
        byte[] buffer = new byte[1024];
        int read = zipInputStream.read(buffer);
        fail("Expected IOException due to truncated ZIP file, but read() returned: " + read);
    } catch (IOException e) {
        assertEquals("Truncated ZIP file", e.getMessage());
    } finally {
        zipInputStream.close();
    }
}