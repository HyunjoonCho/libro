
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.PropertyNamingStrategy;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class ConstructorPropertyNamingTest {

    static class Person {

        private final String firstName;
        private final String lastName;

        @JsonCreator
        public Person(@JsonProperty("first_name") String firstName, 
                      @JsonProperty("last_name") String lastName) {
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }
    }

    @Test
    public void testPropertyNamingStrategy() throws Exception {
        String json = "{\"first_name\":\"John\", \"last_name\":\"Doe\"}";
        
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);
        
        Person person = objectMapper.readValue(json, Person.class);
        
        assertEquals("John", person.getFirstName());
        assertEquals("Doe", person.getLastName());
    }
}
