
import com.google.gson.Gson;
import com.google.gson.JsonSyntaxException;
import com.google.gson.reflect.TypeToken;

import org.junit.Test;

import java.lang.reflect.Type;
import java.util.Date;

import static org.junit.Assert.assertNotNull;

public class ISO8601Test {

    @Test(expected = JsonSyntaxException.class)
    public void testISO8601Parsing() {
        String dateStr = "2016-01-11T11:06:14.000-02";

        Gson gson = new Gson();
        Type dateType = new TypeToken<Date>(){}.getType();

        // This should throw a JsonSyntaxException due to the mismatching time zone indicator
        Date parsedDate = gson.fromJson("\"" + dateStr + "\"", dateType);

        // If an exception is not thrown, make sure the parsed date is not null
        // This asserts the date was parsed, though we expect an exception in this case
        assertNotNull(parsedDate);
    }
}
