
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionBuilder;
import org.apache.commons.cli.Options;
import org.junit.Test;

import static org.junit.Assert.*;

public class OptionBuilderTest {

    @Test
    public void testOptionBuilderResetAfterIAE() {
        OptionBuilder.withLongOpt("option");
        OptionBuilder.hasArg();
        
        // First create should fail with IllegalArgumentException due to invalid character in option character
        try {
            OptionBuilder.create('#');
            fail("Expected IllegalArgumentException");
        } catch (IllegalArgumentException e) {
            // Expected exception
        }
        
        // Reset the OptionBuilder
        OptionBuilder.reset();

        // Second create should succeed if the reset was successful
        Option option = OptionBuilder.create('o');
        assertNotNull("Option should be created successfully", option);

        // Verify the option properties to ensure they are reset properly
        assertEquals("Option character should be 'o'", 'o', option.getOpt().charAt(0));
        assertTrue("Option should have an argument", option.hasArg());
    }
}
