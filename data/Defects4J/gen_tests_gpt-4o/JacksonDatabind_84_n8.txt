public void testMissingPropertiesFromBaseClassWithRecursiveTypes() throws Exception {
    ObjectMapper objectMapper = new ObjectMapper();
    TypeFactory typeFactory = objectMapper.getTypeFactory();
    
    // Construct base type first
    typeFactory.constructType(Base.class);
    
    Sub subInstance = new Sub();
    String jsonOutput = objectMapper.writeValueAsString(subInstance);

    assertEquals("{\"base\":1,\"sub\":2}", jsonOutput);
}