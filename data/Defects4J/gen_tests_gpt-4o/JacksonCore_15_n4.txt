public void testAllowMultipleMatches() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    JsonNodeFactory nodeFactory = new JsonNodeFactory(false);
    JsonNode jsonNode = nodeFactory.objectNode().put("key", "value");

    MappingIterator<JsonNode> jsonNodes = mapper.readTree("[{\"key\": \"value\"}]").traverse()
        .readValuesAs(JsonNode.class);
    
    FilteringParserDelegate filteringParserDelegate = new FilteringParserDelegate(
        mapper.getFactory().createParser(jsonNode.toString()),
        new MatchAlwaysFilter(),
        true, // try to allow multiple matches
        true);
    
    JsonNode resultNode = mapper.readTree(filteringParserDelegate);

    List<JsonNode> expectedNodes = new ArrayList<>();
    expectedNodes.add(jsonNode);

    assertTrue(jsonNodes.hasNext());
    assertEquals(expectedNodes.get(0), jsonNodes.next());

    assertTrue(resultNode instanceof ArrayNode);
    assertEquals(1, ((ArrayNode) resultNode).size());
    assertEquals(jsonNode, ((ArrayNode) resultNode).get(0));
}