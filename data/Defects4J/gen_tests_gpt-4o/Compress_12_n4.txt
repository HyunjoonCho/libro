
import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.IOException;

public class TarArchiveInputStreamTest {

    @Test(expected = IOException.class)
    public void testCorruptTarFileThrowsIOException() throws IOException {
        // Create a ByteArrayInputStream with invalid tar data
        byte[] corruptTarData = new byte[] {0, 1, 2, 3, 4, 5, 6, -1}; // Invalid data that will cause IllegalArgumentException
        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(corruptTarData);
        
        // Initialize TarArchiveInputStream with corrupt data
        TarArchiveInputStream tarInputStream = new TarArchiveInputStream(byteArrayInputStream);

        try {
            // Attempt to read the next Tar entry, which should throw an IOException
            tarInputStream.getNextTarEntry();
        } finally {
            // Ensure stream is closed
            tarInputStream.close();
        }
    }
}
