
import org.apache.commons.cli.*;

import static org.junit.Assert.assertEquals;

public class CommonsCLITest {

    public static void main(String[] args) throws Exception {
        new CommonsCLITest().testStrippingQuotes();
    }
  
    public void testStrippingQuotes() throws ParseException {
        // Setup the command line options
        Options options = new Options();
        options.addOption(Option.builder()
                .longOpt("balloo")
                .hasArg()
                .desc("Test option with quotes")
                .build());
    
        // Create a command line parser
        CommandLineParser parser = new DefaultParser();
    
        // Parse the command line arguments
        String[] testArgs = {"--balloo", "this is a \"test\""};
        CommandLine cmd = parser.parse(options, testArgs);
    
        // Retrieve the argument value
        String actual = cmd.getOptionValue("balloo");
    
        // Verify that the quotes are not stripped
        assertEquals("this is a \"test\"", actual);
    }
}
