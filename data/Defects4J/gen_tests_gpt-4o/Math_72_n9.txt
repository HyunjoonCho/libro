
import org.apache.commons.math.analysis.UnivariateRealFunction;
import org.apache.commons.math.analysis.solvers.BrentSolver;
import org.junit.Test;
import static org.junit.Assert.*;

public class BrentSolverBugTest {

    @Test
    public void testBrentSolverBracketEndpointRoot() {
        // Define a simple function: f(x) = x
        UnivariateRealFunction function = new UnivariateRealFunction() {
            @Override
            public double value(double x) {
                return x;
            }
        };

        // Instantiate a BrentSolver
        BrentSolver solver = new BrentSolver();

        // Define bracket endpoints where min is a root
        double min = 0.0;
        double max = 10.0;
        double initial = 5.0;

        // Solve for the root
        double result = solver.solve(function, min, max, initial);

        // Verify the solver returns the correct root (should return min)
        assertEquals(min, result, 1e-6);
    }
}
