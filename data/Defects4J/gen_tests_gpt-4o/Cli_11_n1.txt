
import org.apache.commons.cli.*;
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;

public class PosixParserTest {

    @Test
    public void testTargetOptionParsing() throws Exception {
        // Create command line options
        Options options = new Options();
        Option generateTarget = new Option("t", "target", true, "Generate files for the specified target machine");
        options.addOption(generateTarget);

        // Initialize the parser
        CommandLineParser parser = new PosixParser();
        
        // Test input "-target foobar.com"
        String[] args = {"-target", "foobar.com"};
        CommandLine parsedLine = parser.parse(options, args);
        
        // Check that the parsed option value is incorrect due to the bug
        // We expect it to output "arget", which is incorrect as per bug report
        String targetValue = parsedLine.getOptionValue("t");
        assertEquals("arget", targetValue);
        
        // Verify correct parsing should have been "foobar.com" which is not possible due to the bug
        assertNull(parsedLine.getOptionValue("target")); // Ensure there's no 'target' option parsed separately
    }
}
