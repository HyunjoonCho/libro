public void testNamespaceLoopOnAsPath() {
    String xml = "<root xmlns:b=\"bla\" xmlns=\"test111\">" +
                 "<b:foo>" +
                 "<b:bar>a</b:bar>" +
                 "<test xmlns=\"\"></test>" +
                 "</b:foo>" +
                 "</root>";
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    try {
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc = builder.parse(new InputSource(new StringReader(xml)));
        JXPathContext context = JXPathContext.newContext(doc);
        NodePointer testNode = (NodePointer) context.getPointer("/root/b:foo/test");
        String path = testNode.asPath();
        assertEquals("/root/b:foo/test[1]", path);
    } catch (Exception e) {
        fail("Exception occurred: " + e.getMessage());
    }
}