public void testNaNAsBigDecimal() throws IOException {
    String json = "NaN";
    JsonFactory jsonFactory = new JsonFactory();
    JsonParser parser = jsonFactory.createParser(json);
    parser.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);

    try {
        if (parser.nextToken() == JsonToken.VALUE_NUMBER_FLOAT) {
            BigDecimal bd = parser.getDecimalValue();
            fail("Expected NumberFormatException, but got: " + bd);
        }
    } catch (NumberFormatException e) {
        // Expected exception for NaN as BigDecimal
    } catch (NullPointerException e) {
        fail("Expected NumberFormatException, but got NullPointerException");
    }
}