
import org.apache.commons.cli.HelpFormatter;
import org.apache.commons.cli.Options;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.PrintWriter;

import static org.junit.Assert.assertTrue;

public class HelpFormatterTest {

    @Test
    public void testHelpFormatterFooterWhitespace() {
        Options options = new Options();
        HelpFormatter helpFormatter = new HelpFormatter();

        String footer = "line1:\n line2:\n";
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        PrintWriter printWriter = new PrintWriter(outputStream);

        helpFormatter.printHelp(printWriter, 80, "app", null, options, 0, 2, footer);
        printWriter.flush();

        // Capture the output as a String
        String output = outputStream.toString();

        // Verify that the footer contains a leading space in " line2"
        assertTrue("Expected output to contain leading whitespace in the footer line",
                   output.contains(" line2:"));
    }
}
