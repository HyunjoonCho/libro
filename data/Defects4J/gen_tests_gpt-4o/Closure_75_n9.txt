public void testClosureCompiledSwfObjectError() {
    String script = "function urlEncodeIfNecessary(s) {"
            + " var regex = /[\\\\\"<>\\.;]/;"
            + " var hasBadChars = regex.exec(s) != null;"
            + " return hasBadChars && typeof encodeURIComponent != 'undefined' ? encodeURIComponent(s) : s;"
            + "}";

    String compiledScript = "function Z(a){return/[\"<>.;]/.exec(a)!=null&&typeof encodeURIComponent!=j?encodeURIComponent(a):a}";

    // The compilation should preserve the regex pattern correctly without a syntax error
    assertFalse(compiledScript.contains("[\"<>.;]/.exec(a)!=null"));
    assertTrue(compiledScript.contains("/[\"<>.;]/.exec(a)!=null"));
}