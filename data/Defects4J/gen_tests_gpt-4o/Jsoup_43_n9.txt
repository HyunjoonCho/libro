public void testElementSiblingIndex() {
    String html = "<table><tr><td>Cell1</td><td>Cell2</td></tr>"
                + "<tr><td>Cell1</td><td>Cell2</td></tr>"
                + "<tr><td>Cell3</td><td>Cell4</td></tr>"
                + "<tr><td>Cell1</td><td>Cell2</td></tr>"
                + "<tr><td>Cell5</td><td>Cell6</td></tr></table>";
    Document doc = Jsoup.parse(html);
    Element secondRow = doc.select("tr").get(1);
    int index = secondRow.elementSiblingIndex();

    // Fails as the same element structure may exist elsewhere in the sibling list, causing a mismatch
    assertSame(secondRow, secondRow.parent().children().get(index));
}