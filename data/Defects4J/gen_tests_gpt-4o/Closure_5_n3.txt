script
public class DeleteStatementTest {

    @Test
    public void testDeleteStatementFunctionality() {
        // This is the expected behavior as per the bug report, using JavaScript evaluation
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");

        String script = ""
            + "(function(arg) {"
            + "    var foo = {};"
            + "    foo.bar = arg;"
            + "    var firstLog = foo.bar;"
            + "    delete foo.bar;"
            + "    var secondLog = foo.bar;"
            + "    return { first: firstLog, second: secondLog };"
            + "})(42);";

        try {
            @SuppressWarnings("unchecked")
            Map<String, Object> result = (Map<String, Object>) engine.eval(script);

            // Test that the behavior meets the expected outcomes
            assertEquals(42, result.get("first"));  // Expect the initial value to be 42
            assertNull(result.get("second"));        // Expect the deleted value to be null/undefined
        } catch (ScriptException e) {
            fail("Script execution failed: " + e.getMessage());
        }
    }
}
