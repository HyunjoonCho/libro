
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.nio.charset.Charset;

import static org.junit.Assert.assertEquals;

public class XmlEncodingTest {

    @Test
    public void testXmlEncodingDetection() throws IOException {
        // Sample XML content simulating fetched content from the given URL
        String xmlContent = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n" +
                            "<rss>\n" +
                            "  <channel>\n" +
                            "    <title>Sample RSS Feed</title>\n" +
                            "  </channel>\n" +
                            "</rss>";

        ByteArrayInputStream inputStream = new ByteArrayInputStream(xmlContent.getBytes(Charset.forName("ISO-8859-1")));
        
        // Jsoup can parse this input stream
        Document doc = Jsoup.parse(inputStream, "ISO-8859-1", "", Parser.xmlParser());
        
        // Verify that the detected charset is ISO-8859-1
        assertEquals("ISO-8859-1", doc.charset().name());
    }
}
