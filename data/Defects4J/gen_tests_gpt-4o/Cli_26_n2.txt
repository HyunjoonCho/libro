
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionBuilder;
import org.junit.Test;

import static org.junit.Assert.*;

public class OptionBuilderTest {

    @Test
    public void testOptionBuilderReset() {
        // First option creation should intentionally throw an IllegalArgumentException
        try {
            // Assuming 'null' leads to an IllegalArgumentException
            OptionBuilder.withLongOpt(null);  
            OptionBuilder.create();  // This should fail
            fail("Expected IllegalArgumentException");
        } catch (IllegalArgumentException e) {
            // Expected exception, nothing to do here
        }
        
        // Create a valid option to test if OptionBuilder is reset
        Option option = null;
        
        try {
            OptionBuilder.withLongOpt("test-option");
            option = OptionBuilder.create("t");
        } catch (Exception e) {
            fail("OptionBuilder did not reset after IllegalArgumentException: " + e.getMessage());
        }
        
        assertNotNull("Option should have been created successfully after reset", option);
        assertEquals("test-option", option.getLongOpt());
        assertEquals("t", option.getOpt());
    }
}
