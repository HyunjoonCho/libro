public void testObjectIdAndTypeIdWithWrapperObject() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new JaxbAnnotationModule());

    String json = "{\"type\":{\"id\":\"123\",\"name\":\"test\"}}";

    Entity entity = mapper.readValue(json, Entity.class);
    assertNotNull(entity);
    assertEquals("123", entity.id);
    assertEquals("test", entity.name);
}

@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_OBJECT)
@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "id")
static class Entity {
    public String id;
    public String name;
}