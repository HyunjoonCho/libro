public void testInternalCompilerErrorOnBullet() {
    try {
        // Setup the Closure Compiler with advanced optimizations
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

        // Simulate input JS file (bullet_1_1_q1.js small sample)
        String jsInput = "function Bullet() { while(1) { if (__label__ == 0) {} } }";
        SourceFile input = SourceFile.fromCode("bullet_1_1_q1.js", jsInput);

        // Compile the input file
        compiler.compile(SourceFile.fromCode("externs.js", ""), input, options);
        fail("Expected runtime exception not thrown");
    } catch (RuntimeException e) {
        // Check the exception is indeed the internal compiler error
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
        assertTrue(e.getMessage().contains("Please report this problem."));
    }
}