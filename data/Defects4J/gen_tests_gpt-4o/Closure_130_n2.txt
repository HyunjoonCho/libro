public void testArgumentsScopeWithAdvancedOptimizations() {
    Runnable outerFunction = new Runnable() {
        @Override
        public void run() {
            final Object[] args = {"testArgument"};
            Runnable innerFunction = new Runnable() {
                @Override
                public void run() {
                    final Object[] capturedArgs = args;
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            assertEquals("testArgument", capturedArgs[0]);
                        }
                    }).start();
                }
            };
            innerFunction.run();
        }
    };
    outerFunction.run();
}