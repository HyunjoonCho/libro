public void testTarArchiveInputStreamTrimmedEOF() throws IOException {
    String archivePath = "path/to/test_trimmed.tar.bz2"; 
    TarArchiveInputStream input = null;

    try {
        input = new TarArchiveInputStream(new BZip2CompressorInputStream(
                new FileInputStream(archivePath), true));

        ArchiveEntry entry;
        while ((entry = input.getNextEntry()) != null) {
            // Attempt to read from each entry to ensure exception on unexpected EOF
            ByteStreams.toByteArray(input);
        }
        fail("Expected IOException due to unexpected EOF was not thrown.");
    } catch (IOException e) {
        // Expected exception due to the trimmed EOF
        assertTrue(e.getMessage().contains("Unexpected end of ZLIB input stream") || 
                   e.getMessage().contains("Truncated"));
    } finally {
        if (input != null) {
            input.close();
        }
    }
}