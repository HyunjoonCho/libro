public void testCompilerCrashWithGoogProvide() {
    try {
        String code = "goog.provide(mine.Spike);";
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        // Assume other configurations for the compiler here

        JSSourceFile extern = JSSourceFile.fromCode("externs.js", "");
        JSSourceFile input = JSSourceFile.fromCode("file.js", code);

        compiler.compile(extern, input, options);
        fail("Expected RuntimeException due to non-string goog.provide");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
        assertTrue(e.getMessage().contains("is not a string node"));
    }
}