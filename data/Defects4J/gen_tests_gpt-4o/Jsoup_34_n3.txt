
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

public class ParserTest {

    private String htmlWithCommentedCDATA = "<!DOCTYPE html>" +
            "<html>" +
            "<head><title>Test</title></head>" +
            "<body>" +
            "<!-- <![CDATA[ -->" +
            "Some content here" +
            "// ]]" +  // This commented line causes the issue
            "<!-- ]]> -->" +
            "</body>" +
            "</html>";

    @Test
    public void testParsingHtmlWithCommentedCData() {
        try {
            Document doc = Jsoup.parse(htmlWithCommentedCDATA);
            // We can add assertions to check if the Document object is parsed correctly,
            // but the intention here is to check for exceptions during parsing
            System.out.println(doc.title());
        } catch (ArrayIndexOutOfBoundsException e) {
            // Since the bug report indicates an ArrayIndexOutOfBoundsException,
            // we note that this should not happen, and this reproduces the bug.
            throw new AssertionError("Jsoup parsing failed due to commented CDATA - bug #107", e);
        }
    }
}
