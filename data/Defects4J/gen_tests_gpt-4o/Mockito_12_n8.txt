
import static org.junit.Assert.assertArrayEquals;
import static org.mockito.ArgumentCaptor.forClass;
import static org.mockito.Mockito.doNothing;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.verify;

import org.junit.Test;
import org.mockito.ArgumentCaptor;

interface VarArgProcessor {
    void process(String... args);
}

public class VarArgCaptorTest {

    @Test
    public void testVarArgCaptor() {
        // Mock the VarArgProcessor interface
        VarArgProcessor processor = mock(VarArgProcessor.class);

        // Stub the process method for our mock
        doNothing().when(processor).process((String[]) org.mockito.Matchers.anyVararg());

        // Invoke the process method with varargs
        processor.process("first", "second", "third");

        // Create an ArgumentCaptor for the String array
        ArgumentCaptor<String[]> captor = forClass(String[].class);

        // Verify that the process method was called and capture the arguments
        verify(processor).process(captor.capture());

        // Assert that the captured arguments match the invoked arguments
        assertArrayEquals(new String[]{"first", "second", "third"}, captor.getValue());
    }
}
