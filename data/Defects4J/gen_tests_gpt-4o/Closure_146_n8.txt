public void testBadTypeInferenceNotEqualUndefined() {
    String code = "/** @param {string} x */\n" +
                  "function g(x) {}\n" +
                  "/** @param {undefined} x */\n" +
                  "function f(x) {\n" +
                  "  if (x != undefined) { g(x); }\n" +
                  "}";
    
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    Result result = compile(options, code);

    assertNotNull(result.errors);
    assertEquals(1, result.errors.length);
    assertEquals("JSC_TYPE_MISMATCH", result.errors[0].getType().key);
}