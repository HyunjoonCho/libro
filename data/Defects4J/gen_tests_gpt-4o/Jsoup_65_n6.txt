
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.jsoup.parser.ParseError;
import org.jsoup.parser.ParseErrorList;
import org.junit.Test;

import static org.junit.Assert.assertTrue;

public class JsoupTemplateParsingTest {

    @Test
    public void testTemplateTagInsideTr() {
        String htmlSnippet = "<table><tr>" +
                "<th></th>" +
                "<th>Name</th>" +
                "<template is=\"dom-if\" if=\"{{smoothingEnabled}}\">" +
                "<th>Smoothed</th>" +
                "</template>" +
                "<th>Value</th>" +
                "<th>Step</th>" +
                "<th>Time</th>" +
                "<th>Relative</th>" +
                "</tr></table>";

        // Parse the document with tracking errors
        Parser parser = Parser.htmlParser();
        ParseErrorList errors = ParseErrorList.tracking(10); // Track up to 10 errors
        Document doc = Jsoup.parse(htmlSnippet, "", parser.setTrackErrors(errors));

        // Check if there are any parse errors
        // We expect to have no errors for valid HTML as per the provided W3C specification
        assertTrue("There should be no parse errors", errors.isEmpty());

        // Optionally, display the errors if the test fails for debugging
        for (ParseError error : errors) {
            System.out.println("Parse error: " + error.getErrorMessage());
        }
    }
}
