
import org.jsoup.Jsoup;
import org.jsoup.helper.HttpConnection;
import org.jsoup.nodes.Document;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;

import static org.junit.Assert.fail;

public class JsoupParseTest {

    // A test case that simulates an empty stream to reproduce the problem
    @Test
    public void testParseEmptyInputStream() {
        String emptyResponse = ""; // Simulating zero byte response

        try {
            // Simulating a URL response with an empty input stream
            ByteArrayInputStream emptyInputStream = new ByteArrayInputStream(emptyResponse.getBytes(StandardCharsets.UTF_8));
            Document doc = Jsoup.parse(emptyInputStream, null, "");

            // The assertion here would be specific to the expected behavior,
            // Which in this case should handle empty gracefully without throwing, so a proper handling check could be:
            assertTrue(doc.body().text().isEmpty());
        } catch (IOException e) {
            fail("JSoup should handle empty input stream without throwing an exception.");
        }
    }
}
