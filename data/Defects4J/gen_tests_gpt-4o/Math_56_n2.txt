public void testMultidimensionalCounterGetCounts() {
    MultidimensionalCounter counter = new MultidimensionalCounter(2, 4);
    int[][] expected = {
        {0, 0},
        {0, 1},
        {0, 2},
        {0, 3}, // This is where the bug occurs
        {1, 0},
        {1, 1},
        {1, 2},
        {1, 3}, // This is where the bug occurs
    };

    int idx = 0;
    for (int i : counter) {
        int[] actual = counter.getCounts(i);
        assertArrayEquals("Failure at index " + i, expected[idx++], actual);
    }
}