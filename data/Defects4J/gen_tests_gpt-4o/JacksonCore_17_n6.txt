public void testJsonGenerationExceptionWithSplitSurrogate() throws IOException {
    JsonFactory factory = new JsonFactory();
    String problematicString = new String(new char[4000]).replace('\0', 'x') + "\uD83D"; // High surrogate
    StringWriter writer = new StringWriter();

    JsonGenerator generator = factory.createGenerator(writer);
    
    try {
        generator.writeStartObject();
        generator.writeRawField("data", problematicString);
        generator.writeEndObject();
        generator.close();
        fail("Expected JsonGenerationException due to split surrogate pair.");
    } catch (JsonGenerationException e) {
        assertTrue(e.getMessage().contains("Split surrogate on writeRaw() input"));
    }
}