
import org.apache.commons.math3.analysis.differentiation.DerivativeStructure;
import org.junit.Test;
import static org.junit.Assert.*;

public class DerivativeStructureTest {

    @Test
    public void testAtan2SpecialCases() {
        // Special cases where both x and y are +/- 0
        double[] testValues = { 0.0, -0.0 };
        
        for (double y : testValues) {
            for (double x : testValues) {
                // DerivativeStructure atan2 calculation
                DerivativeStructure yDS = new DerivativeStructure(1, 1, 0, y);
                DerivativeStructure xDS = new DerivativeStructure(1, 1, 0, x);
                double resultDS = yDS.atan2(xDS).getValue();

                // Math atan2 calculation
                double expected = Math.atan2(y, x);

                assertEquals("Failed for y = " + y + ", x = " + x, expected, resultDS, 1e-10);
            }
        }
    }
}
