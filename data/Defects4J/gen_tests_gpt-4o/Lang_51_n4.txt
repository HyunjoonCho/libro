
import static org.junit.Assert.assertEquals;
import org.junit.Test;

public class BooleanUtilsTest {

    @Test
    public void testToBooleanInvalidDropThru() {
        try {
            assertEquals(false, BooleanUtils.toBoolean("tru"));
        } catch (StringIndexOutOfBoundsException e) {
            fail("StringIndexOutOfBoundsException should not be thrown for input 'tru'");
        }
    }

    // Placeholder for the actual BooleanUtils class to demonstrate the bug
    public static class BooleanUtils {

        public static boolean toBoolean(String str) {
            if (str == null) {
                return false;
            }
            switch (str.length()) {
                case 1: 
                    return "t".equalsIgnoreCase(str);
                case 2: 
                    return "tr".equalsIgnoreCase(str);
                case 3: 
                    // Misguided drop-thru case causing exception
                    // This should be corrected by adding a return statement
                    return "tru".equalsIgnoreCase(str); // Fix applied here
                case 4: 
                    return "true".equalsIgnoreCase(str);
                default:
                    return false;
            }
        }
    }
}
