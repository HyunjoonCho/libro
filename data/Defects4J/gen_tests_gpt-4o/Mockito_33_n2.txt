
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.mock;
import java.util.function.Consumer;

public class ArgumentCaptorTest {

    @Test
    public void testArgumentCaptorWithParameterizedType() {
        // Set up a Consumer mock
        Consumer<String> mockConsumer = mock(Consumer.class);

        // Call the consumer's accept method with a certain string
        mockConsumer.accept("Hello World");

        // Attempt to create an ArgumentCaptor for Consumer<String>
        // This currently doesn't type check and should be the focus of the bug report
        ArgumentCaptor<String> stringCaptor = ArgumentCaptor.forClass(String.class);

        // Verify the consumer was called, and capture the argument
        verify(mockConsumer).accept(stringCaptor.capture());

        // Check that the captured argument is as expected
        assertEquals("Hello World", stringCaptor.getValue());
    }
}
