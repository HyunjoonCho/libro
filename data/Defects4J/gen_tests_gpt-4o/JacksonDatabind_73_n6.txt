
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.databind.ObjectMapper;
import junit.framework.TestCase;

public class JsonPropertyAccessTest extends TestCase {

    public static class TestPojo {
        private String firstName;
        private String lastName;

        @JsonProperty(access = JsonProperty.Access.READ_ONLY)
        public String getFullName() {
            return firstName + " " + lastName;
        }

        public String getFirstName() {
            return firstName;
        }

        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }

        public String getLastName() {
            return lastName;
        }

        public void setLastName(String lastName) {
            this.lastName = lastName;
        }
    }

    public void testReadOnlyJsonProperty() throws Exception {
        String json = "{\"firstName\":\"John\", \"lastName\":\"Doe\", \"fullName\":\"ThisShouldNotBeParsed\"}";

        ObjectMapper objectMapper = new ObjectMapper();
        TestPojo testPojo = objectMapper.readValue(json, TestPojo.class);

        // Verify that the object is properly deserialized
        assertEquals("John", testPojo.getFirstName());
        assertEquals("Doe", testPojo.getLastName());

        // Verify that fullName is not deserialized from the JSON string
        // and is instead computed from firstName and lastName
        assertEquals("John Doe", testPojo.getFullName());
    }
}
