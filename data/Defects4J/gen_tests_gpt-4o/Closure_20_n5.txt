
import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class StringConversionOptimizationTest {

    @Test
    public void testStringConversionWithUndefinedValue() {
        Object f = new Object() {
            @Override
            public String toString() {
                return "[object Object]";
            }
        };

        // This simulates the JavaScript behavior expected from the bug report
        String result = simulateStringFunction(f);

        assertEquals("[object Object]", result);
    }

    private String simulateStringFunction(Object obj) {
        // Simulating the `String(obj)` conversion that should not be optimized to `obj + ""`
        return obj == null ? "null" : obj.toString();
    }
}
