public void testJsonMappingExceptionLocationIncludedTwice() {
    ObjectMapper objectMapper = new ObjectMapper();
    String invalidJson = "{\"date\":\"not-a-date\"}";

    try {
        objectMapper.readValue(invalidJson, TestClass.class);
        fail("Expected JsonMappingException to be thrown");
    } catch (InvalidFormatException e) {
        String message = e.getMessage();
        assertFalse("Location included twice in message", message.split("\\[source]").length > 2);
    } catch (JsonMappingException e) {
        fail("Expected InvalidFormatException, but got JsonMappingException");
    }
}

static class TestClass {
    public java.util.Date date;
}