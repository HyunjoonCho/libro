script
function testOverzealousOptimization() {
    var log = [];
    function mockRandom() {
        return 0.4; // Controlled randomness for test predictability
    }
    
    var uid;
    function reset() {
        uid = mockRandom();
    }
    function doStuff() {
        reset();
        var _uid = uid;

        if (uid < 0.5) {
            doStuff();
        }

        if (_uid !== uid) {
            log.push('reset() was called');
        }
    }
    doStuff();

    // Verify that the bug should cause the exception
    if (!log.includes('reset() was called')) {
        throw new Error('The optimization incorrectly retains _uid.');
    } else {
        console.log('Test passed: ', log[0]);
    }
}

testOverzealousOptimization();
