
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.linear.RealMatrixImpl;
import org.junit.Test;
import static org.junit.Assert.*;

public class RealMatrixImplTest {

    @Test
    public void testOperateWithNonSquareMatrix() {
        // Create a non-square matrix, for example 3x2
        double[][] matrixData = {
            {1, 2},
            {3, 4},
            {5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(matrixData);

        // Create a vector with a length that matches the number of columns in the matrix
        double[] vector = {1, 1};

        // Operate should result in a vector with the same length as the number of rows in the matrix
        double[] expectedOutput = {3, 7, 11}; // Calculated as: [1*1 + 2*1, 3*1 + 4*1, 5*1 + 6*1]
        
        double[] result = matrix.operate(vector);

        // Assert that the output vector has the expected length and content
        assertEquals(expectedOutput.length, result.length);
        for (int i = 0; i < expectedOutput.length; i++) {
            assertEquals(expectedOutput[i], result[i], 1e-9);
        }
    }
}
