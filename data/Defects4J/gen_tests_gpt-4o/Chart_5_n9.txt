
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYDataItem;
import org.junit.Test;
import static org.junit.Assert.*;

public class XYSeriesTest {
    
    @Test
    public void testAddOrUpdateWithDuplicateX() {
        // Create an XYSeries with allowDuplicateXValues set to true
        XYSeries series = new XYSeries("Test Series", true);

        // Add an initial data point
        series.add(1.0, 2.0);

        // Use addOrUpdate to attempt to add a duplicate x-value
        series.addOrUpdate(1.0, 3.0);

        // Verify that both entries are present in the series
        assertEquals(2, series.getItemCount());

        // Verify that the data includes both values with x=1.0
        XYDataItem firstItem = series.getDataItem(0);
        XYDataItem secondItem = series.getDataItem(1);
        
        assertEquals(1.0, firstItem.getX().doubleValue(), 0.001);
        assertEquals(2.0, firstItem.getY().doubleValue(), 0.001);
        
        assertEquals(1.0, secondItem.getX().doubleValue(), 0.001);
        assertEquals(3.0, secondItem.getY().doubleValue(), 0.001);
    }
}
