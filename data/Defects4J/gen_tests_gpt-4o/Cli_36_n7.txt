public void testHelpFormatterOptionGroupOrder() {
    OptionGroup group = new OptionGroup();
    Option h = Option.builder("h").build();
    Option s = Option.builder("s").build();
    Option b = Option.builder("b").build();
    Option t = Option.builder("t").build();
    group.addOption(h).addOption(s).addOption(b).addOption(t);

    Options options = new Options();
    options.addOptionGroup(group);
    options.addOption(Option.builder("o").build());

    HelpFormatter formatter = new HelpFormatter();
    formatter.setOptionComparator(null);
    
    StringWriter out = new StringWriter();
    PrintWriter pw = new PrintWriter(out);
    formatter.printHelp(pw, 80, "cmd", "", options, 1, 3, null, true);

    String expectedOrder = " -h\n -s\n -b\n -t\n -o";
    assertTrue(out.toString().contains(expectedOrder));
}