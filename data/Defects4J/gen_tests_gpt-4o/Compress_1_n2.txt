public void testCpioUnexpectedEOF() throws IOException {
    final File input = getFile("cmdcreated.cpio");
    final InputStream in = new FileInputStream(input);
    CpioArchiveInputStream cin = new CpioArchiveInputStream(in);

    try {
        CpioArchiveEntry entry = cin.getNextCPIOEntry();
        assertNotNull("CpioArchiveEntry should not be null", entry);

        File target = new File(dir, entry.getName());
        final OutputStream out = new FileOutputStream(target);
        IOUtils.copy(cin, out);
        out.close();
    } catch (EOFException e) {
        fail("Unexpected EOFException: " + e.getMessage());
    } finally {
        cin.close();
    }
}