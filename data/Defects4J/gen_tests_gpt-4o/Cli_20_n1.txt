public void testPosixParserWithUnrecognizedLongOption() {
    Options options = new Options();
    options.addOption("a", false, "Option A");
    options.addOption(Option.builder("b").hasArg().desc("Option B with argument").build());

    CommandLineParser parser = new DefaultParser();
    String[] args = new String[] {"--zop", "-abfoo"};

    try {
        CommandLine cmd = parser.parse(options, args, true);
        assertFalse("Unrecognized option should not result in parsed options", cmd.hasOption("a"));
        assertFalse("Unrecognized option should not result in parsed options", cmd.hasOption("b"));
        assertArrayEquals("Remaining arguments should include unprocessed tokens", new String[]{"--zop", "-abfoo"}, cmd.getArgs());
    } catch (ParseException e) {
        fail("ParseException should not occur: " + e.getMessage());
    }
}