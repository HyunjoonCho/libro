
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;
import com.google.javascript.jscomp.Result;
import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class JsDocParsingTest {

    @Test
    public void testConstructorTypesParsing() {
        // Create a compiler and options
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();

        // Define the JavaScript code to parse
        String jsCode =
            "/** @type {function(new:?)} */ var foo = function() {};\n" +
            "/** @type {function(new:*)} */ var bar = function() {};";

        // Create a source file from the JavaScript code
        SourceFile input = SourceFile.fromCode("foo.js", jsCode);

        // Parse and compile the JavaScript code
        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), input, options);
        
        // Ensure errors are present - this reproduces the issue
        assertTrue("Expected parsing errors for unknown and all types.", result.errors.length > 0);
    }
}
