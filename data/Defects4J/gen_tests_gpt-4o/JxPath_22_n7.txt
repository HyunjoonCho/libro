public void testAsPathEndlessLoopWithDefaultNamespace() {
    org.w3c.dom.DocumentBuilderFactory dbf = org.w3c.dom.DocumentBuilderFactory.newInstance();
    org.w3c.dom.DocumentBuilder db = null;
    org.w3c.dom.Document doc = null;
    try {
        db = dbf.newDocumentBuilder();
        doc = db.parse(new org.xml.sax.InputSource(new java.io.StringReader(
                "<foo xmlns:b=\"bla\" xmlns=\"test111\">" +
                "<b:bar>a</b:bar>" +
                "<test xmlns=\"\"></test>" +
                "</foo>"
        )));
    } catch (javax.xml.parsers.ParserConfigurationException | org.xml.sax.SAXException | java.io.IOException e) {
        fail("Setup of test XML document failed: " + e.getMessage());
    }

    org.apache.commons.jxpath.JXPathContext context = org.apache.commons.jxpath.JXPathContext.newContext(doc);
    org.apache.commons.jxpath.Pointer pointer = context.getPointer("/foo/test");

    try {
        pointer.asPath();
        fail("Expected an endless loop or incorrect result with path '//b:foo/null:test'");
    } catch (StackOverflowError e) {
        // Expected behavior prior to fix, indicating an endless loop.
    }
}