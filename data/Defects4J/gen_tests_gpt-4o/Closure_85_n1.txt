public void testSwitchStatementCompilationError() {
    String jsCode = "function a(b) { "
                  + " switch (b.v) { "
                  + " case 'SWITCH': "
                  + " if (b.i >= 0) { "
                  + " return b.o; "
                  + " } else { "
                  + " return undefined; "
                  + " } "
                  + " break; "
                  + " } "
                  + "}";
    try {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        SourceFile input = SourceFile.fromCode("test.js", jsCode);
        SourceFile externs = SourceFile.fromCode("externs.js", "");
        compiler.compile(externs, input, options);
        fail("Expected RuntimeException due to internal compiler error");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}