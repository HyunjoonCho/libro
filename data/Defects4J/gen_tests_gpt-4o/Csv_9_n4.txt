
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVParser;
import org.apache.commons.csv.CSVRecord;
import org.junit.Test;
import java.io.IOException;
import java.io.StringReader;
import java.util.Map;
import static org.junit.Assert.assertNull;

public class CSVRecordTest {

    @Test
    public void testToMapWithNoHeaders() throws IOException {
        String csvContent = "value1,value2,value3\n" +
                            "value4,value5,value6";
        
        CSVFormat csvFormat = CSVFormat.DEFAULT.withHeader();
        CSVParser parser = new CSVParser(new StringReader(csvContent), csvFormat);
        
        for (CSVRecord record : parser) {
            Map<String, String> map = record.toMap();
            assertNull("Expected null map when no headers are provided", map);
        }
        parser.close();
    }
}
