public void testLongDirectoryNameInTarArchive() {
    File tempFile = null;
    TarArchiveOutputStream tarOutput = null;

    try {
        tempFile = File.createTempFile("test", ".tar");
        tarOutput = new TarArchiveOutputStream(new FileOutputStream(tempFile));
        
        // Construct a directory name longer than 100 bytes
        String longDirectoryName = "./PaxHeaders.X/" + "a".repeat(105);
        TarArchiveEntry entry = new TarArchiveEntry(longDirectoryName + "/");
        tarOutput.putArchiveEntry(entry);
        tarOutput.closeArchiveEntry();
        
        // Simulate writing data to the directory entry
        byte[] data = "test".getBytes();
        try {
            tarOutput.write(data);
            fail("Expected IOException due to writing to a directory entry");
        } catch (IOException e) {
            // Expected exception, check message
            assertTrue(e.getMessage().contains("exceeds size in header"));
        }
        
    } catch (IOException e) {
        fail("Unexpected IOException: " + e.getMessage());
    } finally {
        if (tarOutput != null) {
            try {
                tarOutput.close();
            } catch (IOException e) {
                // Ignore
            }
        }
        if (tempFile != null && tempFile.exists()) {
            tempFile.delete();
        }
    }
}