
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;
import java.io.StringWriter;
import static org.junit.Assert.assertEquals;

public class CSVFormatTest {

    @Test
    public void testCSVOutputWithCJKCharacters() throws Exception {
        // Sets up a StringWriter to capture the CSV output
        StringWriter writer = new StringWriter();

        // Creates a CSVPrinter with the EXCEL format
        try (CSVPrinter printer = new CSVPrinter(writer, CSVFormat.EXCEL)) {
            // Prints a record with CJK characters
            printer.printRecord("あ", "い", "う");
        }

        // Expected output should match Excel's output without quotes around the first value
        String expectedOutput = "あ,い,う\r\n";
        String actualOutput = writer.toString();

        // Asserts that the output from Apache Commons CSV matches Excel's output
        assertEquals(expectedOutput, actualOutput);
    }
}
