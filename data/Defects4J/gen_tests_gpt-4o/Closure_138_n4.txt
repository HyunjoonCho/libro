public void testJSCDeterministicTest() {
    String code = "var t = null;" +
                  "window.test = function() {" +
                  " if (t != null) {" +
                  " t = null;" +
                  " }" +
                  " t = 1;" +
                  "};";

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    
    SourceFile extern = SourceFile.fromCode("externs.js", "");
    SourceFile input = SourceFile.fromCode("test.js", code);
    Result result = compiler.compile(extern, input, options);
    
    assertEquals(0, compiler.getWarningCount());
    assertTrue(result.success);
    assertFalse(result.errors.isEmpty());
}