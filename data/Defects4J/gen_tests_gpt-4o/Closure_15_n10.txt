
public class CustomDataTest {

    private static Map<String, String> customData = new HashMap<>();

    static {
        customData.put("key", "value");
    }

    public static String testRemoveKey(String key) {
        Map<String, String> dataSlot = customData;
        String retval = (dataSlot != null) ? dataSlot.get(key) : null;
        boolean hadKey = (dataSlot != null) && dataSlot.containsKey(key);

        if (dataSlot != null) {
            dataSlot.remove(key);
        }

        return hadKey ? retval : null;
    }

    @Test
    public void testRemoveKeyBehaviour() {
        assertEquals("value", testRemoveKey("key"));
        assertFalse(customData.containsKey("key"));
    }

    public static void main(String[] args) {
        CustomDataTest test = new CustomDataTest();
        test.testRemoveKeyBehaviour();
    }
}
