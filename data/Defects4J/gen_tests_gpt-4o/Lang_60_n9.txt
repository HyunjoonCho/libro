@Test
public void testStrBuilderLengthVsSize() {
    StrBuilder sb = new StrBuilder(5);
    sb.append("hello");
    sb.append("world"); // This should not cause an issue

    // Check that the internal buffer's length is greater than or equal to the content size
    assertTrue(sb.size() <= sb.toCharArray().length);

    // Let's perform an operation that would make thisBuf.length potentially cause issues
    sb.replace(0, 5, "hi"); // Replace "hello" with "hi", shortening the content

    // Check that the operation succeeded and the sizes make sense
    assertEquals("hiworld", sb.toString());
    assertTrue(sb.size() <= sb.toCharArray().length);

    // Delete to potentially expose incorrect length usage
    sb.delete(2, 7); // Delete "world"

    // Final checks
    assertEquals("hi", sb.toString());
    assertTrue(sb.size() <= sb.toCharArray().length);
}