
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.DefaultParser;
import org.apache.commons.cli.Options;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class CommonsCLITest {

    @Test
    public void testStripLeadingAndTrailingQuotes() throws Exception {
        Options options = new Options();
        options.addOption("b", "balloo", true, "Balloo option");

        DefaultParser parser = new DefaultParser();
        String[] args = {"--balloo", "this is a \"test\""};
        CommandLine cmd = parser.parse(options, args);

        String ballooValue = cmd.getOptionValue("balloo");
        assertEquals("this is a \"test\"", ballooValue);

        // The test expects that the trailing quote is preserved.
    }
}
