
import org.junit.Test;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class CompilerVersionOptionTest {

    @Test
    public void testVersionOption() throws IOException {
        // The path to the compiler jar file, adjust this as needed
        String jarFilePath = "path/to/compiler.jar";
        
        // Setting up the command to run the jar with --version
        ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", jarFilePath, "--version");
        
        // Start the process
        Process process = processBuilder.start();
        
        // Read the output from the command
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        StringBuilder output = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            output.append(line).append(System.lineSeparator());
        }

        // Read any errors from the attempted command
        BufferedReader errorReader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
        StringBuilder errorOutput = new StringBuilder();
        while ((line = errorReader.readLine()) != null) {
            errorOutput.append(line).append(System.lineSeparator());
        }

        // Wait for the process to complete
        try {
            int exitCode = process.waitFor();
            assertEquals("The process should exit with code 0", 0, exitCode);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        // Test condition: check if an error regarding unsupported option is present
        String errorMessage = errorOutput.toString();

        // Since this is an enhancement request we expect the --version option to not be supported
        assertTrue("Expected an error message indicating that --version is not supported", 
                   errorMessage.contains("--version is not supported"));
    }
}
