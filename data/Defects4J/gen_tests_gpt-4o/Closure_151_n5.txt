public void testCompilerVersionOption() throws Exception {
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
    processBuilder.redirectErrorStream(true);
    Process process = processBuilder.start();
    
    StringBuilder output = new StringBuilder();
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
        String line;
        while ((line = reader.readLine()) != null) {
            output.append(line).append(System.lineSeparator());
        }
    }
    
    int exitCode = process.waitFor();
    assertEquals(0, exitCode);
    assertTrue("Expected version info in output", output.toString().contains("version"));
}