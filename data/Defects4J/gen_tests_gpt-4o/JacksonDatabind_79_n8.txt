public void testJsonIdentityReferenceOnClassOnly() throws Exception {
    ObjectMapper mapper = new ObjectMapper();

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    @JsonIdentityReference(alwaysAsId = true)
    class TestClass {
        public int id;
        
        public TestClass(int id) {
            this.id = id;
        }
    }

    class Container {
        public TestClass ref = new TestClass(42);
    }

    Container container = new Container();
    String json = mapper.writeValueAsString(container);
    assertEquals("{\"ref\":42}", json);
}