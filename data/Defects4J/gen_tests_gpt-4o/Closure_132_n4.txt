
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class IfStatementTest {

    // Method to be tested that mimics the described behavior
    public int simulateConditional(int[] es, int esi) {
        if (es[--esi] == es[esi + 1]) {
            es[esi] = 0;
        } else {
            es[esi] = 1;
        }
        return es[esi];
    }

    // Equivalent ternary operation
    public int simulateTernary(int[] es, int esi) {
        return es[--esi] = (es[esi] == es[esi + 1]) ? 0 : 1;
    }

    @Test
    public void testIncorrectIfStatementTransformation() {
        int[] es = {2, 1, 1, 0};
        int esi = 2;

        // Simulating conditional block
        int resultFromConditional = simulateConditional(es.clone(), esi);

        // Simulating the incorrect transformation
        int resultFromTernary = simulateTernary(es.clone(), esi);

        // Assert that the results are not equal, showing that the transformation was incorrect
        assertEquals("The conditional and ternary results should be different due to incorrect transformation in the bug report", 
        resultFromConditional, resultFromTernary);
    }
}
