
import org.apache.commons.cli.*;

import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class CommandLineTest {

    @Test
    public void testOptionWithDefaultAndCommandLineOverride() {
        // Create the options
        Options options = new Options();
        Option optionWithDefault = new Option("o", "option", true, "An option with a default value");
        optionWithDefault.setRequired(false);
        options.addOption(optionWithDefault);

        // Simulate setting a default value
        CommandLineParser parser = new DefaultParser();
        CommandLine cmd = parser.parse(options, new String[]{"-o", "default"});

        // Attempt to override on the command line
        String[] args = {"-o", "override"};

        try {
            cmd = parser.parse(options, args); // Re-parse to override
            assertEquals("override", cmd.getOptionValue("o")); // Should be "override", not "default"
        } catch (ParseException e) {
            e.printStackTrace();
            assert false : "Parsing failed with an unexpected exception.";
        }
    }
}
