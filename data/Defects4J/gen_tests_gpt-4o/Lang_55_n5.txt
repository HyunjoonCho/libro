
import org.apache.commons.lang3.time.StopWatch;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class StopWatchTest {

    @Test
    public void testSuspendActsAsSplitWhenFollowedByStop() throws InterruptedException {
        StopWatch sw = new StopWatch();

        sw.start();
        Thread.sleep(1000);

        sw.suspend();
        
        // Time 1
        long time1 = sw.getTime();
        
        Thread.sleep(2000);

        // Time should still be time 1
        assertEquals(time1, sw.getTime());

        sw.resume();
        Thread.sleep(3000);

        sw.suspend();

        // Time 2
        long time2 = sw.getTime();

        Thread.sleep(4000);

        // Time should still be time 2
        assertEquals(time2, sw.getTime());

        Thread.sleep(5000);

        sw.stop();

        // Expect Time 2, but this should show the reported bug where it becomes Time 3
        assertEquals(time2, sw.getTime());
    }
}
