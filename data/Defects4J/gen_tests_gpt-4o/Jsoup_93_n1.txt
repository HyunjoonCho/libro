
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.FormElement;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class ImageInputFormDataTest {
    
    @Test
    public void testImageInputFormData() {
        Document document = Jsoup.parse("<form id='f'><input type='image' name='x'></form>");
        FormElement formElement = (FormElement) document.getElementById("f");
        
        Elements formData = formElement.formData();
        
        // We expect either no data [] or coordinates [x.x=0, x.y=0], but not x=
        boolean validOutput = formData.isEmpty() || formData.hasSize(2);
        
        if (formData.hasSize(2)) {
            Element xCoord = formData.get(0);
            Element yCoord = formData.get(1);
            validOutput = xCoord.attr("key").equals("x.x") && xCoord.attr("value").equals("0") &&
                          yCoord.attr("key").equals("x.y") && yCoord.attr("value").equals("0");
        }
        
        assertEquals(true, validOutput);
    }
}
