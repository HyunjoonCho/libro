
import org.apache.commons.math3.stat.descriptive.moment.Variance;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class VarianceTest {

    @Test
    public void testVarianceEvaluatePartialArray() {
        // Create an instance of Variance
        Variance variance = new Variance();

        // Sample data and weights
        double[] values = {2.0, 4.0, 6.0, 8.0, 10.0}; // full data set
        double[] weights = {1.0, 1.0, 1.0, 1.0, 1.0}; // corresponding weights

        // Calculate mean for part of the data
        double mean = 4.0; // Pre-calculated mean of {2.0, 4.0}

        // Begin index and length for partial evaluation
        int begin = 0;
        int length = 2;

        // Evaluate variance for the specified portion of data
        double result = variance.evaluate(values, weights, mean, begin, length);

        // Expected variance for the subarray {2.0, 4.0}
        double expectedVariance = 1.0; 

        // Assert the variance matches the expected variance
        assertEquals(expectedVariance, result, 1e-9);
    }
}
