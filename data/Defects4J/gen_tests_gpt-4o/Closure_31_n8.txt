public void testManageClosureDependenciesWithWhitespaceOnly() {
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.WHITESPACE_ONLY.setOptionsForCompilationLevel(options);
    options.setManageClosureDependencies(true);

    SourceFile input = SourceFile.fromCode(
        "test.js",
        "goog.require('example.dependency');\nvar x = 1;"
    );

    SourceFile dependency = SourceFile.fromCode(
        "example/dependency.js",
        "goog.provide('example.dependency');"
    );

    Compiler compiler = new Compiler();
    Result result = compiler.compile(
        ImmutableList.of(dependency),
        ImmutableList.of(input),
        options
    );

    assertEquals(0, compiler.getErrorCount());
    assertTrue(compiler.toSource().contains("example.dependency"));
}