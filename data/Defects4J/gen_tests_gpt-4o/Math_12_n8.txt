
import org.apache.commons.math3.distribution.GammaDistribution;
import org.junit.Test;

import java.io.*;

import static org.junit.Assert.*;

public class GammaDistributionTest {

    @Test
    public void testGammaDistributionSerialization() throws IOException, ClassNotFoundException {
        // Create a GammaDistribution instance
        GammaDistribution originalDistribution = new GammaDistribution(2.0, 2.0);

        // Serialize the GammaDistribution
        ByteArrayOutputStream byteOutStream = new ByteArrayOutputStream();
        ObjectOutputStream objectOutStream = new ObjectOutputStream(byteOutStream);
        objectOutStream.writeObject(originalDistribution);

        // Deserialize the GammaDistribution
        ByteArrayInputStream byteInStream = new ByteArrayInputStream(byteOutStream.toByteArray());
        ObjectInputStream objectInStream = new ObjectInputStream(byteInStream);
        GammaDistribution clonedDistribution = (GammaDistribution) objectInStream.readObject();

        // Test if the distributions produce the same sample
        double originalSample = originalDistribution.sample();
        double clonedSample = clonedDistribution.sample();

        assertEquals("The deserialized GammaDistribution does not produce the same sample.", 
                     originalSample, clonedSample, 1e-9);
    }
}
