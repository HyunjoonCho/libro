
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.data.general.DatasetUtilities;
import org.jfree.data.Range;
import org.junit.Test;

import static org.junit.Assert.*;

public class DatasetUtilitiesTest {

    @Test
    public void testIterateRangeBounds() {
        // Create a category dataset
        DefaultCategoryDataset dataset = new DefaultCategoryDataset();
        
        // Adding sample data with potential issues related to range bounds
        dataset.addValue(1.0, "Row1", "Column1");
        dataset.addValue(2.0, "Row1", "Column2");
        dataset.addValue(null, "Row1", "Column3"); // Intentional null to test null handling
        dataset.addValue(4.0, "Row1", "Column4");

        // This is a crafted edge case assuming the forum post mentioned issues like incorrect null handling
        Range range = DatasetUtilities.iterateRangeBounds(dataset);
        
        // The expected range should be from 1.0 to 4.0 if nulls are properly ignored
        assertNotNull("Range should not be null", range);
        assertEquals("Lower bound of range is incorrect", 1.0, range.getLowerBound(), 0.0001);
        assertEquals("Upper bound of range is incorrect", 4.0, range.getUpperBound(), 0.0001);
    }
}
