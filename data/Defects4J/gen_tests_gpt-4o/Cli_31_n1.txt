
import org.apache.commons.cli.*;
import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class HelpFormatterTest {

    @Test
    public void testSetArgNameHasNoEffect() {
        // Create an Option with an argument
        Option option = OptionBuilder.hasArg().withDescription("Some description").create("f");

        // Create an Options object and add the created Option
        Options options = new Options();
        options.addOption(option);

        // Create a HelpFormatter and set a custom argument name
        HelpFormatter formatter = new HelpFormatter();
        formatter.setArgName("file_name");

        // Capture the output of the formatter
        StringBuilder out = new StringBuilder();
        formatter.printHelp(new PrintWriter(new StringWriter() {
            @Override
            public void write(final String str) {
                out.append(str);
            }
        }, true), 80, "commandline-tool", null, options, 2, 2, null, true);

        // Assert that the custom argument name is included in the output
        String helpOutput = out.toString();
        assertTrue("Custom argument name 'file_name' should be in the help output",
                   helpOutput.contains("<file_name>"));

        // Assert that the default argument name should NOT appear in the output
        assertTrue("Default argument name 'arg' should NOT be present in the help output",
                   !helpOutput.contains("<arg>"));
    }
}
