public void testChiSquareWeights() {
    AbstractLeastSquares leastSquares = new AbstractLeastSquares(new double[]{1.0, 2.0, 3.0}, new double[]{1.0, 1.0, 1.0}) {
        @Override
        public void adjust() {
            // Stubbed implementation
        }

        @Override
        public double[] computeResiduals(double[] params) {
            return new double[]{0.1, -0.2, 0.15};
        }

        @Override
        public double[][] computeJacobian(double[] params) {
            return new double[][]{{0.0, 0.0, 0.0}};
        }
    };
    
    double chiSquare = leastSquares.getChiSquare();
    double expectedChiSquare = 0.1 * 0.1 * 1.0 + 0.2 * 0.2 * 2.0 + 0.15 * 0.15 * 3.0;
    
    assertEquals(expectedChiSquare, chiSquare, 1e-6);
}