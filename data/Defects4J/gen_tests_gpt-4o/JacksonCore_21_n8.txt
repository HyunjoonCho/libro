public void testFilteringParserDelegateMissesEndObject() throws IOException {
    String json = "{\"a\":123,\"array\":[1,2],\"ob\":{\"value0\":2,\"value\":3,\"value2\":4},\"b\":true}";
    
    JsonFactory jsonFactory = new JsonFactory();
    JsonParser baseParser = jsonFactory.createParser(json);
    TokenFilter filter = new NameMatchFilter("value");
    FilteringParserDelegate parser = new FilteringParserDelegate(baseParser, filter, true, false);
    
    StringBuilder result = new StringBuilder();
    while (!parser.isClosed()) {
        JsonToken token = parser.nextToken();
        if (token == null) {
            break;
        }
        result.append(parser.getText());
        if (token == JsonToken.END_OBJECT) {
            result.append("}");
        }
    }
    
    assertEquals("{\"ob\":{\"value\":3}}", result.toString());
}