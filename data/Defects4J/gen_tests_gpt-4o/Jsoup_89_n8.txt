public void testSetValueNPE() {
    Attribute attribute = new Attribute("key", "value");
    try {
        attribute.setValue("newValue");
        fail("Expected NullPointerException due to null parent");
    } catch (NullPointerException e) {
        // Expected exception
    }
}

class Attribute {
    private String key;
    private String val;
    private Attributes parent;

    public Attribute(String key, String val) {
        this.key = key;
        this.val = val;
    }

    public String setValue(String val) {
        String oldVal = parent.get(this.key);
        if (parent != null) {
            int i = parent.indexOfKey(this.key);
            if (i != Attributes.NotFound)
                parent.vals[i] = val;
        }
        this.val = val;
        return oldVal;
    }
}

class Attributes {
    static final int NotFound = -1;
    String[] keys;
    String[] vals;

    String get(String key) {
        return null; // stub method
    }

    int indexOfKey(String key) {
        return NotFound; // stub method
    }
}