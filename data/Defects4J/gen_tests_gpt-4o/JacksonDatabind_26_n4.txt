
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.ObjectReader;
import java.io.*;

public class ObjectReaderSerializationTest {

    public void testObjectReaderSerialization() {
        try {
            ObjectMapper mapper = new ObjectMapper();
            ObjectReader reader = mapper.reader();

            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
            ObjectOutputStream objectOutputStream = new ObjectOutputStream(byteArrayOutputStream);

            // Attempt to serialize the ObjectReader
            objectOutputStream.writeObject(reader);

            objectOutputStream.close();

            ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(byteArrayOutputStream.toByteArray());
            ObjectInputStream objectInputStream = new ObjectInputStream(byteArrayInputStream);

            // Attempt to deserialize the ObjectReader
            ObjectReader deserializedReader = (ObjectReader) objectInputStream.readObject();

            objectInputStream.close();

            // Simple check to ensure the deserialized object is not null
            assertNotNull(deserializedReader);

        } catch (IOException | ClassNotFoundException e) {
            fail("Serialization/Deserialization failed with exception: " + e.getMessage());
        }
    }

    private void assertNotNull(Object obj) {
        if (obj == null) {
            throw new AssertionError("Object should not be null");
        }
    }

    private void fail(String message) {
        throw new AssertionError(message);
    }

    public static void main(String[] args) {
        ObjectReaderSerializationTest test = new ObjectReaderSerializationTest();
        test.testObjectReaderSerialization();
    }
}
