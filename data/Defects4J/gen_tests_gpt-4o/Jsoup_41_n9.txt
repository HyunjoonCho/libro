
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;
import static org.junit.Assert.*;

public class ElementHashCodeTest {

    @Test
    public void testElementHashCodeIgnoresTextContent() {
        String html =
                "<html>" +
                "    <head></head>" +
                "    <body>" +
                "        <div style=\"blah\">TODO: write content</div>" +
                "        <div style=\"blah\">Nothing here</div>" +
                "        <p style=\"test\">Empty</p>" +
                "        <p style=\"nothing\">Empty</p>" +
                "    </body>" +
                "</html>";

        Document document = Jsoup.parse(html);
        Elements elements = document.select("[style]");

        // Assert that the hashCodes of the two <div> elements should differ
        Element firstDiv = elements.get(0);
        Element secondDiv = elements.get(1);
        assertNotEquals("HashCode should be different for elements with different text content",
                        firstDiv.hashCode(), secondDiv.hashCode());

        // Optionally, print hash codes to see values as in the bug report
        for (Element element : elements) {
            System.out.println(element.hashCode());
        }
    }
}
