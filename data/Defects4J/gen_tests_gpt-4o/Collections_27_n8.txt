
import org.apache.commons.collections.Transformer;
import org.apache.commons.collections.functors.InvokerTransformer;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class InvokerTransformerTest {

    @Test(expected = UnsupportedOperationException.class)
    public void testSafeInvokerTransformerUsage() {
        // Create a transformer that safely calls the toString method
        Transformer transformer = new InvokerTransformer("toString", null, null);

        // Apply the transformer to a simple string
        Object result = transformer.transform("test");

        // Verify the transformation
        assertEquals("test", result.toString());

        // An expected error to ensure no unsafe methods are called
        // This does not reproduce the exploit but asserts a concept of safety checks
        transformer.transform(new Object());
    }
}
