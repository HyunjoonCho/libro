
import static org.junit.Assert.assertEquals;
import org.junit.Test;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class UnicodePropertyNameTest {

    @Test
    public void testUnicodeInPropertyName() {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");

        // JavaScript code with a unicode character in the property name
        String script = "var test = {\"a\\u0004b\": \"c\"}; test['a\\u0004b'];";
        
        try {
            // Evaluate the script
            Object result = engine.eval(script);

            // Verify that the output matches the expected value
            assertEquals("c", result);
            
            // Output should be var test = {\"a\\u0004b\": \"c\"} as unicode should remain escaped
            String expectedOutput = "var test={\"a\\u0004b\":\"c\"};";
            String actualOutput = engine.eval("JSON.stringify(test);").toString();
            assertEquals(expectedOutput, actualOutput);

        } catch (ScriptException e) {
            e.printStackTrace();
        }
    }
}
