public void testTernaryOperatorMixedTypes() {
    Context jsContext = Context.enter();
    try {
        Scriptable scope = jsContext.initStandardObjects();
        jsContext.evaluateString(scope, "var a = (Math.random() > 0.5 ? '1' : 2) + 3 + 4;", "testScript", 1, null);
        Object a = scope.get("a", scope);
        
        assertTrue(a instanceof String);
        String aStr = (String) a;
        assertTrue(aStr.equals("134") || aStr.equals("234"));
    } finally {
        Context.exit();
    }
}