
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;
import org.w3c.dom.Node;

import javax.xml.parsers.DocumentBuilderFactory;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;

public class W3CDomNamespaceTest {

    @Test
    public void testSiblingNamespaceInheritance() throws Exception {
        // Sample HTML content
        String html = "<html>" +
                        "<body>" +
                          "<div xmlns:myNS='http://example.com/ns' myNS:attr='value'>First element with namespace</div>" +
                          "<p>Second element without namespace</p>" +
                        "</body>" +
                      "</html>";

        // Parse the HTML using Jsoup and convert to W3C DOM
        Document jsoupDoc = Jsoup.parse(html);
        org.w3c.dom.Document w3cDoc = DocumentBuilderFactory.newInstance()
                .newDocumentBuilder()
                .parse(Jsoup.parse(html).html());

        Node firstElement = w3cDoc.getElementsByTagName("div").item(0);
        Node secondElement = w3cDoc.getElementsByTagName("p").item(0);

        // Check namespaces
        // The first element has a defined namespace
        assertEquals("http://example.com/ns", firstElement.getAttributes().getNamedItem("xmlns:myNS").getNodeValue());

        // The second element should not inherit the namespace from its sibling
        assertNull("Namespace wrongly inherited", secondElement.getNamespaceURI());
    }
}
