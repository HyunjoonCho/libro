
import org.apache.commons.lang3.time.FastDateFormat;
import org.junit.Test;

import java.text.ParseException;
import java.util.Date;
import java.util.Locale;

import static org.junit.Assert.assertEquals;

public class FastDateFormatTest {

    @Test
    public void testDefaultLocaleChangeEffectOnFastDateFormat() throws ParseException {
        // Set default locale to US
        Locale.setDefault(Locale.US);

        // Create a FastDateFormat instance with default locale
        FastDateFormat dateFormat = FastDateFormat.getDateInstance(FastDateFormat.SHORT);

        // Format a date
        Date testDate = dateFormat.parse("12/31/20");
        String formattedDateUS = dateFormat.format(testDate);

        // Change the default locale to France
        Locale.setDefault(Locale.FRANCE);

        // Create another FastDateFormat instance with default locale
        FastDateFormat dateFormatFrench = FastDateFormat.getDateInstance(FastDateFormat.SHORT);

        // Format the same date
        String formattedDateFrance = dateFormatFrench.format(testDate);

        // Verify that the first format doesn't change even though the default locale has changed
        assertEquals("12/31/20", formattedDateUS);

        // Verify that the new formatter does respect the new default locale
        assertEquals("31/12/20", formattedDateFrance);
    }
}
