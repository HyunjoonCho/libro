public void testArgumentsScopeWithAdvancedOptimizations() {
    Runnable function = new Runnable() {
        public void run() {
            Runnable innerFunction = new Runnable() {
                public void run() {
                    final Object[] args = {"arg1", "arg2"};
                    new Thread(new Runnable() {
                        public void run() {
                            assertEquals(args, new Object[] {"arg1", "arg2"});
                        }
                    }).start();
                }
            };
            innerFunction.run();
        }
    };
    function.run();
}