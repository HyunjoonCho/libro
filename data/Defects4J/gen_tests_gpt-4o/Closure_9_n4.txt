public void testAMDModuleResolution() {
    // Setup a mock environment to simulate compiling with the compiler
    String[] args = {
        "--transform_amd_modules",
        "--process_common_js_modules",
        "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js",
        "--js=Bar.js",
        "--js=lib/Foo.js"
    };
    
    try {
        Compiler compiler = new Compiler();
        Result result = compiler.compile(
            CommandLineRunner.createExterns(Arrays.asList()), 
            Arrays.stream(args).map(SourceFile::fromCode).collect(Collectors.toList()), 
            new CompilerOptions());

        assertTrue("Expected no errors, but found: " + compiler.getErrors().length,
            result.success);

    } catch (Exception e) {
        fail("Exception during compilation: " + e.getMessage());
    }
}