
import org.junit.Test;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import static org.junit.Assert.assertEquals;

public class DomNamespaceTest {

    @Test
    public void testSiblingsNamespaceInheritance() throws Exception {
        String html = "<root>" +
                "<element xmlns=\"http://example.com/ns\">Namespaced</element>" +
                "<sibling>Non-namespaced</sibling>" +
                "</root>";

        // Parse the HTML string
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new java.io.ByteArrayInputStream(html.getBytes()));

        // Retrieve elements
        NodeList elements = document.getElementsByTagNameNS("http://example.com/ns", "element");
        NodeList siblings = document.getElementsByTagName("sibling");

        // Validate that the sibling does not inherit the namespace
        assertEquals("http://example.com/ns", ((Element) elements.item(0)).getNamespaceURI());
        assertEquals(null, ((Element) siblings.item(0)).getNamespaceURI());
    }
}
