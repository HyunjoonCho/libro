
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.assertFalse;
import org.junit.Test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class ClosureCompilerVersionTest {

    @Test
    public void testVersionFlag() throws IOException, InterruptedException {
        ProcessBuilder processBuilder = new ProcessBuilder(
            "java", "-jar", "path/to/compiler.jar", "--version"
        );

        Process process = processBuilder.start();

        try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
            StringBuilder output = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                output.append(line).append(System.lineSeparator());
            }

            int exitCode = process.waitFor();
            String outputString = output.toString();

            // Check that the output contains version information
            assertTrue(outputString.contains("Closure Compiler"));
            assertTrue(outputString.contains("Version:"));
            assertTrue(outputString.contains("Built on:"));

            // Check that the output does not contain an error message regarding operands
            assertFalse(outputString.contains(".Option \"--version\" requires operand"));
        }
    }
}
