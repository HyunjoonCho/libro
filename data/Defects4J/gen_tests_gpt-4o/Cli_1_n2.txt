public void testGetOptionValueUsingLongOpt() {
    Options options = new Options();
    Option debug = Option.builder("d")
                         .longOpt("debug")
                         .desc("turn on debugging")
                         .build();
    options.addOption(debug);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmd = null;

    try {
        cmd = parser.parse(options, new String[]{"--debug"});
    } catch (ParseException e) {
        fail("Parsing failed. Reason: " + e.getMessage());
    }

    String debugValueLongOpt = cmd.getOptionValue("debug");
    assertNull("Expected null, as no argument was provided for --debug", debugValueLongOpt);

    assertTrue("Expected debug option to be set", cmd.hasOption("debug"));
}