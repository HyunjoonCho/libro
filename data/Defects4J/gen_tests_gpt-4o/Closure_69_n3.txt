script
function Path() {
  this.points = [];
}

Path.prototype.moveTo = function(x, y) {
  console.log('moveTo called with:', x, y);
  this.points.push({x: x, y: y, type: 'moveTo'});
};

Path.prototype.lineTo = function(x, y) {
  console.log('lineTo called with:', x, y);
  this.points.push({x: x, y: y, type: 'lineTo'});
};

function demo() {
  var path = new Path();
  var points = [[1,1], [2,2]];
  for (var i = 0; i < points.length; i++) {
    // This will lose the context of 'path' when calling the function
    (i == 0 ? path.moveTo : path.lineTo)(points[i][0], points[i][1]);
  }
}

// Run demo to observe the incorrect behavior
demo();
