
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.Parser;
import org.junit.Test;

import static org.junit.Assert.assertTrue;

public class HtmlParsingTest {

    @Test
    public void testUnadornedTextFollowingDataOnlyTags() {
        String inputHtml = 
            "<html>" +
            "<body>" +
            "<script type=\"text/javascript\">" +
            "var inside = true;" +
            "</script>" +
            "this should be outside." +
            "</body>" +
            "</html>";

        Document doc = Jsoup.parse(inputHtml, "", Parser.xmlParser());
        
        Element scriptTag = doc.selectFirst("script");
        String scriptContent = scriptTag.html().trim();
        assertTrue("Script tag contains incorrect text",
                scriptContent.equals("var inside = true;"));
        
        // Check that the text "this should be outside." is actually outside the <script> tag.
        String bodyText = doc.body().text().trim();
        boolean isTextOutside = bodyText.endsWith("this should be outside.");
        
        assertTrue("The text following the <script> tag is not in the correct position", isTextOutside);
    }
}
