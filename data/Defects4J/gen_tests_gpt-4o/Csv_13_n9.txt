
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;

import java.io.IOException;
import java.io.StringWriter;

import static org.junit.Assert.assertEquals;

public class CsvPrinterTest {

    @Test
    public void testNullStringNotEscaped() throws IOException {
        // Setup
        StringWriter writer = new StringWriter();
        CSVFormat csvFormat = CSVFormat.DEFAULT
                                   .withNullString("\\N")
                                   .withEscape('\\');
        CSVPrinter csvPrinter = new CSVPrinter(writer, csvFormat);

        // Input including a null value
        csvPrinter.printRecord("value1", null, "value3");
        csvPrinter.flush();

        // Expected behavior
        String expectedOutput = "value1,\\N,value3\n";

        // Check whether the output matches expected output
        assertEquals(expectedOutput, writer.toString());
    }
}
