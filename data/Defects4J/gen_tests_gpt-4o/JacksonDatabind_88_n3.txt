public void testMissingTypeChecksForPolymorphicTypeIds() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);

    String json = "{\"@type\":\"java.util.HashMap\",\"key1\":\"value1\",\"key2\":\"value2\"}";

    try {
        Collection<?> result = mapper.readValue(json, Collection.class);
        fail("Should not allow incompatible type assignment");
    } catch (JsonMappingException e) {
        assertTrue(e.getMessage().contains("Cannot deserialize instance"));
    }
}