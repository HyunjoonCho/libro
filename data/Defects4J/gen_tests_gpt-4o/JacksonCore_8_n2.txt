public void testInconsistentTextBufferGetTextBuffer() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    
    buffer.resetWithEmpty();
    char[] result1 = buffer.getTextBuffer();
    // First call after resetWithEmpty
    assertNull("Expected null on first call to getTextBuffer", result1);
    
    String contents = buffer.contentsAsString();
    assertEquals("", contents);
    
    char[] result2 = buffer.getTextBuffer();
    // Second call should be consistent
    assertNotNull("Expected not-null value on second call to getTextBuffer", result2);
    assertEquals("Expected empty array on second call to getTextBuffer", 0, result2.length);    
}