
import com.fasterxml.jackson.core.util.BufferRecycler;
import com.fasterxml.jackson.core.util.TextBuffer;
import org.junit.Test;
import static org.junit.Assert.*;

public class TextBufferConsistencyTest {

    @Test
    public void testGetTextBufferConsistency() {
        TextBuffer buffer = new TextBuffer(new BufferRecycler());
        
        buffer.resetWithEmpty();

        // First call to getTextBuffer()
        char[] firstCallResult = buffer.getTextBuffer();
        assertNull("Expected first call to getTextBuffer() to return null", firstCallResult);

        buffer.contentsAsString(); // ensures the buffer is initialized 

        // Second call to getTextBuffer()
        char[] secondCallResult = buffer.getTextBuffer();
        assertNotNull("Expected second call to getTextBuffer() to return non-null array", secondCallResult);
        assertEquals("Expected second call to getTextBuffer() to return an empty array", 0, secondCallResult.length);
    }
}
