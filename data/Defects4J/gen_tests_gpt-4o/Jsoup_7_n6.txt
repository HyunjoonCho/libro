
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import java.io.File;
import java.io.IOException;

import static org.junit.Assert.assertEquals;

public class JsoupMalformedTreeTest {

    @Test
    public void testMalformedTreeWithMultipleBodyElements() throws IOException {
        // Adjust the path according to your actual file location
        File inputFile = new File("path/to/jsoup-tc/your-html-file.html");

        // Parse the document using Jsoup
        Document document = Jsoup.parse(inputFile, "UTF-8");

        // Fetch all the <body> elements
        Elements bodyElements = document.getElementsByTag("body");

        // Assert that there should be only one body element as a direct child of the <html>
        assertEquals(1, bodyElements.size());

        // Also check that the body element is a direct child of html
        Element rootHtml = document.child(0);
        assertEquals("html", rootHtml.tagName());
        Elements directBodyChildren = rootHtml.children().select("body");
        assertEquals(1, directBodyChildren.size());
    }
}
