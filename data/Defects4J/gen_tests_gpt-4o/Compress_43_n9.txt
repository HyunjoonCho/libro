public void testZipVersionNeededToExtractMismatch() throws IOException {
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    ZipArchiveOutputStream zipOutput = new ZipArchiveOutputStream(new BufferedOutputStream(byteArrayOutputStream));

    ZipArchiveEntry entry = new ZipArchiveEntry("test.txt");
    entry.setMethod(ZipEntry.DEFLATED);
    zipOutput.putArchiveEntry(entry);
    zipOutput.write("some test data".getBytes());
    zipOutput.closeArchiveEntry();
    zipOutput.close();

    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(byteArrayOutputStream.toByteArray());
    ZipFile zipFile = new ZipFile(new java.io.File("test.zip"));
    
    for (ZipArchiveEntry e : zipFile.getEntries()) {
        int localVersion = e.getPlatform();
        int centralVersion = e.getVersionMadeBy();
        
        assertEquals("Mismatch in version needed to extract between local header and central directory for entry: "
                + e.getName(), centralVersion, localVersion);
    }
    zipFile.close();
}