public void testCompilerCrashOnNonStringGoogProvide() {
    try {
        // Assuming there's a method compileCode which takes a JavaScript code string and compiles it
        compileCode("goog.provide(mine.Spike);");
        fail("Expected a diagnostic error about non-string argument in goog.provide");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}