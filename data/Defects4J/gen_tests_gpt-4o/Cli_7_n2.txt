public void testRequiredOptions() {
    CommandLine line = parseOptions("-c", "arg");
    Options options = new Options();
    options.addOption("h", false, "display help").setRequired(true);
    options.addOption("c", true, "config").setRequired(true);

    try {
        List<Option> missingOptions = options.getMissingOptions(line);
        assertEquals("Unexpected missing options", Collections.singletonList("-h"), missingOptions);
    } catch (Exception e) {
        fail("Exception was not expected: " + e.getMessage());
    }
}