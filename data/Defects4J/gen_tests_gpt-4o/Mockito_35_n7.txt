
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.exceptions.base.MockitoException;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.modules.junit4.PowerMockRunner;

import static org.mockito.Mockito.*;

@RunWith(PowerMockRunner.class)
public class PowerMockitoMockingTest {

    // A sample final class that we will attempt to mock
    public final class FinalClass {
        public String sayHello() {
            return "Hello, World!";
        }
    }

    @Test(expected = MockitoException.class) // Adjust expected exception if behavior changed in library
    public void testMockingFinalClass() {
        // Attempting to mock a final class without appropriate configuration
        FinalClass finalClassMock = mock(FinalClass.class);

        // This should throw a Mockito Exception or potentially lead to a NPE
        when(finalClassMock.sayHello()).thenReturn("Hi, Universe!");
    }
}
