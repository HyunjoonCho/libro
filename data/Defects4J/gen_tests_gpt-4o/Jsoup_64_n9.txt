
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;
import static org.junit.Assert.*;

public class JsoupSelfClosingTest {

    @Test
    public void testStyleSelfClosingTag() {
        String html = 
            "<html>\n" +
            "<head>\n" +
            "    <style />   <!-- < - - this is the culprit -->\n" +
            "</head>\n" +
            "<body>\n" +
            "    <p>Whatever</p>\n" +
            "</body>\n" +
            "</html>";

        Document doc = Jsoup.parse(html);
        String output = doc.body().html();

        // Check that the body does not contain HTML-escaped tags
        assertFalse("Output should not be HTML-escaped", output.contains("&lt;"));
        assertTrue("Output should contain p tag", output.contains("<p>Whatever</p>"));
    }

    @Test
    public void testTitleSelfClosingTag() {
        String html = 
            "<html>\n" +
            "<head>\n" +
            "    <title />\n" +
            "</head>\n" +
            "<body>\n" +
            "    <p>Whatever</p>\n" +
            "</body>\n" +
            "</html>";

        Document doc = Jsoup.parse(html);
        String output = doc.body().html();

        // Check that the body does not contain HTML-escaped tags
        assertFalse("Output should not be HTML-escaped", output.contains("&lt;"));
        assertTrue("Output should contain p tag", output.contains("<p>Whatever</p>"));
    }

    @Test
    public void testScriptSelfClosingTag() {
        String html = 
            "<html>\n" +
            "<head>\n" +
            "    <script />\n" +
            "</head>\n" +
            "<body>\n" +
            "    <p>Whatever</p>\n" +
            "</body>\n" +
            "</html>";

        Document doc = Jsoup.parse(html);
        String output = doc.body().html();

        // Ensure correct parsing with script
        assertFalse("Output should not be HTML-escaped", output.contains("&lt;"));
        assertTrue("Output should contain p tag", output.contains("<p>Whatever</p>"));
    }

}
