
import org.junit.Test;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.ByteArrayInputStream;

import static org.junit.Assert.assertEquals;

public class NamespaceInheritanceTest {

    @Test
    public void testNamespaceInheritance() throws Exception {
        // Sample HTML content that demonstrates the issue
        String htmlContent = "<root xmlns:ns=\"http://example.com/ns\">"
                           + "    <ns:element1>Content 1</ns:element1>"
                           + "    <element2>Content 2</element2>"
                           + "</root>";

        // Parse the HTML content
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new ByteArrayInputStream(htmlContent.getBytes()));

        // Obtain the elements
        NodeList element1List = document.getElementsByTagNameNS("http://example.com/ns", "element1");
        NodeList element2List = document.getElementsByTagName("element2");

        // Check that the first element has the correct namespace
        assertEquals(1, element1List.getLength());
        Element element1 = (Element) element1List.item(0);
        assertEquals("http://example.com/ns", element1.getNamespaceURI());

        // Check that the second element does not incorrectly inherit the namespace
        assertEquals(1, element2List.getLength());
        Element element2 = (Element) element2List.item(0);
        assertEquals(null, element2.getNamespaceURI());
    }
}
