public void testExtendedMessageFormatOutOfMemory() {
    Map<String, Object> formatRegistry = new HashMap<>();
    formatRegistry.put(DummyFormatFactory.DUMMY_FORMAT, new DummyFormatFactory());

    ExtendedMessageFormat messageFormat = new ExtendedMessageFormat("it''s a {dummy} 'test'!", formatRegistry);
    String formattedPattern = messageFormat.format(new String[] {"great"});

    assertNotNull(formattedPattern);
    assertEquals("it's a great test!", formattedPattern);
}