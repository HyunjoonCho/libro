public void testArchiveOutputStreamFinishMethodSafety() {
    ArchiveOutputStream archiveOutputStream = new ArchiveOutputStream() {
        @Override
        public void putArchiveEntry(ArchiveEntry archiveEntry) throws IOException {}

        @Override
        public void closeArchiveEntry() throws IOException {}

        @Override
        public void finish() throws IOException {
            throw new IOException("Finished externally should not be allowed");
        }

        @Override
        public ArchiveEntry createArchiveEntry(File file, String entryName) throws IOException {
            return null;
        }
    };

    try {
        archiveOutputStream.finish(); // Attempting to call finish externally
        fail("Calling finish() externally should throw an IOException.");
    } catch (IOException e) {
        assertEquals("Finished externally should not be allowed", e.getMessage());
    }
}