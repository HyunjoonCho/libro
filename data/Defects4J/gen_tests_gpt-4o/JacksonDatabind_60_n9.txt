public void testPolymorphicTypeLostWithJsonValue() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    mapper.enableDefaultTyping();

    CommandAPDU original = new CommandAPDU(new byte[]{0, 1, 2, 3});

    // Serialize
    String json = mapper.writeValueAsString(original);

    // Deserialize
    CommandAPDU deserialized = mapper.readValue(json, CommandAPDU.class);

    // Assert that the deserialized object's type is CommandAPDU and not byte[]
    assertTrue(deserialized instanceof CommandAPDU);

    // Compare deserialized object data with original
    assertArrayEquals(original.getBytes(), deserialized.getBytes());
}