
import org.junit.Test;
import static org.junit.Assert.*;

public class TarUtilsTest {

    @Test
    public void testParseNameWithSpecialCharacters() throws Exception {
        // Given a buffer with special characters encoded beyond 0-127
        byte[] buffer = new byte[] {
            48, 51, 48, 50, 45, 48, 54, 48, 49, 45, 51, (byte) 177, (byte) 177, (byte) 177, 
            70, 48, 54, (byte) 177, 87, 50, 50, 48, (byte) 177, 90, 66, (byte) 177, 
            76, 65, 76, 65, 76, 65, (byte) 177, (byte) 177, (byte) 177, (byte) 177, 
            (byte) 177, (byte) 177, (byte) 177, (byte) 177, (byte) 177, (byte) 177, 67, 65, 78, 
            (byte) 177, (byte) 177, 68, 67, (byte) 177, (byte) 177, (byte) 52, (byte) 177, 
            48, 54, 48, 51, 48, 50, (byte) 177, 77, 79, 69, 46, 109, 111, 100, 101, 108
        };

        // When parsing the name using TarUtils.parseName
        String parsedName = TarUtils.parseName(buffer);

        // Then the parsed name with incorrect handling would not match the expected name
        String expectedName = "0302-0601-3±±±F06±W220±ZB±LALALA±±±±±±±±±±CAN±±DC±±04±060302±MOE.model";
        
        assertEquals("Parsed name should match the expected name with proper special character handling", expectedName, parsedName);
    }
}
