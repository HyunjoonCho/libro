
import org.jsoup.Connection;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.jsoup.helper.HttpConnection;
import org.jsoup.parser.Tag;

import java.io.IOException;
import java.util.List;

public class JsoupBugTest {

    public static void main(String[] args) throws IOException {
        // Simulating a test setup

        // Create a mock HTML document with a form and an input element
        Document doc = Document.createShell("");
        Element form = new Element(Tag.valueOf("form"), "");
        doc.body().appendChild(form);
        form.appendElement("input").attr("name", "alpha").attr("value", "123");
        form.appendElement("input").attr("name", "beta").attr("value", "456");

        // Print initial document with input[name=alpha]
        System.out.println("Original Document:");
        System.out.println(doc);

        // Remove the input[name=alpha]
        Elements inputs = doc.select("input[name=alpha]");
        if (!inputs.isEmpty()) {
            inputs.first().remove();
        }

        // Print document after removing input[name=alpha]
        System.out.println("\nDocument after removing input[name=alpha]:");
        System.out.println(doc);

        // Access the form element
        Element formElement = doc.select("form").first();
        
        // Print form after removing input[name=alpha]
        System.out.println("\nForm Element:");
        System.out.println(formElement);

        // Retrieve form data
        // Note: In actual Jsoup usage, form.formData() should be used,
        // here it is assumed to be simulated due to missing real connection setup
        List<Connection.KeyVal> data = ((HttpConnection.Request) HttpConnection.connect("").request())
                .formData(formElement);

        // Print form data (should not include "alpha")
        System.out.println("\nForm Data:");
        for (Connection.KeyVal keyVal : data) {
            System.out.println(keyVal.key() + "=" + keyVal.value());
        }
    }
}
