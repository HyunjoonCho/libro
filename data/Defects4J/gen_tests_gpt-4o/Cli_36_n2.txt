public void testSetOptionComparatorWithNull() {
    OptionGroup group = new OptionGroup();
    Option h = Option.builder("h").build();
    Option s = Option.builder("s").build();
    Option b = Option.builder("b").build();
    Option t = Option.builder("t").build();
    group.addOption(h)
         .addOption(s)
         .addOption(b)
         .addOption(t);
    
    Options options = new Options();
    options.addOptionGroup(group);
    options.addOption(Option.builder("o").build());

    HelpFormatter formatter = new HelpFormatter();
    formatter.setOptionComparator(null);

    ByteArrayOutputStream out = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(out, true);
    PrintStream oldOut = System.out;
    System.setOut(ps);
    
    try {
        formatter.printHelp("cmd", "", options, null);
        System.out.flush();
        String output = out.toString();
        
        int indexGroupH = output.indexOf("-h");
        int indexGroupS = output.indexOf("-s");
        int indexGroupB = output.indexOf("-b");
        int indexGroupT = output.indexOf("-t");

        assertTrue(indexGroupH < indexGroupS && indexGroupS < indexGroupB && indexGroupB < indexGroupT);
    } finally {
        System.setOut(oldOut);
    }
}