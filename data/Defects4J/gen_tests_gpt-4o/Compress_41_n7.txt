public void testGetNextZipEntryInvalidEntryDetection() throws IOException {
    byte[] invalidZipData = {80, 75, 3, 4, 20, 0, 0, 0, 8, 0, 103, 104, 17, 50, 0, 0, 0, 0, 123, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 11, 0, 'i', 'n', 'v', 'a', 'l', 'i', 'd', '.', 't', 'x', 't'};
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(invalidZipData);
    ZipArchiveInputStream zipInputStream = new ZipArchiveInputStream(byteArrayInputStream);

    try {
        while ((zipInputStream.getNextZipEntry()) != null) {
            // Intentional no-operation, trying to go through entries
        }
        fail("Expected an exception due to an invalid zip entry");
    } catch (ZipException e) {
        assertEquals("Invalid zip entry in archive", e.getMessage());
    } finally {
        zipInputStream.close();
    }
}