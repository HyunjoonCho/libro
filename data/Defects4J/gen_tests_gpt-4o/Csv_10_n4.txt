public void testCSVFormatWithHeader() throws IOException {
    Path tempFile = Files.createTempFile("data", ".csv");
    try (BufferedWriter writer = Files.newBufferedWriter(tempFile)) {
        CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(writer);
        csvPrinter.printRecord(42);
        csvPrinter.close();
    }

    List<String> lines = Files.readAllLines(tempFile);
    assertEquals("x", lines.get(0).trim());
    assertEquals("42", lines.get(1).trim());
}