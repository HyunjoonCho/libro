
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class GoogScopeTest {

    @Test
    public void testPrivateTopLevelFunctionInGoogScope() {
        String jsCode = 
            "goog.scope(function() {\n" +
            "   /** @private */\n" +
            "   function test() {}\n" +
            "});";

        // Set up the closure compiler
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();

        // Compile the source code
        SourceFile extern = SourceFile.fromCode("externs.js", ""); // Empty externs file
        SourceFile input = SourceFile.fromCode("input.js", jsCode);
        Result result = compiler.compile(extern, input, options);

        // Assert that compilation succeeds without errors
        assertTrue("Compilation should succeed without errors", result.success);
    }
}
