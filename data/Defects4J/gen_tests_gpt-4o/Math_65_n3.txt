public void testChiSquareCalculation() {
    // Assuming AbstractLeastSquares is a class we can create an instance of 
    // and we have a method to add or set residuals and weights
    AbstractLeastSquares als = new AbstractLeastSquaresImplementation();
    
    // Set up residuals and weights
    double[] residuals = {1.0, 2.0, 3.0};
    double[] weights = {1.0, 0.5, 2.0};
    
    als.setResiduals(residuals);
    als.setResidualsWeights(weights);
    
    // Calculate the chi-square
    double expectedChiSquare = (1.0 * 1.0 * 1.0) + (0.5 * 2.0 * 2.0) + (2.0 * 3.0 * 3.0);
    assertEquals(expectedChiSquare, als.getChiSquare(), 1e-9);
}