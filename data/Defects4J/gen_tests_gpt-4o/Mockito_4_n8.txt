
import org.junit.Test;
import org.mockito.Mockito;
import static org.mockito.Mockito.*;

public class MockVerificationTest {

    interface SomeService {
        String performOperation();
    }

    @Test(expected = ClassCastException.class)
    public void testMockWithDefaultAnswerThrowsClassCastException() {
        // Create a mock of SomeService with a default answer
        SomeService service = mock(SomeService.class, (invocation) -> {
            // Default answer returns the class reference which leads to ClassCastException
            return invocation.getMock().getClass();
        });

        // Invoke method on the mock
        service.performOperation();

        // Verify zero interactions to reproduce the failure
        verifyZeroInteractions(service);
    }
}
