
import org.jsoup.Connection;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.jsoup.select.FormElement;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class FormElementTest {

    @Test
    public void testCheckboxWithoutValue() {
        final String html = "<html>\n" +
            "    <head>\n" +
            "        <title>Test</title>\n" +
            "    </head>\n" +
            "    <body>\n" +
            "    <form name=\"myForm\" method=\"POST\">\n" +
            "        <input type=\"checkbox\" name=\"testCheckBox\" checked=\"checked\" /> Something<br/>\n" +
            "        <input type=\"submit\" value=\"Submit\" />\n" +
            "    </form>\n" +
            "    </body>\n" +
            "</html>";

        final Document document = Jsoup.parse(html);
        final FormElement formElement = (FormElement) document.select("form[name=myForm]").first();

        List<Connection.KeyVal> formData = formElement.formData();
        boolean foundTestCheckBox = false;

        for (Connection.KeyVal keyVal : formData) {
            if (keyVal.key().equals("testCheckBox")) {
                foundTestCheckBox = true;
                assertEquals("on", keyVal.value());
            }
        }
        
        assertTrue("Checkbox 'testCheckBox' should be found in form data", foundTestCheckBox);
    }
}
