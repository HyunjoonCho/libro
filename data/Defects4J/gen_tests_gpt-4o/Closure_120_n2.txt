script
// Self-contained test case that reproduces the bug
function testOptimizedCodeBehaviour() {
    var uid;

    function reset() {
        uid = Math.random();
    }

    function doStuff() {
        reset();
        var _uid = uid; // Capture the current value of uid

        if (uid < 0.5) {
            doStuff();
        }

        // If this condition is true, it indicates a bug due to improper optimization
        if (_uid !== uid) {
            console.log('ERROR: reset() was called');
            return true;
        }
        return false;
    }

    // Running the test to check for incorrect behavior
    var errorOccurred = doStuff();

    // Assert that the error did NOT occur
    if (errorOccurred) {
        console.error('Test failed: uid values unexpectedly changed.');
    } else {
        console.log('Test passed: uid values remained consistent.');
    }
}

// Execute the test
testOptimizedCodeBehaviour();
