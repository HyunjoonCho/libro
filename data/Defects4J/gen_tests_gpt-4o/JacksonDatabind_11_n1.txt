public void testDeserializationOfLocallyDeclaredGenericType() {
    Something original = new Something();
    
    Ruleform entity = new SomeRuleformImplementation();
    original.setEntity(entity);
    
    // Serialization
    try {
        ByteArrayOutputStream byteOutStream = new ByteArrayOutputStream();
        ObjectOutputStream objectOutStream = new ObjectOutputStream(byteOutStream);
        objectOutStream.writeObject(original);

        // Deserialization
        ByteArrayInputStream byteInStream = new ByteArrayInputStream(byteOutStream.toByteArray());
        ObjectInputStream objectInStream = new ObjectInputStream(byteInStream);
        Something deserialized = (Something) objectInStream.readObject();

        Ruleform retrievedEntity = deserialized.getEntity();
        assertNotNull("Entity should not be null after deserialization", retrievedEntity);
        assertEquals("Deserialized entity class should match original entity class",
                entity.getClass(), retrievedEntity.getClass());
    } catch (IOException | ClassNotFoundException e) {
        fail("Exception during serialization/deserialization: " + e.getMessage());
    }
}