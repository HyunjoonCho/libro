public void testJsonGeneratorInvalidState() {
    JsonFactory factory = new JsonFactory();
    try {
        JsonGenerator generator = factory.createGenerator(new StringWriter());
        generator.writeStartObject();
        generator.writeString("valueWithoutFieldName");
        fail("Expected an IllegalStateException to be thrown");
    } catch (IllegalStateException e) {
        assertTrue(e.getMessage().contains("writeFieldName()"));
    } catch (IOException e) {
        fail("Did not expect an IOException to be thrown");
    }
}