public void testClosureRemovesNeededCode() {
    String input = "Math.blah=function(test){test.a=5;}; var test = new Object(); Math.blah(test);";
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.SIMPLE_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    Compiler compiler = new Compiler();
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("testcode.js", input), options);
    String output = compiler.toSource();
    assertTrue(output.contains("Math.blah(test);"));
}