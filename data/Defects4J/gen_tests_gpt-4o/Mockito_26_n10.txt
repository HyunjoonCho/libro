public void testInjectMocksWithFinalFields() {
    class SomeClass {
        @InjectMocksDependency
        private final Dependency dependency;

        SomeClass(Dependency dependency) {
            this.dependency = dependency;
        }

        public Dependency getDependency() {
            return dependency;
        }
    }

    class Dependency {
    }

    Dependency mockDependency = mock(Dependency.class);
    SomeClass someObject = new SomeClass(mockDependency);
    MockitoAnnotations.initMocks(this);

    assertSame(mockDependency, someObject.getDependency());
}