public void testCompilerModuleResolution() {
    String[] args = {
        "--transform_amd_modules",
        "--process_common_js_modules",
        "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js",
        "--js=Bar.js",
        "--js=lib/Foo.js"
    };
    
    Compiler compiler = new Compiler();
    Result result = compiler.compile(Arrays.asList(args), ImmutableList.of(), new CompilerOptions());

    assertFalse("Expected compiler to fail due to missing module$lib$Foo", result.success);
    assertTrue("Expected a specific error message", compiler.getErrorManager().toString().contains("required entry point \"module$lib$Foo\" never provided"));
}