public void testJsonGenerationExceptionWithSurrogates() throws IOException {
    String problematicInput = "{\"text\":\"xxxxxxx" + new String(Character.toChars(0x1F600)) + "\"}";
    
    StringWriter writer = new StringWriter();
    JsonFactory factory = new JsonFactory();
    JsonGenerator generator = factory.createGenerator(writer);
    
    try {
        generator.writeRaw(problematicInput);
        generator.flush();
    } catch (JsonGenerationException e) {
        assertTrue(e.getMessage().contains("Split surrogate on writeRaw() input"));
    } finally {
        generator.close();
    }
}