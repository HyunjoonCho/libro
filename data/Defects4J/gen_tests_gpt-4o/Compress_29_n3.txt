public void testArchiveStreamFactoryEncoding() throws Exception {
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    String encoding = "UTF-8";

    // ArjArchiveInputStream
    InputStream arjInputStream = new FileInputStream("test.arj");
    ArjArchiveInputStream arjStream = (ArjArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.ARJ, arjInputStream, encoding);
    assertEquals(encoding, arjStream.getEncoding());

    // CpioArchiveInputStream
    InputStream cpioInputStream = new FileInputStream("test.cpio");
    CpioArchiveInputStream cpioStream = (CpioArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.CPIO, cpioInputStream, encoding);
    assertEquals(encoding, cpioStream.getEncoding());

    // DumpArchiveInputStream
    InputStream dumpInputStream = new FileInputStream("test.dump");
    DumpArchiveInputStream dumpStream = (DumpArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.DUMP, dumpInputStream, encoding);
    assertEquals(encoding, dumpStream.getEncoding());
    
    // JarArchiveInputStream
    InputStream jarInputStream = new FileInputStream("test.jar");
    JarArchiveInputStream jarStream = (JarArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.JAR, jarInputStream, encoding);
    assertEquals(encoding, jarStream.getEncoding());

    // JarArchiveOutputStream
    OutputStream jarOutputStream = new FileOutputStream("output.jar");
    JarArchiveOutputStream jarOutput = (JarArchiveOutputStream) factory.createArchiveOutputStream(ArchiveStreamFactory.JAR, jarOutputStream, encoding);
    assertEquals(encoding, jarOutput.getEncoding());
}