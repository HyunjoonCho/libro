public void testJsonMappingExceptionDoubleLocation() {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"value\": \"notAnInteger\"}";
    try {
        mapper.readValue(json, TestClass.class);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        String message = e.getMessage();
        int firstIndex = message.indexOf(" at [source]");
        int lastIndex = message.lastIndexOf(" at [source]");
        assertTrue(firstIndex != -1);
        assertTrue(firstIndex == lastIndex);
    }
}

static class TestClass {
    public int value;
}