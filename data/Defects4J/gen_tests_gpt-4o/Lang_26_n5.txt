
import org.apache.commons.lang3.time.FastDateFormat;
import org.junit.Test;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;

import static org.junit.Assert.assertEquals;

public class FastDateFormatWeekBugTest {

    @Test
    public void testFastDateFormatWeekLocaleBug() {
        // Set default locale to en_US
        Locale.setDefault(new Locale("en", "US"));

        // Create locale for testing
        Locale svLocale = new Locale("sv", "SE");

        // Set up calendar to target the specific date
        Calendar calendar = Calendar.getInstance();
        calendar.set(2010, Calendar.JANUARY, 1, 12, 0, 0);  // January 1, 2010
        Date date = calendar.getTime();

        // Create both formatters with the specified locale
        FastDateFormat fdf = FastDateFormat.getInstance("EEEE', week 'ww", svLocale);
        SimpleDateFormat sdf = new SimpleDateFormat("EEEE', week 'ww", svLocale);

        // Get their formatted outputs
        String fastDateFormatOutput = fdf.format(date);
        String simpleDateFormatOutput = sdf.format(date);

        // Print outputs for debugging purposes
        System.out.println("FastDateFormat: " + fastDateFormatOutput);
        System.out.println("SimpleDateFormat: " + simpleDateFormatOutput);

        // Assert that they should match
        assertEquals("SimpleDateFormat and FastDateFormat should produce the same week number",
                     simpleDateFormatOutput, fastDateFormatOutput);
    }
}
