
import org.apache.commons.jxpath.JXPathContext;
import org.apache.commons.jxpath.JXPathException;
import org.apache.commons.jxpath.xml.DocumentContainer;
import org.junit.Test;

import java.util.Collections;

public class JXPathBugReproductionTest {

    @Test(expected = JXPathException.class)
    public void testUnionOfVariableAndNode() {
        // Setup an XML data model. This example assumes a minimal XML string.
        String xmlData = "<MAIN><A>value</A></MAIN>";
        // Create a DocumentContainer for the XML data
        DocumentContainer container = new DocumentContainer(xmlData);
        // Create a JXPathContext with the XML as root
        JXPathContext context = JXPathContext.newContext(container);

        // Define a variable '$var' in the context
        context.getVariables().declareVariable("var", "dummyValue");

        // Attempt to select nodes with a union containing a variable and an XML node
        // This is expected to throw a JXPathException as described in the bug report
        context.selectNodes("$var | /MAIN/A");
    }
}
