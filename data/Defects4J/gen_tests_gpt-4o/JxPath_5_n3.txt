public void testUnionOfVariableAndNode() {
    JXPathContext context = JXPathContext.newContext(new Object());
    context.getVariables().declareVariable("var", "testValue");
    Exception exception = null;
    try {
        context.selectNodes("$var | /MAIN/A");
    } catch (JXPathException e) {
        exception = e;
    }
    assertNotNull("Expected JXPathException to be thrown", exception);
    assertTrue(exception.getMessage().contains("Cannot compare pointers that do not belong to the same tree"));
}