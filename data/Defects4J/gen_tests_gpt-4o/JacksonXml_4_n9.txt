
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.ser.ToXmlGenerator;
import org.junit.Test;

import java.io.StringWriter;

import static org.junit.Assert.assertTrue;

public class XmlSerializerProviderTest {

    @Test
    public void testWithRootNameConfigForNullSerialization() throws Exception {
        XmlMapper xmlMapper = new XmlMapper();
        xmlMapper = xmlMapper.setConfig(xmlMapper.getSerializationConfig().withRootName("CustomRoot"));

        StringWriter writer = new StringWriter();
        ToXmlGenerator generator = xmlMapper.getFactory().createGenerator(writer);

        xmlMapper.writeValue(generator, null);

        String xmlOutput = writer.toString();
        System.out.println("Serialized XML: " + xmlOutput);

        // Verify that the custom root name is used instead of ROOT_NAME_FOR_NULL
        assertTrue("Expected root element to be <CustomRoot>", xmlOutput.contains("<CustomRoot"));
    }
}
