
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class ClosureCompilerBugTest {

    public static void main(String[] args) throws ScriptException {
        String script = 
            "function foo() {" +
            "   var arr = [1, 2, 3, 4, 5];" +
            "   for (var i = 0, l = arr.length; i < l; i++) {" +
            "       var j = arr[i];" +
            "       (function() {" +
            "           var k = j;" +
            "           setTimeout(function() { console.log(k); }, 0);" +
            "       })();" +
            "   }" +
            "}" +
            "foo();";

        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");

        // Execution of the JavaScript code
        engine.eval(script);
        
        // Note: We expect the output to be the numbers 1 through 5 correctly logged.
        // Instead, due to the bug mentioned, there may be unexpected behavior.
    }
}
