public void testJSCUsedGlobalThisWarning() {
    String code = 
        "var NS = {\n" +
        "    read: function() {\n" +
        "        return this.foo;\n" +
        "    },\n" +
        "    write: function() {\n" +
        "        this.foo = 123;\n" +
        "    }\n" +
        "};\n" +
        "NS.write2 = function() {\n" +
        "    this.foo = 123;\n" +
        "};";

    CompilerOptions options = new CompilerOptions();
    options.setWarningLevel(DiagnosticGroups.GLOBAL_THIS, CheckLevel.WARNING);

    TestCompiler testCompiler = new TestCompiler(options);
    testCompiler.compileAndCheckWarnings(code, RhinoErrorReporter.UNDEFINED_GLOBAL_THIS);
}