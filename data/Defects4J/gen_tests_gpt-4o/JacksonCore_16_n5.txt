public void testJsonParserSequenceSkipsToken() throws IOException {
    String json1 = "{\"key1\":\"value1\"}";
    String json2 = "{\"key2\":\"value2\"}";

    JsonFactory jsonFactory = new JsonFactory();
    JsonParser parser1 = jsonFactory.createParser(json1);
    JsonParser parser2 = jsonFactory.createParser(json2);
    JsonParser sequenceParser = JsonParserSequence.createFlattened(parser1, parser2);

    assertEquals(JsonToken.START_OBJECT, sequenceParser.nextToken());
    assertEquals(JsonToken.FIELD_NAME, sequenceParser.nextToken());
    assertEquals("key1", sequenceParser.getCurrentName());
    assertEquals(JsonToken.VALUE_STRING, sequenceParser.nextToken());
    assertEquals("value1", sequenceParser.getText());
    assertEquals(JsonToken.END_OBJECT, sequenceParser.nextToken());

    assertEquals(JsonToken.START_OBJECT, sequenceParser.nextToken());
    assertEquals(JsonToken.FIELD_NAME, sequenceParser.nextToken());
    assertEquals("key2", sequenceParser.getCurrentName());
    assertEquals(JsonToken.VALUE_STRING, sequenceParser.nextToken());
    assertEquals("value2", sequenceParser.getText());
    assertEquals(JsonToken.END_OBJECT, sequenceParser.nextToken());
    assertNull(sequenceParser.nextToken()); // No more tokens expected
}