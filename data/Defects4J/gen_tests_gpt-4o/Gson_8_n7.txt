
import com.google.gson.Gson;
import com.google.gson.JsonSyntaxException;
import org.junit.Test;

public class JniErrorTest {

    static class FeedItem {
        String feedItemChannel;
        boolean isDeleted;
        java.util.concurrent.locks.Lock mutex;
        long[] operationSetQueue;
        Object saveEvent;
        State state;
        TaskQueue taskQueue;

        static class State {
            String className;
            long createdAt;
            boolean isComplete;
            String objectId;
            ServerData serverData;
            long updatedAt;
        }

        static class ServerData {
            String feedTopic;
            String createdBy;
            int feedComments;
            String feedQuestion;
            String feedDesc;
        }

        static class TaskQueue {
            LockWrapper lock;

            static class LockWrapper {
                Sync sync;

                static class Sync {
                    int state;
                }
            }
        }
    }

    @Test(expected = JsonSyntaxException.class)
    public void testJniErrorInGson() {
        String jsonString = "{"
                + "\"feedItemChannel\":\"mdldsrgXN1\","
                + "\"isDeleted\":false,"
                + "\"mutex\":{},"
                + "\"operationSetQueue\":[],"
                + "\"saveEvent\":{\"callbacks\":[]},"
                + "\"state\":{"
                + "    \"className\":\"FeedItem\","
                + "    \"createdAt\":1458798818385,"
                + "    \"isComplete\":true,"
                + "    \"objectId\":\"mdldsrgXN1\","
                + "    \"serverData\":{"
                + "         \"feedTopic\":\"TestTopic\","
                + "         \"createdBy\":\"KXTQtpfBSW\","
                + "         \"feedComments\":2,"
                + "         \"feedQuestion\":\"Test Question \","
                + "         \"feedDesc\":\"Test \""
                + "    },"
                + "    \"updatedAt\":1458803553636"
                + "},"
                + "\"taskQueue\":{"
                + "    \"lock\":{"
                + "        \"sync\":{"
                + "            \"state\":0"
                + "        }"
                + "    }"
                + "}"
                + "}";

        Gson gson = new Gson();
        gson.fromJson(jsonString, FeedItem.class);
    }
}
