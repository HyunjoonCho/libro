public void testAsPathWithDefaultNamespaceReset() {
    String xmlInput = "<?xml version=\"1.0\"?>"
                    + "<b:foo xmlns:b=\"bla\" xmlns=\"test111\">"
                    + "<b:bar>a</b:bar>"
                    + "<test xmlns=\"\"></test>"
                    + "</b:foo>";

    try {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc = builder.parse(new InputSource(new StringReader(xmlInput)));
        
        JXPathContext context = JXPathContext.newContext(doc);
        
        // The following line should not cause an endless loop
        String path = (String) context.getPointer("/b:foo/test").asPath();
        
        // The expected path should not contain "null"
        assertFalse("Path contains 'null'", path.contains("null"));
    } catch (Exception e) {
        fail("Test failed due to an exception: " + e.getMessage());
    }
}