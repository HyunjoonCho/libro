
import org.junit.Test;
import static org.junit.Assert.*;

public class JavaScriptCompressorTest {

    @Test
    public void testForEachKeywordPreservation() {
        String inputCode = 
            "contactcenter.screenpop.updatePopStatus = function(stamp, status) {" +
            "  for each (var curTiming in this.timeLog.timings) {" +
            "    if (curTiming.callId == stamp) {" +
            "      curTiming.flag = status;" +
            "      break;" +
            "    }" +
            "  }" +
            "};";

        String expectedOutputCode =
            "contactcenter.screenpop.updatePopStatus=function(stamp,status){" +
            "for each(var curTiming in this.timeLog.timings)" +
            "if(curTiming.callId==stamp){" +
            "curTiming.flag=status;" +
            "break;" +
            "}};";
        
        JavaScriptCompressor compressor = new JavaScriptCompressor();
        String compressedCode = compressor.compress(inputCode);

        assertEquals(expectedOutputCode, compressedCode);
    }
}
