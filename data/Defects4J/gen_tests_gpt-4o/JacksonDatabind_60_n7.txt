public void testPolymorphicTypeLostWithJsonValue() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    mapper.enableDefaultTyping();

    byte[] apdu = {0, 1, 2, 3, 4, 5};
    CommandAPDU original = new CommandAPDU(apdu);
    
    String serialized = mapper.writeValueAsString(original);
    CommandAPDU deserialized = mapper.readValue(serialized, CommandAPDU.class);

    assertTrue(original.getClass().equals(deserialized.getClass()));
    assertArrayEquals(original.getBytes(), deserialized.getBytes());
}