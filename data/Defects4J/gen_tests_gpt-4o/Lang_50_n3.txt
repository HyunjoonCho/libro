
import static org.junit.Assert.assertEquals;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.apache.commons.lang3.time.FastDateFormat;
import org.junit.Test;

public class FastDateFormatLocaleTest {

    @Test
    public void testGetDateInstanceLocaleChange() {
        // Set default locale to US
        Locale defaultLocale = Locale.getDefault();
        try {
            Locale.setDefault(Locale.US);

            // Get the FastDateFormat instance with the default locale
            FastDateFormat usFormat = FastDateFormat.getDateInstance(DateFormat.SHORT, null);

            // Change the default locale to France
            Locale.setDefault(Locale.FRANCE);

            // Get the FastDateFormat instance again with the new default locale
            FastDateFormat frFormat = FastDateFormat.getDateInstance(DateFormat.SHORT, null);

            // Verify that the two formats are different due to locale change
            Date date = new Date();
            assertEquals(usFormat.format(date), FastDateFormat.getInstance("MM/dd/yy", Locale.US).format(date));
            assertEquals(frFormat.format(date), FastDateFormat.getInstance("dd/MM/yy", Locale.FRANCE).format(date));
        } finally {
            // Restore the original default locale
            Locale.setDefault(defaultLocale);
        }
    }
}
