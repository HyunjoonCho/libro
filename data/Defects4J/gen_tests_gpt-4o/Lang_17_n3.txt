
import org.apache.commons.text.StringEscapeUtils;
import org.junit.Test;

import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

import static org.junit.Assert.assertEquals;

public class StringEscapeUtilsTest {

    @Test
    public void testEscapeXmlSupplementaryChars() throws UnsupportedEncodingException {
        String str1 = "\uD842\uDFB7" + "A"; // Supplementary character followed by 'A'
        String str2 = StringEscapeUtils.escapeXml11(str1); // Using escapeXml11 since escapeXml is deprecated

        // Validate that str1 and str2 are equal
        assertEquals(str1, str2);

        // Verify their encoded values in UTF-16BE are equal
        assertEquals(URLEncoder.encode(str1, "UTF-16BE"), URLEncoder.encode(str2, "UTF-16BE"));
    }
}
