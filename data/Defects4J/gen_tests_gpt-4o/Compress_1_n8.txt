public void testCpioUnexpectedEOF() throws IOException {
    final File input = getFile("cmdcreated.cpio");
    final InputStream in = new FileInputStream(input);
    CpioArchiveInputStream cin = new CpioArchiveInputStream(in);

    try {
        CpioArchiveEntry entry;
        while ((entry = (CpioArchiveEntry) cin.getNextCPIOEntry()) != null) {
            File target = new File("outputDir", entry.getName());
            try (OutputStream out = new FileOutputStream(target)) {
                IOUtils.copy(cin, out); // Note: IOUtils.copy should use 'cin' not 'in'
            }
        }
    } catch (EOFException e) {
        fail("Unexpected EOFException");
    } finally {
        cin.close();
    }
}