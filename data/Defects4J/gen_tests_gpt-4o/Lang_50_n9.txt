
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

import org.apache.commons.lang3.time.FastDateFormat;
import org.junit.Test;
import static org.junit.Assert.*;

public class FastDateFormatBugTest {

    @Test
    public void testLocaleChangeAffectsFastDateFormat() {
        // Set default locale to US
        Locale.setDefault(Locale.US);
        
        // Get instance of FastDateFormat for default locale
        FastDateFormat dateFormatUS = FastDateFormat.getDateInstance();
        
        // Change default locale to France
        Locale.setDefault(Locale.FRANCE);
        
        // Get another instance of FastDateFormat for default locale
        FastDateFormat dateFormatFR = FastDateFormat.getDateInstance();
        
        // Format current date using both date formats
        String dateUS = dateFormatUS.format(new Date());
        String dateFR = dateFormatFR.format(new Date());
        
        // Ensure they are affected by locale change
        assertNotEquals("FastDateFormat instances should not produce the same output after locale change", dateUS, dateFR);
        
        // Reset default locale to avoid side effects on other tests
        Locale.setDefault(Locale.US);
    }
}
