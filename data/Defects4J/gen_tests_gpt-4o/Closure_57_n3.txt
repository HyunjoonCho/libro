
import com.google.javascript.jscomp.CommandLineRunner;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;

import java.util.Arrays;

public class ClosureCompilerTest {
    @Test(expected = RuntimeException.class)
    public void testGoogProvideWithNonString() {
        String jsCode = "goog.provide(mine.Spike);";

        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();

        // Run the compiler, which should throw a RuntimeException
        compiler.compile(
            Arrays.asList(SourceFile.fromCode("externs.js", "")),
            Arrays.asList(SourceFile.fromCode("file.js", jsCode)),
            options);
    }
}
