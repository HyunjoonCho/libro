public void testTypeHierarchyAdapterRuntimeCheck() {
    GsonBuilder builder = new GsonBuilder();
    builder.registerTypeHierarchyAdapter(Vehicle.class, new VehicleTypeAdapter());
    Gson gson = builder.create();

    String jsonTruck = "{ \"type\": \"Truck\", \"capacity\": 5000 }";

    try {
        Car car = gson.fromJson(jsonTruck, Car.class);
        fail("Expected a JsonSyntaxException due to incorrect type decoding, but none was thrown.");
    } catch (JsonSyntaxException e) {
        assertTrue(e.getMessage().contains("Expected Car but found Truck"));
    }
}