public void testArchiveStreamFactoryEncoding() throws Exception {
    String encoding = "UTF-8";

    try {
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        
        ArjArchiveInputStream arjIn = (ArjArchiveInputStream) factory.createArchiveInputStream(
            ArchiveStreamFactory.ARJ, new ByteArrayInputStream(new byte[0]), encoding);
        assertEquals(encoding, arjIn.getEncoding());

        CpioArchiveInputStream cpioIn = (CpioArchiveInputStream) factory.createArchiveInputStream(
            ArchiveStreamFactory.CPIO, new ByteArrayInputStream(new byte[0]), encoding);
        assertEquals(encoding, cpioIn.getEncoding());

        DumpArchiveInputStream dumpIn = (DumpArchiveInputStream) factory.createArchiveInputStream(
            ArchiveStreamFactory.DUMP, new ByteArrayInputStream(new byte[0]), encoding);
        assertEquals(encoding, dumpIn.getEncoding());

        JarArchiveInputStream jarIn = (JarArchiveInputStream) factory.createArchiveInputStream(
            ArchiveStreamFactory.JAR, new ByteArrayInputStream(new byte[0]), encoding);
        assertEquals(encoding, jarIn.getEncoding());

        JarArchiveOutputStream jarOut = (JarArchiveOutputStream) factory.createArchiveOutputStream(
            ArchiveStreamFactory.JAR, new ByteArrayOutputStream(), encoding);
        assertEquals(encoding, jarOut.getEncoding());

    } catch (ArchiveException e) {
        fail("ArchiveException should not have been thrown: " + e.getMessage());
    } catch (IOException e) {
        fail("IOException should not have been thrown: " + e.getMessage());
    }
}