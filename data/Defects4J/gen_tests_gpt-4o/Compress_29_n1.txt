
import org.apache.commons.compress.archivers.ArchiveStreamFactory;
import org.apache.commons.compress.archivers.arj.ArjArchiveInputStream;
import org.apache.commons.compress.archivers.cpio.CpioArchiveInputStream;
import org.apache.commons.compress.archivers.dump.DumpArchiveInputStream;
import org.apache.commons.compress.archivers.jar.JarArchiveInputStream;
import org.apache.commons.compress.archivers.jar.JarArchiveOutputStream;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;

public class ArchiveStreamFactoryEncodingTest {

    @Test
    public void testArjArchiveInputStreamEncoding() throws Exception {
        String encoding = "UTF-8";
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        ByteArrayInputStream input = new ByteArrayInputStream(new byte[0]);

        ArjArchiveInputStream arjStream = (ArjArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.ARJ, input, encoding);
        assertEquals(encoding, arjStream.getArchiveEntryEncoding());
    }

    @Test
    public void testCpioArchiveInputStreamEncoding() throws Exception {
        String encoding = "UTF-8";
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        ByteArrayInputStream input = new ByteArrayInputStream(new byte[0]);

        CpioArchiveInputStream cpioStream = (CpioArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.CPIO, input, encoding);
        assertEquals(encoding, cpioStream.getEncoding());
    }

    @Test
    public void testDumpArchiveInputStreamEncoding() throws Exception {
        String encoding = "UTF-8";
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        ByteArrayInputStream input = new ByteArrayInputStream(new byte[0]);

        DumpArchiveInputStream dumpStream = (DumpArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.DUMP, input, encoding);
        assertEquals(encoding, dumpStream.getEncoding());
    }

    @Test
    public void testJarArchiveInputStreamEncoding() throws Exception {
        String encoding = "UTF-8";
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        ByteArrayInputStream input = new ByteArrayInputStream(new byte[0]);

        JarArchiveInputStream jarInputStream = (JarArchiveInputStream) factory.createArchiveInputStream(ArchiveStreamFactory.JAR, input, encoding);
        assertEquals(encoding, jarInputStream.getEncoding());
    }

    @Test
    public void testJarArchiveOutputStreamEncoding() throws Exception {
        String encoding = "UTF-8";
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        ByteArrayOutputStream output = new ByteArrayOutputStream();

        JarArchiveOutputStream jarOutputStream = (JarArchiveOutputStream) factory.createArchiveOutputStream(ArchiveStreamFactory.JAR, output, encoding);
        assertEquals(encoding, jarOutputStream.getEncoding());
    }
}
