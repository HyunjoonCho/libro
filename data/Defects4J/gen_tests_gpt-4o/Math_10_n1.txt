
import org.apache.commons.math3.analysis.differentiation.DerivativeStructure;
import org.junit.Test;
import static org.junit.Assert.*;

public class DerivativeStructureAtan2Test {

    @Test
    public void testAtan2SpecialCases() {
        DerivativeStructure zero = new DerivativeStructure(1, 1, 0.0);
        DerivativeStructure negZero = new DerivativeStructure(1, 1, -0.0);

        // Test +0, +0
        double result1 = DerivativeStructure.atan2(zero, zero).getValue();
        assertEquals("atan2(+0, +0) should match Math.atan2", Math.atan2(0.0, 0.0), result1, 1e-9);

        // Test +0, -0
        double result2 = DerivativeStructure.atan2(zero, negZero).getValue();
        assertEquals("atan2(+0, -0) should match Math.atan2", Math.atan2(0.0, -0.0), result2, 1e-9);

        // Test -0, +0
        double result3 = DerivativeStructure.atan2(negZero, zero).getValue();
        assertEquals("atan2(-0, +0) should match Math.atan2", Math.atan2(-0.0, 0.0), result3, 1e-9);

        // Test -0, -0
        double result4 = DerivativeStructure.atan2(negZero, negZero).getValue();
        assertEquals("atan2(-0, -0) should match Math.atan2", Math.atan2(-0.0, -0.0), result4, 1e-9);
    }
}
