
import org.apache.commons.cli.*;

import java.util.Properties;

import static org.junit.Assert.*;

public class OptionGroupTest {

    @org.junit.Test
    public void testOptionGroupWithDefaults() {
        // Create the options
        Options options = new Options();
        
        OptionGroup group = new OptionGroup();
        group.addOption(new Option("a", "option-a", false, "Option A"));
        group.addOption(new Option("b", "option-b", false, "Option B"));
        
        options.addOptionGroup(group);
        
        // Default properties which incorrectly specify 'b' when group contains 'a'
        Properties defaults = new Properties();
        defaults.setProperty("b", "true");
        
        // Command line arguments specifying 'a'
        String[] args = new String[] {"-a"};
        
        CommandLineParser parser = new DefaultParser();
        try {
            CommandLine cmd = parser.parse(options, args, defaults);
            
            // The test should fail if both 'a' and 'b' are present
            assertTrue("Command line should contain option 'a'", cmd.hasOption("a"));
            assertFalse("Command line should not contain option 'b'", cmd.hasOption("b"));
        } catch (ParseException e) {
            fail("Parsing failed: " + e.getMessage());
        }
    }
}
