public void testBase64InputStreamRead() throws IOException {
    byte[] inputData = Base64.getEncoder().encode("abc".getBytes()); // 'abc' is 3 bytes long
    InputStream in = new ByteArrayInputStream(inputData);
    Base64InputStream base64In = new Base64InputStream(in, true);
    byte[] buffer = new byte[4]; // buffer larger than the encoded data
    int bytesRead = base64In.read(buffer);
    while (bytesRead != -1) {
        bytesRead = base64In.read(buffer);
    }
    assertNotEquals(0, bytesRead);
}