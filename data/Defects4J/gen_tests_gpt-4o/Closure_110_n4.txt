public void testPrivateTopLevelFunctionInGoogScope() {
    try {
        new Compiler().compile(
            SourceFile.fromCode("externs", ""),
            SourceFile.fromCode(
                "test",
                "goog.scope(function() {\n" +
                "    /** @private */\n" +
                "    function test() {}\n" +
                "});\n"
            ),
            new CompilerOptions()
        );
        fail("Expected a compilation error for a non-alias function inside goog.scope");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("The local variable test is in a goog.scope and is not an alias."));
    }
}