public void testClosureDependenciesWithWhitespaceOnly() {
    CompilerOptions options = new CompilerOptions();
    options.setCompilationLevel(CompilationLevel.WHITESPACE_ONLY);
    options.setManageClosureDependencies(true);

    JSModule module = new JSModule("testModule");
    module.add(new SourceFile("goog.provide('ns');"));

    Compiler compiler = new Compiler();
    compiler.compileModules(ImmutableList.of(new JSModule("externs")), ImmutableList.of(module), options);

    List<JSModule> compiledModules = compiler.getModules();
    assertFalse(compiledModules.isEmpty());
    assertTrue(compiledModules.get(0).getInputs().stream().anyMatch(input -> input.getName().equals("goo_ provide('ns');")));
}