
import org.apache.commons.cli.*;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class CommandLineParserTest {

    @Test
    public void testQuotesInArgumentValue() throws ParseException {
        // Define the option
        Options options = new Options();
        options.addOption(Option.builder("b")
                .longOpt("balloo")
                .hasArg()
                .desc("Balloo option")
                .build());

        // Simulate input arguments the same way CLI would receive it from the shell
        String[] args = {"--balloo", "this is a \"test\""};

        // Create the parser and parse the arguments
        CommandLineParser parser = new DefaultParser();
        CommandLine cmd = parser.parse(options, args);
        
        // Get the value associated with the option
        String ballooValue = cmd.getOptionValue("balloo");

        // Verify what the value should be, expecting it to keep the quotes correctly
        assertEquals("this is a \"test\"", ballooValue);
    }
}
