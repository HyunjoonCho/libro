
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlText;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertEquals;

public class WindSpeedTest {

    @Test
    public void testMixedContentWithChildElements() throws Exception {
        String xmlInput = "<windSpeed units=\"kt\">27<radius>20</radius></windSpeed>";

        XmlMapper xmlMapper = new XmlMapper();
        WindSpeed windSpeed = xmlMapper.readValue(xmlInput, WindSpeed.class);

        // Verifying that the primary text content is correctly deserialized
        assertEquals(27, windSpeed.getValue());

        // Verifying that child elements are correctly deserialized
        assertEquals(1, windSpeed.getRadius().size());
        assertEquals(20, windSpeed.getRadius().get(0).getValue());

        // Further serialization and validation
        String serializedXml = xmlMapper.writeValueAsString(windSpeed);
        WindSpeed deserializedWindSpeed = xmlMapper.readValue(serializedXml, WindSpeed.class);

        assertEquals(windSpeed.getValue(), deserializedWindSpeed.getValue());
        assertEquals(windSpeed.getRadius().size(), deserializedWindSpeed.getRadius().size());
        assertEquals(windSpeed.getRadius().get(0).getValue(), deserializedWindSpeed.getRadius().get(0).getValue());
    }
}

class WindSpeed {

    public static class Radius {
        @JacksonXmlProperty(isAttribute = true)
        private String sector;
        @JacksonXmlProperty(isAttribute = true)
        private String units;
        @JacksonXmlText
        private int value;

        // Getters and Setters
        public String getSector() { return sector; }
        public void setSector(String sector) { this.sector = sector; }
        public String getUnits() { return units; }
        public void setUnits(String units) { this.units = units; }
        public int getValue() { return value; }
        public void setValue(int value) { this.value = value; }
    }

    @JacksonXmlProperty(isAttribute = true)
    private String units;
    @JacksonXmlProperty(isAttribute = true)
    private String source;
    @JacksonXmlText
    private int value;
    @JacksonXmlElementWrapper(useWrapping = false)
    private List<Radius> radius;

    // Getters and Setters
    public String getUnits() { return units; }
    public void setUnits(String units) { this.units = units; }
    public String getSource() { return source; }
    public void setSource(String source) { this.source = source; }
    public int getValue() { return value; }
    public void setValue(int value) { this.value = value; }
    public List<Radius> getRadius() { return radius; }
    public void setRadius(List<Radius> radius) { this.radius = radius; }
}
