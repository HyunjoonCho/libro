
import junit.framework.TestCase;
import org.apache.commons.cli2.CommandLine;
import org.apache.commons.cli2.Group;
import org.apache.commons.cli2.Option;
import org.apache.commons.cli2.builder.ArgumentBuilder;
import org.apache.commons.cli2.builder.DefaultOptionBuilder;
import org.apache.commons.cli2.builder.GroupBuilder;
import org.apache.commons.cli2.commandline.Parser;

public class Bug27575Test extends TestCase {
    
    public void testRequiredOptions() {
        DefaultOptionBuilder optionBuilder = new DefaultOptionBuilder();
        ArgumentBuilder argumentBuilder = new ArgumentBuilder();
        GroupBuilder groupBuilder = new GroupBuilder();

        // Define the options
        Option helpOption = optionBuilder.withShortName("h").withDescription("Prints this help message").create();
        Option configOption = optionBuilder.withShortName("c").withDescription("Config file").withArgument(argumentBuilder.withName("arg").create()).create();

        // Set -h as a required option
        Group options = groupBuilder.withOption(helpOption).withOption(configOption).withMinimum(1).create();

        // Parse the command line
        Parser parser = new Parser();
        parser.setGroup(options);

        String[] args = {"-c", "config.txt"};
        CommandLine cmd = null;
        try {
            cmd = parser.parse(args);
        } catch (Exception e) {
            fail("Parsing failed. Reason: " + e.getMessage());
        }

        // Test the condition where we expect the '-h' option to be required
        assertTrue("Help option should be present", cmd.hasOption(helpOption));
    }
}
