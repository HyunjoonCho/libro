public void testCommandLineGetOptionValue() {
    Options options = new Options();
    Option debug = Option.builder("d")
                         .longOpt("debug")
                         .desc("turn on debugging")
                         .build();
    options.addOption(debug);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmd = null;
    try {
        cmd = parser.parse(options, new String[]{"--debug"});
    } catch (ParseException e) {
        fail("Parsing failed. " + e.getMessage());
    }

    assertNotNull("Option value should not be null when queried with long option name", cmd.getOptionValue("debug"));
    String dbg = cmd.getOptionValue("debug");
    assertEquals("turn on debugging", dbg);
}