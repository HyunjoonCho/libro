public void testOptionBuilderResetOnException() {
    try {
        // This should throw an IllegalArgumentException
        OptionBuilder.create(null);
    } catch (IllegalArgumentException e) {
        // Expected exception, do nothing
    }

    // Use OptionBuilder again and ensure it doesn't use previous settings
    OptionBuilder.withLongOpt("option");
    Option option = OptionBuilder.create("o");

    assertEquals("o", option.getOpt());
    assertEquals("option", option.getLongOpt());
}