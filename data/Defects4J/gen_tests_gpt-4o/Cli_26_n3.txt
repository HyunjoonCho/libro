
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionBuilder;
import org.junit.Test;
import static org.junit.Assert.*;

public class OptionBuilderTest {

    @Test
    public void testOptionBuilderResetAfterIAE() {
        // First attempt with invalid character, causing an IllegalArgumentException
        try {
            OptionBuilder.withDescription(null); // Invalid description
            Option option = OptionBuilder.create('#'); // Invalid option character
        } catch (IllegalArgumentException e) {
            // Expected exception
        }

        // Second attempt should start fresh, without any residual settings
        try {
            OptionBuilder.withDescription("Valid description");
            Option option = OptionBuilder.create('a'); // Valid option character
            // Test properties of the newly created option
            assertNotNull(option);
            assertEquals("a", option.getOpt());
            assertEquals("Valid description", option.getDescription());
        } catch (IllegalArgumentException e) {
            fail("OptionBuilder was not reset properly after previous IAE");
        }
    }
}
