
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionGroup;
import org.apache.commons.cli.ParseException;
import org.apache.commons.cli.PosixParser;
import org.apache.commons.cli.CommandLine;

import static org.junit.Assert.*;
import org.junit.Test;

public class OptionGroupTest {

    @Test
    public void testLongNameOptionSelectionInGroup() throws ParseException {
        Option longOption1 = new Option(null, "option1", false, "First option with long name");
        Option longOption2 = new Option(null, "option2", false, "Second option with long name");

        OptionGroup group = new OptionGroup();
        group.addOption(longOption1);
        group.addOption(longOption2);

        // Attempt to manually select an option without a short name
        group.setSelected(longOption1);

        assertEquals("The selected option should be 'option1'", "option1", group.getSelected());
        
        // Parsing a command line to check the behavior during parsing
        PosixParser parser = new PosixParser();
        CommandLine cmd = parser.parse(group, new String[]{"--option1"});
        
        assertTrue("The command line should recognize --option1 as selected", cmd.hasOption("option1"));
        assertFalse("The command line should not recognize --option2 as selected", cmd.hasOption("option2"));
    }
}
