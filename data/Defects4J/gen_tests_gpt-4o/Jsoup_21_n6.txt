
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class SelectorParsingTest {

    @Test
    public void testSelectorParsingWithRegexComma() {
        String html = "<html><head><title>Test</title></head>" +
                      "<body><div>123,456</div><li>Another</li></body></html>";
        
        Document doc = Jsoup.parse(html);
        // Attempt to select div or li elements with a text content matching a regex containing a comma
        Elements elements = doc.select("div, li:matches([0-9,]+)");
        
        // Without the bug, we should find one div element
        assertEquals(1, elements.size());
        assertEquals("123,456", elements.first().text());
    }
}
