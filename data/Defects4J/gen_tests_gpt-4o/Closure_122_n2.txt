public void testInconsistentNonJSDocHandling() {
    String input = "/* @preserve Foo License */\nalert(\"foo\");";
    String inputWithExclamation = "/*! @preserve Foo License */\nalert(\"foo\");";

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();

    // Compile the input with the original comment
    Result result = compiler.compile(SourceFile.fromCode("externs.js", ""),
        SourceFile.fromCode("test.js", input), options);
    
    assertTrue(result.warnings.length > 0);
    assertEquals("Parse error. Non-JSDoc comment has annotations. Did you mean to start it with '/**'?", 
                 result.warnings[0].description);

    // Compile the input with the exclamation mark
    Result resultWithExclamation = compiler.compile(SourceFile.fromCode("externs.js", ""),
        SourceFile.fromCode("test.js", inputWithExclamation), options);
    
    assertTrue(resultWithExclamation.warnings.length == 0);
    assertFalse(compiler.toSource().contains("Foo License"));
}