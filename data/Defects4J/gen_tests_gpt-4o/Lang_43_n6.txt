@Test
public void testExtendedMessageFormatOutOfMemoryError() {
    Map<String, Object> formatRegistry = new HashMap<String, Object>();
    formatRegistry.put(DummyFormatFactory.DUMMY_FORMAT, new DummyFormatFactory());

    // The pattern contains single quotes which could trigger OutOfMemoryError
    String pattern = "it''s a {dummy} 'test'!";

    try {
        ExtendedMessageFormat mf = new ExtendedMessageFormat(pattern, formatRegistry);
        String formattedPattern = mf.format(new String[]{"great"});

        // Check that the formatted pattern is as expected
        assertEquals("it's a great test!", formattedPattern);

    } catch (OutOfMemoryError e) {
        fail("OutOfMemoryError occurred with pattern containing single quotes.");
    }
}