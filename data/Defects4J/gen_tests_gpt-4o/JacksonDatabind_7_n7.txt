public void testTokenBufferDeserializationWithJsonCreator() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{ \"a\":1, \"b\":null }";
    
    JsonParser parser = mapper.getFactory().createParser(json);
    TokenBuffer buffer = new TokenBuffer(parser);
    buffer.copyCurrentStructure(parser);

    parser.nextToken(); // Advance to start object
    Value value = mapper.readValue(buffer.asParser(), Value.class);

    assertNotNull(value);

    buffer = new TokenBuffer(parser);
    buffer.copyCurrentStructure(parser);

    List<JsonToken> expectedTokens = Arrays.asList(
        JsonToken.START_OBJECT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NUMBER_INT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NULL,
        JsonToken.END_OBJECT
    );
    
    List<JsonToken> actualTokens = new ArrayList<>();
    JsonParser bufferParser = buffer.asParser();
    while (bufferParser.nextToken() != null) {
        actualTokens.add(bufferParser.getCurrentToken());
    }

    assertEquals(expectedTokens, actualTokens);
}