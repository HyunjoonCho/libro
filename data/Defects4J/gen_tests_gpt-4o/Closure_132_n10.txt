
import static org.junit.Assert.assertEquals;
import org.junit.Test;

public class IfStatementTest {

    @Test
    public void testIfStatementTransformation() {
        int esi = 2;
        int[][] es = {
            {0, 1, 0},
            {1, 0, 1},
            {1, 1, 0},
        };

        // Expected behavior when using the if-else statement
        if (es[--esi][es[esi + 1]] == 1) {
            es[esi] = 0;
        } else {
            es[esi] = 1;
        }
        int expectedValue = es[esi];

        // Reset environment
        esi = 2;
        es[esi][es[esi + 1]] = 1;

        // Transformation using ternary operator with a bug
        es[esi] = (1 == es[--esi][es[esi + 1]]) ? 0 : 1;

        // Transformation using correct ternary operator
        es[--esi] = (1 == es[esi][es[esi + 1]]) ? 0 : 1;

        // Verify both give the same result
        assertEquals(expectedValue, es[esi]);
    }
}
