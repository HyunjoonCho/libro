public void testOverflowInBitInputStream() {
    ByteArrayInputStream in = new ByteArrayInputStream(new byte[]{87, 45, 66, 15, 90, 29, 88, 61, 33, 74});
    BitInputStream bin = new BitInputStream(in, ByteOrder.LITTLE_ENDIAN);
    try {
        long firstRead = bin.readBits(5);
        long secondRead = bin.readBits(63);
        long thirdRead = bin.readBits(12);
        fail("Expected an overflow error to occur, but no error was thrown.");
    } catch (Exception e) {
        assertTrue(e instanceof IllegalArgumentException || e instanceof IOException);
    }
}