public void testNaNAsBigDecimalWithJackson() throws IOException {
    String json = "NaN";
    JsonFactory factory = new JsonFactory();
    factory.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);
    try (JsonParser parser = factory.createParser(json)) {
        parser.nextToken(); // Move to the NaN token
        try {
            parser.getDecimalValue();
            fail("Expected NumberFormatException");
        } catch (NumberFormatException e) {
            // Expected exception
        } catch (NullPointerException e) {
            fail("Expected NumberFormatException, but got NullPointerException");
        }
    }
}