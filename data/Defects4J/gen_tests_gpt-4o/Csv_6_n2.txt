public void testToMapWhenHeaderTooLong() {
    assertThrows(ArrayIndexOutOfBoundsException.class, () -> {
        final CSVParser parser = new CSVParser(new StringReader("a,b"), CSVFormat.newBuilder().setHeader("A", "B", "C").build());
        final CSVRecord record = parser.iterator().next();
        record.toMap();
    });
}