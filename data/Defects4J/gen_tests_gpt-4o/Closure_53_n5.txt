public void testCompilerCrashWithSoundManager2() throws IOException {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.SIMPLE_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    
    SourceFile inputFile = SourceFile.fromUrl("https://raw.github.com/scottschiller/SoundManager2/master/script/soundmanager2-nodebug.js");
    
    ImmutableList.Builder<SourceFile> externs = ImmutableList.builder();
    externs.addAll(CommandLineRunner.getDefaultExterns(options.getEnv()));
    
    try {
        compiler.compile(externs.build(), ImmutableList.of(inputFile), options);
        fail("Expected compiler to crash with an exception");
    } catch (Exception e) {
        assertTrue(e.getMessage().contains("index(1) must be less than size(1)"));
    }
}