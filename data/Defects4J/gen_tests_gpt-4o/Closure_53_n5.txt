
import com.google.javascript.jscomp.CommandLineRunner;
import org.junit.Test;

import java.io.IOException;

public class CompilerCrashTest {

    @Test
    public void testCompilerCrashWithSoundManager2() throws IOException {
        String[] args = {
                "--compilation_level", "SIMPLE_OPTIMIZATIONS",
                "--js", "https://raw.githubusercontent.com/scottschiller/SoundManager2/master/script/soundmanager2-nodebug.js"
        };
        
        try {
            CommandLineRunner.main(args);
        } catch (RuntimeException e) {
            // Check if the exception message matches the known issue
            String expectedMessage = "index(1) must be less than size(1)";
            if (!e.getMessage().contains(expectedMessage)) {
                throw e; // Re-throw if it's a different exception
            }
        }
    }
}
