public void testCheckVarsAndUndefinedVarsDiagnostics() throws IOException, InterruptedException {
    String command = "java -jar compiler.jar --js test.js --jscomp_warning checkVars";
    Process process = Runtime.getRuntime().exec(command);
    process.waitFor();
    
    String output = new String(process.getInputStream().readAllBytes(), StandardCharsets.UTF_8);

    assertFalse(output.contains("variable foo is undefined"), "checkVars should warn about undefined variable 'foo'.");
    
    command = "java -jar compiler.jar --js test.js --jscomp_warning undefinedVars";
    process = Runtime.getRuntime().exec(command);
    process.waitFor();
    
    output = new String(process.getInputStream().readAllBytes(), StandardCharsets.UTF_8);

    assertFalse(output.contains("variable foo is undefined"), "undefinedVars should warn about undefined variable 'foo'.");
}