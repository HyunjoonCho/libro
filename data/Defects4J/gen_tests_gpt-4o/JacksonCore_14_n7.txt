public void testBufferOwnershipChecks() {
    IOContext context = new IOContext();
    byte[] originalBuffer = context.allocReadIOBuffer();

    byte[] sameSizeBuffer = new byte[originalBuffer.length];
    context.releaseReadIOBuffer(sameSizeBuffer);

    byte[] retrievedBuffer = context.allocReadIOBuffer();
    assertSame(sameSizeBuffer, retrievedBuffer);

    byte[] smallerBuffer = new byte[originalBuffer.length - 1];
    try {
        context.releaseReadIOBuffer(smallerBuffer);
        fail("Expected an IllegalArgumentException for releasing a smaller buffer");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }
}