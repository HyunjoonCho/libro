
import static org.junit.jupiter.api.Assertions.assertArrayEquals;
import static org.mockito.ArgumentCaptor.forClass;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;

import java.util.List;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.mockito.ArgumentCaptor;

// Example service interface
interface ExampleService {
    void performOperation(String... values);
}

public class ArgumentCaptorVarargsTest {

    private ExampleService exampleService;

    @BeforeEach
    public void setUp() {
        exampleService = mock(ExampleService.class);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Given
        String[] expectedValues = {"value1", "value2", "value3"};

        // When
        exampleService.performOperation(expectedValues);

        // Then
        ArgumentCaptor<String> captor = forClass(String.class);
        verify(exampleService, times(1)).performOperation(captor.capture());
        
        List<String> capturedValues = captor.getAllValues();
        
        assertArrayEquals(expectedValues, capturedValues.toArray(new String[0]), 
                "The captured values should match the expected values");
    }
}
