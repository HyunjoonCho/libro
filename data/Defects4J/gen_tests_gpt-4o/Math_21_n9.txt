public void testZeroRowCovarianceMatrix() {
    double[][] covarianceMatrix = {
        {0.013445532, 0.01039469, 0.0, 0.009881156, 0.010499559},
        {0.01039469, 0.023006616, 0.0, 0.008196856, 0.010732709},
        {0.0, 0.0, 0.0, 0.0, 0.0},
        {0.009881156, 0.008196856, 0.0, 0.019023866, 0.009210099},
        {0.010499559, 0.010732709, 0.0, 0.009210099, 0.019107243}
    };
    RealMatrix covariance = new Array2DRowRealMatrix(covarianceMatrix);
    double[] means = new double[covariance.getRowDimension()];
    NormalizedRandomGenerator rng = new JDKRandomGenerator();
    CorrelatedRandomVectorGenerator generator 
        = new CorrelatedRandomVectorGenerator(means, covariance, 1e-10, rng);

    try {
        // Attempt to generate a sample, expecting failure due to zero-row in covariance matrix
        double[] sample = generator.nextVector();
        fail("Generator should not have produced a sample due to zero-row in covariance matrix.");
    } catch (Exception e) {
        // Expecting an error due to the zero row causing a flawed rank calculation
        assertTrue(e instanceof MathIllegalStateException || e.getMessage().contains("Covariance matrix rank is incorrect"));
    }
}