public void testStackOverflowErrorInClosureCompiler() {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    String jsCode = "var a = " + repeat("{'key': ", 10000) + "'value'" + repeat("}", 10000) + ";";
    
    try {
        SourceFile input = SourceFile.fromCode("AdMedia.eam.js", jsCode);
        SourceFile externs = SourceFile.fromCode("externs.js", "");
        Result result = compiler.compile(externs, input, options);
        fail("Expected StackOverflowError not thrown");
    } catch (RuntimeException e) {
        assertTrue(e.getCause() instanceof StackOverflowError);
    }
}

private String repeat(String str, int times) {
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < times; i++) {
        builder.append(str);
    }
    return builder.toString();
}