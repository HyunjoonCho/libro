
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertNotEquals;

public class ElementHashCodeTest {

    @Test
    public void testElementHashCodeDiffersWithTextContent() {
        String html = "<html>\n" +
                      "    <head>\n" +
                      "    </head>\n" +
                      "    <body>\n" +
                      "        <div style=\"blah\">TODO: write content</div>\n" +
                      "        <div style=\"blah\">Nothing here</div>\n" +
                      "    </body>\n" +
                      "</html>";

        Document doc = Jsoup.parse(html);
        Elements elements = doc.select("div[style]");

        // Assuming there are at least two divs with style attributes.
        Element firstDiv = elements.get(0);
        Element secondDiv = elements.get(1);

        // This assertion should fail given the current behavior
        // of Element.hashCode() method, as it ignores the text content.
        assertNotEquals(firstDiv.hashCode(), secondDiv.hashCode());
    }
}
