
import com.google.javascript.jscomp.*;

public class ClosureCompilerTest {

    public static void main(String[] args) {
        testJscDeterministicTestWarning();
    }

    public static void testJscDeterministicTestWarning() {
        String jsCode =
                "/** @const */ var window = {};\n" +
                "var t = null;\n" +
                "window.test = function() {\n" +
                "  if (t != null) {\n" +
                "    t = null;\n" +
                "  }\n" +
                "  t = 1;\n" +
                "};";

        SourceFile input = SourceFile.fromCode("test.js", jsCode);
        CompilerOptions options = new CompilerOptions();
        
        // Set compilation level to ADVANCED_OPTIMIZATIONS
        CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

        Compiler compiler = new Compiler();

        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), input, options);

        // Assert no warnings
        if (result.warnings.length > 0) {
            for (JSError warning : result.warnings) {
                System.out.println("Warning: " + warning.description);
            }
        } else {
            System.out.println("No warnings were found.");
        }
    }
}
