
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class HtmlParsingTest {

    @Test
    public void testScriptTagParsing() {
        String html = "<html>" +
                "<body>" +
                " <div class=vsc sig=Uga>" +
                "  <div class=before></div>" +
                "  <script type=\"text/javascript\">" +
                "   header = jQuery('#header\\_features');" +
                "   if(header.length){" +
                "    header" +
                "     .prepend('<a class=\"prevPage browse left \" />')" +
                "     .append('<a class=\"nextPage browse right\" />');" +
                "    items" +
                "     .wrapAll('<div class=\"scrollable\"/>')" +
                "     .wrapAll('<ul class=\"items\"/>')" +
                "     .wrap('<li/>');" +
                "   }" +
                "   </script>" +
                "   <div class=after></div>" +
                " </div>" +
                "</body>" +
                "</html>";

        // Parse the HTML with Jsoup
        Document doc = Jsoup.parse(html);

        // Verify that the <div class=after> is not inside the <script> tag
        Element afterDiv = doc.selectFirst("div.after");

        // Check that the <div class=after> follows the script tag directly
        assertEquals("after", afterDiv.attr("class"));
        assertEquals("vsc", afterDiv.parent().attr("class"));
    }
}
