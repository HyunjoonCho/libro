public void testOnlineCompilerFunctionKeys() {
    String jsCode = "function keys(obj) { var a = [], i = 0; for (a[i++] in obj); return a; }";
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.SIMPLE_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

    // For a test case, capture the output or exception
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", jsCode), options);

    assertFalse("There should not be errors", compiler.hasErrors());
    assertTrue("Expected compiled code to contain optimized version", compiler.toSource().contains("function keys(a){for(var b=[],c=0;b[c++]"));
}