
import com.google.javascript.jscomp.CommandLineRunner;
import org.junit.Test;

import static org.junit.Assert.assertTrue;

public class ClosureCompilerTest {

    @Test
    public void testCompileKeysFunction() {
        String jsCode = "function keys(obj) {" +
                        " var a = [], i = 0;" +
                        " for (a[i++] in obj)" +
                        " ;" +
                        " return a;" +
                        "}";

        String[] args = new String[]{"--js", "-", "--warning_level", "QUIET"};

        CommandLineRunner runner = new CommandLineRunner(args) {
            @Override
            protected int doRun() throws Exception {
                setJsCode(jsCode);
                return super.doRun();
            }
        };

        int result = runner.run();
        
        // Check if the compilation was successful. Typically, 0 means success.
        assertTrue("Expected successful compilation, but got errors.", result == 0);
    }
}
