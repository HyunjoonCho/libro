
import org.apache.commons.cli.*;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

public class CommandLineTest {
    
    @org.junit.Test
    public void testCliArgumentDefaults() {
        Options options = new Options();
        Option option = Option.builder("c")
                .longOpt("config")
                .hasArg()
                .desc("Configuration file")
                .build();
        
        options.addOption(option);
        
        CommandLineParser parser = new DefaultParser();
        
        // Simulate the scenario with a default value
        CommandLine cmd = null;
        try {
            cmd = parser.parse(options, new String[]{"--config", "default.conf"});
        } catch (ParseException e) {
            fail("Failed to parse default command line: " + e.getMessage());
        }

        // Now try to override it with a new command line argument
        try {
            cmd = parser.parse(options, new String[]{"--config", "new.conf"});
        } catch (ParseException e) {
            fail("Failed to parse command line with override argument: " + e.getMessage());
        }
        
        // Validate that the argument was correctly overridden
        assertEquals("new.conf", cmd.getOptionValue("config"));
    }
}
