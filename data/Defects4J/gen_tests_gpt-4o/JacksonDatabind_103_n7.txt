public void testJsonMappingExceptionDoubleLocation() {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"age\":\"invalid\"}";

    try {
        mapper.readValue(json, Person.class);
        fail("Expected InvalidFormatException");
    } catch (InvalidFormatException e) {
        String message = e.getMessage();
        int firstIndex = message.indexOf(" at [source]");
        int lastIndex = message.lastIndexOf(" at [source]");
        assertTrue(firstIndex != -1);
        assertTrue(firstIndex == lastIndex);
    }
}