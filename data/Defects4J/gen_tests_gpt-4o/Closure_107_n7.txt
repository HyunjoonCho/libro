
import com.google.javascript.jscomp.*;

import org.junit.Test;

import static org.junit.Assert.*;

public class MsgPrefixTest {

    @Test
    public void testVariableWithMsgPrefixError() {
        // JavaScript code with a variable prefixed with MSG_
        String jsCode = "var MSG_foo = 'bar';";

        // Set up Closure Compiler options for advanced optimizations
        CompilerOptions options = new CompilerOptions();
        CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

        // Initialize the compiler
        Compiler compiler = new Compiler();

        // Run the compiler
        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", jsCode), options);

        // Assert that an error was encountered
        assertTrue("Should have encountered an error due to MSG_ prefix", result.errors.length > 0);
        
        // Check that the specific error message is related to 'goog.getMsg'
        assertTrue(result.errors[0].getDescription().contains("message not initialized using goog.getMsg"));
    }
}
