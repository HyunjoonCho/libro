
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JSSourceFile;
import com.google.javascript.jscomp.Result;
import org.junit.Test;
import static org.junit.Assert.*;

public class WritingModeTest {

    @Test
    public void testWritingModeInClosureCompiler() {
        String javascriptCode = "element.style.writingMode = 'tb-rl';";

        // Set up Closure Compiler
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        // Set to ADVANCED optimizations
        options.setLanguage(CompilerOptions.LanguageMode.ECMASCRIPT5);
        options.setClosurePass(true);

        // Mock input file
        JSSourceFile input = JSSourceFile.fromCode("input.js", javascriptCode);
        JSSourceFile extern = JSSourceFile.fromCode("externs.js", "");

        // Compile
        Result result = compiler.compile(extern, input, options);

        // Check that compilation completes without errors
        assertTrue(result.success);

        // Check the compiled code
        String compiledCode = compiler.toSource();

        // Assert that `writingMode` is not replaced with a short name like `a`
        assertFalse(compiledCode.contains(".a ="));
    }
}
