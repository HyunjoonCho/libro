
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Selector;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;
import org.junit.Test;

public class JsoupSelectorTest {

    @Test
    public void testUnbalancedParenthesesAndBrackets() {
        String html = "<html><head><title>Test</title></head>"
                + "<body>"
                + "<div class=\"card-content2\"><a class=\"subtitle\" title=\"MySubTitle:)\"></a></div>"
                + "<a class=\"title\" title=\"MyTitle :\"></a>"
                + "</body></html>";
        
        Document doc = Jsoup.parse(html);

        // First test case for unbalanced ':has(a.subtitle[title= MySubTitle:)])'
        try {
            doc.select("div.card-content2:has(a.subtitle[title= MySubTitle:)])");
            fail("Expected SelectorParseException not thrown");
        } catch (Selector.SelectorParseException e) {
            // Expected exception
        }

        // Second test case for unbalanced 'a.title[title=MyTitle :] ]'
        try {
            doc.select("a.title[title=MyTitle :] ]");
            fail("Expected SelectorParseException not thrown");
        } catch (Selector.SelectorParseException e) {
            // Expected exception
        }
    }
}
