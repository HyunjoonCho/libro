
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import java.io.File;
import java.io.IOException;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class MalformedTreeTest {

    @Test
    public void testMalformedHtmlTree() throws IOException {
        // Load the HTML file located in the jsoup-tc directory
        File input = new File("path-to-your-repo/jsoup-tc/your-html-file.html"); // Replace with actual file path
        
        // Parse the HTML document using Jsoup
        Document doc = Jsoup.parse(input, "UTF-8");
        
        // Retrieve the 'html' element
        Element htmlElement = doc.selectFirst("html");
        
        // Ensure the 'html' element exists
        assertTrue("The HTML element should exist", htmlElement != null);
        
        // Get all 'body' elements in the document
        Elements bodyElements = doc.select("body");
        
        // Check that there are exactly two 'body' elements
        assertEquals("There should be exactly two body elements", 2, bodyElements.size());
        
        // Ensure neither body element is a direct child of the html element
        for (Element body : bodyElements) {
            assertTrue("Body element should not be a direct child of the HTML element", 
                       !body.parent().tagName().equals("html"));
        }
    }
}
