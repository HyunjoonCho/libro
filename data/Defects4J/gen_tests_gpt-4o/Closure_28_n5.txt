public void testConstantFunctionInlining() {
    StringBuilder source = new StringBuilder();
    source.append("function f() { return false; }\n");
    for (int i = 0; i < 25; i++) {
        source.append("if (!f()) alert('hi');\n");
    }

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

    Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), 
                                     SourceFile.fromCode("input.js", source.toString()), 
                                     options);
                                     
    String compiledCode = compiler.toSource();
    assertTrue("Expected function f() to be inlined.", 
               compiledCode.indexOf("function f()") == -1);
}