public void testSwitchStatementCompilerError() {
    String jsCode = 
        "function a(b) {\n" +
        "    switch (b.v) {\n" +
        "        case 'SWITCH':\n" +
        "            if (b.i >= 0) {\n" +
        "                return b.o;\n" +
        "            } else {\n" +
        "                return undefined;\n" +
        "            }\n" +
        "            break;\n" +
        "    }\n" +
        "}";
    
    try {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        SourceFile extern = SourceFile.fromCode("externs.js", "");
        SourceFile input = SourceFile.fromCode("input.js", jsCode);
        compiler.compile(extern, input, options);

        fail("Expected a RuntimeException due to compile error");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR."));
    }
}