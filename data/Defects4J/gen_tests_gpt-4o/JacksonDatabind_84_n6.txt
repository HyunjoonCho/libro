public void testSerializeSubWithBaseProperties() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ObjectWriter writer = mapper.writerFor(Sub.class);

    // Create a Base instance first to simulate the described issue
    Base baseInstance = new Base();
    String baseJson = mapper.writeValueAsString(baseInstance);

    Sub subInstance = new Sub();
    String subJson = writer.writeValueAsString(subInstance);

    String expectedJson = "{\"base\":1,\"sub\":2}";
    assertEquals(expectedJson, subJson);
}