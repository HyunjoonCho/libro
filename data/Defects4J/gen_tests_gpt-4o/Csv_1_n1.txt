public void testExtendedBufferReaderLineCount() throws IOException {
    String input = "line1\rline2\nline3\r\nline4";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    int linesCounted = 0;
    while (reader.readLine() != null) {
        linesCounted++;
    }
    
    assertEquals(4, linesCounted);
}