public void testKMeansPlusPlusClustererTruncation() {
    List<Clusterable> points = Arrays.asList(
        new DoublePoint(new double[]{0.1, 0.1}),
        new DoublePoint(new double[]{0.2, 0.2}),
        new DoublePoint(new double[]{0.3, 0.3}),
        new DoublePoint(new double[]{0.4, 0.4}),
        new DoublePoint(new double[]{0.5, 0.5})
    );

    // Using a distance measure that highlights the truncation issue
    DistanceMeasure distanceMeasure = new EuclideanDistance();
    KMeansPlusPlusClusterer<Clusterable> clusterer =
        new KMeansPlusPlusClusterer<>(2, -1, distanceMeasure);

    List<CentroidCluster<Clusterable>> clusters = clusterer.cluster(points);

    // There should be no empty clusters if distances are handled correctly
    for (CentroidCluster<Clusterable> cluster : clusters) {
        assertFalse(cluster.getPoints().isEmpty());
    }
}