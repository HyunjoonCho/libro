
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
import junit.framework.TestCase;

public class GsonTypesStackOverflowTest extends TestCase {

    private static class Foo1<A> {
        Foo2<? extends A> foo2;
    }

    private static class Foo2<B> {
        Foo1<? super B> foo1;
    }

    public void testRecursiveResolveSimple() {
        try {
            new Gson().getAdapter(TypeToken.get(Foo1.class));
            fail("Expected StackOverflowError due to recursive type resolution");
        } catch (StackOverflowError e) {
            // This is the expected behavior that needs to be rectified
        }
    }
}
