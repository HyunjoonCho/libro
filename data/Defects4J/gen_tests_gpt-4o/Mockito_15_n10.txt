
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import static org.junit.Assert.*;
import static org.mockito.Mockito.*;

public class VarargsCaptorTest {

    interface VarargsService {
        void performAction(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Create a mock VarargsService
        VarargsService service = Mockito.mock(VarargsService.class);

        // Call the method with varargs
        service.performAction("arg1", "arg2", "arg3");

        // Capture the arguments passed to the performAction method
        ArgumentCaptor<String[]> argumentCaptor = ArgumentCaptor.forClass(String[].class);
        verify(service).performAction(argumentCaptor.capture());

        // Verify the captured arguments
        String[] capturedArgs = argumentCaptor.getValue();
        assertNotNull(capturedArgs);
        assertEquals(3, capturedArgs.length);
        assertEquals("arg1", capturedArgs[0]);
        assertEquals("arg2", capturedArgs[1]);
        assertEquals("arg3", capturedArgs[2]);
    }
}
