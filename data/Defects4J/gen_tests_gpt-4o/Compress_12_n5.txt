
import java.io.ByteArrayInputStream;
import java.io.IOException;
import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
import org.junit.Test;

public class TarArchiveInputStreamTest {

    @Test(expected = IOException.class)
    public void testCorruptTarFileThrowsIOException() throws IOException {
        // This byte array represents a small malformed TAR file
        byte[] corruptTarData = {
                0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, (byte) 0xFF // Invalid sequence
        };

        try (ByteArrayInputStream bais = new ByteArrayInputStream(corruptTarData);
             TarArchiveInputStream tarInput = new TarArchiveInputStream(bais)) {
            // Attempt to read the next entry, which should cause an IOException
            tarInput.getNextTarEntry();
        }
    }
}
