public void testDuplicateLocationInJsonMappingException() {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"field\":\"notAnInteger\"}";
    try {
        mapper.readValue(json, ExampleClass.class);
        fail("Expected InvalidFormatException");
    } catch (InvalidFormatException e) {
        String message = e.getMessage();
        assertFalse("Location information included twice", message.split(" at \\[source").length > 2);
    }
}

static class ExampleClass {
    public int field;
}