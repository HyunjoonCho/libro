public void testBase64EncodeChunking() throws Exception {
    Base64 base64 = new Base64();

    String input = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
    byte[] inputBytes = input.getBytes("UTF-8");

    // Static method does not chunk
    byte[] encodedStatic = Base64.encodeBase64(inputBytes);
    assertEquals("YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ==", new String(encodedStatic, "UTF-8"));

    // Instance method, in version 1.4, chunks into lines of 76 characters with CRLF
    byte[] encodedInstance = base64.encode(inputBytes);
    String expected = "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFh\r\nYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ==\r\n";
    assertEquals(expected, new String(encodedInstance, "UTF-8"));
}