
import org.apache.commons.cli.HelpFormatter;
import org.apache.commons.cli.Options;

public class HelpFormatterTest {

    @org.junit.Test
    public void testFooterWithLeadingWhitespaces() {
        Options options = new Options();
        HelpFormatter formatter = new HelpFormatter();
        String footer = "line1:\n line2:\n";

        java.io.ByteArrayOutputStream out = new java.io.ByteArrayOutputStream();
        java.io.PrintStream ps = new java.io.PrintStream(out);
        java.io.PrintStream old = System.out;
        System.setOut(ps);

        formatter.printHelp("cli", null, options, footer, true);

        System.out.flush();
        System.setOut(old);

        String result = out.toString();

        // The leading space in " line2" should be preserved
        String expectedOutputFragment = "line1:" + System.lineSeparator() + " line2:";

        assertTrue("The footer leading spaces were stripped", result.contains(expectedOutputFragment));
    }
}
