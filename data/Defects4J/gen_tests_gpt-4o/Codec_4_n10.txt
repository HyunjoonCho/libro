public void testBase64InstanceEncoding() throws Exception {
    Base64 b64 = new Base64();
    
    String s1 = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";    
    byte[] b1 = s1.getBytes("UTF-8");
    
    byte[] resultWithInstance = b64.encode(b1);
    String encodedStringWithInstance = new String(resultWithInstance, "UTF-8");

    // Check if result contains CRLF by stripping it and comparing to static method's output
    Base64 base64 = new Base64(false); // disable line wrapping
    byte[] expectedResult = base64.encode(b1);
    String expectedString = new String(expectedResult, "UTF-8");

    assertFalse("Encoded string should not have line wrapping or CRLF", encodedStringWithInstance.contains("\n"));
    assertEquals("Expected encoded string to match the static method output", expectedString, encodedStringWithInstance);
}