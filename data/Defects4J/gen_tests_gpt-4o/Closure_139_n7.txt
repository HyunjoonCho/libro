
import org.junit.Test;
import javax.script.Invocable;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class FunctionRedefinitionTest {

    @Test
    public void testFunctionRedefinition() throws ScriptException, NoSuchMethodException {
        // Initialize the script engine
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");

        // JavaScript code snippet that reproduces the bug
        String script = 
                "function assert(b) { if (!b) throw 'error'; }\n" +
                "assert(f() === 1);\n" +
                "var f = function() { return 2; }\n" +
                "assert(f() === 2);\n" +
                "function f() { return 1; }\n";

        // Execute the script
        engine.eval(script);
    }
}
