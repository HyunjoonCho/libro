public void testGammaDistributionSerialization() throws Exception {
    GammaDistribution original = new GammaDistribution(2.0, 2.0);
    ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
    ObjectOutputStream out = new ObjectOutputStream(byteOut);
    out.writeObject(original);
    out.close();

    ByteArrayInputStream byteIn = new ByteArrayInputStream(byteOut.toByteArray());
    ObjectInputStream in = new ObjectInputStream(byteIn);
    GammaDistribution deserialized = (GammaDistribution) in.readObject();
    in.close();

    original.reseedRandomGenerator(12345);
    deserialized.reseedRandomGenerator(12345);

    for (int i = 0; i < 10; i++) {
        assertEquals(original.sample(), deserialized.sample(), 1e-9);
    }
}