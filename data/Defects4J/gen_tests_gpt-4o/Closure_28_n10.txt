public void testFunctionInlining() {
    StringBuilder sb = new StringBuilder();
    sb.append("function f() { return false; }\n");
    for (int i = 0; i < 25; i++) {
        sb.append("if (!f()) alert('hi');\n");
    }
    
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    Compiler compiler = new Compiler();
    SourceFile input = SourceFile.fromCode("test.js", sb.toString());
    Result result = compiler.compile(SourceFile.fromCode("externs.js", ""),
                                     input,
                                     options);
                                     
    assertTrue(result.success);
    String compiledCode = compiler.toSource();
    // The compiled code should no longer contain calls to f(), they should be inlined.
    assertFalse(compiledCode.contains("f()"));
}