
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.exc.InvalidTypeIdException;
import org.junit.Test;
import static org.junit.Assert.*;

public class PolymorphicDeserializationTest {

    @Test
    public void testBlockedDeserialization() {
        ObjectMapper objectMapper = new ObjectMapper();
        String jsonInput = "{\"@type\":\"java.util.logging.FileHandler\"}";

        try {
            objectMapper.readValue(jsonInput, Object.class);
            fail("Expected exception not thrown");
        } catch (InvalidTypeIdException e) {
            // Assert that the exception message is as expected, indicating the type is blocked.
            assertTrue(e.getMessage().contains("Cannot deserialize instance of `java.util.logging.FileHandler`"));
        } catch (Exception e) {
            fail("Unexpected exception thrown: " + e.getMessage());
        }
    }
}
