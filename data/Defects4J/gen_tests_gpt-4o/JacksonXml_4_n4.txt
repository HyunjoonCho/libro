
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.ser.ToXmlGenerator;
import org.junit.jupiter.api.Test;

import java.io.StringWriter;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class XmlSerializerProviderTest {

    @Test
    public void testCustomRootNameForNullSerialization() throws Exception {
        XmlMapper xmlMapper = new XmlMapper();
        xmlMapper = (XmlMapper) xmlMapper.setSerializerProvider(
                xmlMapper.getSerializerProvider().withRootName("customRoot"));

        StringWriter writer = new StringWriter();
        ToXmlGenerator generator = xmlMapper.getFactory().createGenerator(writer);

        // Serializing a null value
        xmlMapper.writeValue(generator, null);
        generator.close();

        // Correct behavior should use "customRoot" as the root element for nulls
        assertEquals("<customRoot/>", writer.toString().trim());
    }
}
