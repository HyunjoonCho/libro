public void testDuplicateLocationInJsonMappingException() {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"age\":\"notANumber\"}";

    try {
        mapper.readerFor(Person.class).readValue(json);
        fail("Expected an InvalidFormatException to be thrown");
    } catch (InvalidFormatException e) {
        String message = e.getMessage();
        int firstLocationIndex = message.indexOf(" at [Source");
        int secondLocationIndex = message.indexOf(" at [Source", firstLocationIndex + 1);
        assertTrue(firstLocationIndex != -1);
        assertTrue(secondLocationIndex == -1);
    }
}

static class Person {
    public int age;
}