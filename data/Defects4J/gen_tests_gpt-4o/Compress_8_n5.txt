
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.junit.Test;

import java.nio.charset.StandardCharsets;

import static org.junit.Assert.assertEquals;

public class TarArchiveEntryTest {

    @Test
    public void testParseTarHeader_withTrailingSpace() {
        byte[] header = new byte[512];
        // setting up a mock TAR header with size field (offset 124, length 11) and a trailing space
        System.arraycopy("00000000123 ".getBytes(StandardCharsets.US_ASCII), 0, header, 124, 12);
        
        TarArchiveEntry entry = new TarArchiveEntry(header);
        assertEquals(83, entry.getSize()); // 00000000123 should correctly parse to octal 83 (decimal 83)
    }

    @Test
    public void testParseTarHeader_withTrailingNull() {
        byte[] header = new byte[512];
        // setting up a mock TAR header with size field (offset 124, length 11) and a trailing NULL
        System.arraycopy("00000000123\0".getBytes(StandardCharsets.US_ASCII), 0, header, 124, 12);

        TarArchiveEntry entry = new TarArchiveEntry(header);
        assertEquals(83, entry.getSize()); // 00000000123 should correctly parse to decimal 83
    }
}
