
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.fail;

import org.junit.Test;

public class ElementToStringTest {
    
    private static class Element {
        private boolean detached = true;
        
        @Override
        public String toString() {
            if (detached) {
                throw new NullPointerException("Detached element");
            }
            return "Element{}";
        }
        
        public void remove() {
            this.detached = true;
        }
        
        public void reAdd() {
            this.detached = false;
        }
    }

    @Test
    public void testToStringForOrphanElement() {
        Element element = new Element();
        
        // Simulate removing the element, making it detached
        element.remove();
        
        try {
            String result = element.toString();
            fail("Expected a NullPointerException, but got: " + result);
        } catch (NullPointerException npe) {
            // Expected behavior, test should not fail due to NPE
            assertNotNull(npe.getMessage());
        }
    }
}
