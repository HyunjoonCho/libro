@Test
public void testGetLegendItemsWithNullDataset() {
    // Mocking and setting up a minimal AbstractCategoryItemRenderer with a mock plot
    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer() {};
    CategoryPlot plot = Mockito.mock(CategoryPlot.class);
    
    // Set the renderer's plot to the mocked plot
    renderer.setPlot(plot);
    
    // Set up the plot to return an index and null dataset
    Mockito.when(plot.getIndexOf(renderer)).thenReturn(0);
    Mockito.when(plot.getDataset(0)).thenReturn(null); // Simulating null dataset
    
    // Calling getLegendItems() and ensuring no NullPointerException is thrown
    LegendItemCollection items = renderer.getLegendItems();
    assertNotNull(items); // Ensure the result is a non-null LegendItemCollection
    assertTrue(items.isEmpty()); // Expecting empty collection if dataset is null
}