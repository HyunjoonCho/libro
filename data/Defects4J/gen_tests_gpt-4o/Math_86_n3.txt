
import org.junit.Test;
import org.apache.commons.math3.linear.CholeskyDecomposition;
import org.apache.commons.math3.linear.RealMatrix;
import org.apache.commons.math3.linear.MatrixUtils;
import org.apache.commons.math3.linear.NonPositiveDefiniteMatrixException;

public class CholeskyDecompositionTest {

    @Test(expected = NonPositiveDefiniteMatrixException.class)
    public void testNonPositiveDefiniteMatrix() {
        // Define a matrix that is symmetric but not positive definite
        double[][] matrixData = {
            {0.40434286, -0.09376327, 0.30328980, 0.04909388},
            {-0.09376327, 0.10400408, 0.07137959, 0.04762857},
            {0.30328980, 0.07137959, 0.30458776, 0.04882449},
            {0.04909388, 0.04762857, 0.04882449, 0.07543265}
        };

        // Create the matrix
        RealMatrix matrix = MatrixUtils.createRealMatrix(matrixData);

        // Attempt to perform Cholesky decomposition, expecting an exception to be thrown
        CholeskyDecomposition choleskyDecomposition = new CholeskyDecomposition(matrix);
    }
}
