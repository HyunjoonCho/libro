public void testHandleNullTypeIdForPolymorphicValues() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.activateDefaultTyping(mapper.getPolymorphicTypeValidator(), ObjectMapper.DefaultTyping.EVERYTHING, JsonTypeInfo.As.EXTERNAL_PROPERTY);

    String json = "{\"type\":null, \"value\":\"someValue\"}";

    Exception exception = assertThrows(JsonMappingException.class, () -> {
        mapper.readValue(json, BaseClass.class);
    });

    String expectedMessage = "missing type id property 'type'";
    String actualMessage = exception.getMessage();

    assertTrue(actualMessage.contains(expectedMessage));
}