
import static org.junit.Assert.*;
import org.junit.Test;
import com.google.javascript.jscomp.*;

public class MissingPropertyErrorTest {
    
    @Test
    public void testWrongTypeNameReported() {
        CompilerOptions options = new CompilerOptions();
        options.setWarningLevel(DiagnosticGroups.CHECK_TYPES, CheckLevel.WARNING);
        
        String jsCode = "/**\n" +
                        " * @constructor\n" +
                        " */\n" +
                        "function C2() {}\n" +
                        "\n" +
                        "/**\n" +
                        " * @constructor\n" +
                        " */\n" +
                        "function C3(c2) {\n" +
                        "  /**\n" +
                        "   * @type {C2}\n" +
                        "   * @private\n" +
                        "   */\n" +
                        "  this.c2_ = c2;\n" +
                        "  \n" +
                        "  use(this.c2_.prop);\n" +
                        "}\n" +
                        "\n" +
                        "function use(x) {}";

        Compiler compiler = new Compiler();
        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), 
                                         SourceFile.fromCode("test.js", jsCode), 
                                         options);
        
        assertTrue(result.warnings.length > 0);
        JSError error = result.warnings[0];
        
        // Verify that the error message contains "Property prop never defined on C2"
        assertTrue(error.description.contains("Property prop never defined on C2"));
    }
}
