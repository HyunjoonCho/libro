public void testOverzealousArgumentsOptimisation() {
    try {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");
        String script =
            "function d3_call(callback) {" +
            "  var f = callback;" +
            "  arguments[0] = this;" +
            "  f.apply(this, arguments);" +
            "  return this;" +
            "}" +
            "var result = '';" +
            "d3_call(function(callback) { result = callback; });" +
            "result;";
        Object result = engine.eval(script);
        assertNotSame(this, result);
    } catch (ScriptException e) {
        fail("Script execution failed");
    }
}