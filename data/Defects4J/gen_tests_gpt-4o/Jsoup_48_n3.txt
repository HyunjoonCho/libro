
import org.jsoup.Connection;
import org.jsoup.helper.HttpConnection;
import org.jsoup.nodes.Document;
import org.jsoup.Connection.Response;
import org.junit.Test;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import static org.junit.Assert.assertEquals;

public class DuplicateHeaderTest {
    @Test
    public void testDuplicateResponseHeaders() {
        // Create mock headers with duplicate "X-Powered-By"
        Map<String, List<String>> responseHeaders = new HashMap<>();
        responseHeaders.put("X-Powered-By", List.of("PHP/5.2.8", "ASP.NET"));

        // Mock the response
        Response response = HttpConnection.Response.create();
        response.processResponseHeaders(responseHeaders);

        // Fetch header values
        String poweredBy = response.header("X-Powered-By");

        // Assert that headers were combined
        assertEquals("PHP/5.2.8 ASP.NET", poweredBy);
    }
}
