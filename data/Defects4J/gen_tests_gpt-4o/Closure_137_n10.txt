public void testJscDeterministicTest() {
    String jsCode = "var t = null;\n" +
            "window.test = function() {\n" +
            "  if (t != null) {\n" +
            "    t = null;\n" +
            "  }\n" +
            "  t = 1;\n" +
            "};";
    
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    Compiler compiler = new Compiler();
    compiler.initOptions(options);
    
    CompilerInput input = new CompilerInput(SourceFile.fromCode("test.js", jsCode));
    
    Result result = compiler.compile(ImmutableList.of(), ImmutableList.of(input), options);
    
    assertFalse("Compilation should not have errors", result.errors.size() > 0);
    assertTrue("Warning JSC_DETERMINISTIC_TEST: condition always evaluates to false should not be present", 
               result.warnings.stream().noneMatch(warning -> "JSC_DETERMINISTIC_TEST".equals(warning.getType().key)));
}