
import org.apache.commons.math3.linear.OpenMapRealMatrix;
import org.junit.Test;

import static org.junit.Assert.assertThrows;

public class OpenMapRealMatrixTest {

    @Test
    public void testComputeKeyOverflow() {
        // Create a matrix with dimensions that will cause an overflow
        int numRows = Integer.MAX_VALUE / 2 + 1; // Large row count
        int numCols = 2; // Two columns

        // Instantiate the OpenMapRealMatrix
        OpenMapRealMatrix matrix = new OpenMapRealMatrix(numRows, numCols);

        // Attempt to set a value and check for unexpected behavior due to overflow
        assertThrows(ArrayIndexOutOfBoundsException.class, () -> {
            // This access should cause an overflow while computing the key
            matrix.setEntry(numRows - 1, 1, 1.0);
        });
    }
}
