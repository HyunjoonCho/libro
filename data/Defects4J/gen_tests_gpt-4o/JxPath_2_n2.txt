public void testNodeSetReturnedByExtensionFunction() {
    JXPathContext context = JXPathContext.newContext(new Object());
    JXPathContext.addExtensionFunction("ems:observations", "your.package.here.ExtensionFunction.observations");

    // Assuming observations() function is expected to return a NodeSet with multiple pointers,
    // but it only returns a single node containing the NodeSet, which is incorrect behavior.
    List<?> nodes = context.selectNodes("ems:observations()");
    
    // Check if the size is as expected (i.e., the number of nodes in the NodeSet)
    // Here I'm assuming it should be 3 for the sake of this example, but you should replace
    // it with the actual expected number of nodes.
    assertEquals(3, nodes.size());
}