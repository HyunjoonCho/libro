
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

public class JsoupNestedPageTest {

    @Test
    public void testQuadraticBehaviourOnDeeplyNestedPages() {
        // Generate a deeply nested HTML structure
        StringBuilder html = new StringBuilder("<html><head><title>Test</title></head><body>");
        
        int depth = 10000; // Set a high depth level to simulate deep nesting

        for (int i = 0; i < depth; i++) {
            html.append("<div>");
        }

        html.append("Deep content");

        for (int i = 0; i < depth; i++) {
            html.append("</div>");
        }
        
        html.append("</body></html>");

        // Measure the time taken to parse
        long startTime = System.currentTimeMillis();
        
        Document doc = Jsoup.parse(html.toString());

        long endTime = System.currentTimeMillis();
        long duration = endTime - startTime;

        System.out.println("Parsing Time: " + duration + "ms");

        // Assert that the parsing completes, modify this as necessary for your performance criteria
        // For example, you might want to assert that it completes within a certain duration
        // assertTrue("Parsing took too long", duration < YOUR_EXPECTED_THRESHOLD);
    }
}
