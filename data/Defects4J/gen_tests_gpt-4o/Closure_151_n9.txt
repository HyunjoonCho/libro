
import org.junit.Test;
import java.io.ByteArrayOutputStream;
import java.io.PrintStream;
import static org.junit.Assert.assertTrue;

public class CompilerVersionOptionTest {

    @Test
    public void testVersionOption() {
        // Change this to the path of your compiler.jar
        String compilerJarPath = "compiler.jar"; 
        
        // Prepare to capture the output
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        PrintStream originalOut = System.out;
        PrintStream originalErr = System.err;
        System.setOut(new PrintStream(outputStream));
        System.setErr(new PrintStream(outputStream));
        
        try {
            // Attempt to run the compiler with --version
            Process process = new ProcessBuilder("java", "-jar", compilerJarPath, "--version")
                .redirectErrorStream(true)
                .start();
            process.waitFor();
            
            // Get the output
            String output = outputStream.toString();
            
            // Check that the output contains an error message about --version not being supported
            assertTrue("Expected error message about --version not supported, but got: " + output,
                output.contains("not supported"));

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            // Restore the original output streams
            System.setOut(originalOut);
            System.setErr(originalErr);
        }
    }
}
