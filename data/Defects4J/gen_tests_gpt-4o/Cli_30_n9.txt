
import org.apache.commons.cli.*;

import java.util.Properties;
import junit.framework.TestCase;

public class OptionGroupStateTest extends TestCase {

    public void testOptionGroupStateWithDefaults() {
        // Create an Options instance
        Options options = new Options();

        // Create mutually exclusive options
        OptionGroup group = new OptionGroup();
        group.addOption(new Option("a", "option-a", false, "Option A"));
        group.addOption(new Option("b", "option-b", false, "Option B"));
        options.addOptionGroup(group);

        // Create a parser
        CommandLineParser parser = new DefaultParser();

        // Define default properties
        Properties defaultProps = new Properties();
        defaultProps.setProperty("b", "true");

        try {
            // Command line arguments
            String[] args = {"-a"};

            // Parse the options with the default properties
            CommandLine cmd = parser.parse(options, args, defaultProps);

            // Both options 'a' and 'b' should not be present at the same time
            assertTrue(cmd.hasOption("a"));
            assertFalse(cmd.hasOption("b")); // This should be false due to mutually exclusive nature

        } catch (ParseException e) {
            fail("Parsing failed: " + e.getMessage());
        }
    }
}

