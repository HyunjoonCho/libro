
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionBuilder;
import org.junit.Test;

import static org.junit.Assert.*;

public class OptionBuilderResetTest {

    @Test
    public void testOptionBuilderResetOnException() {
        // First, create an invalid option to trigger IllegalArgumentException
        try {
            OptionBuilder.withDescription("This is a test description");
            OptionBuilder.hasArg();
            // Creating an option with an invalid character in the name to trigger the exception
            OptionBuilder.create("invalid-option");
            fail("Expected IllegalArgumentException");
        } catch (IllegalArgumentException e) {
            // Expected, do nothing
        }

        // Now, create a valid option and check if it does not carry over any state
        try {
            OptionBuilder.withDescription("This should not have a description");
            Option option = OptionBuilder.create("valid");
            assertNotNull("Option should be created successfully", option);
            assertNull("Option description should be null", option.getDescription());
        } catch (IllegalArgumentException e) {
            fail("Did not expect IllegalArgumentException for a valid option name");
        }
    }
}
