script
import com.google.javascript.jscomp.*;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import com.google.javascript.jscomp.SourceFile;
import static org.junit.Assert.*;
import org.junit.Test;

public class GoogScopePrivateFunctionTest {
    
    @Test
    public void testPrivateTopLevelFunctionInGoogScope() {
        // Input JS code to test
        String code = 
            "goog.scope(function() {" +
            "   /* @private */" +
            "   function test() {}" +
            "});";

        // Create a compiler instance
        Compiler compiler = new Compiler();

        // Set options
        CompilerOptions options = new CompilerOptions();
        options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT_2015);
        
        // Input file
        SourceFile inputFile = SourceFile.fromCode("test.js", code);
        
        // Run the compile process
        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), inputFile, options);

        // Check for error: "The local variable test is in a goog.scope and is not an alias."
        assertTrue("Expected error about non-alias in goog.scope", result.errors.length > 0);
        assertEquals(DiagnosticGroups.CHECKS_ONLY, result.errors[0].getType());
    }
}
