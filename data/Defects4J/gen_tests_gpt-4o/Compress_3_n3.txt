public void testFinishMethodSafety() throws Exception {
    ArchiveOutputStream archiveOutputStream = new TarArchiveOutputStream(new ByteArrayOutputStream());
    archiveOutputStream.finish();
    try {
        archiveOutputStream.write(new byte[]{1, 2, 3});
        fail("Expected IOException after finish() is called");
    } catch (IOException e) {
        // expected
    }
}