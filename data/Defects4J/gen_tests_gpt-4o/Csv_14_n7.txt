
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;

import java.io.IOException;
import java.io.StringWriter;

import static org.junit.Assert.assertEquals;

public class CsvPrinterTest {

    @Test
    public void testNegativeNumericValuesFirstColumnMinimalMode() throws IOException {
        String[] header = {"long", "lat", "data"};
        String[] record = {"-92.222", "43.333", "3"};

        StringWriter writer = new StringWriter();
        CSVFormat format = CSVFormat.DEFAULT
                .withHeader(header)
                .withQuoteMode(org.apache.commons.csv.QuoteMode.MINIMAL);

        try (CSVPrinter csvPrinter = new CSVPrinter(writer, format)) {
            csvPrinter.printRecord(record);
        }

        // The expected output should not quote the first entry if the rule is not applied
        String expectedOutput = "long,lat,data\n-92.222,43.333,3\n";
        assertEquals(expectedOutput, writer.toString());
    }
}
