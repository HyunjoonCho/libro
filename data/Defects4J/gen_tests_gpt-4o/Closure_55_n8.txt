
import com.google.javascript.jscomp.CommandLineRunner;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JSSourceFile;
import com.google.javascript.jscomp.Result;
import org.junit.Test;

import static org.junit.Assert.assertFalse;

public class ClosureCompilerTest {

    @Test
    public void testGetterCompilation() {
        // JavaScript code with a getter that triggers the issue
        String jsCode = "var obj = { get name() { return 'test'; } };";

        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();

        // Set simple optimizations level
        Compiler.setLoggingLevel(Level.WARNING);
        
        // Compile the JS code
        Result result = compiler.compile(
                JSSourceFile.fromCode("externs.js", ""),  // externs if any, empty here
                JSSourceFile.fromCode("input.js", jsCode),
                options
        );

        // Check that there was a compilation error
        assertFalse("Compilation should fail", result.success);
    }
}
