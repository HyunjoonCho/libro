script
const assert = require('assert');
const { compile } = require('closure-compiler-js');

function testPrivateTopLevelFunctionInGoogScope() {
    const code = `
        goog.scope(function() {
          /* @private */
          function test() {}
        });
    `;

    const result = compile({
        jsCode: [{ src: code }],
        warningLevel: 'VERBOSE'
    });

    // We're expecting no errors or warnings about the "test" function being in a goog.scope.
    const expectedErrorMessage = "The local variable test is in a goog.scope and is not an alias.";

    // The test should expect an empty array, meaning no errors were found.
    assert.strictEqual(result.errors.length, 0, "There should be no errors.");
    assert.strictEqual(result.warnings.length, 0, "There should be no warnings.");
}

// Run the test function
testPrivateTopLevelFunctionInGoogScope();
