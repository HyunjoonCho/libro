public void testJsonDeserializeAsSubtype() throws Exception {
    ObjectMapper mapper = new ObjectMapper();

    String json = "{\"something\": [{\"id\": \"123e4567-e89b-12d3-a456-426614174000\", \"property\": \"value\"}]}";

    // Create a class to hold the deserialized "something" Map
    class Holder {
        @JsonDeserialize(as = MyHashMap.class)
        private Map<UUID, Foo> something;

        public Map<UUID, Foo> getSomething() {
            return something;
        }

        public void setSomething(Map<UUID, Foo> something) {
            this.something = something;
        }
    }

    Holder result = mapper.readValue(json, Holder.class);

    assertNotNull(result.getSomething());
    assertTrue(result.getSomething().containsKey(UUID.fromString("123e4567-e89b-12d3-a456-426614174000")));
    assertEquals("value", result.getSomething().get(UUID.fromString("123e4567-e89b-12d3-a456-426614174000")).getProperty());
}