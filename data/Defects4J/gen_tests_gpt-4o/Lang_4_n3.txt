
import org.apache.commons.lang3.StringEscapeUtils;
import org.apache.commons.lang3.text.translate.LookupTranslator;
import org.junit.Test;

import java.nio.CharBuffer;

import static org.junit.Assert.assertEquals;

public class LookupTranslatorTest {

    @Test
    public void testCharSequenceTranslation() {
        // Test with String as CharSequence
        CharSequence cs1 = "1 < 2";
        String result1 = StringEscapeUtils.ESCAPE_HTML4.translate(cs1);
        assertEquals("1 &lt; 2", result1);

        // Test with CharBuffer as CharSequence
        CharSequence cs2 = CharBuffer.wrap("1 < 2".toCharArray());
        String result2 = StringEscapeUtils.ESCAPE_HTML4.translate(cs2);

        // The expected result should be the same as with the string
        // However, the current implementation fails to translate correctly
        // due to the use of CharSequence as keys in the map.
        assertEquals("1 &lt; 2", result2);
    }
}
