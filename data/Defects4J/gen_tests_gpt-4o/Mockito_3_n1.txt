
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import java.util.List;

import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.*;

public class VarargsCaptorTest {

    interface SampleService {
        void varargsMethod(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Create a mock of the SampleService interface
        SampleService mockService = Mockito.mock(SampleService.class);

        // Call the varargs method with specific arguments
        mockService.varargsMethod("first", "second", "third");

        // Create an ArgumentCaptor for capturing varargs
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);

        // Verify that varargsMethod was called and capture the arguments
        verify(mockService).varargsMethod(captor.capture());

        // Get the captured argument values as a list
        List<String> capturedArgs = captor.getAllValues();

        // Validate the captured arguments
        assertEquals(3, capturedArgs.size());
        assertEquals("first", capturedArgs.get(0));
        assertEquals("second", capturedArgs.get(1));
        assertEquals("third", capturedArgs.get(2));
    }
}
