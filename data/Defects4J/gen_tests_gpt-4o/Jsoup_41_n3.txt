
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertNotEquals;

public class ElementHashCodeTest {

    @Test
    public void testElementHashCodeIgnoresContentText() {
        String html = "<html>" +
                      "<head>" +
                      "</head>" +
                      "<body>" +
                      "<div style=\"blah\">TODO: write content</div>" +
                      "<div style=\"blah\">Nothing here</div>" +
                      "<p style=\"test\">Empty</p>" +
                      "<p style=\"nothing\">Empty</p>" +
                      "</body>" +
                      "</html>";

        Document doc = Jsoup.parse(html);

        Elements elements = doc.select("[style]");
        
        // Retrieving hash codes for comparison
        Element firstDiv = elements.get(0);
        Element secondDiv = elements.get(1);

        // The test below will check if the hash codes are not equal.
        // According to the bug report, they were the same due to content being ignored in hashCode calculation.
        assertNotEquals("Hash codes should be different if element text is considered", 
                        firstDiv.hashCode(), 
                        secondDiv.hashCode());
    }
}
