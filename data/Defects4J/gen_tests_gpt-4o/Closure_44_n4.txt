
import org.junit.Test;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

import static org.junit.Assert.assertEquals;

public class JavaScriptRegexTest {

    @Test
    public void testJavaScriptRegexParsing() throws ScriptException {
        // Set up the JavaScript engine
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");

        // JavaScript snippet to be tested
        String script = "function testAlert() {" +
                        "    return alert(/ / / / /);" +
                        "}" +
                        "function alert(expression) {" +
                        "    return 'alert(' + expression.toString() + ')';" +
                        "}";

        // Evaluate the JavaScript script
        engine.eval(script);

        // Execute the JavaScript function and capture the result
        String result = (String) engine.eval("testAlert();");

        // Check the result; expecting "alert(/ // / /);" as per bug report
        assertEquals("alert(/ // / /);", result);
    }
}
