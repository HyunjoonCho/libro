
import static org.junit.Assert.fail;
import com.google.javascript.rhino.Node;
import com.google.javascript.jscomp.IR;
import org.junit.Test;

public class TryCatchBlockTest {

    @Test
    public void testTryCatchBlockBuilding() {
        try {
            // Create the try block node
            Node nodeTry = IR.block(
                IR.var(
                    IR.name("testing"), 
                    IR.number(11)
                )
            );
        
            // Create the catch block node
            Node nodeCatch = IR.catchNode(
                IR.name("blabla"),
                IR.block(
                    IR.var(
                        IR.name("testing"),
                        IR.number(22)
                    )
                )
            );
        
            // Attempt to create a try-catch structure
            IR.tryCatch(nodeTry, nodeCatch);
        
            fail("An exception should have been thrown due to the improper catch node usage.");
        } catch (RuntimeException e) {
            // Assert that the error message corresponds with the expected internal compiler error
            assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
            assertTrue(e.getMessage().contains("Please report this problem."));
        }
    }
}
