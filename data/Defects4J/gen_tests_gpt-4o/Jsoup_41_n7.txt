
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertNotEquals;

public class ElementHashCodeTest {

    @Test
    public void testElementHashCodeIgnoresContentText() {
        String html = "<html>"
                + "<head></head>"
                + "<body>"
                + "<div style=\"blah\">TODO: write content</div>"
                + "<div style=\"blah\">Nothing here</div>"
                + "<p style=\"test\">Empty</p>"
                + "<p style=\"nothing\">Empty</p>"
                + "</body>"
                + "</html>";

        Document doc = Jsoup.parse(html);
        Elements elements = doc.select("[style]");

        Element firstDiv = elements.get(0); // <div style="blah">TODO: write content</div>
        Element secondDiv = elements.get(1); // <div style="blah">Nothing here</div>

        // The hash codes should be different as the content text is different.
        assertNotEquals(firstDiv.hashCode(), secondDiv.hashCode());
        
        // Output the hash codes to observe the issue
        System.out.println("First div hashCode: " + firstDiv.hashCode());
        System.out.println("Second div hashCode: " + secondDiv.hashCode());
    }
}
