
import com.google.javascript.jscomp.CommandLineRunner;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.rhino.Node;

public class JSCompilerTypedefTest {
    
    public static void main(String[] args) {
        String code = 
            "goog.provide('a.b.c');\n" +
            "goog.scope(function() {\n" +
            "  var b = a.b;\n" +
            "  var c = b.c;\n" +
            "\n" +
            "  /** @typedef {string} */\n" +
            "  c.MyType;\n" +
            "\n" +
            "  /** @param {c.MyType} x The variable. */\n" +
            "  c.myFunc = function(x) {};\n" +
            "});";

        CompilerOptions options = new CompilerOptions();
        // We can set various options here if needed

        CommandLineRunner runner = new CommandLineRunner(
            new String[] {"--js", "--", code}
        );

        int result = runner.doRun();
        if (result != 0) {
            System.out.println("Test case failed: JSCompiler error while processing typedefs.");
        } else {
            System.out.println("Test case passed: No errors.");
        }
    }
}
