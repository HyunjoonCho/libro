public void testUndefinedNamespaceHandling() {
    try {
        // Simulate the setup where namespaces are registered
        NamespaceContextImpl namespaceContext = new NamespaceContextImpl();
        namespaceContext.addNamespace("A", "/http...");
        namespaceContext.addNamespace("B", "/http...");

        // Prepare the XML String
        String xmlString = "<ElementA A:myAttr=\"Mytype\" xmlns:A=\"/http..\">" +
                           "<B:ElementB xmlns:B=\"/http...\">MY VALUE</B:ElementB>" +
                           "</ElementA>";

        // Parse the XML
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setNamespaceAware(true);
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(new StringReader(xmlString)));

        // Access the attribute with a namespace, expecting no exception
        Node node = doc.getDocumentElement();
        NamedNodeMap attributes = node.getAttributes();
        Node attr = attributes.getNamedItemNS("/http...", "myAttr");
        assertNotNull(attr);
    } catch (Exception e) {
        fail("Exception should not be thrown: " + e.getMessage());
    }
}