public void testAssignmentsWithinConditions() {
    assertEquals("true", reductionOriginal());
    assertEquals("true", reductionCompiled());
}

private String reductionOriginal() {
    Boolean a, b;
    if (echo(b = true) || echo(b = false)) {
        a = b;
    } else {
        a = null;
    }
    return a == null ? "undefined" : a.toString();
}

private String reductionCompiled() {
    Boolean a;
    return echo(a = true) || echo(a = false) ? a.toString() : "undefined";
}

private boolean echo(boolean condition) {
    return condition;
}