
import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class AssignmentInConditionTest {

    // Mock echo function to mimic the JavaScript echo behavior
    private boolean echo(boolean value) {
        return value;
    }
    
    // Original JavaScript function translated into Java
    public Boolean originalReduction() {
        Boolean a = null, b;
        if (echo(b = true) || echo(b = false)) {
            a = b;
        } else {
            a = null;
        }
        return a;
    }

    // Compiled JavaScript function translated end optimized incorrectly into Java
    public Boolean compiledReduction() {
        Boolean a = null;
        return echo(true) || echo(a = false) ? a : null;
    }

    @Test
    public void testOriginalVsCompiled() {
        // Expected both original and compiled should return true
        Boolean expected = true;

        // Execute original and compiled
        Boolean originalResult = originalReduction();
        Boolean compiledResult = compiledReduction();

        // Compare results
        assertEquals("Original function result should be true", expected, originalResult);
        assertEquals("Compiled function result should be true", expected, compiledResult);
    }
}
