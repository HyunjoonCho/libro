public void testCastingFunction() {
    String script = "console.log( /** @type {function(!string):!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'])('$version') );";
    // Assuming we have a method to compile JS with ADVANCED_OPTIMIZATIONS
    String compiledCode = compileJavaScriptWithAdvancedOptimizations(script);
    
    String expectedFragment = "(0,(new window.ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\")).GetVariable)";
    assertTrue("Compiled code should incorrectly contain (0,...) wrapping.", compiledCode.contains(expectedFragment));
}