public void testUnmodifiableNonRandomAccessList() throws Exception {
    Collection<?> expected = Collections.unmodifiableList(new LinkedList<>(Arrays.asList("first", "second")));
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);
    String json = mapper.writeValueAsString(expected);
    Collection<?> actual = mapper.readValue(json, Collection.class);
    
    assertEquals(expected, actual);
    assertEquals(expected.getClass(), actual.getClass());
}