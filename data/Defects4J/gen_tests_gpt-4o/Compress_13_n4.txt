
import org.apache.commons.compress.archivers.ArchiveEntry;
import org.apache.commons.compress.archivers.ArchiveInputStream;
import org.apache.commons.compress.archivers.ArchiveStreamFactory;
import org.junit.Test;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;

import static org.junit.Assert.*;

public class ZipArchiveTest {

    @Test
    public void testEntryWithUmlautInDirectory() throws Exception {
        // Path to the ZIP file that contains directories with umlauts
        File zipFile = new File("path/to/your/umlaut-directory.zip"); // Replace with actual file path

        try (InputStream is = new FileInputStream(zipFile);
             ArchiveInputStream archiveInputStream = 
                     new ArchiveStreamFactory().createArchiveInputStream("zip", is)) {

            ArchiveEntry entry;
            boolean umlautDirectoryFound = false;

            while ((entry = archiveInputStream.getNextEntry()) != null) {
                String entryName = entry.getName();
                
                // Check if the entry name contains the umlaut
                if (entryName.contains("ä") || entryName.contains("ö") || entryName.contains("ü")) {
                    umlautDirectoryFound = true;

                    // Check if the entry is marked as a directory
                    assertTrue("Entry with umlaut is not recognized as a directory", entry.isDirectory());

                    // Ensure backslashes are not used in the entry name
                    assertFalse("Entry name contains backslashes", entryName.contains("\\"));

                    // Additional assertions or logic can go here
                }
            }

            assertTrue("No directory with umlauts found in the ZIP file", umlautDirectoryFound);
        }
    }
}
