
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import static org.junit.Assert.*;

public class JacksonNullDeserializationTest {

    @Test
    public void testNullDeserializationInStringArray() throws Exception {
        ObjectMapper objectMapper = new ObjectMapper();
        String jsonArray = "[\"value1\", null, \"value2\"]";

        // Deserialize JSON array into String array
        String[] result = objectMapper.readValue(jsonArray, String[].class);

        // Assert the array length and content
        assertNotNull(result);
        assertEquals(3, result.length);
        assertEquals("value1", result[0]);
        assertNull(result[1]); // This assertion is crucial to reproduce the issue
        assertEquals("value2", result[2]);
    }
}
