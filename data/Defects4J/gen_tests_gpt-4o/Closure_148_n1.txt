
import com.google.javascript.jscomp.CommandLineRunner;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;

import static org.junit.Assert.*;

import java.util.List;

public class WritingModeTest {

    @Test
    public void testWritingModeNotObfuscated() {
        String jsCode = "var element = document.createElement('div'); element.style.writingMode = 'vertical-rl';";
        
        CompilerOptions options = new CompilerOptions();
        // Configure the options for advanced mode
        CommandLineRunner.setOptionsForCompilationLevel(CommandLineRunner.CompilationLevel.ADVANCED_OPTIMIZATIONS, options);

        Result result = com.google.javascript.jscomp.Compiler.compile(
            List.of(SourceFile.fromCode("externs.js", "")),
            List.of(SourceFile.fromCode("test.js", jsCode)),
            options
        );

        boolean containsObfuscatedWritingMode = result.getCompiledCode().contains("a.style.a");
        assertFalse("'writingMode' style property should not be obfuscated.", containsObfuscatedWritingMode);
    }
}
