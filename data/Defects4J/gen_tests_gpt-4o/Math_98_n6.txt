
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.linear.RealMatrixImpl;
import org.junit.Test;
import static org.junit.Assert.assertArrayEquals;
import static org.junit.Assert.fail;

public class RealMatrixImplTest {

    @Test
    public void testOperateOnNonSquareMatrix() {
        // Create a 2x3 matrix
        double[][] matrixData = {
            {1, 2, 3},
            {4, 5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(matrixData);

        // Create a vector of length 3
        double[] vector = {1, 1, 1};

        try {
            // This should work correctly according to the bug description
            double[] result = matrix.operate(vector);

            // The expected result would be a vector of length 2
            double[] expected = {6, 15}; // 1*1 + 2*1 + 3*1 = 6, 4*1 + 5*1 + 6*1 = 15
            
            assertArrayEquals("Resulting vector dimensions or values incorrect for non-square matrix.", expected, result, 1e-9);
        } catch (Exception e) {
            fail("Unexpected exception: " + e.getMessage());
        }
    }
}
