
import org.junit.Test;
import java.io.StringReader;
import static org.junit.Assert.assertEquals;

public class ExtendedBufferReaderTest {

    @Test
    public void testLineCountWithVariousLineEndings() throws Exception {
        String textWithLineEndings = "Line1\nLine2\rLine3\r\nLine4";
        StringReader stringReader = new StringReader(textWithLineEndings);
        ExtendedBufferReader extendedReader = new ExtendedBufferReader(stringReader);

        // Read each line and check the line count
        extendedReader.readLine();  // reads "Line1"
        assertEquals(1, extendedReader.getLineCount());

        extendedReader.readLine();  // reads "Line2"
        assertEquals(2, extendedReader.getLineCount());

        extendedReader.readLine();  // reads "Line3"
        assertEquals(3, extendedReader.getLineCount());

        extendedReader.readLine();  // reads "Line4"
        assertEquals(4, extendedReader.getLineCount());
    }
    
    // Dummy class to illustrate usage; replace with actual ExtendedBufferReader implementation
    static class ExtendedBufferReader extends BufferedReader {
        private int lineCount = 0;

        public ExtendedBufferReader(StringReader reader) {
            super(reader);
        }

        @Override
        public String readLine() throws IOException {
            String line = super.readLine();
            if (line != null) {
                lineCount++;
            }
            return line;
        }

        public int getLineCount() {
            return lineCount;
        }
    }
}
