public void testExtendedBufferReaderEOLHandling() throws IOException {
    String input = "Line 1\rLine 2\nLine 3\r\nLine 4";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    int lineCount = 0;
    while (reader.readLine() != null) {
        lineCount++;
    }
    
    assertEquals(4, lineCount);
}