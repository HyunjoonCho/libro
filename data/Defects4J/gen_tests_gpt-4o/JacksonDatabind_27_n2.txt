public void testExternalTypeIdDeserialization() throws IOException {
    String json = "{\"type\":\"subtype\",\"value\":{\"name\":\"test\"}}";

    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addDeserializer(MyClass.class, new ExternalTypeIdDeserializer());
    mapper.registerModule(module);

    MyClass myClass = mapper.readValue(json, MyClass.class);

    assertEquals("subtype", myClass.getType());
    assertEquals("test", myClass.getName());
}