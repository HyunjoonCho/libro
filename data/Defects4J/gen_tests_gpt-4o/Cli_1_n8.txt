
import org.apache.commons.cli.*;
import org.junit.Test;
import static org.junit.Assert.*;

public class CommandLineTest {

    @Test
    public void testGetOptionValueWithLongOption() {
        // Create options
        Options options = new Options();

        // Add an option with a short and long name
        Option debug = Option.builder("d")
                .longOpt("debug")
                .desc("turn on debugging")
                .hasArg()
                .argName("debugOpt")
                .build();

        options.addOption(debug);

        // Parse the command line arguments
        String[] args = {"--debug", "testDebugValue"};
        CommandLineParser parser = new DefaultParser();
        try {
            CommandLine commandLine = parser.parse(options, args);

            // Attempt to retrieve the value using the long option name
            String dbg = commandLine.getOptionValue("debug");

            // Assert that the value retrieved is as expected
            assertEquals("testDebugValue", dbg);
        } catch (ParseException e) {
            fail("Parsing failed: " + e.getMessage());
        }
    }
}
