public void testGetOptionValueWithLongOpt() {
    Options options = new Options();
    Option debug = Option.builder("d")
        .argName("debug")
        .desc("turn on debugging")
        .longOpt("debug")
        .build();
    options.addOption(debug);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmd = null;
    try {
        cmd = parser.parse(options, new String[]{"--debug"});
    } catch (ParseException e) {
        fail("Parsing failed. Reason: " + e.getMessage());
    }

    assertNotNull("Expected non-null result when using long option name.", cmd.getOptionValue("debug"));
}