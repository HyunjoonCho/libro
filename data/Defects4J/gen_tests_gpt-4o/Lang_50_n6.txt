public void testFastDateFormatLocaleChange() {
    // Set the default locale to US
    Locale.setDefault(Locale.US);
    FastDateFormat formatUS = FastDateFormat.getDateInstance(FastDateFormat.SHORT, null);
    
    // Change the default locale to France
    Locale.setDefault(Locale.FRANCE);
    FastDateFormat formatFR = FastDateFormat.getDateInstance(FastDateFormat.SHORT, null);

    // Format a known date
    Calendar cal = Calendar.getInstance();
    cal.set(2020, Calendar.JANUARY, 1);
    String formattedDateUS = formatUS.format(cal.getTime());
    String formattedDateFR = formatFR.format(cal.getTime());

    // Assert that the format with the changed locale actually differs
    assertNotEquals(formattedDateUS, formattedDateFR);

    // Check that FastDateFormat used the default locale at the time of creation
    assertEquals(FastDateFormat.getInstance("dd/MM/yyyy", Locale.FRANCE).format(cal.getTime()), formattedDateFR);
    assertEquals(FastDateFormat.getInstance("MM/dd/yy", Locale.US).format(cal.getTime()), formattedDateUS);
}