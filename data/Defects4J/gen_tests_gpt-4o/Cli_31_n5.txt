
import org.apache.commons.cli.*;

import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class HelpFormatterTest {

    @Test
    public void testSetArgNameEffect() {
        // Create an Options object
        Options options = new Options();

        // Define an option with an argument
        Option option = Option.builder("t")
                              .longOpt("test")
                              .hasArg()
                              .argName("customArgName") // Set custom argument name
                              .desc("Test option with custom argument name")
                              .build();

        // Add the option to options
        options.addOption(option);

        // Create a HelpFormatter and set a custom argument name
        HelpFormatter formatter = new HelpFormatter();
        formatter.setArgName("defaultArgName");

        // Capture the output of the help formatter
        StringBuilder out = new StringBuilder();
        formatter.printHelp(new PrintWriter(new StringWriter(out)), 
                            80, 
                            "commandLineSyntax", 
                            "header", 
                            options, 
                            2, 
                            2, 
                            "footer");

        // Check if the custom argument name appears in the help message
        String helpMessage = out.toString();
        assertTrue("Help message should contain the custom argument name", 
                   helpMessage.contains("customArgName"));
    }
}
