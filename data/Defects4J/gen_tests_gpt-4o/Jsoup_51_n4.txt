
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.Parser;
import org.jsoup.nodes.TextNode;
import org.jsoup.select.Elements;
import org.junit.Test;
import static org.junit.Assert.*;

public class JsoupJapaneseTagTest {

    @Test
    public void testParsingJapaneseTags() {
        String xmlString = "<進捗推移グラフ>" +
                            "<開始予定凡例名 表示状態=\"0\" 線色=\"00CED1\">&#9312;&#35373;&#35336; &#38283;&#22987;&#20104;&#23450;</開始予定凡例名>" +
                            "</進捗推移グラフ>";
        
        // Parse the XML string using Jsoup
        Document doc = Jsoup.parse(xmlString, "", Parser.xmlParser());
        
        // Retrieve all elements
        Elements elements = doc.getAllElements();
        
        assertEquals(3, elements.size()); // Include the root, the parent, and the text node elements

        // Check specific element occurrences in the document
        boolean foundExpectedElement = false;
        for (Element element : elements) {
            String tagName = element.tagName();
            // Print the tag names to check if Japanese tags are handled properly
            System.out.println("Tag: " + tagName);
            if ("開始予定凡例名".equals(tagName)) {
                foundExpectedElement = true;
                String attributeValue = element.attr("表示状態");
                assertEquals("0", attributeValue);
                String textContent = element.text();
                assertEquals("①設定 開始予定", textContent);
            }
        }

        // Confirm that the expected Japanese tag was found and properly handled
        assertTrue("The expected Japanese tag was not found.", foundExpectedElement);
    }
}
