public void testCompilerCrashesWithSoundManager2() {
    try {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setCompilationLevel(CompilationLevel.SIMPLE_OPTIMIZATIONS);

        SourceFile extern = SourceFile.fromCode("externs.js", "");
        SourceFile input = SourceFile.fromUrl("https://raw.github.com/scottschiller/SoundManager2/master/script/soundmanager2-nodebug.js");

        compiler.compile(extern, input, options);
        fail("Expected exception was not thrown");
    } catch (Exception e) {
        assertTrue(e.getMessage().contains("index(1) must be less than size(1)"));
    }
}