
import org.junit.Test;
import org.mockito.Mockito;

public class ExceptionStubbingTest {

    @Test(expected = RuntimeException.class)
    public void testThrowExceptionFirst() {
        Object o = Mockito.mock(Object.class);
        // Test behavior with RuntimeException
        Mockito.when(o.toString()).thenThrow(RuntimeException.class);
        // This should throw RuntimeException
        o.toString();
    }

    @Test(expected = IllegalArgumentException.class)
    public void testThrowExceptionSecond() {
        Object o = Mockito.mock(Object.class);
        // Test behavior with RuntimeException
        Mockito.when(o.toString()).thenThrow(RuntimeException.class);
        // Test behavior with IllegalArgumentException
        Mockito.when(o.toString()).thenThrow(IllegalArgumentException.class);
        // This should throw IllegalArgumentException, but due to the bug, it throws RuntimeException
        o.toString();
    }
}
