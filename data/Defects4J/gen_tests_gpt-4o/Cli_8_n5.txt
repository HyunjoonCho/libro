public void testHelpFormatterWrapsIncorrectly() {
    HelpFormatter helpFormatter = new HelpFormatter();
    Options options = new Options();
    Option option = Option.builder("d")
                          .longOpt("description")
                          .hasArg()
                          .desc("This is a long option description that would typically require wrapping at a certain line length to ensure the text is properly formatted and readable.")
                          .build();
    options.addOption(option);
    
    int width = 40; // Set width smaller than the length of the description to force wrapping
    String expectedOutputStart = 
        "-d,--description <arg>    This is a long \n" +
        "                          option description \n"; // and so on

    byteArrayOutputStream = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(byteArrayOutputStream);
    PrintStream old = System.out;
    System.setOut(ps);

    helpFormatter.printHelp(width, "app", "header", options, "footer", true);

    System.out.flush();
    System.setOut(old);
    
    String output = byteArrayOutputStream.toString();
    assertTrue(output.startsWith(expectedOutputStart));
    String[] lines = output.split("\n");
    for (String line : lines) {
        assertTrue("Line length should not exceed width", line.length() <= width);
    }
}