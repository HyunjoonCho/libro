
import org.junit.Test;
import static org.junit.Assert.*;

public class CommandLineTest {
    
    @Test
    public void testArgumentDefaultsPreventCommandLineOverride() {
        // Setup the command-line parser with an option having a default value
        CommandLineParser parser = new CommandLineParser();
        Option optionWithDefault = new Option("config", true, "Configuration file");
        optionWithDefault.setDefaultValue("default-config.xml");
        
        // Add this option to the parser
        parser.addOption(optionWithDefault);

        // Create a command line with the intended override
        String[] args = new String[] {"--config", "user-config.xml"};
        
        try {
            // Parse the command line
            CommandLine cmd = parser.parse(args);

            // Ensure that the overridden value is actually used
            // This would expose the described bug if failed
            assertEquals("user-config.xml", cmd.getOptionValue("config"));
        } catch (ParseException e) {
            fail("Parsing failed due to default value preventing an override");
        }
    }
}
