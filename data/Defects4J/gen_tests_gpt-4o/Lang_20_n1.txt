public void testStringUtilsJoinWithNullToString() {
    try {
        StringUtils.join(new Object[]{
            new Object() {
                @Override
                public String toString() {
                    return null;
                }
            }
        }, ',');
        fail("Expected NullPointerException for null toString()");
    } catch (NullPointerException e) {
        // Expected exception
    }
}