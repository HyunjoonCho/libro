
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertFalse;

public class JsonIncludeNonDefaultTest {

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    static class TestClass {
        public String name;
        public int age;
        public String address = "default";
    }

    @Test
    public void testJsonIncludeNonDefault() throws JsonProcessingException {
        TestClass testObject = new TestClass();
        testObject.name = null; // default null value for a String
        testObject.age = 0; // default int

        ObjectMapper objectMapper = new ObjectMapper();
        String jsonResult = objectMapper.writeValueAsString(testObject);

        // Assert that the resulting JSON does not contain the "name" field
        // which should be suppressed because it has the default/null value
        assertFalse(jsonResult.contains("name"), "Field 'name' should be suppressed");

        System.out.println(jsonResult);
    }
}

