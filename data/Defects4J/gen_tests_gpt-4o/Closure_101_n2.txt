public void testProcessClosurePrimitivesFlag() throws Exception {
    CommandLineRunner runnerWithFalse = new CommandLineRunner(new String[]{
        "--js", "input.js",
        "--process_closure_primitives", "false"
    });
    runnerWithFalse.run();
    String outputWithFalse = runnerWithFalse.getCommandLineConfig().jsOutputOutputPath;
    
    CommandLineRunner runnerWithTrue = new CommandLineRunner(new String[]{
        "--js", "input.js",
        "--process_closure_primitives", "true"
    });
    runnerWithTrue.run();
    String outputWithTrue = runnerWithTrue.getCommandLineConfig().jsOutputOutputPath;
    
    assertEquals("Expected goog.provide/require tags to remain in place when flag is false", 
                 outputWithFalse, "input.js");
    assertNotEquals("Expected different outputs for true and false flag values", 
                    outputWithFalse, outputWithTrue);
}