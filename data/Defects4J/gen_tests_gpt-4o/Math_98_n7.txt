
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.linear.RealMatrixImpl;
import org.junit.Test;
import static org.junit.Assert.assertArrayEquals;

public class RealMatrixImplTest {

    @Test
    public void testOperateWithNonSquareMatrix() {
        double[][] matrixData = {
            {1, 2, 3},
            {4, 5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(matrixData);
        
        double[] vector = {1, 1, 1};
        
        // Correct output should be a vector the length of matrix rowcount
        double[] expectedOutput = {6, 15}; 

        // Perform the operation
        double[] result = matrix.operate(vector);
        
        assertArrayEquals("Operate should produce a vector with the same length as the number of rows of the matrix.",
                          expectedOutput, result, 1e-15);
    }
}
