public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    CompilerOptions compilerOptions = new CompilerOptions();
    compilerOptions.setClosurePass(false);
    
    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    compilerOptions.setDependencyOptions(dependencyOptions);
    
    SourceFile input1 = SourceFile.fromCode("input1", "goog.provide('example');\nexample.test = function() {};");
    SourceFile input2 = SourceFile.fromCode("input2", "goog.require('example');\nexample.test();");
    
    Result result = compiler.compile(Collections.emptyList(), Arrays.asList(input1, input2), compilerOptions);
    
    String expectedOutput = "goog.provide('example');\nexample.test = function() {};\ngoog.require('example');\nexample.test();";
    
    assertTrue(result.success);
    assertEquals(expectedOutput, compiler.toSource());
}