public void testJsonStreamContextWritingVersusConverting() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    ObjectNode rootNode = mapper.createObjectNode();
    rootNode.put("key", "value");
    
    // Convert the node to a different class
    JsonNode convertedNode = mapper.convertValue(rootNode, JsonNode.class);

    // Serialize using write methods
    StringWriter writer = new StringWriter();
    JsonGenerator generator = mapper.getFactory().createGenerator(writer);
    generator.writeObject(rootNode);
    generator.close();

    // Check that the contexts have similar structure information
    JsonStreamContext convertContext = ((ObjectNode) convertedNode).traverse().getParsingContext();
    JsonStreamContext writeContext = mapper.getFactory().createParser(writer.toString()).getParsingContext();

    assertEquals(convertContext.getEntryCount(), writeContext.getEntryCount());
    assertEquals(convertContext.inArray(), writeContext.inArray());
    assertEquals(convertContext.inObject(), writeContext.inObject());
}