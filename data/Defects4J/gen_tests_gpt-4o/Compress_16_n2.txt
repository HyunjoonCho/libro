
import static org.junit.Assert.assertNotEquals;

import java.io.InputStream;

import org.apache.commons.compress.archivers.ArchiveException;
import org.apache.commons.compress.archivers.ArchiveInputStream;
import org.apache.commons.compress.archivers.ArchiveStreamFactory;
import org.junit.Test;

public class ArchiveStreamDetectionTest {

    @Test
    public void testNonTarFileDetection() throws Exception {
        try (InputStream input = getClass().getResourceAsStream("/testAIFF.aif")) {
            if (input == null) {
                throw new IllegalStateException("Test file not found");
            }

            ArchiveStreamFactory factory = new ArchiveStreamFactory();
            try {
                ArchiveInputStream archiveInput = factory.createArchiveInputStream(input);
                // If no exception is thrown and it returns an ArchiveInputStream, it must not be TAR
                assertNotEquals("tar", archiveInput.getArchiveName());
            } catch (ArchiveException e) {
                // Successful outcome: The file should not be detected as a TAR archive.
            }
        }
    }
}
