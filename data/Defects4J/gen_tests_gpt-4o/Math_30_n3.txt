
import org.apache.commons.math3.stat.inference.MannWhitneyUTest;
import org.junit.Test;
import static org.junit.Assert.*;

public class MannWhitneyUTestOverflow {

    @Test
    public void testMannWhitneyUOverflow() {
        MannWhitneyUTest mannWhitneyUTest = new MannWhitneyUTest();
        
        // Create two large data sets
        double[] largeDataSet1 = new double[1500];
        double[] largeDataSet2 = new double[1500];
        
        // Populate data sets with some values, here just using a simple sequence
        for (int i = 0; i < 1500; i++) {
            largeDataSet1[i] = i;
            largeDataSet2[i] = i + 1;
        }

        // Calculate p-value
        double pValue = mannWhitneyUTest.mannWhitneyUTest(largeDataSet1, largeDataSet2);

        // Assert that the p-value is not NaN and within a valid range (0 to 1)
        assertFalse("P-value should not be NaN", Double.isNaN(pValue));
        assertTrue("P-value should be between 0 and 1", pValue >= 0.0 && pValue <= 1.0);
    }
}
