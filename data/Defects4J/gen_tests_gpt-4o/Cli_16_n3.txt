public void testGroupConstraintsWithNestedGroups() {
    Option optionA = new Option("a", "option-a", false, "Option A");
    Option optionB = new Option("b", "option-b", false, "Option B");
    
    Group groupA = new GroupBuilder().withOption(optionA).create();
    Group groupB = new GroupBuilder().withOption(optionB).withMinimum(1).create();

    CommandLine commandLine = new CommandLine();
    commandLine.addOption(optionB);

    WriteableCommandLine writeableCommandLine = new WriteableCommandLine(commandLine, null);
    groupB.processPostValidation(writeableCommandLine);

    try {
        groupB.processPostValidation(writeableCommandLine);
        fail("Expected an IllegalStateException due to unmet group constraints");
    } catch (IllegalStateException e) {
        assertEquals("The presence of Group B should have taken into account Group A's children", e.getMessage());
    }
}