public void testOverzealousOptimizationConfusesVariables() {
    try {
        new Object() {
            double uid;
            void reset() {
                uid = Math.random();
            }
            void doStuff() {
                reset();
                double _uid = uid;
                
                if (uid < 0.5) {
                    doStuff();
                }
                
                if (_uid != uid) {
                    throw new RuntimeException("reset() was called");
                }
            }
            void run() {
                doStuff();
            }
        }.run();
        fail("Expected RuntimeException was not thrown");
    } catch (RuntimeException e) {
        assertEquals("reset() was called", e.getMessage());
    }
}