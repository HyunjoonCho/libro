public void testConstantFunctionInlining() {
    String script = "function f() { return false; }"
        + "if (!f()) alert('hi');".repeat(25);

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", script), options);

    String compiledCode = compiler.toSource();

    assertTrue("Expected inlining optimization", !compiledCode.contains("function f() { return false; }"));
}