
import com.google.javascript.rhino.Node;
import com.google.javascript.rhino.Token;
import com.google.javascript.jscomp.NodeUtil;
import org.junit.Test;
import static org.junit.Assert.*;

public class TryCatchAstTest {

    @Test
    public void testTryCatchAstError() {
        try {
            // Create a try block
            Node nodeTry = new Node(Token.BLOCK,
                new Node(Token.VAR, Node.newString("testing"), Node.newNumber(11))
            );

            // Create a catch block
            Node name = Node.newString(Token.NAME, "blabla");
            Node catchBlock = new Node(Token.BLOCK,
                new Node(Token.VAR, Node.newString("testing"), Node.newNumber(22))
            );
            Node nodeCatch = new Node(Token.CATCH, name, catchBlock);

            // Attempt to create the try-catch structure
            Node tryCatchNode = NodeUtil.newTryCatchNode(nodeTry, nodeCatch, null);

            // This line may not be reached if there is an internal error
            assertNotNull(tryCatchNode);

        } catch (RuntimeException e) {
            fail("Encountered internal compiler error: " + e.getMessage());
        }
    }
}
