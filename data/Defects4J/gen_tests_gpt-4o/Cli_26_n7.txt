
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionBuilder;
import org.junit.Test;

import static org.junit.Assert.*;

public class OptionBuilderTest {

    @Test
    public void testOptionBuilderNotResetAfterException() {
        // Set up the OptionBuilder with properties leading to an IllegalArgumentException
        try {
            OptionBuilder.hasArg();
            OptionBuilder.create();
            fail("Expected IllegalArgumentException not thrown");
        } catch (IllegalArgumentException e) {
            // Expected exception, do nothing
        }

        // Now try creating a valid Option
        Option option = null;
        try {
            option = OptionBuilder.hasArg().create('a');
        } catch (IllegalArgumentException e) {
            fail("Unexpected IllegalArgumentException thrown on valid option creation");
        }

        // Verify the Option was created as expected
        assertNotNull("Option should be created successfully", option);
        assertEquals("Option character should match", 'a', option.getOpt().charAt(0));
    }
}
