
import static org.junit.Assert.assertEquals;

import org.junit.Test;

import java.util.Locale;

public class CaseInsensitiveStringHandlingTest {

    @Test
    public void testCaseInsensitiveComparison() {
        String original = "TITLE";
        String comparisonDefault = "title";

        // Case-insensitive comparison using the default locale
        // This will fail if the locale has different case mappings
        assertEquals(original.toLowerCase(), comparisonDefault);

        // Proper case-insensitive comparison using a fixed locale
        Locale fixedLocale = Locale.ENGLISH;
        assertEquals(original.toLowerCase(fixedLocale), comparisonDefault);

        // Case that fails if locale affects the result
        Locale turkishLocale = new Locale("tr", "TR");
        String turkishOriginal = "TITLE";
        String turkishComparison = "tÄ±tle"; // Turkish 'i' has a special dotless lowercase form

        // Incorrect comparison
        assert !turkishOriginal.toLowerCase(turkishLocale).equals(turkishComparison);

        // Correct method not reliant on locale
        assertEquals(turkishOriginal.toLowerCase(Locale.ENGLISH), comparisonDefault);
    }
}
