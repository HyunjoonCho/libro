
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;

import java.io.IOException;
import java.io.StringWriter;

import static org.junit.Assert.assertEquals;

public class CsvFormatTest {

    @Test
    public void testNullStringNotEscaped() throws IOException {
        // Setting up the CSV format with a specific null string and escape character
        CSVFormat csvFormat = CSVFormat.DEFAULT.withNullString("\\N").withEscape('\\');

        // Prepare the output area for CSV
        StringWriter out = new StringWriter();
        CSVPrinter printer = new CSVPrinter(out, csvFormat);

        // Print a single field with a null value, expecting it to be represented as the nullString
        printer.printRecord((String) null);
        printer.flush();

        // Verify that the output is as expected
        assertEquals("\\N\n", out.toString());
    }
}
