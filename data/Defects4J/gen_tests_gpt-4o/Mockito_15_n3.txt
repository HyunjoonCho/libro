
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.verify;

import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.ArgumentMatchers;

import java.util.List;

public class VarargsArgumentCaptorTest {

    interface Example {
        void methodWithVarargs(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Mock the interface
        Example example = mock(Example.class);

        // Call the method with varargs
        example.methodWithVarargs("arg1", "arg2", "arg3");

        // Capture the arguments passed to the varargs method
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
        verify(example).methodWithVarargs(captor.capture(), any(String[].class));

        // Ensure the captured arguments are as expected
        List<String> capturedArguments = captor.getAllValues();
        assertEquals(3, capturedArguments.size()); // should capture three arguments
        assertEquals("arg1", capturedArguments.get(0));
        assertEquals("arg2", capturedArguments.get(1));
        assertEquals("arg3", capturedArguments.get(2));
    }
}
