@Test
public void testFastDateFormatWeekOfYearLocale() {
    Locale defaultLocale = Locale.getDefault();
    try {
        // Set default locale to en_US
        Locale.setDefault(new Locale("en", "US"));
        Locale locale = new Locale("sv", "SE");

        Calendar cal = Calendar.getInstance();
        cal.set(2010, Calendar.JANUARY, 1, 12, 0, 0);
        Date date = cal.getTime();

        FastDateFormat fastDateFormat = FastDateFormat.getInstance("EEEE', week 'ww", locale);
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("EEEE', week 'ww", locale);

        String fastFormatted = fastDateFormat.format(date);
        String simpleFormatted = simpleDateFormat.format(date);

        // FastDateFormat outputs wrong week number
        // Expecting "fredag, week 53" but gets "fredag, week 01"
        assertEquals("fredag, week 53", fastFormatted);

        // SimpleDateFormat should output the correct week number
        assertEquals("fredag, week 53", simpleFormatted);
    } finally {
        // Restore the original default locale
        Locale.setDefault(defaultLocale);
    }
}