
import static org.junit.Assert.assertEquals;

import java.util.Calendar;
import java.util.Date;
import java.util.Locale;
import org.apache.commons.lang.time.FastDateFormat;
import org.junit.Test;
import java.text.SimpleDateFormat;

public class FastDateFormatWeekBugTest {
    
    @Test
    public void testFastDateFormatWeekLocaleIssue() {
        // Set the default locale to US
        Locale.setDefault(new Locale("en", "US"));
        
        // The locale we want to use for formatting
        Locale locale = new Locale("sv", "SE");
        
        Calendar cal = Calendar.getInstance(locale);
        cal.set(2010, Calendar.JANUARY, 1, 12, 0, 0);
        Date date = cal.getTime();

        // Create FastDateFormat and SimpleDateFormat instances with the same pattern and locale
        FastDateFormat fdf = FastDateFormat.getInstance("EEEE', week 'ww", locale);
        SimpleDateFormat sdf = new SimpleDateFormat("EEEE', week 'ww", locale);
        
        // Expected to output the same week number
        String fdfOutput = fdf.format(date);
        String sdfOutput = sdf.format(date);
        
        // Output both results to compare
        System.out.println("FastDateFormat: " + fdfOutput); // Expects "fredag, week 01", but should be "fredag, week 53"
        System.out.println("SimpleDateFormat: " + sdfOutput); // Expects "fredag, week 53"
        
        // Assert that both formats have similar results, they should ideally print week 53
        assertEquals("Week number mismatch", sdfOutput, fdfOutput);
    }
}
