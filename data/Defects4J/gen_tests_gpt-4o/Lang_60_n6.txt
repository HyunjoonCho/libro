
import org.apache.commons.lang3.text.StrBuilder;
import org.junit.Test;
import static org.junit.Assert.*;

public class StrBuilderTest {

    @Test
    public void testStrBuilderReplaceAndDelete() {
        // Initialize with some content
        StrBuilder strBuilder = new StrBuilder("Hello World!");
        
        // Perform some operations
        strBuilder.replaceAll("World", "Universe");
        
        // This assumes the issue might be around character replacement near buffer boundaries
        strBuilder.deleteAll("Universe");
        
        // The buffer might still have some space left that was not properly resized.
        // Ensuring the outcome is as expected
        assertEquals("Hello !", strBuilder.toString());
        
        // Edge case - operating on empty builder
        strBuilder.clear();
        strBuilder.deleteAll("Hello");
        assertEquals("", strBuilder.toString());
    }
    
    @Test
    public void testStrBuilderWithLargerBuffer() {
        // Initialize with a large buffer but small content
        StrBuilder strBuilder = new StrBuilder(32); // buffer length
        strBuilder.append("Test");
        
        // This operation might previously use incorrect buffer size to judge
        strBuilder.replaceAll("Test", "Exam");
        assertEquals("Exam", strBuilder.toString());
        
        // Boundary operation
        strBuilder.deleteAll("Exam");
        assertEquals("", strBuilder.toString());
    }
}
