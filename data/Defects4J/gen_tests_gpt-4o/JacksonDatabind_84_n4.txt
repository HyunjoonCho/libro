public void testRecursiveTypeHandling() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    TypeFactory typeFactory = mapper.getTypeFactory();
    
    // Construct the type hierarchy
    JavaType baseType = typeFactory.constructType(Base.class);
    JavaType subType = typeFactory.constructType(Sub.class);
    
    Sub subInstance = new Sub();
    String json = mapper.writeValueAsString(subInstance);
    
    assertEquals("{\"base\":1,\"sub\":2}", json);
}