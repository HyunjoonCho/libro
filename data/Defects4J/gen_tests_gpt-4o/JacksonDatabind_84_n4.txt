
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class RecursiveTypeSerializationTest {

    @Test
    public void testBaseClassPropertiesIncludedInSerialization() throws JsonProcessingException {
        ObjectMapper objectMapper = new ObjectMapper();
        
        Sub sub = new Sub();
        String json = objectMapper.writeValueAsString(sub);

        // We expect both 'base' and 'sub' properties to be serialized
        String expectedJson = "{\"base\":1,\"sub\":2}";
        assertEquals(expectedJson, json);
    }

    class Base implements IFace<Sub> {
        @JsonProperty
        int base = 1;
    }

    class Sub extends Base {
        @JsonProperty
        int sub = 2;
    }

    interface IFace<T> {}
}
