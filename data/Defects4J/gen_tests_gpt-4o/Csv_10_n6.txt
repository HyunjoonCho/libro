
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.List;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class CSVPrinterTest {

    @Test
    public void testCSVPrinterWithHeader() throws IOException {
        Path filePath = Paths.get("test_data.csv");

        try (CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x")
                .print(Files.newBufferedWriter(filePath))) {
            csvPrinter.printRecord(42);
        }

        List<String> lines = Files.readAllLines(filePath);
        assertEquals("x", lines.get(0));
        assertEquals("42", lines.get(1));
        
        // Cleanup
        Files.delete(filePath);
    }
}
