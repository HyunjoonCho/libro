
import org.apache.commons.math4.analysis.differentiation.DerivativeStructure;
import org.junit.Test;
import static org.junit.Assert.*;

public class DerivativeStructureAtan2Test {

    @Test
    public void testAtan2SpecialCases() {
        // Define the order of derivative and parameters for DerivativeStructure
        int parameters = 2;
        int order = 1;

        // Special case 1: y = +0.0, x = +0.0
        DerivativeStructure yPosZero = new DerivativeStructure(parameters, order, 0, +0.0);
        DerivativeStructure xPosZero = new DerivativeStructure(parameters, order, 1, +0.0);
        assertEquals(Math.atan2(+0.0, +0.0), yPosZero.atan2(xPosZero).getValue(), 0.0);

        // Special case 2: y = +0.0, x = -0.0
        DerivativeStructure xNegZero = new DerivativeStructure(parameters, order, 1, -0.0);
        assertEquals(Math.atan2(+0.0, -0.0), yPosZero.atan2(xNegZero).getValue(), 0.0);

        // Special case 3: y = -0.0, x = +0.0
        DerivativeStructure yNegZero = new DerivativeStructure(parameters, order, 0, -0.0);
        assertEquals(Math.atan2(-0.0, +0.0), yNegZero.atan2(xPosZero).getValue(), 0.0);

        // Special case 4: y = -0.0, x = -0.0
        assertEquals(Math.atan2(-0.0, -0.0), yNegZero.atan2(xNegZero).getValue(), 0.0);
    }
}
