
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import java.util.List;

import static org.junit.Assert.assertArrayEquals;
import static org.mockito.Mockito.*;

public class VarargsCaptorTest {

    public interface VarargsService {
        void performAction(String... actions);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Create mock for the service
        VarargsService service = mock(VarargsService.class);

        // Call the method with varargs
        service.performAction("first", "second", "third");

        // Capture the arguments passed to the method
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
        verify(service).performAction(captor.capture());

        // Convert the captured values to an array
        List<String> capturedArguments = captor.getAllValues();
        String[] capturedArray = capturedArguments.toArray(new String[0]);

        // Assert that the captured values match the expected values
        assertArrayEquals(new String[]{"first", "second", "third"}, capturedArray);
    }
}
