
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertNotEquals;

public class JsoupElementHashCodeTest {

    @Test
    public void testElementHashCodeDifferentTextContent() {
        String html = "<html>" +
                        "<head></head>" +
                        "<body>" +
                          "<div style=\"blah\">TODO: write content</div>" +
                          "<div style=\"blah\">Nothing here</div>" +
                          "<p style=\"test\">Empty</p>" +
                          "<p style=\"nothing\">Empty</p>" +
                        "</body>" +
                      "</html>";

        Document doc = Jsoup.parse(html);
        Elements elements = doc.select("[style]");

        Element firstDiv = elements.get(0);
        Element secondDiv = elements.get(1);

        // Verify that the hashCode should be different since the text content is different
        assertNotEquals("Different text content should result in different hashCode",
                        firstDiv.hashCode(), secondDiv.hashCode());
    }
}
