public void testJsonMappingExceptionLocationInfoIncludedTwice() {
    ObjectMapper objectMapper = new ObjectMapper();
    String json = "{\"value\": \"invalidNumber\"}";

    try {
        objectMapper.readValue(json, TestClass.class);
        fail("Expected an InvalidFormatException to be thrown");
    } catch (InvalidFormatException e) {
        String message = e.getMessage();
        int firstIndex = message.indexOf(" at [source]");
        int lastIndex = message.lastIndexOf(" at [source]");
        assertEquals("The 'at [source]' should only appear once in the message", firstIndex, lastIndex);
    } catch (JsonProcessingException e) {
        fail("Expected an InvalidFormatException, got: " + e.getClass().getSimpleName());
    }
}

static class TestClass {
    public int value;
}