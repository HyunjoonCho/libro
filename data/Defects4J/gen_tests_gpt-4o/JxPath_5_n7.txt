
import org.apache.commons.jxpath.JXPathContext;
import org.apache.commons.jxpath.JXPathException;
import org.junit.Test;
import static org.junit.Assert.fail;
import static org.junit.Assert.assertTrue;

public class VariablePointerTestCase {

    @Test
    public void testUnionOfVariableAndNode() {
        try {
            // Set up the context and variable
            JXPathContext context = JXPathContext.newContext(new Object());
            context.getVariables().declareVariable("var", "someValue");

            // Attempt to perform a union operation with a variable and a node
            context.selectNodes("$var | /MAIN/A");
            
            fail("Expected JXPathException not thrown");
        } catch (JXPathException e) {
            // Check if the exception message matches the expected issue
            String expectedMessage = "Cannot compare pointers that do not belong to the same tree: '$var' and ''";
            assertTrue(e.getMessage().contains(expectedMessage));
        }
    }
}
