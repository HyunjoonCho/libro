public void testTarArchiveInputStreamCorruptFile() {
    byte[] corruptData = new byte[]{0, 1, 2, 3, 4, 5, 6, (byte) 0xFF};
    InputStream bais = new ByteArrayInputStream(corruptData);
    TarArchiveInputStream tais = new TarArchiveInputStream(bais);

    try {
        tais.getNextTarEntry();
        fail("Expected IOException due to corrupt tar data");
    } catch (IOException e) {
        // Expected IOException as per Javadoc
    } catch (IllegalArgumentException e) {
        fail("Expected IOException, but caught IllegalArgumentException");
    } finally {
        try {
            tais.close();
        } catch (IOException e) {
            // Ignore exception on close
        }
    }
}