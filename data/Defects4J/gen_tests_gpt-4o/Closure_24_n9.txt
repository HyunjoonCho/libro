public void testGoogScopeFunctionDeclaration() {
    compileAndCheckError("goog.scope(function() { function x() {} });");
}

private void compileAndCheckError(String jsCode) {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    Result result = compiler.compile(SourceFile.fromCode("externs", ""), SourceFile.fromCode("input", jsCode), options);
    assertTrue("Expected a compiler error due to improper function declaration in goog.scope", result.errors.length > 0);
}