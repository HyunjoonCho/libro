public void testOverzealousArgumentsOptimisation() {
    Context cx = Context.enter();
    try {
        Scriptable scope = cx.initStandardObjects();
        String script = 
            "var result = null;" +
            "function d3_call(callback) {" +
            "  var f = callback;" +
            "  arguments[0] = this;" +
            "  f.apply(this, arguments);" +
            "  return this;" +
            "}" +
            "d3_call(function(a) { result = a; });" +
            "result;";
        Object result = cx.evaluateString(scope, script, "testScript", 1, null);
        assertNotNull(result);
        assertNull(result);
    } finally {
        Context.exit();
    }
}