
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlText;
import org.junit.Test;
import java.util.List;

import static org.junit.Assert.assertEquals;

public class WindSpeedTest {

    public static class WindSpeed {

        public static class Radius {
            @JacksonXmlProperty(isAttribute = true)
            private String sector;
            @JacksonXmlProperty(isAttribute = true)
            private String units;
            @JacksonXmlText
            private int value;

            // Getters and Setters

            public String getSector() {
                return sector;
            }

            public void setSector(String sector) {
                this.sector = sector;
            }

            public String getUnits() {
                return units;
            }

            public void setUnits(String units) {
                this.units = units;
            }

            public int getValue() {
                return value;
            }

            public void setValue(int value) {
                this.value = value;
            }
        }

        @JacksonXmlProperty(isAttribute = true)
        private String units;
        @JacksonXmlProperty(isAttribute = true)
        private String source;
        @JacksonXmlText
        private int value;
        @JacksonXmlElementWrapper(useWrapping = false)
        private List<Radius> radius;

        // Getters and Setters

        public String getUnits() {
            return units;
        }

        public void setUnits(String units) {
            this.units = units;
        }

        public String getSource() {
            return source;
        }

        public void setSource(String source) {
            this.source = source;
        }

        public int getValue() {
            return value;
        }

        public void setValue(int value) {
            this.value = value;
        }

        public List<Radius> getRadius() {
            return radius;
        }

        public void setRadius(List<Radius> radius) {
            this.radius = radius;
        }
    }

    @Test
    public void testDeserialization() throws Exception {
        XmlMapper xmlMapper = new XmlMapper();
        String xml = "<windSpeed units=\"kt\">27<radius>20</radius></windSpeed>";

        WindSpeed windSpeed = xmlMapper.readValue(xml, WindSpeed.class);

        // Validate the deserialization
        assertEquals("kt", windSpeed.getUnits());
        assertEquals(27, windSpeed.getValue());

        List<WindSpeed.Radius> radiusList = windSpeed.getRadius();
        assertEquals(1, radiusList.size());
        assertEquals(20, radiusList.get(0).getValue());
    }
}
