
import org.apache.commons.math3.analysis.UnivariateFunction;
import org.apache.commons.math3.analysis.solvers.BrentSolver;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class BrentSolverTest {

    @Test
    public void testSolveWhenBracketEndpointIsRoot() {
        UnivariateFunction function = new UnivariateFunction() {
            public double value(double x) {
                return x; // Root at x = 0
            }
        };
        
        BrentSolver solver = new BrentSolver();
        
        double min = 0.0;
        double max = 5.0;
        double initial = 2.5;
        
        // If the min endpoint is the root, solver should return 'min', not function value at min.
        double root = solver.solve(1000, function, min, max, initial);
        assertEquals("Root should be at the min endpoint", min, root, 1e-7);
    }
}
