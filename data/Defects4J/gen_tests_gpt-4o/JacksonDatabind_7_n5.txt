public void testTokenBufferDeserialization() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{ \"a\":1, \"b\":null }";
    
    JsonParser parser = mapper.getFactory().createParser(json);
    TokenBuffer tokenBuffer = new TokenBuffer(parser);
    parser.nextToken(); // Advance to START_OBJECT
    tokenBuffer.copyCurrentStructure(parser);
    
    List<JsonToken> expectedTokens = Arrays.asList(
        JsonToken.START_OBJECT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NUMBER_INT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NULL,
        JsonToken.END_OBJECT
    );

    JsonParser bufferParser = tokenBuffer.asParser();
    List<JsonToken> actualTokens = new ArrayList<>();
    while (bufferParser.nextToken() != null) {
        actualTokens.add(bufferParser.currentToken());
    }

    assertEquals(expectedTokens, actualTokens);
}