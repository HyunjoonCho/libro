public void testLanguageInEcmacscript5Strict() throws IOException {
    // Arrange
    String getNumJs = "var getNum = function() { return 5; };";
    String alertJs = "alert(getNum());";

    // Create temporary JS files
    File getNumFile = File.createTempFile("get_num", ".js");
    File alertFile = File.createTempFile("alert", ".js");
    Files.write(getNumJs.getBytes(), getNumFile);
    Files.write(alertJs.getBytes(), alertFile);

    // Compile files
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5_STRICT);
    options.setLanguageOut(CompilerOptions.LanguageMode.ECMASCRIPT5_STRICT);
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

    // Act
    Result result = compiler.compile(
        ImmutableList.of(SourceFile.fromFile(getNumFile), SourceFile.fromFile(alertFile)),
        CompileOptions.EMPTY,
        options
    );

    // Assert
    String output = compiler.toSource();
    assertEquals("'use strict';alert(5);", output.trim());
}