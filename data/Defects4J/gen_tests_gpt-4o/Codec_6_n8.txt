public void testBase64InputStreamReturnsZero() throws IOException {
    byte[] decoded = new byte[3];
    byte[] encodedBytes = {
        'T', 'E', '4', '=', // base64 for "TE"
    };

    ByteArrayInputStream bais = new ByteArrayInputStream(encodedBytes);
    Base64InputStream base64InputStream = new Base64InputStream(bais, true);
    int bytesRead = base64InputStream.read(decoded);

    // Reading again is expected to fail (ignoring the case where read returns 0, causing IOException previously)
    bytesRead = base64InputStream.read(decoded);
    assertEquals(-1, bytesRead);
}