public void testJsonParserSequenceTokenSkip() throws IOException {
    JsonFactory jsonFactory = new JsonFactory();
    JsonParser parser1 = jsonFactory.createParser("[1, 2]");
    JsonParser parser2 = jsonFactory.createParser("[3, 4]");

    JsonParserSequence sequence = JsonParserSequence.createFlattened(parser1, parser2);

    // Read through the first array
    assertEquals(JsonToken.START_ARRAY, sequence.nextToken());
    assertEquals(JsonToken.VALUE_NUMBER_INT, sequence.nextToken());
    assertEquals(1, sequence.getIntValue());
    assertEquals(JsonToken.VALUE_NUMBER_INT, sequence.nextToken());
    assertEquals(2, sequence.getIntValue());
    assertEquals(JsonToken.END_ARRAY, sequence.nextToken());

    // Transition to the second parser should immediately be at the start of the new array
    assertEquals(JsonToken.START_ARRAY, sequence.nextToken());
    assertEquals(JsonToken.VALUE_NUMBER_INT, sequence.nextToken());
    assertEquals(3, sequence.getIntValue());
    assertEquals(JsonToken.VALUE_NUMBER_INT, sequence.nextToken());
    assertEquals(4, sequence.getIntValue());
    assertEquals(JsonToken.END_ARRAY, sequence.nextToken());
}