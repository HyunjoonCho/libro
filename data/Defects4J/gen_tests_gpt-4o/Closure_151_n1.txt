public void testCompilerVersionOption() throws Exception {
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
    Process process = processBuilder.start();
    int exitCode = process.waitFor();
    assertEquals("Expected successful exit code", 0, exitCode);

    String output = new BufferedReader(new InputStreamReader(process.getInputStream()))
        .lines()
        .collect(Collectors.joining(System.lineSeparator()));

    assertTrue("Output should contain version information", output.toLowerCase().contains("version"));
}