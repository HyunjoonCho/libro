
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.DefaultParser;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.Options;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;

public class CommandLineTest {

    @Test
    public void testGetOptionValueWithLongOpt() throws Exception {
        // Setup the command line options
        Options options = new Options();
        Option debug = Option.builder("d")
                             .argName("debug")
                             .longOpt("debug")
                             .desc("turn on debugging")
                             .build();
        options.addOption(debug);
        
        // Parse the command line arguments
        String[] args = {"--debug"};
        CommandLine commandLine = new DefaultParser().parse(options, args);
        
        // Test behavior with long option name
        String dbg = commandLine.getOptionValue("debug");
        String dbgShort = commandLine.getOptionValue("d");

        // According to the bug report, this returns null incorrectly
        assertNull(dbg);
        // However, using the short option should work
        assertEquals("Expected the short option to work properly", null, dbgShort);
    }
}
