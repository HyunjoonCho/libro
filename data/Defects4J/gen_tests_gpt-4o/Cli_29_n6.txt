
import org.apache.commons.cli.*;

public void testCliStrippingQuotes() {
    // Prepare the options
    Options options = new Options();
    options.addOption("balloo", true, "Balloo option");

    // Prepare the command line argument for testing
    String[] args = {"--balloo", "this is a \"test\""};

    // Create a parser
    CommandLineParser parser = new DefaultParser();
    try {
        // Parse the args
        CommandLine cmd = parser.parse(options, args);

        // Get the value of the 'balloo' argument
        String ballooValue = cmd.getOptionValue("balloo");

        // Check if the value retains the trailing double quote
        assertEquals("this is a \"test\"", ballooValue);

    } catch (ParseException e) {
        e.printStackTrace();
        fail("Parsing failed. Exception: " + e.getMessage());
    }
}
