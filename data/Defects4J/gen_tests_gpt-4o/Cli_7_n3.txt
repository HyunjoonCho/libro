
import junit.framework.TestCase;
import org.apache.commons.cli2.CommandLine;
import org.apache.commons.cli2.Group;
import org.apache.commons.cli2.Option;
import org.apache.commons.cli2.builder.ArgumentBuilder;
import org.apache.commons.cli2.builder.DefaultOptionBuilder;
import org.apache.commons.cli2.builder.GroupBuilder;
import org.apache.commons.cli2.builder.ParserBuilder;

public class Bug27575Test extends TestCase {

    public void testRequiredOptions() {
        // Setup the option -h
        DefaultOptionBuilder optionBuilder = new DefaultOptionBuilder();
        Option help = optionBuilder.withDescription("Print this usage information").withShortName("h").create();

        // Setup the argument option -c <arg>
        ArgumentBuilder argumentBuilder = new ArgumentBuilder();
        Option configOption = optionBuilder.withDescription("Config file").withShortName("c")
                .withArgument(argumentBuilder.withName("arg").create()).create();

        // Required -h option
        GroupBuilder groupBuilder = new GroupBuilder();
        Group options = groupBuilder.withOption(help).withOption(configOption).withMinimum(1).create();

        // Simulate the command line input
        String[] args = new String[]{"-c", "filename.txt"};

        ParserBuilder parserBuilder = new ParserBuilder();
        CommandLine commandLine = parserBuilder.withGroup(options).parse(args);

        // Check if the -h option should be present due to minimum requirement
        assertTrue(commandLine.hasOption(help));
    }

    public static void main(String[] args) {
        junit.textui.TestRunner.run(Bug27575Test.class);
    }
}
