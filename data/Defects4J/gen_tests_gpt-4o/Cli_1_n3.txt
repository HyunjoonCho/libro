public void testCommandLineGetOptionValue() {
    Option debug = OptionBuilder.withArgName("debug")
                                .withDescription("turn on debugging")
                                .withLongOpt("debug")
                                .create('d');

    Options options = new Options();
    options.addOption(debug);

    String[] args = {"--debug", "true"};
    CommandLineParser parser = new DefaultParser();
    CommandLine cmd;

    try {
        cmd = parser.parse(options, args);
        assertEquals("true", cmd.getOptionValue("debug"));
    } catch (ParseException e) {
        fail("Unexpected ParseException: " + e.getMessage());
    }
}