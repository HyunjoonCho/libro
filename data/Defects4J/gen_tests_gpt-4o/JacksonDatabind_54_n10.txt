public void testOptionalEmptyNotExcludedWithObjectType() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_ABSENT);
    mapper.registerModule(new Jdk8Module());

    JsonResult result = new JsonResult();
    result.setA(Optional.empty());
    result.setB(Optional.empty());

    String jsonResult = mapper.writeValueAsString(result);
    assertFalse(jsonResult.contains("\"a\":null"));
    assertFalse(jsonResult.contains("\"b\":null"));
    assertEquals("{}", jsonResult);
}