public void testSmartNameRemovalCausingCompilerCrash() {
    String code = "var goog = {};" +
                  "goog.inherits = function(x, y) {};" +
                  "var ns = {};" +
                  "/** @constructor */ ns.PageSelectionModel = function(){};" +
                  "/** @constructor */ ns.PageSelectionModel.FooEvent = function() {};" +
                  "/** @constructor */ ns.PageSelectionModel.SelectEvent = function() {};" +
                  "goog.inherits(ns.PageSelectionModel.ChangeEvent, ns.PageSelectionModel.FooEvent);";

    try {
        // Assuming there's a method compileCode in the test environment simulating the scenario
        compileCode(code);
        fail("Expected compiler to crash due to illegal state exception.");
    } catch (IllegalStateException e) {
        // Expected crash
    }
}