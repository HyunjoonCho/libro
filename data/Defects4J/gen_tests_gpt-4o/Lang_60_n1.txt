
import org.apache.commons.lang3.text.StrBuilder;
import org.junit.Test;
import static org.junit.Assert.*;

public class StrBuilderTest {

    @Test
    public void testBufferLengthUsage() {
        StrBuilder strBuilder = new StrBuilder(5);
        strBuilder.append("HelloWorld");

        try {
            // An operation that would potentially misuse `thisBuf.length`
            // if the condition is not properly handled.
            strBuilder.deleteAll("World");
            strBuilder.replaceAll("Hello", "Hi");
        } catch (ArrayIndexOutOfBoundsException e) {
            fail("StrBuilder should not use thisBuf.length directly, causing an ArrayIndexOutOfBoundsException.");
        }

        // Verify the operations completed successfully
        assertEquals("Hi", strBuilder.toString());
    }
}
