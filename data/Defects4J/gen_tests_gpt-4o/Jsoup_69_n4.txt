
import org.jsoup.Connection;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.jsoup.parser.Parser;
import org.jsoup.helper.HttpConnection;
import org.jsoup.Connection;
import org.jsoup.helper.HttpConnection;
import org.jsoup.Connection.KeyVal;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.Parser;
import org.jsoup.select.Elements;

import java.io.IOException;
import java.util.List;

import org.junit.Test;
import static org.junit.Assert.assertFalse;


public class JsoupFormTest {
  
    @Test
    public void testRemoveFormDataNode() throws Exception {
        // Simulate HTML as a sample input
        String html = "<html><body>"
                    + "<form>"
                    + "  <input type='text' name='alpha' value='123'/>"
                    + "  <input type='text' name='beta' value='456'/>"
                    + "</form>"
                    + "</body></html>";
        
        Document doc = Jsoup.parse(html);

        // Print HTML before removal
        System.out.println("Before removal: " + doc.toString());

        // Remove "input[name=alpha]"
        doc.select("input[name=alpha]").first().remove();

        // Print HTML after removal
        System.out.println("After removal: " + doc.toString());

        // Select the form
        Element form = doc.select("form").first();

        // Extract form data
        List<Connection.KeyVal> data = ((FormElement) form).formData();

        // Print form data
        System.out.println("Form data: " + data.toString());

        // Check that "alpha" has indeed been removed from the form data
        assertFalse(data.toString().contains("alpha"));
    }
}
