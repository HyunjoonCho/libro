
import com.fasterxml.jackson.core.util.BufferRecycler;
import com.fasterxml.jackson.core.util.TextBuffer;
import org.junit.Test;
import static org.junit.Assert.*;

public class TextBufferTest {

    @Test
    public void testGetTextBufferConsistency() {
        TextBuffer buffer = new TextBuffer(new BufferRecycler());
        
        // Initialize the buffer with an empty content
        buffer.resetWithEmpty();
        
        // First call to getTextBuffer should return null
        char[] initialBuffer = buffer.getTextBuffer();
        assertNull("The initial call to getTextBuffer should return null for empty content.", initialBuffer);
        
        // After calling contentsAsString the internal state may change
        buffer.contentsAsString();

        // Second call to getTextBuffer should return an empty char array
        char[] subsequentBuffer = buffer.getTextBuffer();
        assertNotNull("The subsequent call to getTextBuffer should not return null.", subsequentBuffer);
        assertEquals("The subsequent call to getTextBuffer should return an empty array.", 0, subsequentBuffer.length);
    }
}
