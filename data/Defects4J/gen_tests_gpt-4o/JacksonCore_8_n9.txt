public void testInconsistentTextBufferGetTextBufferBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    
    // First call should return null
    assertNull(buffer.getTextBuffer());
    
    // Check contentsAsString before calling getTextBuffer again
    assertEquals("", buffer.contentsAsString());
    
    // After calling contentsAsString, getTextBuffer should return an empty array
    assertNotNull(buffer.getTextBuffer());
    assertEquals(0, buffer.getTextBuffer().length);
}