
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;

import java.io.BufferedReader;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

import static org.junit.Assert.assertEquals;

public class CSVFormatTest {

    @Test
    public void testCSVPrinterWithHeader() throws IOException {
        Path path = Paths.get("test-data.csv");
        
        // Use CSVPrinter with a header
        try (CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(Files.newBufferedWriter(path))) {
            csvPrinter.printRecord(42);
        }

        // Verify the contents of the file
        try (BufferedReader reader = Files.newBufferedReader(path)) {
            assertEquals("x", reader.readLine()); // Verify header
            assertEquals("42", reader.readLine()); // Verify data
        } finally {
            // Clean up created file
            Files.deleteIfExists(path);
        }
    }
}
