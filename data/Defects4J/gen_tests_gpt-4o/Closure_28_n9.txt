public void testConstantFunctionInlining() {
    try {
        StringBuilder script = new StringBuilder();
        script.append("function f() { return false; } ");
        for (int i = 0; i < 25; i++) {
            script.append("if (!f()) alert('hi'); ");
        }
        ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");
        engine.eval(script.toString());
        fail("Script didn't throw an exception as expected");
    } catch (ScriptException e) {
        // Expected exception if the constant function is not inlined properly and produces a large output
    }
}