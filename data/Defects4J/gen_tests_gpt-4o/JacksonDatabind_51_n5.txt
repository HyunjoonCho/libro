public void testGenericTypeIdResolver() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new SimpleModule().addDeserializer(MyWrapper.class, new MyWrapperDeserializer()));

    String json = "{\"type\":\"integerWrapper\",\"value\":123}";
    
    MyWrapper result = mapper.readValue(json, MyWrapper.class);
    
    assertEquals(IntegerWrapper.class, result.getValue().getClass());
    assertEquals(123, ((IntegerWrapper) result.getValue()).getValue());
}