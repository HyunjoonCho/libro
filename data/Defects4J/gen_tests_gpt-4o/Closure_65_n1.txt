
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class StringEscapingTest {

    @Test
    public void testNullByteEscaping() {
        Context ctx = Context.enter();
        try {
            Scriptable scope = ctx.initSafeStandardObjects();
            // JavaScript code to be evaluated
            String script = "var x = \"\\u00003\"; x.length < 2 ? 'fail' : 'win';";
            Object result = ctx.evaluateString(scope, script, "testNullByteEscaping", 1, null);
            assertEquals("win", Context.jsToJava(result, String.class));
        } finally {
            Context.exit();
        }
    }
}
