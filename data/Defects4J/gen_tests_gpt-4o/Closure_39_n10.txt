public void testExternExportWithTypedef() {
    String source = "function MyClass() {};\n" +
                    "/** @typedef {{myProperty: string}} */\n" +
                    "var MyType;\n" +
                    "/** @typedef {{anotherProperty: MyType}} */\n" +
                    "var AnotherType;\n" +
                    "/**\n" +
                    " * @param {MyType=} opt_param\n" +
                    " */\n" +
                    "MyClass.prototype.method = function(opt_param) {};\n";

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setExternExports(true);
    compiler.compile(ExternsId.GLOBAL, SourceFile.fromCode("input.js", source), options);

    String externExports = compiler.toSource();
    
    assertFalse("ExternExport should not truncate typedefs", externExports.contains("..."));
}