
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.safety.Safelist;
import org.junit.Test;

public class JsoupBugTest {

    @Test(expected = StackOverflowError.class)
    public void testJsoupCleanStackOverflowError() {
        // Construct an HTML string with a large number of <wbr> tags
        StringBuilder htmlBuilder = new StringBuilder();
        htmlBuilder.append("<html><head></head><body>");
        
        for (int i = 0; i < 24205; i++) {
            htmlBuilder.append("<wbr>");
        }
        
        htmlBuilder.append("</body></html>");
        String html = htmlBuilder.toString();
        
        // Attempt to clean the HTML with Jsoup
        Document doc = Jsoup.parse(html);
        Jsoup.clean(doc.body().html(), Safelist.basic());
    }
}
