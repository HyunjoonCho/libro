
import org.apache.commons.codec.binary.Base64InputStream;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import static org.junit.Assert.assertEquals;

public class Base64InputStreamTest {

    @Test
    public void testSkip() throws IOException {
        // Input stream that should decode to {0, 0, 0, 255, 255, 255}
        InputStream ins = new ByteArrayInputStream("AAAA////".getBytes("ISO-8859-1"));
        
        // Base64InputStream instance
        Base64InputStream instance = new Base64InputStream(ins);

        // Attempt to skip 3 decoded bytes, which should correspond to 4 encoded characters
        assertEquals("Expected to skip 3 decoded bytes", 3L, instance.skip(3L));

        // Read next byte, expecting 255 after skipping the first three decoded bytes
        assertEquals("Expected byte value 255", 255, instance.read());
    }
}
