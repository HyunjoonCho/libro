
import org.apache.commons.math3.stat.inference.MannWhitneyUTest;
import org.junit.Test;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

public class MannWhitneyUTestOverflowTest {

    @Test
    public void testMannWhitneyUOverflow() {
        // Creating large datasets
        double[] sample1 = new double[1500];
        double[] sample2 = new double[1500];

        // Populate datasets with values
        for (int i = 0; i < 1500; i++) {
            sample1[i] = i + 1;  // 1, 2, 3, ..., 1500
            sample2[i] = i + 1501;  // 1501, 1502, 1503, ..., 3000
        }

        // Run the Mann-Whitney U Test
        MannWhitneyUTest test = new MannWhitneyUTest();
        double pValue = test.mannWhitneyUTest(sample1, sample2);

        // Assert that the pValue is a valid number and not NaN or infinity
        assertFalse("P-value should not be NaN", Double.isNaN(pValue));
        assertTrue("P-value should be greater than or equal to 0", pValue >= 0.0);
        assertTrue("P-value should be less than or equal to 1", pValue <= 1.0);
    }
}
