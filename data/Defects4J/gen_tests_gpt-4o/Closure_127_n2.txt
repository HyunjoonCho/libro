public void testBreakInFinallyBlock() {
    StringWriter writer = new StringWriter();
    PrintWriter console = new PrintWriter(writer);
    BreakInFinallyBlockTestRunner runner = new BreakInFinallyBlockTestRunner(console);
    runner.run();

    assertEquals("ok then...\n", writer.toString());
}

private static class BreakInFinallyBlockTestRunner {
    private final PrintWriter console;

    BreakInFinallyBlockTestRunner(PrintWriter console) {
        this.console = console;
    }

    void run() {
        labeledBlock:
        try {
            throw new Exception("throw me");
        } finally {
            // Fake catcher
            break labeledBlock;
        }
        console.println("ok then...");
    }
}