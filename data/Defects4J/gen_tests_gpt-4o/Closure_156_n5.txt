public void testCompilerCrashOnAssignStatement() {
    String code = "/** @constructor\n" +
                  " * @param {...Object} params\n" +
                  " */\n" +
                  "var dojox = {};\n" +
                  "dojox.gfx = {};\n" +
                  "dojox.gfx.shape = {};\n" +
                  "dojox.gfx.shape.Shape = function(params) {};\n" +
                  "dojox.gfx.shape.Shape = dojo.declare(\"dojox.gfx.shape.Shape\", null, /** @lends dojox.gfx.shape.Shape.prototype */ {});";

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", code), options);

    assertTrue(compiler.getWarnings().isEmpty());
    assertTrue(compiler.getErrors().isEmpty());
}