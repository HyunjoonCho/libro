
import org.apache.commons.math3.fitting.PolynomialCurveFitter;
import org.apache.commons.math3.fitting.WeightedObservedPoints;
import org.junit.Test;

public class LargeWeightsTest {

    @Test(expected = OutOfMemoryError.class)
    public void testLargeNumberOfWeightsCausesMemoryIssue() {
        int numPoints = 41200;
        
        // Create a large set of observed points
        WeightedObservedPoints obs = new WeightedObservedPoints();
        for (int i = 0; i < numPoints; i++) {
            obs.add(i, Math.sin(i));  // Just some example data
        }
        
        // Create a polynomial fitter with a low degree
        PolynomialCurveFitter fitter = PolynomialCurveFitter.create(3);
        
        // Try fitting the observed points which is expected to throw an error due to memory issue
        fitter.fit(obs.toList());
    }
}
