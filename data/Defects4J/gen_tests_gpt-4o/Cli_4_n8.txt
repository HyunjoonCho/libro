
import org.apache.commons.cli.*;
import org.junit.Test;
import static org.junit.Assert.*;

public class PosixParserTest {

    @Test
    public void testTargetOptionParsing() {
        // Define options
        Option targetOption = new Option("t", "target", true, "Generate files for the specified target machine");
        Options options = new Options();
        options.addOption(targetOption);

        // Create parser (using the deprecated PosixParser for testing)
        CommandLineParser parser = new PosixParser();

        // Test case: "-target foobar.com"
        String[] args = new String[]{"-target", "foobar.com"};
        try {
            CommandLine cmd = parser.parse(options, args);
            if (cmd.hasOption("t")) {
                // Print the parsed value for verification
                System.out.println("Processing selected target: " + cmd.getOptionValue("t"));
                // Assert that the parsed option value is as expected (should be "foobar.com")
                assertEquals("foobar.com", cmd.getOptionValue("t"));
            } else {
                fail("Option 't' not recognized.");
            }
        } catch (ParseException e) {
            fail("Parsing failed: " + e.getMessage());
        }
    }
}
