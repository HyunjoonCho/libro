public void testRequiredOptions() {
    CommandLine commandLine;
    Option help = DefaultOptionBuilderFactory.create().withShortName("h").create();
    Option config = DefaultOptionBuilderFactory.create().withShortName("c").withArgument(ArgumentBuilder.create().create()).create();

    Group options = GroupBuilder.create()
            .withOption(help)
            .withOption(config)
            .withRequiredOption(help)
            .create();

    Parser parser = new Parser();
    parser.setGroup(options);

    try {
        commandLine = parser.parse(new String[]{"-c", "configValue"});
    } catch (OptionException e) {
        fail("Parsing exception should not occur");
        return;
    }

    // The expected behavior is to require "-h", the failure is that the parser does not throw an error when "-h" is absent
    assertTrue("Help option is not found", commandLine.hasOption(help));
}