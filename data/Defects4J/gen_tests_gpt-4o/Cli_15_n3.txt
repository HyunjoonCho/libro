
import static org.junit.Assert.*;
import org.junit.Test;
import java.util.List;

public class DefaultArgumentTest {

    @Test
    public void testSingleOptionSingleArgument() throws Exception {
        String defaultValue1 = "100";
        String defaultValue2 = "1000";

        DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
        ArgumentBuilder abuilder = new ArgumentBuilder();
        GroupBuilder gbuilder = new GroupBuilder();

        DefaultOption bOption = obuilder.withShortName("b")
            .withLongName("b")
            .withArgument(abuilder
                .withName("b")
                .withMinimum(0)
                .withMaximum(2)
                .withDefault(defaultValue1)
                .withDefault(defaultValue2)
                .create())
            .create();

        Group options = gbuilder
            .withName("options")
            .withOption(bOption)
            .create();

        Parser parser = new Parser();
        parser.setHelpTrigger("--help");
        parser.setGroup(options);

        String enteredValue1 = "1";
        String[] args = new String[]{"-b", enteredValue1};

        CommandLine cl = parser.parse(args);
        CommandLine cmd = cl;

        assertNotNull(cmd);

        List<?> b = cmd.getValues("-b");

        // Expecting the values to contain the entered value and the second default value
        assertEquals("[" + enteredValue1 + ", " + defaultValue2 + "]", b.toString());
    }
}
