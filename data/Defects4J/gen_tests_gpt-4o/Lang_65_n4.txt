
import static org.junit.Assert.assertEquals;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;
import org.apache.commons.lang3.time.DateUtils;
import org.junit.Test;

public class DateUtilsDSTTest {

    @Test
    public void testTruncateWithDST() {
        // Set the timezone to Mountain Daylight Time (MDT)
        TimeZone tz = TimeZone.getTimeZone("America/Denver");
        Calendar calendar = Calendar.getInstance(tz);
        
        // Set the calendar to 2004-10-31 01:00:00 MDT
        calendar.set(2004, Calendar.OCTOBER, 31, 1, 0, 0);
        // 2004-10-31 01:00:00 MDT in milliseconds since epoch
        Date oct31_01MDT = calendar.getTime();
        
        // Use DateUtils to truncate the date by hour
        Date result = DateUtils.truncate(oct31_01MDT, Calendar.HOUR_OF_DAY);
        
        // Assert that the result is the same as the original date
        assertEquals(oct31_01MDT, result);
    }
}
