public void testFastDateFormatWithChangingDefaultLocale() {
    Locale originalLocale = Locale.getDefault();
    try {
        // Set the default locale to US
        Locale.setDefault(Locale.US);
        FastDateFormat fdfUS = FastDateFormat.getDateInstance(FastDateFormat.SHORT, null);
        String dateUS = fdfUS.format(System.currentTimeMillis());

        // Change the default locale to France
        Locale.setDefault(Locale.FRANCE);
        FastDateFormat fdfFR = FastDateFormat.getDateInstance(FastDateFormat.SHORT, null);
        String dateFR = fdfFR.format(System.currentTimeMillis());

        // US and France formatted dates should not be the same
        assertNotEquals(dateUS, dateFR);
    } finally {
        // Restore the original default locale
        Locale.setDefault(originalLocale);
    }
}