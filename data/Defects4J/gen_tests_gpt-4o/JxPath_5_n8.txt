public void testUnionOfVariableAndNode() {
    JXPathContext context = JXPathContext.newContext(new Object());
    context.getVariables().declareVariable("var", new Object());
    
    // This should cause the exception described in the bug report
    try {
        context.selectNodes("$var | /MAIN/A");
        fail("Expected JXPathException due to incompatible node pointers comparison");
    } catch (JXPathException e) {
        assertTrue(e.getMessage().contains("Cannot compare pointers that do not belong to the same tree"));
    }
}