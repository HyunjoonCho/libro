
import org.apache.commons.cli.*;

public class PosixParserTest {
    public static void main(String[] args) throws ParseException {
        testUnrecognizedLongOptionWithStopAtNonOption();
    }

    public static void testUnrecognizedLongOptionWithStopAtNonOption() throws ParseException {
        Options options = new Options();
        
        options.addOption("a", false, "Option a");
        options.addOption(Option.builder("b").hasArg().desc("Option b with argument").build());
        
        CommandLineParser parser = new PosixParser();
        String[] commandLineArgs = new String[] {"--zop", "-abfoo"};
        
        CommandLine cmd = parser.parse(options, commandLineArgs, true);
        
        String[] remainingArgs = cmd.getArgs();
        
        // Assert that remainingArgs contains the unrecognized long option and subsequent tokens unchanged
        assertEquals(2, remainingArgs.length);
        assertEquals("--zop", remainingArgs[0]);
        assertEquals("-abfoo", remainingArgs[1]);
    }
    
    // Helper method for assertion in a simple test scenario
    private static void assertEquals(Object expected, Object actual) {
        if (!expected.equals(actual)) {
            throw new AssertionError("Expected: " + expected + ", but got: " + actual);
        }
    }
}
