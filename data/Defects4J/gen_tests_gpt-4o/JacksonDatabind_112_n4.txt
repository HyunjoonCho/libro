public void testStringCollectionDeserializerWithCustomCollection() throws Exception {
    ObjectMapper mapper = new ObjectMapper();

    String json = "{\"customCollection\": [\"one\", \"two\", \"three\"]}";
    TestContainer container = mapper.readValue(json, TestContainer.class);

    assertNotNull(container.customCollection);
    assertEquals(3, container.customCollection.size());
    assertTrue(container.customCollection.contains("one"));
    assertTrue(container.customCollection.contains("two"));
    assertTrue(container.customCollection.contains("three"));
}

static class TestContainer {
    public CustomStringCollection customCollection;
}

static class CustomStringCollection extends HashSet<String> {
    private CustomStringCollection(Set<String> set) {
        super(set);
    }

    @JsonCreator
    public static CustomStringCollection create(Collection<String> strings) {
        return new CustomStringCollection(new HashSet<>(strings));
    }
}