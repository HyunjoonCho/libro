public void testObjectReaderReadValuesErrorRecovery() throws IOException {
    String jsonWithErrors = "[{\"valid\": \"json\"}, {\"incomplete: \"json\"}]";
    ObjectMapper mapper = new ObjectMapper();
    ObjectReader reader = mapper.readerFor(new TypeReference<Map<String, String>>() {});
    MappingIterator<Map<String, String>> iterator = null;
    try {
        iterator = reader.readValues(jsonWithErrors);
        while (iterator.hasNext()) {
            Map<String, String> value = iterator.next();
            // process value
        }
        fail("Expected JsonProcessingException not thrown");
    } catch (JsonProcessingException e) {
        // Assert that the iterator has stopped properly or recovered
        assertFalse(iterator.hasNext());
    }
}