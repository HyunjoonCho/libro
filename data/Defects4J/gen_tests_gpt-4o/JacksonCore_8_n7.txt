
import com.fasterxml.jackson.core.util.TextBuffer;
import com.fasterxml.jackson.core.util.BufferRecycler;
import org.junit.Test;

import static org.junit.Assert.*;

public class TextBufferTest {

    @Test
    public void testGetTextBufferBehavior() {
        TextBuffer buffer = new TextBuffer(new BufferRecycler());
        
        buffer.resetWithEmpty();
        
        // Initially, getTextBuffer() should return null after resetWithEmpty()
        char[] initialBuffer = buffer.getTextBuffer();
        assertNull("Expected initial text buffer to be null", initialBuffer);

        // After calling contentsAsString(), buffer should convert to empty string ""
        String contents = buffer.contentsAsString();
        assertEquals("Expected contents to be empty string", "", contents);
        
        // Now getTextBuffer() should return an empty array
        char[] finalBuffer = buffer.getTextBuffer();
        assertNotNull("Expected final text buffer to not be null", finalBuffer);
        assertEquals("Expected final text buffer to be empty array", 0, finalBuffer.length);
    }
}
