public void testAnonymousObjectTypeInference() {
    // Define a logger or console substitute if not available
    class MockConsole {
        public void log(String message) {
            // Simulate logging
        }
    }
    MockConsole console = new MockConsole();

    class Func {
        public void call(Object record) {
            if (record instanceof Map) {
                console.log((String) ((Map) record).get("prop"));
            }
        }
    }
    
    class Func2 {
        public void call(Object record) {
            if (record instanceof String) {
                console.log((String) record);
            } else if (record instanceof Map) {
                console.log((String) ((Map) record).get("prop"));
            }
        }
    }
    
    Map<String, String> record = new HashMap<>();
    record.put("prop", "a");
    
    new Func().call(record); // Should log "a"
    new Func2().call(record); // Should also log "a" without an error
}