
import static org.mockito.ArgumentMatchers.eq;
import static org.mockito.Mockito.*;
import static org.junit.Assert.*;

import org.junit.Test;
import org.mockito.ArgumentCaptor;

public class ArgumentCaptorVarargsTest {

    interface Service {
        void serve(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Create a mock service
        Service mockService = mock(Service.class);

        // Invoke the method with varargs
        mockService.serve("first", "second", "third");

        // Capture the arguments using ArgumentCaptor
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
        
        // Verify the interaction and capture the arguments
        verify(mockService).serve(captor.capture(), captor.capture(), captor.capture());

        // Get the captured arguments as a list
        assertEquals(3, captor.getAllValues().size());
        assertEquals("first", captor.getAllValues().get(0));
        assertEquals("second", captor.getAllValues().get(1));
        assertEquals("third", captor.getAllValues().get(2));
    }
}
