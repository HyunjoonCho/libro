
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.FormElement;
import org.jsoup.nodes.Element;
import org.junit.Test;

import java.util.List;
import org.jsoup.Connection.KeyVal;

import static org.junit.Assert.assertTrue;

public class ImageInputFormTest {

    @Test
    public void testImageInputFormData() {
        String html = "<form id='f'><input type='image' name='x'></form>";
        Document doc = Jsoup.parse(html);
        Element formElement = doc.getElementById("f");
        
        // Ensure the element is parsed as a FormElement
        assertTrue(formElement instanceof FormElement);
        
        FormElement form = (FormElement) formElement;

        List<KeyVal> formData = form.formData();

        // The expected behavior can vary, but `formData` should not contain `[x=]`.
        // Check that it contains expected default values for an image input.
        // The possible expectations are either an empty list ([])
        // or default coordinates [x.x=0, x.y=0]

        // Check for either expected scenario
        boolean isEitherExpected = formData.isEmpty() ||
                                   (formData.size() == 2 &&
                                    formData.stream().anyMatch(kv -> kv.key().equals("x.x") && kv.value().equals("0")) &&
                                    formData.stream().anyMatch(kv -> kv.key().equals("x.y") && kv.value().equals("0")));

        assertTrue(isEitherExpected);
    }
}
