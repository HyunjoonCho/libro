
import com.fasterxml.jackson.annotation.JsonProperty;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import java.util.EnumMap;
import java.util.Map;

import static org.junit.Assert.assertEquals;

public class EnumMapJsonPropertyTest {

    // Enum with JsonProperty annotation
    private enum Status {
        @JsonProperty("ok")
        SUCCESS,

        @JsonProperty("error")
        FAILURE
    }

    @Test
    public void testEnumMapSerializationWithJsonProperty() throws JsonProcessingException {
        // Create an EnumMap with the enum
        EnumMap<Status, String> statusMap = new EnumMap<>(Status.class);
        statusMap.put(Status.SUCCESS, "Everything is good!");
        statusMap.put(Status.FAILURE, "There was an error!");

        // Serialize the EnumMap
        ObjectMapper objectMapper = new ObjectMapper();
        String json = objectMapper.writeValueAsString(statusMap);

        // Check if the JSON keys match the JsonProperty values
        String expectedJson = "{\"ok\":\"Everything is good!\",\"error\":\"There was an error!\"}";
        assertEquals(expectedJson, json);
    }
}
