
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.helper.DataUtil;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.nio.charset.StandardCharsets;

import static org.junit.Assert.assertEquals;

public class Utf16BomHandlingTest {

    @Test
    public void testUtf16BomHandling() throws Exception {
        // Prepare HTML content with UTF-16 BOM
        String htmlContent = "<html><head><title>Test</title></head><body>Content</body></html>";
        byte[] utf16Bytes = ("\uFEFF" + htmlContent).getBytes(StandardCharsets.UTF_16);

        // Parse the byte array as a Document
        ByteArrayInputStream inputStream = new ByteArrayInputStream(utf16Bytes);
        Document doc = DataUtil.load(inputStream, null, "");

        // Validate the parsing result
        assertEquals("Test", doc.title());
        assertEquals("Content", doc.body().text());
    }
}
