
import com.fasterxml.jackson.core.JsonFactory;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonToken;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertEquals;

public class JsonParserTest {

    @Test
    public void testGetValueAsStringForFieldName() throws IOException {
        String json = "{\"name\":\"value\"}";
        
        JsonFactory factory = new JsonFactory();
        try (JsonParser parser = factory.createParser(json)) {
            assertEquals(JsonToken.START_OBJECT, parser.nextToken());  // {
            assertEquals(JsonToken.FIELD_NAME, parser.nextToken());   // "name"
            
            // Before fix: parser.getValueAsString() returns null for FIELD_NAME
            // After fix: parser.getValueAsString() returns "name"
            assertEquals("name", parser.getValueAsString());
            
            assertEquals(JsonToken.VALUE_STRING, parser.nextToken()); // "value"
            assertEquals("value", parser.getValueAsString());
            
            assertEquals(JsonToken.END_OBJECT, parser.nextToken());   // }
        }
    }
}
