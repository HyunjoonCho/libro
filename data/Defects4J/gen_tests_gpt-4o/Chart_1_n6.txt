public void testGetLegendItemsPotentialNPE() {
    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer() {};
    CategoryPlot mockPlot = mock(CategoryPlot.class);
    
    // Configure the mock plot to return an index and a null dataset
    when(mockPlot.getIndexOf(renderer)).thenReturn(0);
    when(mockPlot.getDataset(0)).thenReturn(null);
    
    renderer.setPlot(mockPlot);
    
    LegendItemCollection legendItems = renderer.getLegendItems();
    
    // Expect no items in the legend as the mock dataset is null
    assertTrue(legendItems.isEmpty());
}