public void testManageClosureDependenciesWithWhitespaceOnly() {
    CompilerOptions options = new CompilerOptions();
    options.setCompilationLevel(CompilationLevel.WHITESPACE_ONLY);
    options.setManageClosureDependencies(true);

    Compiler compiler = new Compiler();
    SourceFile input1 = SourceFile.fromCode("input1.js", "goog.provide('example');");
    SourceFile input2 = SourceFile.fromCode("input2.js", "goog.require('example');");
    Result result = compiler.compile(ImmutableList.of(), ImmutableList.of(input1, input2), options);

    assertTrue("Dependencies should be managed in WHITESPACE_ONLY level.", result.success);
    assertEquals("Should only include necessary files.", 2, compiler.toSource().split(";").length); // Ensure both files are included
}