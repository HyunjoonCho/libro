
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Selector;
import org.jsoup.select.Selector.SelectorParseException;
import org.junit.Test;

import static org.junit.Assert.*;

public class JsoupSelectorTest {

    @Test
    public void testUnbalancedBracketsInSelector() {
        String html = "<html><body><div class='card-content2'><a class='subtitle' title='MySubTitle:)' href='#' /></div></body></html>";
        Document document = Jsoup.parse(html);

        // Unbalanced selector
        String[] selectors = {
            "div.card-content2:has(a.subtitle[title=MySubTitle:)])",
            "a.title[title=MyTitle :] ]"
        };

        for (String selector : selectors) {
            try {
                document.select(selector);
                fail("Expected SelectorParseException for selector: " + selector);
            } catch (SelectorParseException e) {
                // Test passes if exception is thrown
                System.out.println("Caught expected SelectorParseException for selector: " + selector);
            }
        }
    }
}
