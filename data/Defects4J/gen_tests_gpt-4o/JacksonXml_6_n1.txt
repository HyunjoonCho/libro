public void testWriteBinaryWithInputStreamToXmlGenerator() throws Exception {
    byte[] data = "This is a test string".getBytes(StandardCharsets.UTF_8);
    InputStream inputStream = new ByteArrayInputStream(data);
    Base64Variant b64variant = Base64Variants.MIME;
    
    ToXmlGenerator toXmlGenerator = null;
    try {
        XmlFactory xmlFactory = new XmlFactory();
        StringWriter writer = new StringWriter();
        toXmlGenerator = xmlFactory.createGenerator(writer);
        
        try {
            toXmlGenerator.writeBinary(b64variant, inputStream, data.length);
            fail("Expected UnsupportedOperationException for writeBinary(InputStream) in ToXmlGenerator");
        } catch (UnsupportedOperationException e) {
            // Expected behavior
        }
    } finally {
        if (toXmlGenerator != null) {
            toXmlGenerator.close();
        }
        inputStream.close();
    }
}