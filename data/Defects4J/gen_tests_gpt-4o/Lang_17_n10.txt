
import org.apache.commons.text.StringEscapeUtils;
import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;

public class StringEscapeUtilsTest {

    @org.junit.Test
    public void testEscapeXmlWithSupplementaryPlaneCharacters() throws Exception {
        String str1 = "\uD842\uDFB7" + "A"; // Character in the Supplementary Plane + character 'A'
        String str2 = StringEscapeUtils.escapeXml10(str1);

        // The escaped string should be equal to the original when no XML special chars exist.
        org.junit.Assert.assertEquals(str1, str2);

        // Encoding both strings to display their byte sequence
        String encodedStr1 = URLEncoder.encode(str1, StandardCharsets.UTF_16BE.name());
        String encodedStr2 = URLEncoder.encode(str2, StandardCharsets.UTF_16BE.name());

        // Ensure byte sequences are equal
        org.junit.Assert.assertEquals(encodedStr1, encodedStr2);
    }
}
