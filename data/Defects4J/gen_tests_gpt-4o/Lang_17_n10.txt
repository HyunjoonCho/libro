@Test
public void testEscapeXmlWithSupplementaryCharacters() throws UnsupportedEncodingException {
    String input = "\uD842\uDFB7" + "A";  // Character in the Supplementary Planes followed by 'A'
    String escaped = StringEscapeUtils.escapeXml(input);

    assertEquals(input, escaped);

    String inputEncoded = URLEncoder.encode(input, "UTF-16BE");
    String escapedEncoded = URLEncoder.encode(escaped, "UTF-16BE");

    assertEquals("%D8%42%DF%B7A", inputEncoded);
    assertEquals("%D8%42%DF%B7A", escapedEncoded);
}