public void testJsonIdentityInfoWithJsonCreator() throws Exception {
    ObjectMapper mapper = new ObjectMapper();

    String json = "{"
            + "\"id\": 1,"
            + "\"parent\": {\"id\": 1},"
            + "\"child\": {\"id\": 2}"
            + "}";

    TestClass result = mapper.readValue(json, TestClass.class);

    assertNotNull(result);
    assertEquals(1, result.id);
    assertNotNull(result.parent);
    assertEquals(1, result.parent.id);
    assertNotNull(result.child);
    assertEquals(2, result.child.id);
}

@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "id")
static class TestClass {
    public int id;
    public TestClass parent;
    public TestClass child;

    @JsonCreator
    public TestClass(@JsonProperty("id") int id) {
        this.id = id;
    }
}