
import org.apache.commons.math.stat.descriptive.moment.Variance;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class VarianceTest {

    @Test
    public void testEvaluateMethodWithLengthParameter() {
        double[] values = {1.0, 2.0, 3.0, 4.0, 5.0};
        double[] weights = {1.0, 1.0, 1.0, 1.0, 1.0};
        double mean = 3.0;
        int begin = 0;
        int length = 3;  // Should only consider values 1.0, 2.0, and 3.0

        Variance variance = new Variance();
        double result = variance.evaluate(values, weights, mean, begin, length);

        // Expected variance should only consider the first 3 values: {1.0, 2.0, 3.0}
        // So, variance = ((1-3)^2 + (2-3)^2 + (3-3)^2) / (3-1) = (4 + 1 + 0) / 2 = 2.5
        assertEquals("Variance did not calculate correctly for a subarray", 2.5, result, 1e-10);
    }
}
