
import org.apache.commons.cli.*;

public class CommonCLITest {

    public void testArgumentWithQuotes() {
        // Define the options
        Options options = new Options();
        Option option = Option.builder("b")
                .longOpt("balloo")
                .hasArg()
                .desc("Test option")
                .build();
        options.addOption(option);

        // Create the parser
        CommandLineParser parser = new DefaultParser();
        String[] args = {"--balloo", "this is a \"test\""};

        try {
            // Parse the arguments
            CommandLine cmd = parser.parse(options, args);

            // Retrieve the value for the 'balloo' option
            String value = cmd.getOptionValue("balloo");

            // Check if the value preserved the quotes correctly
            assertEquals("this is a \"test\"", value);
        } catch (ParseException e) {
            e.printStackTrace();
            fail("Parsing failed: " + e.getMessage());
        }
    }

    private void assertEquals(String expected, String actual) {
        if (!expected.equals(actual)) {
            throw new AssertionError("Expected: '" + expected + "' but got: '" + actual + "'");
        }
    }

    private void fail(String message) {
        throw new AssertionError(message);
    }

    // Test runner
    public static void main(String[] args) {
        CommonCLITest test = new CommonCLITest();
        test.testArgumentWithQuotes();
        System.out.println("Test passed.");
    }
}
