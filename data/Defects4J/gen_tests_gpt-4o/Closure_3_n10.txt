public void testOptimizationFailsWithVariableInCatchClause() {
    String expectedStackTrace = getStackTrace();
    assertNotNull(expectedStackTrace);
}

private String getStackTrace() {
    return executeGetStack().replaceAll("\\s", "");
}

private String executeGetStack() {
    try {
        throw new Error("");
    } catch (Throwable err) {
        return err.getStackTrace().toString();
    }
    // The following line is invalid; replicated from the bug report to test its failure
    // return a.stack; 
    // The correct behavior should be within the scope, so the correct code to return stack was already above
}