public void testLargeNumberOfWeightsMemoryExhaustion() {
    // Create a large set of weights
    double[] weights = new double[41200];
    Arrays.fill(weights, 1.0);

    // Example of a simple multivariate vector function: polynomial curve 
    PolynomialCurveFitter fitter = PolynomialCurveFitter.create(2); // Polynomial degree 2

    // Generating some data points
    List<WeightedObservedPoint> points = new ArrayList<>();
    for (int i = 0; i < weights.length; i++) {
        points.add(new WeightedObservedPoint(1.0, i, i*i + 0.5 * i + 1.0));
    }

    try {
        // Attempt to fit the polynomial curve to the data points with the weights
        double[] coefficients = fitter.fit(points);
        fail("Expected memory exhaustion did not occur");
    } catch (OutOfMemoryError oome) {
        // Expected outcome
    }
}