public void testSplitSurrogateOnWriteRaw() {
    JsonFactory jsonFactory = new JsonFactory();
    try {
        JsonGenerator jsonGenerator = jsonFactory.createGenerator(new StringWriter());
        String problematicString = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\uD83D\uDE00";
        jsonGenerator.writeStartObject();
        jsonGenerator.writeRaw(problematicString);
        jsonGenerator.writeEndObject();
        jsonGenerator.close();
        fail("Expected JsonGenerationException to be thrown");
    } catch (JsonGenerationException e) {
        assertTrue(e.getMessage().contains("Split surrogate on writeRaw() input"));
    } catch (IOException e) {
        fail("IOException was not expected");
    }
}