
import static org.junit.Assert.assertThrows;
import static org.mockito.Mockito.*;

import org.junit.Test;

public class MockitoAfterNegativeTest {

    @Test
    public void testMockitoAfterWithNegativeTimePeriods() {
        Runnable runnable = mock(Runnable.class);

        // Initial verification, expected to pass
        verify(runnable, never()).run();

        // Test verification after a positive delay, expected to pass
        verify(runnable, after(1000).never()).run();

        // Test verification after a negative delay, which incorrectly passes
        assertThrows(
            "Expected an IllegalArgumentException for negative time period",
            IllegalArgumentException.class,
            () -> verify(runnable, after(-1000).atLeastOnce()).run());
    }
}
