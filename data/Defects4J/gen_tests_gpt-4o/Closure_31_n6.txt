public void testManageClosureDependenciesWhitespaceOnly() {
    CompilerOptions options = new CompilerOptions();
    options.setManageClosureDependencies(true);
    options.setCompilationLevel(CompilationLevel.WHITESPACE_ONLY);
    
    Compiler compiler = new Compiler();
    String js = "goog.provide('a');\n" +
                "goog.require('b');\n" +
                "var x = 1;";
    
    compiler.compile(ExternsProvider.getDefaultExterns(), SourceFile.fromCode("test.js", js), options);
    
    assertFalse(compiler.hasErrors());
    String compiledCode = compiler.toSource();
    assertTrue(compiledCode.contains("goog.provide('a');"));
    assertTrue(compiledCode.contains("var x = 1;"));
}