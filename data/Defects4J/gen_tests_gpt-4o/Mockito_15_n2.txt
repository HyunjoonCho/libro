
import static org.junit.Assert.assertArrayEquals;
import static org.mockito.Mockito.*;

import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

public class VarargsCaptorTest {

    interface VarargsService {
        void process(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Mock the service
        VarargsService mockedService = Mockito.mock(VarargsService.class);

        // Call the method with varargs
        mockedService.process("arg1", "arg2", "arg3");

        // Capture the varargs
        ArgumentCaptor<String[]> argumentCaptor = ArgumentCaptor.forClass(String[].class);
        verify(mockedService).process(argumentCaptor.capture());

        // Verify the captured arguments
        String[] expected = {"arg1", "arg2", "arg3"};
        assertArrayEquals(expected, argumentCaptor.getValue());
    }
}
