public void testArgumentCaptorWithVarargs() {
    List<String> mockList = mock(List.class);

    ArgumentCaptor<String> argumentCaptor = ArgumentCaptor.forClass(String.class);

    mockList.addAll(anyString(), anyString());
    verify(mockList).addAll(argumentCaptor.capture(), argumentCaptor.capture());

    List<String> capturedArguments = argumentCaptor.getAllValues();
    assertEquals(2, capturedArguments.size());
    assertNotNull(capturedArguments.get(0));
    assertNotNull(capturedArguments.get(1));
}