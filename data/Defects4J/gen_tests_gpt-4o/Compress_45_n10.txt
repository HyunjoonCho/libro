
import org.apache.commons.compress.archivers.tar.TarUtils;
import org.junit.Assert;
import org.junit.Test;

import java.math.BigInteger;
import java.util.Arrays;

public class TarUtilsTest {
    @Test
    public void testFormatLongOctalOrBinaryBytes() {
        final byte[] buffer = new byte[10];
        final long smallPositiveValue = 12345L; // A small positive value that should not be binary

        TarUtils.formatLongOctalOrBinaryBytes(smallPositiveValue, buffer, 0, buffer.length);
        Assert.assertFalse("Data should not be in binary format", isBinaryFormat(buffer));

        final long largeValue = Long.MAX_VALUE; // A large value that should trigger binary format
        TarUtils.formatLongOctalOrBinaryBytes(largeValue, buffer, 0, buffer.length);
        Assert.assertTrue("Data should be in binary format", isBinaryFormat(buffer));
    }

    private boolean isBinaryFormat(byte[] buffer) {
        return buffer[0] == (byte) 0x80;
    }
}
