public void testMissingPropertiesWithRecursiveTypes() throws Exception {
    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.addMixIn(Base.class, BaseMixin.class);

    Base base = new Base();
    Sub sub = new Sub();

    String serializedSub = objectMapper.writeValueAsString(sub);
    assertEquals("{\"base\":1,\"sub\":2}", serializedSub);
}

// Needed MixIn to force the base class properties inclusion
abstract class BaseMixin extends Base {
    @JsonProperty abstract int getBase();
}