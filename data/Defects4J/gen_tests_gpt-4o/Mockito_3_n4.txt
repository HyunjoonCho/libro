
import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.*;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyString;

import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Captor;
import org.mockito.MockitoAnnotations;

public class VarargsCaptorTest {

    // Interface for demonstration
    interface ExampleService {
        void performAction(String... actions);
    }

    @Captor
    ArgumentCaptor<String> captor;

    @Test
    public void testVarargsCaptor() {
        // Initialize Mockito Annotations
        MockitoAnnotations.openMocks(this);

        // Mock the ExampleService
        ExampleService service = mock(ExampleService.class);

        // Use the service with varargs
        service.performAction("action1", "action2", "action3");

        // Capture varargs
        verify(service).performAction(captor.capture());

        // Assert captured arguments
        assertEquals("action1", captor.getAllValues().get(0));
        assertEquals("action2", captor.getAllValues().get(1));
        assertEquals("action3", captor.getAllValues().get(2));
    }
}
