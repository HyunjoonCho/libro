
import org.apache.commons.cli.*;

public class HelpFormatterTest {

    @org.junit.Test
    public void testSetArgNameHasNoEffect() {
        // Create options
        Options options = new Options();
        Option option = Option.builder("t")
                .hasArg()
                .desc("Test option")
                .build();
        options.addOption(option);

        // Set the argument name using HelpFormatter
        HelpFormatter formatter = new HelpFormatter();
        formatter.setArgName("testArgName");

        // Capture the output of the help formatter
        java.io.ByteArrayOutputStream out = new java.io.ByteArrayOutputStream();
        java.io.PrintStream ps = new java.io.PrintStream(out);
        System.setOut(ps);

        // Print the help
        formatter.printHelp("testapp", options);
        
        // Reset the System.out
        System.out.flush();
        System.setOut(System.out);

        // Verify if the output contains the default argument name 'arg' instead of 'testArgName'
        String helpOutput = out.toString();
        assertTrue("Help output should contain the default argument name 'arg', not 'testArgName'.",
                   helpOutput.contains("arg"));
        assertFalse("Help output should not contain 'testArgName'.", 
                    helpOutput.contains("testArgName"));
    }

    private void assertTrue(String message, boolean condition) {
        if (!condition) {
            throw new AssertionError(message);
        }
    }

    private void assertFalse(String message, boolean condition) {
        if (condition) {
            throw new AssertionError(message);
        }
    }
}
