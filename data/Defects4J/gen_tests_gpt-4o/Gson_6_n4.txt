
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.TypeAdapter;
import com.google.gson.TypeAdapterFactory;
import com.google.gson.reflect.TypeToken;
import org.junit.Test;

public class GsonNpeTest {
    
    @Test(expected = NullPointerException.class)
    public void testTypeAdapterFactoryNullCreation() {
        TypeAdapterFactory factory = new TypeAdapterFactory() {
            @Override
            public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
                // Intentionally returning null to simulate the bug scenario
                return null;
            }
        };
        
        Gson gson = new GsonBuilder()
                .registerTypeAdapterFactory(factory)
                .create();
        
        // Attempt to use Gson which should cause an NPE with the setup above
        gson.toJson(new SampleData("test"));
    }
    
    private static class SampleData {
        private String field;

        public SampleData(String field) {
            this.field = field;
        }
    }
}
