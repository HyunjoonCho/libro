public void testDuplicateResponseHeader() {
    Map<String, List<String>> headers = new HashMap<>();
    headers.put("X-Powered-By", Arrays.asList("PHP/5.2.8", "ASP.NET"));

    String expectedHeaderValue = "PHP/5.2.8 ASP.NET";

    StringBuilder headerValue = new StringBuilder();
    List<String> values = headers.get("X-Powered-By");
    if (values != null && !values.isEmpty()) {
        for (String value : values) {
            headerValue.append(value).append(" ");
        }
        headerValue.setLength(headerValue.length() - 1); // remove trailing space
    }

    assertEquals(expectedHeaderValue, headerValue.toString());
}