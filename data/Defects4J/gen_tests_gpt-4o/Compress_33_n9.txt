
import org.apache.commons.compress.compressors.CompressorException;
import org.apache.commons.compress.compressors.CompressorInputStream;
import org.apache.commons.compress.compressors.CompressorStreamFactory;
import org.junit.Test;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;

public class CompressorStreamFactoryTest {

    @Test(expected = CompressorException.class)
    public void testDeflateWithZlibHeader() throws Exception {
        File deflateFile = new File("path/to/your/bla.tar.deflatez");
        try (InputStream fileInputStream = new FileInputStream(deflateFile)) {
            CompressorInputStream compressorInputStream =
                    new CompressorStreamFactory().createCompressorInputStream(fileInputStream);
            // We expect a CompressorException due to unrecognized stream signature
        }
    }
}
