kotlin
import com.fasterxml.jackson.annotation.JsonFormat
import com.fasterxml.jackson.core.JsonGenerator
import com.fasterxml.jackson.databind.ObjectMapper
import com.fasterxml.jackson.module.kotlin.jacksonObjectMapper
import org.junit.Test
import java.math.BigDecimal
import kotlin.test.assertEquals

data class Test(
    @JsonFormat(shape= JsonFormat.Shape.STRING)
    val value: BigDecimal
)

class JsonFormatTest {

    @Test
    fun testBigDecimalSerialization() {
        val mapper: ObjectMapper = jacksonObjectMapper()
            .configure(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN, true)
        
        val test = Test(BigDecimal("0.0000000005"))
        val json = mapper.writeValueAsString(test)

        // Expected output should be {"value":"0.0000000005"}, but due to the issue, expected is different
        val expectedOutput = """{"value":"0.0000000005"}"""
        assertEquals(expectedOutput, json)
    }
}
