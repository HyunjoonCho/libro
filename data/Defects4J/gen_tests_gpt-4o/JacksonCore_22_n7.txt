public void testFilteringGeneratorDelegateMatchCount() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    JsonNode rootNode = mapper.createObjectNode().put("field1", "value1").put("field2", "value2");
    TokenFilter filter = new TokenFilter() {
        @Override
        public TokenFilter includeProperty(String name) {
            return "field1".equals(name) ? TokenFilter.INCLUDE_ALL : null;
        }
    };

    FilteringParserDelegate parser = new FilteringParserDelegate(mapper.treeAsTokens(rootNode), filter, false, false);

    int matchCount = 0;
    while (parser.nextToken() != null) {
        matchCount = parser.getMatchCount();
    }

    assertEquals(1, matchCount);
}