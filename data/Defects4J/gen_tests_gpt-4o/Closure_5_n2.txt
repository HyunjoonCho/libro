script
import static org.junit.jupiter.api.Assertions.assertNull;
import static org.junit.jupiter.api.Assertions.assertNotNull;

import org.junit.jupiter.api.Test;

public class DeleteStatementTest {

    @Test
    public void testDeleteStatementOnObjectProperty() {
        // Set up the function to be tested
        String resultBeforeDeletion = executeWithDelete(42, true);
        String resultAfterDeletion = executeWithDelete(42, false);

        // Assert that the value is not null before deletion
        assertNotNull(resultBeforeDeletion, "The value before deletion should not be null.");

        // Assert that the value is null after deletion as delete should remove the property
        assertNull(resultAfterDeletion, "The value after deletion should be null indicating successful deletion.");
    }

    private String executeWithDelete(int arg, boolean beforeDeletion) {
        // Create a function that simulates the JavaScript behavior
        Object foo = new Object() {
            public Integer bar = arg;
        };

        if (beforeDeletion) {
            // Return the value before attempting deletion
            return foo.bar.toString();
        }

        // Attempt to delete by setting to null
        foo.bar = null;

        // Return the value after deletion (should return null if deletion worked)
        return foo.bar != null ? foo.bar.toString() : null;
    }
}
