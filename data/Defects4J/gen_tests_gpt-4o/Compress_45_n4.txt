
import org.apache.commons.compress.archivers.tar.TarUtils;
import org.junit.Test;
import static org.junit.Assert.*;

public class TarUtilsTest {

    @Test
    public void testFormatLongOctalOrBinaryBytes() {
        byte[] buffer = new byte[8];

        // Using a value that's less than 9 bytes when formatted as binary
        long testValue = 123456L;

        // Store the expected result from formatLongBinary
        TarUtils.formatLongBinary(testValue, buffer, 0, 8);

        // Now, perform the operation that potentially overwrites this result
        TarUtils.formatLongOctalOrBinaryBytes(testValue, buffer, 0, 8);

        // Verify that the result was properly formatted as binary and not overwritten
        byte[] expectedBuffer = new byte[8];
        TarUtils.formatLongBinary(testValue, expectedBuffer, 0, 8);
        assertArrayEquals(expectedBuffer, buffer);
    }
}
