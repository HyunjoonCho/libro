public void testParseNaNAsBigDecimalThrowsNumberFormatException() {
    String json = "NaN";
    JsonFactory factory = new JsonFactory();
    factory.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);
    
    try (JsonParser parser = factory.createParser(json)) {
        parser.nextToken(); // Should move to NaN token
        parser.getDecimalValue(); // Should throw NumberFormatException, not NullPointerException
        fail("Expected NumberFormatException to be thrown");
    } catch (NumberFormatException e) {
        // Expected exception
    } catch (NullPointerException e) {
        fail("Expected NumberFormatException, but got NullPointerException");
    } catch (IOException e) {
        fail("Unexpected IOException thrown");
    }
}