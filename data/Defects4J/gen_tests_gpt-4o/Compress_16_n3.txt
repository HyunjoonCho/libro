
import org.apache.commons.compress.archivers.ArchiveException;
import org.apache.commons.compress.archivers.ArchiveInputStream;
import org.apache.commons.compress.archivers.ArchiveStreamFactory;
import org.junit.Test;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import static org.junit.Assert.assertNotEquals;

public class ArchiveStreamFactoryTest {

    @Test
    public void testFalsePositiveTarDetection() throws IOException, ArchiveException {
        File aiffFile = new File("path/to/testAIFF.aif"); // Provide the correct path to the AIFF file
        try (FileInputStream fis = new FileInputStream(aiffFile)) {
            ArchiveStreamFactory factory = new ArchiveStreamFactory();
            ArchiveInputStream archiveInputStream;

            try {
                archiveInputStream = factory.createArchiveInputStream(fis);
                String archiveType = archiveInputStream.getArchiveName();
                // We expect the archiveType not to be recognized as a "tar"
                assertNotEquals("tar", archiveType);
            } catch (ArchiveException e) {
                // Exception is expected if it's not a recognized archive type
                // We can confirm that it doesn't falsely detect as a TAR
            }
        }
    }
}
