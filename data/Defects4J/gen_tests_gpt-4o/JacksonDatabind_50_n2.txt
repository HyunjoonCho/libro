public void testJsonIdentityInfoDeserializationWithCreator() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    
    String json = "{\"id\":1,\"name\":\"Parent\",\"child\":{\"name\":\"Child\",\"parent\":1}}";
    
    Parent parent = mapper.readValue(json, Parent.class);
    
    assertNotNull(parent);
    assertEquals(1, parent.id);
    assertEquals("Parent", parent.name);
    assertNotNull(parent.child);
    assertEquals("Child", parent.child.name);
    assertEquals(parent, parent.child.parent);
}

@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "id")
public static class Parent {
    public int id;
    public String name;
    public Child child;

    @JsonCreator
    public Parent(@JsonProperty("id") int id, 
                  @JsonProperty("name") String name, 
                  @JsonProperty("child") Child child) {
        this.id = id;
        this.name = name;
        this.child = child;
    }
}

@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "name")
public static class Child {
    public String name;
    public Parent parent;

    @JsonCreator
    public Child(@JsonProperty("name") String name, 
                 @JsonProperty("parent") Parent parent) {
        this.name = name;
        this.parent = parent;
    }
}