public void testBZip2CompressorInputStreamTruncatedFile() throws IOException {
    byte[] truncatedData = new byte[770]; // Simulating truncated bz2 data
    Arrays.fill(truncatedData, (byte) 'A'); // Fill with dummy data
    
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(truncatedData);
    BZip2CompressorInputStream bZip2In = new BZip2CompressorInputStream(byteArrayInputStream, true);

    byte[] buffer = new byte[1024];
    int bytesRead = 0;
    int totalBytesRead = 0;
    while ((bytesRead = bZip2In.read(buffer)) != -1) {
        totalBytesRead += bytesRead;
    }
    
    assertEquals(770, totalBytesRead);
}