public void testFailsWithJsonDeserializeAndDefaultTyping() throws JsonParseException, JsonMappingException, IOException {
    String serializedInstance = "{\"mapProperty\":[\"java.util.HashMap\",{\"Compound|Key\":\"Value\"}]}";
    ObjectMapper mapper = new ObjectMapper().enableDefaultTyping(DefaultTyping.NON_FINAL);
    TestClass testInstance = mapper.readValue(serializedInstance, TestClass.class);
    String testInstanceSerialized = mapper.writeValueAsString(testInstance);
    assertEquals(serializedInstance, testInstanceSerialized);
}