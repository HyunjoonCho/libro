
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

import static org.junit.Assert.assertNotNull;

public class JsoupDeeplyNestedTest {

    @Test(timeout = 10000) // Set a timeout to prevent indefinite running in case of performance issues
    public void testDeeplyNestedHtmlParsing() {
        // Construct a deeply nested HTML structure
        StringBuilder html = new StringBuilder();
        html.append("<html><head><title>Test</title></head><body>");
        int depth = 10000; // Adjust the depth based on the system's capability for demonstrating the issue
        for (int i = 0; i < depth; i++) {
            html.append("<div>");
        }
        for (int i = 0; i < depth; i++) {
            html.append("</div>");
        }
        html.append("</body></html>");

        // Use Jsoup to parse the deeply nested HTML
        Document document = Jsoup.parse(html.toString());

        // Ensure the document was parsed (though performance is the primary focus of this test)
        assertNotNull(document);
    }
}
