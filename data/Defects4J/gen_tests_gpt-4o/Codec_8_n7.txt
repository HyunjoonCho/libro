public void testArrayIndexOutOfBoundsExceptionOnBase64InputStream() {
    byte[] inputBytes = new byte[10921];  // Create an input larger than 10920 bytes.
    for (int i = 0; i < inputBytes.length; i++) {
        inputBytes[i] = (byte) (i % 256);
    }
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(inputBytes);
    Base64InputStream base64InputStream = new Base64InputStream(byteArrayInputStream, true, 0, null);

    int bytesRead = 0;
    try {
        while (base64InputStream.read() != -1) {
            bytesRead++;
        }
    } catch (Exception e) {
        assertEquals(java.lang.ArrayIndexOutOfBoundsException.class, e.getClass());
        assertTrue(bytesRead >= 10920);
    }
}