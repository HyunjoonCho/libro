
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import org.junit.Test;

import static org.junit.Assert.assertFalse;

public class CompilerTest {

    @Test
    public void testIncompleteFunctionDefinitionCausesError() {
        Compiler compiler = new Compiler();

        // Configure compiler options, enable ideMode
        CompilerOptions options = new CompilerOptions();
        options.setIdeMode(true);

        // JavaScript code that causes the error
        String jsCode = "f f f ;\nfunction t";

        // Compile the JavaScript code
        Result result = compiler.compile(
                CompilerTestUtils.fromString("externs.js", ""), // No externs
                CompilerTestUtils.fromString("input.js", jsCode), // JavaScript input
                options
        );

        // The test is successful if the compiler encountered an error
        assertFalse("The compilation should fail due to incomplete function definition.", result.success);
    }
}
