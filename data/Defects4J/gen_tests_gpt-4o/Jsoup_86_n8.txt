
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.junit.Test;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;

import static org.junit.Assert.assertNotNull;

public class JsoupTest {

    @Test
    public void testIndexOutOfBoundsException() {
        try {
            // Assuming 'largeHtmlFile.html' is the local path in the test environment
            String html = new String(Files.readAllBytes(Paths.get("largeHtmlFile.html")), "UTF-8");

            // Parse the HTML content with Jsoup using the XML parser
            Document doc = Jsoup.parse(html, "", Parser.xmlParser());

            // Ensure the document is not null after parsing
            assertNotNull(doc);
        } catch (IOException e) {
            // Normally you would handle the error or assert failure
            e.printStackTrace();
            assert false : "Failed to read HTML file: " + e.getMessage();
        } catch (IndexOutOfBoundsException e) {
            // This exception is what we're specifically testing for
            e.printStackTrace();
            assert false : "Unexpected IndexOutOfBoundsException thrown: " + e.getMessage();
        }
    }
}
