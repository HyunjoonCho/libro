
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;
import static org.junit.Assert.fail;

import java.math.BigDecimal;

public class BigDecimalOutOfMemoryTest {

    @Test
    public void testBigDecimalOutOfMemoryError() {
        ObjectMapper mapper = new ObjectMapper().enable(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN);
        BigDecimal bigDecimal = new BigDecimal("9.223372E+1010671858");

        try {
            // This line is expected to throw an OutOfMemoryError
            mapper.writeValueAsString(bigDecimal);
            fail("Expected an OutOfMemoryError to be thrown");
        } catch (OutOfMemoryError e) {
            // Test passes if OutOfMemoryError is thrown as expected
            System.out.println("Caught expected OutOfMemoryError: " + e.getMessage());
        } catch (Exception e) {
            fail("Expected an OutOfMemoryError, but got: " + e.getClass().getName());
        }
    }
}
