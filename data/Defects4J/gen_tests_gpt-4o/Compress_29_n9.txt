public void testArchiveStreamFactoryEncodingIssue() throws ArchiveException {
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    
    InputStream arjInput = getDummyInputStream();
    ArjArchiveInputStream arjArchiveInput = (ArjArchiveInputStream) factory.createArchiveInputStream("arj", arjInput, "UTF-8");
    assertEquals("UTF-8", arjArchiveInput.getEncoding());

    InputStream cpioInput = getDummyInputStream();
    CpioArchiveInputStream cpioArchiveInput = (CpioArchiveInputStream) factory.createArchiveInputStream("cpio", cpioInput, "UTF-8");
    assertEquals("UTF-8", cpioArchiveInput.getEncoding());

    InputStream dumpInput = getDummyInputStream();
    DumpArchiveInputStream dumpArchiveInput = (DumpArchiveInputStream) factory.createArchiveInputStream("dump", dumpInput, "UTF-8");
    assertEquals("UTF-8", dumpArchiveInput.getEncoding());

    InputStream jarInput = getDummyInputStream();
    JarArchiveInputStream jarArchiveInput = (JarArchiveInputStream) factory.createArchiveInputStream("jar", jarInput, "UTF-8");
    assertEquals("UTF-8", jarArchiveInput.getEncoding());

    OutputStream jarOutput = new ByteArrayOutputStream();
    JarArchiveOutputStream jarArchiveOutput = (JarArchiveOutputStream) factory.createArchiveOutputStream("jar", jarOutput, "UTF-8");
    assertEquals("UTF-8", jarArchiveOutput.getEncoding());
}

private InputStream getDummyInputStream() {
    return new ByteArrayInputStream(new byte[0]);
}