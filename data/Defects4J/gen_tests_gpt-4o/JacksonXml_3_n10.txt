
import com.fasterxml.jackson.dataformat.xml.XmlFactory;
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.XmlParser;
import com.fasterxml.jackson.core.JsonToken;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertEquals;

public class XmlParserTest {
    private XmlMapper xmlMapper;

    @Before
    public void setUp() {
        xmlMapper = new XmlMapper(new XmlFactory());
    }

    @Test
    public void testNextTextValueForAttributes() throws IOException {
        String xml = "<root attr='value'>text</root>";
        XmlParser parser = (XmlParser) xmlMapper.getFactory().createParser(xml);

        // Move to the root element
        parser.nextToken();
        parser.nextToken(); // Move to attribute

        assertEquals(JsonToken.VALUE_STRING, parser.currentToken());

        // Trying to access the attribute value
        String attributeValue = parser.nextTextValue();
        assertEquals("value", attributeValue);
        
        parser.close();
    }
}
