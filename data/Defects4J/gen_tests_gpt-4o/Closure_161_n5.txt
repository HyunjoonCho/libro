public void testPeepholeConstantsFolding() {
    String compilationLevel = "ADVANCED_OPTIMIZATIONS";
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.valueOf(compilationLevel).setOptionsForCompilationLevel(options);

    Compiler compiler = new Compiler();
    compiler.initOptions(options);
    
    String jsCode = "var Mdt=[]; Mdt[11] = ['22','19','19','16','21','18','16','20','17','17','21','17'];";
    SourceFile input = SourceFile.fromCode("input.js", jsCode);

    try {
        compiler.compile(Collections.emptyList(), Collections.singletonList(input), options);
    } catch (Exception e) {
        fail("Compilation failed: " + e.getMessage());
    }
    
    JSError[] errors = compiler.getErrors();
    boolean indexOutOfBoundsErrorFound = false;
    for (JSError error : errors) {
        if (error.description.contains("Array index out of bounds")) {
            indexOutOfBoundsErrorFound = true;
            break;
        }
    }
    
    assertFalse("Array index out of bounds error found during compilation", indexOutOfBoundsErrorFound);
}