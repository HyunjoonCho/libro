
import java.io.ByteArrayInputStream;
import java.io.IOException;
import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
import org.junit.Test;
import static org.junit.Assert.fail;

public class TarArchiveInputStreamTest {

    @Test
    public void testParsePaxHeadersWithEmptyLine() {
        String paxHeaderWithEmptyLine = "30 mtime=1350244992.914036111\n\n";
        byte[] headerBytes = paxHeaderWithEmptyLine.getBytes();

        ByteArrayInputStream bais = new ByteArrayInputStream(headerBytes);
        TarArchiveInputStream tais = new TarArchiveInputStream(bais);

        try {
            tais.getNextTarEntry();
            // If no exception is thrown, we consider the test passed
        } catch (NegativeArraySizeException e) {
            fail("Should not throw NegativeArraySizeException when parsing PAX headers with an empty line.");
        } catch (IOException e) {
            fail("IOException occurred: " + e.getMessage());
        }
    }
}
