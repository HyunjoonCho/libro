
import static org.mockito.Mockito.*;
import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Captor;
import org.mockito.MockitoAnnotations;

import java.util.List;

public class CaptorExampleTest {

    // Interface or class to be mocked
    interface ListService {
        void addElement(String element);
    }

    // Mock object
    private ListService listService;

    // Captor for capturing the argument
    @Captor
    private ArgumentCaptor<String> captor;

    @Before
    public void setUp() {
        MockitoAnnotations.openMocks(this);
        listService = mock(ListService.class);
    }

    @Test
    public void testCaptorUsage() {
        // Use the mock object
        listService.addElement("element1");
        listService.addElement("element2");

        // Verifying interaction and capturing the argument
        verify(listService, times(2)).addElement(captor.capture());

        // Assert that the captured values are as expected
        List<String> capturedArguments = captor.getAllValues();
        assertEquals("element1", capturedArguments.get(0));
        assertEquals("element2", capturedArguments.get(1));
    }
}
