public void testBase64InputStreamRead() throws IOException {
    byte[] input = "YWJj".getBytes(); // "abc" in Base64
    Base64InputStream base64Input = new Base64InputStream(new ByteArrayInputStream(input), true);
    byte[] buffer = new byte[4];
    int bytesRead = base64Input.read(buffer);
    assertEquals(3, bytesRead);
    bytesRead = base64Input.read(buffer);
    assertEquals(-1, bytesRead);
}