public void testExtendedBufferReaderHandlesEOLConsistently() throws IOException {
    String testData = "Line1\rLine2\nLine3\r\nLine4";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(testData));
    
    int expectedLineCount = 4;
    int actualLineCount = 0;
    
    while (reader.readLine() != null) {
        actualLineCount++;
    }
    
    assertEquals(expectedLineCount, actualLineCount);
}