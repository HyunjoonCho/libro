
import org.junit.Test;
import static org.junit.Assert.*;

public class MannWhitneyUTestOverflowTest {

    @Test
    public void testMannWhitneyUWithLargeDataSets() {
        // Generate two large data sets
        int size = 1500;
        double[] dataSet1 = new double[size];
        double[] dataSet2 = new double[size];

        for (int i = 0; i < size; i++) {
            dataSet1[i] = i * 1.0;
            dataSet2[i] = i * 1.0 + 1.0;
        }

        // Perform the Mann-Whitney U Test
        MannWhitneyUTest mannWhitneyUTest = new MannWhitneyUTest();
        
        try {
            double pValue = mannWhitneyUTest.mannWhitneyUTest(dataSet1, dataSet2);
            // Check if pValue is not NaN or other invalid values
            assertFalse("pValue should not be NaN", Double.isNaN(pValue));
            assertTrue("pValue should be a valid probability value", pValue >= 0.0 && pValue <= 1.0);
        } catch (Exception e) {
            fail("Exception during Mann-Whitney U Test: " + e.getMessage());
        }
    }
}
