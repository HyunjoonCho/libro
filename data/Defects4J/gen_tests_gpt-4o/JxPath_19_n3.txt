public void testIteratePointersWithMultiplePrefixes() {
    String xmlContent = "<a:doc xmlns:a=\"ns\">"
            + "<a:elem />"
            + "<b:elem xmlns:b=\"ns\" />"
            + "</a:doc>";

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder;
    Document doc = null;
    try {
        builder = factory.newDocumentBuilder();
        doc = builder.parse(new ByteArrayInputStream(xmlContent.getBytes()));
    } catch (Exception e) {
        fail("Exception occurred while parsing document: " + e.getMessage());
    }

    JXPathContext context = JXPathContext.newContext(doc);
    int count = 0;
    for (NodePointer pointer : (Iterable<NodePointer>) context.iteratePointers("//ns:elem")) {
        count++;
    }
    assertEquals("Both elements should be counted once each.", 2, count);
}