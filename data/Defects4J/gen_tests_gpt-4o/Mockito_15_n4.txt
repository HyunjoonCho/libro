
import static org.mockito.Mockito.*;
import static org.junit.Assert.*;
import org.mockito.ArgumentCaptor;
import org.junit.Test;

import java.util.List;

public class VarargsCaptorTest {

    interface Service {
        void performOperation(String... params);
    }

    @Test
    public void testArgumentCaptorForVarargs() {
        // Set up the mock service
        Service mockService = mock(Service.class);

        // Call the method with varargs
        mockService.performOperation("param1", "param2", "param3");

        // Capture the arguments using ArgumentCaptor
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
        verify(mockService).performOperation(captor.capture());

        // Validate that all varargs were captured
        List<String> capturedArgs = captor.getAllValues();

        assertEquals(3, capturedArgs.size());
        assertEquals("param1", capturedArgs.get(0));
        assertEquals("param2", capturedArgs.get(1));
        assertEquals("param3", capturedArgs.get(2));
    }
}
