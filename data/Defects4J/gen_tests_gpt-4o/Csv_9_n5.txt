public void testCSVRecordToMapWithNoHeaders() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader((String[]) null);
    CSVParser parser = null;
    try {
        parser = CSVParser.parse("value1,value2", format);
        CSVRecord record = parser.getRecords().get(0);
        assertNull("Expected null map when no headers are present", record.toMap());
    } catch (IOException e) {
        fail("IOException was thrown: " + e.getMessage());
    } finally {
        if (parser != null) {
            try {
                parser.close();
            } catch (IOException e) {
                // Ignore error during close
            }
        }
    }
}