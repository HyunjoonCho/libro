public void testClosureCompilerStackOverflow() {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    String jsCode = "var a = function() {" +
                    "  function recursive() {" +
                    "    // Some complex recursive function that causes a stack overflow" +
                    "    recursive();" +
                    "  }" +
                    "  recursive();" +
                    "};";
    SourceFile input = SourceFile.fromCode("input.js", jsCode);
    SourceFile externs = SourceFile.fromCode("externs.js", "var window;");

    try {
        compiler.compile(externs, input, options);
        fail("Expected StackOverflowError not thrown");
    } catch (RuntimeException e) {
        assertTrue(e.getCause().getCause() instanceof StackOverflowError);
    }
}