public void testZipArchiveInputStreamCompressedSizeUnknown() throws Exception {
    byte[] zipData = createTestZipWithUnknownCompressedSize();
    ByteArrayInputStream bin = new ByteArrayInputStream(zipData);
    ZipArchiveInputStream zin = new ZipArchiveInputStream(bin);
    try {
        zin.getNextZipEntry();
        fail("Expected IOException due to unknown compressed size");
    } catch (IOException e) {
        assertTrue(e.getMessage().contains("compressed size is unknown"));
    } finally {
        zin.close();
    }
}

private byte[] createTestZipWithUnknownCompressedSize() throws IOException {
    // Create a zip entry with a specific method and unknown compressed size
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zos = new ZipArchiveOutputStream(baos);
    ZipArchiveEntry entry = new ZipArchiveEntry("testfile.txt");
    entry.setMethod(ZipMethod.IMPLODING.getCode());  // Example method causing the issue
    zos.putArchiveEntry(entry);
    zos.write("example content".getBytes());
    zos.closeArchiveEntry();
    zos.close();
    return baos.toByteArray();
}