public void testUtf8JsonGeneratorToggleQuoteFieldNames() throws IOException {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    JsonFactory factory = new JsonFactory();
    JsonGenerator generator = factory.createGenerator(outputStream, JsonEncoding.UTF8);
    
    // Initially enable quoting field names
    generator.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, true);
    generator.writeStartObject();
    generator.writeFieldName("name");
    generator.writeString("value");
    generator.writeEndObject();
    generator.flush();
    
    String outputWithQuotes = outputStream.toString("UTF-8");
    assertTrue(outputWithQuotes.contains("\"name\""));
    
    // Disable quoting field names
    outputStream.reset();
    generator.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, false);
    generator.writeStartObject();
    generator.writeFieldName("name");
    generator.writeString("value");
    generator.writeEndObject();
    generator.flush();
    
    String outputWithoutQuotes = outputStream.toString("UTF-8");
    assertFalse(outputWithoutQuotes.contains("\"name\""));
    
    generator.close();
}