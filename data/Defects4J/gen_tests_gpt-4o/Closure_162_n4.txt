script
goog.provide('foo.Foo');
goog.provide('foo.Foo.Bar');

goog.scope(function() {
  /**
   * @param {Foo.Bar} bar
   * @constructor
   */
  foo.Foo = function(bar) {
    this.bar = bar;
  };
  var Foo = foo.Foo;

  /** @type {Foo.Bar} */
  Foo.prototype.bar = null;

  /** @constructor */
  Foo.Bar = function() {};
});

// Test function to simulate a dummy execution or validation
function testTypeAliasInAnnotations() {
  try {
    var bar = new foo.Foo.Bar();
    var instance = new foo.Foo(bar);
    console.log(instance); // Expecting this setup to simulate the problematic compilation.
  } catch (e) {
    console.error('Test failed due to:', e);
  }
}

// Run the simulation test
testTypeAliasInAnnotations();
