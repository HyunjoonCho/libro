
import org.apache.commons.lang.StringEscapeUtils;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class StringEscapeUtilsTest {

    @Test
    public void testEscapeJavaScript() {
        String input = "<script>alert('aaa');</script>";
        String expectedSpringOutput = "<script>alert(\\'aaa\\');<\\/script>";
        String springOutput = org.springframework.web.util.JavaScriptUtils.javaScriptEscape(input);
        assertEquals("Spring JS Escape: ", expectedSpringOutput, springOutput);
        
        String expectedCommonsOutput = "<script>alert(\\'aaa\\');<\\/script>";
        // NOTE: As per the bug report, StringEscapeUtils does not escape '/' as expected, hence the failure here
        String commonsOutput = StringEscapeUtils.escapeJavaScript(input);
        assertEquals("Apache Common Lang JS Escape: ", expectedCommonsOutput, commonsOutput);
    }
}
