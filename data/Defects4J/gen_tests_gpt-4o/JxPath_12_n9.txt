
import org.apache.commons.jxpath.JXPathContext;
import org.apache.commons.jxpath.JXPathException;
import org.jdom2.Attribute;
import org.jdom2.Document;
import org.jdom2.Element;
import org.jdom2.Namespace;
import org.junit.Test;

import static org.junit.Assert.fail;

public class NamespaceTest {

    @Test
    public void testNamespaceHandling() {
        // Define namespaces
        Namespace nsA = Namespace.getNamespace("A", "http://example.org/A");
        Namespace nsB = Namespace.getNamespace("B", "http://example.org/B");

        // Create a sample XML document
        Element rootElement = new Element("ElementA", nsA);
        rootElement.setAttribute(new Attribute("myAttr", "Mytype", nsA));
        Element childElement = new Element("ElementB", nsB);
        childElement.setText("MY VALUE");
        rootElement.addContent(childElement);

        Document doc = new Document(rootElement);

        try {
            // Create a JXPathContext and register namespaces
            JXPathContext context = JXPathContext.newContext(doc);
            context.registerNamespace("A", "http://example.org/A");
            context.registerNamespace("B", "http://example.org/B");

            // Try to access the attribute with prefix A
            Object result = context.getValue("/A:ElementA/@A:myAttr");
            System.out.println("Attribute Value: " + result);

            // If no exception is thrown, test passes
        } catch (JXPathException e) {
            // Fail the test if an exception is encountered
            fail("Exception encountered: " + e.getMessage());
        }
    }
}
