public void testCSVFormatWithHeaderInCSVPrinter() throws IOException {
    StringWriter out = new StringWriter();
    CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(out);
    csvPrinter.printRecord(42);
    csvPrinter.close();

    String expectedOutput = "x" + System.lineSeparator() + "42" + System.lineSeparator();
    assertEquals(expectedOutput, out.toString());
}