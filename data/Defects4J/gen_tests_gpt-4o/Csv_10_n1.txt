
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;

import static org.junit.Assert.assertEquals;

public class CSVFormatTest {

    @Test
    public void testCSVFormatWithHeader() throws IOException {
        String filePath = "data.csv";
        
        // Write to CSV file with header
        CSVPrinter csvPrinter = CSVFormat.TDF
            .withHeader("x")
            .print(Files.newBufferedWriter(Paths.get(filePath)));
        csvPrinter.printRecord(42);
        csvPrinter.close();

        // Read the file to check its content
        try (BufferedReader reader = new BufferedReader(new FileReader(filePath))) {
            assertEquals("x", reader.readLine()); // Ensures the header is written
            assertEquals("42", reader.readLine()); // Ensures the record is written
        }
        
        // Clean up the file after the test
        Files.deleteIfExists(Paths.get(filePath));
    }
}
