
import com.fasterxml.jackson.core.Base64Variants;
import com.fasterxml.jackson.dataformat.xml.XmlFactory;
import com.fasterxml.jackson.dataformat.xml.ser.ToXmlGenerator;
import org.junit.jupiter.api.Test;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.InputStream;

import static org.junit.jupiter.api.Assertions.assertThrows;

public class ToXmlGeneratorTest {

    @Test
    public void testWriteBinaryWithInputStream() {
        XmlFactory xmlFactory = new XmlFactory();
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

        try (ToXmlGenerator toXmlGenerator = xmlFactory.createGenerator(outputStream)) {
            InputStream inputStream = new ByteArrayInputStream("testData".getBytes());

            // Attempt to use writeBinary with InputStream on ToXmlGenerator
            // Expect it to throw an UnsupportedOperationException
            assertThrows(UnsupportedOperationException.class, () -> {
                toXmlGenerator.writeBinary(Base64Variants.getDefaultVariant(), inputStream, -1);
            });
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
