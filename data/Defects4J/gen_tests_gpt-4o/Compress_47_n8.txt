public void testZipArchiveInputStreamWithUnknownCompressedSize() {
    try {
        byte[] zipData = {/* A zip file in bytes where the entry has unknown compressed size */};
        ByteArrayInputStream bais = new ByteArrayInputStream(zipData);
        ZipArchiveInputStream zis = new ZipArchiveInputStream(bais);
        ZipArchiveEntry entry = zis.getNextZipEntry();
        while (entry != null) {
            assertNotEquals(ArchiveEntry.SIZE_UNKNOWN, entry.getCompressedSize());
            entry = zis.getNextZipEntry();
        }
        fail("Expected an exception due to unknown compressed size");
    } catch (Exception e) {
        assertTrue(e.getMessage().contains("compressed size is unknown"));
    }
}