public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    CompilerOptions compilerOptions = new CompilerOptions();
    compilerOptions.setClosurePass(false);

    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    compilerOptions.setDependencyOptions(dependencyOptions);

    // Mock input that emulates goog.require/goog.provide structure
    SourceFile input1 = SourceFile.fromCode("input1.js", "goog.provide('my.namespace'); goog.require('other.namespace');");
    SourceFile input2 = SourceFile.fromCode("input2.js", "goog.provide('other.namespace');");
    
    List<SourceFile> externs = new ArrayList<>();
    List<SourceFile> inputs = Arrays.asList(input1, input2);
    
    Result result = compiler.compile(externs, inputs, compilerOptions);
    String output = compiler.toSource();
    
    assertEquals("goog.provide('other.namespace');\n"
               + "goog.provide('my.namespace');\n"
               + "goog.require('other.namespace');\n", output);
}