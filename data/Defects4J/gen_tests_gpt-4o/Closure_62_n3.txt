public void testCaretMissingInErrorOutput() throws IOException {
    String codeWithoutLineBreak = "alert(1;";
    String codeWithLineBreak = "alert(1;\n";

    String outputWithoutLineBreak = compileCode(codeWithoutLineBreak);
    String outputWithLineBreak = compileCode(codeWithLineBreak);

    assertFalse("Caret should not be present in output without line break", outputWithoutLineBreak.contains("^"));
    assertTrue("Caret should be present in output with line break", outputWithLineBreak.contains("^"));
}

private String compileCode(String code) throws IOException {
    File tempFile = File.createTempFile("test", ".js");
    Files.write(tempFile.toPath(), code.getBytes(StandardCharsets.UTF_8));
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", tempFile.getAbsolutePath());
    processBuilder.redirectErrorStream(true);
    Process process = processBuilder.start();
    String output;
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
        output = reader.lines().collect(Collectors.joining(System.lineSeparator()));
    }
    tempFile.delete();
    return output;
}