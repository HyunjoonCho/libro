
import org.junit.Test;
import org.jaxen.dom.DOMXPath;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import static org.junit.Assert.assertNotNull;

public class NamespacedAttributeWildcardTest {

    @Test
    public void testNamespacedAttributeSelectionWithWildcard() throws Exception {
        // Prepare XML document
        String xmlContent = "<xml xmlns:x='foo' x:pop='a'/>";
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new java.io.ByteArrayInputStream(xmlContent.getBytes()));

        // Using XPath to select the attribute with wildcard
        DOMXPath xpath = new DOMXPath("xml/@*");

        // Attempt to select the attribute
        Object result = xpath.selectSingleNode(document);

        // Verify that the namespaced attribute is found
        assertNotNull("Namespaced attribute should be selected using wildcard", result);
    }
}
