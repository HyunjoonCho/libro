
import org.jsoup.nodes.Document;
import org.jsoup.Jsoup;
import org.junit.Test;

public class ConcurrentModificationExceptionTest {

    @Test(expected = ConcurrentModificationException.class)
    public void testRemoveIgnoreCaseConcurrentModification() {
        String html = "<html><head><title>Test</title></head>"
                + "<body>"
                + "<div id='1' attr1='value1' ATTR2='value2'>Content</div>"
                + "</body></html>";

        Document document = Jsoup.parse(html);
        document.select("div").first().removeAttr("attr1").removeAttr("attr2");
    }
}
