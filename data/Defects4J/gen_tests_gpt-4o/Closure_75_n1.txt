
import static org.junit.Assert.assertEquals;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import org.junit.Before;
import org.junit.Test;

public class SwfObjectTest {

    private ScriptEngine engine;

    @Before
    public void setUp() {
        ScriptEngineManager manager = new ScriptEngineManager();
        engine = manager.getEngineByName("nashorn"); // or "rhino" depending on your setup
    }

    @Test
    public void testUrlEncodeIfNecessary() throws ScriptException {
        String functionCode = 
            "function urlEncodeIfNecessary(s) {\n" +
            "    var regex = /[\\\"<>.;]/;\n" +
            "    var hasBadChars = regex.exec(s) != null;\n" +
            "    return hasBadChars && typeof encodeURIComponent != 'undefined' ? encodeURIComponent(s) : s;\n" +
            "};\n" +
            "urlEncodeIfNecessary('<test>');"; 

        // Run the script and assert
        String expectedOutput = "%3Ctest%3E"; // The expected URL-encoded string
        assertEquals(expectedOutput, engine.eval(functionCode));
    }
}
