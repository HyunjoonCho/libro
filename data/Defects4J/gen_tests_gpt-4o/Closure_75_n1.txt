public void testClosureCompiledSwfObjectError() {
    String encoded, input;
    input = "\"<>.;";
    encoded = urlEncodeIfNecessary(input);
    assertEquals("%22%3C%3E.%3B", encoded);
    
    input = "test";
    encoded = urlEncodeIfNecessary(input);
    assertEquals("test", encoded);
}

private String urlEncodeIfNecessary(String s) {
    String regexString = "[\\\"<>.;]";
    boolean hasBadChars = s.matches(".*" + regexString + ".*");
    return hasBadChars && (getEncodeURIComponent() != null) ? getEncodeURIComponent().apply(s) : s;
}

private java.util.function.Function<String, String> getEncodeURIComponent() {
    try {
        return java.net.URLEncoder::encode;
    } catch (Exception e) {
        return null;
    }
}