
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

public class JsoupDeepNestingTest {

    @Test
    public void testDeeplyNestedElementsPerformance() {
        // Prepare a deeply nested HTML string
        StringBuilder html = new StringBuilder("<div>");
        int depth = 10000; // Adjust depth as necessary to reproduce the performance issue
        for (int i = 0; i < depth; i++) {
            html.append("<div>");
        }
        for (int i = 0; i < depth; i++) {
            html.append("</div>");
        }
        html.append("</div>");

        // Parse the deeply nested HTML
        long startTime = System.currentTimeMillis();
        Document document = Jsoup.parse(html.toString());
        long endTime = System.currentTimeMillis();

        System.out.println("Parsing deeply nested elements took " + (endTime - startTime) + " milliseconds.");
        
        // Optionally assert or log that the process should take a reasonable time
        // For demonstration, we might just print the time taken, 
        // but in a real test, you might set a threshold for expected max time.
        // For example: assertTrue("Parsing took too long!", (endTime - startTime) < SOME_THRESHOLD);
    }
}
