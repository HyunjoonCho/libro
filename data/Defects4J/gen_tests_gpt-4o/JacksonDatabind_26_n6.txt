
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.ObjectReader;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import static org.junit.Assert.assertNotNull;

public class ObjectReaderSerializationTest {

    @Test
    public void testObjectReaderSerialization() throws IOException, ClassNotFoundException {
        ObjectMapper objectMapper = new ObjectMapper();
        ObjectReader reader = objectMapper.reader();

        // Serialize the ObjectReader
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        ObjectOutputStream objectOutputStream = new ObjectOutputStream(byteArrayOutputStream);
        objectOutputStream.writeObject(reader);
        objectOutputStream.close();

        // Deserialize the ObjectReader
        ByteArrayInputStream byteArrayInputStream = 
            new ByteArrayInputStream(byteArrayOutputStream.toByteArray());
        ObjectInputStream objectInputStream = new ObjectInputStream(byteArrayInputStream);
        ObjectReader deserializedReader = (ObjectReader) objectInputStream.readObject();

        // Assert that deserialization was successful
        assertNotNull("Deserialized ObjectReader should not be null", deserializedReader);
    }
}
