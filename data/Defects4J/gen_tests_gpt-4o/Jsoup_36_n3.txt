public void testRobustCharsetDetection() {
    String html = "<html lang=\"en-US\"><head><meta charset=\"UTF-8\"><meta http-equiv=\"Content-Type\" content=\"text/html; \"></head><body></body></html>";
    Document doc = Jsoup.parse(html);
    assertNotNull(doc);
    assertEquals("UTF-8", doc.charset().name());
}