
import org.jfree.data.xy.XYDataItem;
import org.jfree.data.xy.XYSeries;
import org.junit.Assert;
import org.junit.Test;

public class XYSeriesTest {

    @Test
    public void testAddOrUpdateWithDuplicatesAllowed() {
        // Create an XYSeries instance with duplicate x-values allowed.
        XYSeries series = new XYSeries("Test Series", true);

        // Add a data item.
        series.addOrUpdate(1.0, 2.0);
        Assert.assertEquals(1, series.getItemCount());
        Assert.assertEquals(new XYDataItem(1.0, 2.0), series.getDataItem(0));

        // Add another item with the same x-value.
        series.addOrUpdate(1.0, 3.0);
        Assert.assertEquals(2, series.getItemCount());
        Assert.assertEquals(new XYDataItem(1.0, 2.0), series.getDataItem(0));
        Assert.assertEquals(new XYDataItem(1.0, 3.0), series.getDataItem(1));

        // Ensure the additional item hasn't overwritten the existing item.
        Assert.assertNotEquals(series.getDataItem(0).getY(), series.getDataItem(1).getY());
    }
}
