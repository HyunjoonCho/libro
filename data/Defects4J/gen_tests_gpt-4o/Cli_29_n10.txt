
import org.apache.commons.cli.*;

import static org.junit.Assert.assertEquals;
import org.junit.Test;

public class CommonsCLITest {

    @Test
    public void testQuotesStripping() throws ParseException {
        // Create an Options object
        Options options = new Options();
        Option balloo = new Option("balloo", true, "test argument");
        balloo.setArgName("balloo");
        options.addOption(balloo);

        // Command line to parse
        String[] args = {"--balloo", "\"this is a \\\"test\\\"\""};
        
        // Use the DefaultParser to process the command line arguments
        CommandLineParser parser = new DefaultParser();
        CommandLine cmd = parser.parse(options, args);

        // Retrieve the value for the 'balloo' option
        String value = cmd.getOptionValue("balloo");

        // Test to check that the value is as expected
        assertEquals("this is a \"test\"", value);
    }
}
