public void testLongDirectoryNamesInTarArchive() throws IOException {
    File tempDir = Files.createTempDirectory("testLongDir").toFile();
    File longDir = new File(tempDir, "a".repeat(110));
    longDir.mkdirs();
    
    try (ByteArrayOutputStream bos = new ByteArrayOutputStream();
         TarArchiveOutputStream tos = new TarArchiveOutputStream(bos)) {
         
        File parentDir = new File(tempDir, "parentDir");
        File testDir = new File(parentDir, longDir.getName());
        testDir.mkdirs();
        
        TarArchiveEntry entry = new TarArchiveEntry(testDir, "./PaxHeaders.X/" + testDir.getName());
        
        tos.putArchiveEntry(entry);
        tos.closeArchiveEntry();
    } catch (IOException e) {
        fail("IOException should not have occurred: " + e.getMessage());
    } finally {
        longDir.delete();
        tempDir.delete();
    }
}