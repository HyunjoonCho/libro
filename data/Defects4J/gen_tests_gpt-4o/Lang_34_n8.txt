public void testThreadLocalMemoryLeak() throws Exception {
    // Trigger loading of ToStringStyle class
    String testString = new org.apache.commons.lang3.builder.ToStringBuilder(new Object()).toString();

    // Force garbage collection and check if there's a memory leak
    System.gc();
    ReferenceQueue<Object> referenceQueue = new ReferenceQueue<>();
    PhantomReference<Object> ref = new PhantomReference<>(testString, referenceQueue);

    // Clear the strong reference
    testString = null;

    System.gc();
    
    // Wait for a while to check if the object becomes reachable to the queue
    Thread.sleep(1000);

    assertNotNull(ref.isEnqueued());
}