public void testExceptionWhenEmittingCodeContainingGetters() {
    String sourceCode = "var obj = { get name() { return 'value'; } };";
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    JSSourceFile extern = JSSourceFile.fromCode("externs.js", "");
    JSSourceFile input = JSSourceFile.fromCode("input.js", sourceCode);

    try {
        compiler.compile(extern, input, options);
        fail("Expected RuntimeException due to getter code emission");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("Expected function but was call Reference node"));
    }
}