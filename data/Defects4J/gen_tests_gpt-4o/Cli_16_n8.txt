public void testGroupConstraintsWithNestedGroups() {
    OptionGroup groupA = new OptionGroup();
    OptionGroup groupB = new OptionGroup();
    
    Option option1 = Option.builder("a").longOpt("option1").build();
    Option option2 = Option.builder("b").longOpt("option2").build();
    
    groupA.addOption(option1);
    groupB.addOptionGroup(groupA);
    groupB.setMinimum(1);
    
    CommandLineParser parser = new DefaultParser();
    Options options = new Options();
    options.addOptionGroup(groupB);
    
    String[] args = { "-a" };
    
    try {
        CommandLine cmd = parser.parse(options, args);
        assertTrue(cmd.hasOption("a"));
        assertTrue(cmd.hasOptionGroup(groupA));
        // Test fails if groupB does not acknowledge presence of groupA
        assertTrue(cmd.hasOptionGroup(groupB));
    } catch (ParseException e) {
        fail("Parsing should not fail");
    }
}