
import static org.mockito.Mockito.*;

import org.junit.Test;
import static org.junit.Assert.*;

// Abstract class with a real implementation calling an abstract method 
abstract class AbstractClass {
    public String call() {
        return getValue() + " World";
    }

    abstract String getValue();
}

public class AbstractClassSpyTest {

    @Test
    public void testSpyOnAbstractClass() {
        // Spy on an instance of an anonymous subclass of the abstract class
        AbstractClass instance = spy(new AbstractClass() {
            @Override
            String getValue() {
                return "Hello";
            }
        });
        
        // Stubbing the abstract method
        doReturn("Hi").when(instance).getValue();
        
        // Call the method that calls the abstract method internally
        String result = instance.call();
        
        // Assert the expected outcome
        assertEquals("Hi World", result);
    }
}
