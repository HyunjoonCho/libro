
import static org.junit.Assert.*;
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVRecord;
import org.junit.Test;
import java.io.StringReader;
import java.util.List;

public class CSVRecordTest {

    @Test
    public void testToMapThrowsNullPointerExceptionWithoutHeaders() {
        String csvData = "a,b,c\n1,2,3";
        
        try {
            // Create CSVFormat with no header
            CSVFormat format = CSVFormat.DEFAULT.withHeader((String[]) null);
            List<CSVRecord> records = format.parse(new StringReader(csvData)).getRecords();
            
            // Access the first record
            CSVRecord record = records.get(0);

            // Attempting to convert to a map should return null according to documentation
            Map<String, String> resultMap = record.toMap();

            assertNull("toMap() should return null when there are no headers", resultMap);

        } catch (NullPointerException e) {
            fail("Expected a null map, but got a NullPointerException instead");
        } catch (Exception e) {
            fail("Unexpected exception: " + e.getMessage());
        }
    }
}
