public void testMatchCountInFilteringParserDelegate() throws IOException {
    String json = "{\"field1\":\"value1\",\"field2\":\"value2\"}";

    JsonNode rootNode = new ObjectMapper().readTree(json);
    TokenFilter filter = new TokenFilter() {
        @Override
        public boolean includeProperty(String name) {
            return "field1".equals(name);
        }
    };

    FilteringParserDelegate parser = new FilteringParserDelegate(
            rootNode.traverse(), filter, false, false);
    int matchCount = 0;

    while (parser.nextToken() != JsonToken.END_OBJECT) {
        if (parser.getCurrentToken() == JsonToken.FIELD_NAME) {
            matchCount++;
        }
    }

    assertEquals(1, matchCount);
}