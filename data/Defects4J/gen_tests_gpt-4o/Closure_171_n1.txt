public void testObjectLiteralAssignmentToPrototypeInIIFE() {
    Object foo = new Object() {
        public void alert() {
            System.out.println("hello world");
        }
    };
    Object fooInstance = new Object() {
        {
            final Object self = this;
            ((Runnable) () -> {
                try {
                    Class<?> clazz = self.getClass().getSuperclass();
                    clazz.getDeclaredField("alert").set(this, foo);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }).run();
        }
    };

    try {
        fooInstance.getClass().getSuperclass().getDeclaredMethod("alert").invoke(fooInstance);
    } catch (Exception e) {
        fail("Expected method not found or callable: " + e.getMessage());
    }
}