script
/**
 * Test case for the bug where compiler issues a warning
 * on a function parameter with an expected structure.
 */
public class CallbackFunctionTest {

    /**
     * A helper function that expects an object with a 'func' property of function type.
     * @param {{func: function()}} obj
     */
    public void test1(Map<String, Object> obj) {
        // Implementation not necessary for the test
    }

    @Test
    public void testStrangeParameterWarning() {
        // Creating a structure with a 'func' property of function type
        Map<String, Object> fnStruc1 = new HashMap<>();
        fnStruc1.put("func", new Runnable() {
            public void run() {
                // Do nothing
            }
        });

        // Compiling this should not produce a warning as per the bug report expectation
        test1(fnStruc1);

        // The following block should pass compilation without a warning as well
        Map<String, Object> fnStruc2 = new HashMap<String, Object>() {{
            put("func", new Runnable() {
                public void run() {
                    // Do nothing
                }
            });
        }};
        test1(fnStruc2);
    }
}
