public void testLargeNumberOfWeights() {
    int numberOfPoints = 41200;
    double[] x = new double[numberOfPoints];
    double[] y = new double[numberOfPoints];
    double[] weights = new double[numberOfPoints];

    for (int i = 0; i < numberOfPoints; i++) {
        x[i] = i;
        y[i] = i * i;
        weights[i] = 1.0;
    }

    PolynomialCurveFitter fitter = PolynomialCurveFitter.create(2);

    try {
        double[] coefficients = fitter.fit(new WeightedObservedPoint[numberOfPoints]);
        fail("Expecting an OutOfMemoryError due to large number of weights.");
    } catch (OutOfMemoryError e) {
        // Expected behavior
    }
}