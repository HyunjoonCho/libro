public void testSuperIsNotReplaced() {
    String jsCode = ""
        + "function Test() {"
        + "  this.method = function($super) {"
        + "    return $super + 'test';"
        + "  };"
        + "}"
        + "var t = new Test();"
        + "alert(t.method('A'));"; // Expect alert to show 'Atest'

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    
    Result result = compiler.compile(
        SourceFile.fromCode("externs", ""),
        SourceFile.fromCode("testcode", jsCode),
        options);

    String compiledCode = compiler.toSource();
    assertTrue("Compiled code should contain '$super'", compiledCode.contains("$super"));
}