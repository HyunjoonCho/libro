
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVParser;
import org.apache.commons.csv.CSVRecord;
import org.junit.Test;

import java.io.IOException;
import java.io.StringReader;

public class CSVRecordTest {

    @Test(expected = ArrayIndexOutOfBoundsException.class)
    public void testInvalidHeaderTooLong() throws IOException {
        // Prepare a CSV input string with two fields
        String csvData = "a,b";

        // Create a CSVParser with a header that has more entries than the data
        try (CSVParser parser = new CSVParser(new StringReader(csvData), CSVFormat.newBuilder().setHeader("A", "B", "C").build())) {
            // Parse the first (and only) record
            CSVRecord record = parser.iterator().next();
            
            // Attempt to access a value corresponding to a non-existent header column "C"
            record.get("C");
        }
    }
}
