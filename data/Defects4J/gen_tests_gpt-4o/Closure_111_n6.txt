public void testGoogIsArrayCompilerHint() {
    String jsCode = ""
        + "/**\n"
        + " * @param {*} object\n"
        + " * @return {*}\n"
        + " */\n"
        + "var test = function(object) {\n"
        + "  if (goog.isArray(object)) {\n"
        + "    /** @type {Array} */ var x = object;\n"
        + "    return x;\n"
        + "  }\n"
        + "};\n";

    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

    Result result = compiler.compile(
        CommandLineRunner.getDefaultExterns(),
        SourceFile.fromCode("test.js", jsCode),
        options
    );

    // Check for errors in the compilation result
    assertFalse("Expected compilation error", result.success);
    assertEquals("Expected a specific type mismatch error",
        "initializing variable\n"
        + "found   : *\n"
        + "required: (Array|null)\n"
        + " /** @type {Array} */ var x = object;",
        result.errors[0].description);
}