
import org.apache.commons.cli.HelpFormatter;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.Options;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.PrintWriter;

import static org.junit.Assert.assertTrue;

public class HelpFormatterTest {

    @Test
    public void testSetArgNameEffect() {
        // Define an option with an argument
        Option option = Option.builder("f")
                .hasArg()
                .desc("Specifies the file")
                .build();

        Options options = new Options();
        options.addOption(option);
        
        // Create a HelpFormatter and set a custom argument name
        HelpFormatter formatter = new HelpFormatter();
        formatter.setArgName("customName");
        
        // Capture the help output
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        PrintWriter printWriter = new PrintWriter(outputStream);
        formatter.printHelp(printWriter, 80, "commandLineTool", null, options, 1, 3, null);
        printWriter.flush();
        
        String helpOutput = outputStream.toString();
        
        // Check if the custom argument name is used in the help output
        assertTrue("Help output should contain the custom argument name", helpOutput.contains("customName"));
    }
}
