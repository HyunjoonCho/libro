
import java.io.ByteArrayInputStream;
import java.io.IOException;

import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
import org.junit.Test;
import static org.junit.Assert.*;

public class TarChecksumTest {
    
    @Test
    public void testRightAlignedChecksum() throws IOException {
        // Sample header block with right-aligned checksum
        byte[] header = new byte[512];
        System.arraycopy("testfile".getBytes(), 0, header, 0, "testfile".length());
        String checksumWithZeroPadding = "0001234"; // checksum right-aligned with zero-padding
        System.arraycopy(checksumWithZeroPadding.getBytes(), 0, header, 148, checksumWithZeroPadding.length());

        // Ensure header is validated as a TAR entry
        TarArchiveInputStream tarInput = new TarArchiveInputStream(new ByteArrayInputStream(header));
        TarArchiveEntry entry = (TarArchiveEntry) tarInput.getNextTarEntry();
        assertNotNull("Tar entry should not be null", entry);
        tarInput.close();
    }
}
