public void testInconsistentTextBufferBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    
    char[] firstCallResult = buffer.getTextBuffer();
    String contentsAsStringResult = buffer.contentsAsString();
    char[] secondCallResult = buffer.getTextBuffer();
    
    assertNotNull("First call to getTextBuffer should not return null", firstCallResult);
    assertEquals("Contents as string should be an empty string", "", contentsAsStringResult);
    assertNotNull("Second call to getTextBuffer should not return null", secondCallResult);
    assertArrayEquals("Both calls to getTextBuffer should return empty array", new char[0], firstCallResult);
    assertArrayEquals("Both calls to getTextBuffer should return empty array", new char[0], secondCallResult);
}