
import com.fasterxml.jackson.core.util.BufferRecycler;
import com.fasterxml.jackson.core.util.TextBuffer;
import org.junit.Test;
import static org.junit.Assert.*;

public class TextBufferTest {

    @Test
    public void testInconsistentTextBufferBehavior() {
        TextBuffer buffer = new TextBuffer(new BufferRecycler());

        // Reset buffer with empty
        buffer.resetWithEmpty();

        // First call to getTextBuffer, expected behavior not clearly defined in bug report
        char[] firstBuffer = buffer.getTextBuffer();
        assertNull("Expected initial call to getTextBuffer to return null", firstBuffer);

        // Call to contentsAsString, should return an empty string
        String contents = buffer.contentsAsString();
        assertEquals("Expected contentsAsString to return an empty string", "", contents);

        // Second call to getTextBuffer, expect an empty array based on report
        char[] secondBuffer = buffer.getTextBuffer();
        assertNotNull("Expected subsequent call to getTextBuffer to not return null", secondBuffer);
        assertEquals("Expected subsequent call to getTextBuffer to return empty array", 0, secondBuffer.length);
    }
}
