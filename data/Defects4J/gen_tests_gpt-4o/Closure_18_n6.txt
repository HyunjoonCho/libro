public void testDependencySortingWithoutClosurePass() {
    Compiler compiler = new Compiler();
    
    CompilerOptions compilerOptions = new CompilerOptions();
    compilerOptions.setClosurePass(false);
    
    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    compilerOptions.setDependencyOptions(dependencyOptions);
    
    SourceFile input1 = SourceFile.fromCode("input1.js", "goog.provide('example.A');");
    SourceFile input2 = SourceFile.fromCode("input2.js", "goog.require('example.A'); var x = 1;");
    
    compiler.compile(ImmutableList.of(), ImmutableList.of(input1, input2), compilerOptions);
    
    String output = compiler.toSource();
    assertTrue(output.indexOf("goog.provide('example.A');") < output.indexOf("goog.require('example.A');"));
}