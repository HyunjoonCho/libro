
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JSSourceFile;
import com.google.javascript.jscomp.Result;
import org.junit.Test;

import static org.junit.Assert.*;

public class WritingModeTest {

    @Test
    public void testCSS3WritingModeRecognition() {
        String jsCode = "var element = document.createElement('div'); " +
                        "element.style.writingMode = 'tb-rl';"; // Use CSS3 writingMode property

        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

        Result result = compiler.compile(
                JSSourceFile.fromCode("externs.js", ""), // External definitions, empty here
                JSSourceFile.fromCode("input.js", jsCode),
                options
        );

        // Check if there were no compilation errors
        assertTrue(result.success);

        // Check the compiled code does not alter or strip 'writingMode'
        String compiledCode = compiler.toSource();
        assertTrue(compiledCode.contains("style.writingMode=\"tb-rl\""));
    }
}
