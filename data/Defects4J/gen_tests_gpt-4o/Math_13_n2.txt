public void testLargeNumberOfWeights() {
    int numberOfPoints = 41200;
    double[] observations = new double[numberOfPoints];
    double[] initialGuess = new double[3]; // Assume a polynomial of degree 2 for simplicity
    double[] weights = new double[numberOfPoints];
    
    // Initialize observations and weights
    for (int i = 0; i < numberOfPoints; i++) {
        observations[i] = Math.random();
        weights[i] = 1.0; // Equal weights for simplicity
    }
    
    // Let's assume a simple polynomial fitter is available
    PolynomialCurveFitter fitter = PolynomialCurveFitter.create(2);
    
    try {
        WeightedObservedPoints weightedObservedPoints = new WeightedObservedPoints();
        for (int i = 0; i < numberOfPoints; i++) {
            weightedObservedPoints.add(weights[i], i, observations[i]);
        }
        
        // Attempt to fit the curve
        fitter.fit(weightedObservedPoints.toList());
        fail("Expected an OutOfMemoryError due to excessive weight handling");
    } catch (OutOfMemoryError e) {
        // Expected due to excessive memory usage
    }
}