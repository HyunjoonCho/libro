
import org.jsoup.Connection;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.Connection.Method;
import org.junit.Test;

import static org.junit.Assert.fail;

public class JsoupBugTest {

    @Test
    public void testArrayIndexOutOfBoundsException() {
        try {
            String url = "https://www.colisprive.com/moncolis/pages/detailColis.aspx?numColis=P4000000037777930";
            Connection connection = Jsoup.connect(url)
                    .referrer(url)
                    .userAgent("Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36")
                    .ignoreContentType(true)
                    .timeout(20000);

            connection.method(Method.GET);
            Document document = connection.execute().parse();
            // If parsing succeeds, print the document's title (this is just to confirm successful parsing).
            System.out.println(document.title());

        } catch (ArrayIndexOutOfBoundsException e) {
            // Specific check for the described issue.
            fail("ArrayIndexOutOfBoundsException occurred: " + e.getMessage());
        } catch (Exception e) {
            // Catch other exceptions for debugging purposes if necessary.
            e.printStackTrace();
            fail("An error occurred: " + e.getMessage());
        }
    }
}
