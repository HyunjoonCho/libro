
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class HtmlParsingTest {

    @Test
    public void testSingleQuoteInJavaScript() {
        String inputHtml = "<HTML>\n" +
                           "<body>\n" +
                           " <div>\n" +
                           "  <script language=\"JavaScript1.1\">\n" +
                           "    document.write('</scr' + 'ipt>');\n" +
                           "  </script>\n" +
                           " </div>\n" +
                           "</body>\n" +
                           "</HTML>";

        Document doc = Jsoup.parse(inputHtml);
        String outputHtml = doc.toString();

        // Expected to retain the document.write('</scr' + 'ipt>'); as in the original input HTML
        String expectedHtml = "<html>\n" +
                              " <head></head>\n" +
                              " <body>\n" +
                              "  <div> \n" +
                              "   <script language=\"JavaScript1.1\"> \n" +
                              "    document.write('</scr' + 'ipt>');\n" +
                              "   </script> \n" +
                              "  </div>  \n" +
                              " </body>\n" +
                              "</html>";

        assertEquals(expectedHtml, outputHtml.replace("\r", ""));
    }
}
