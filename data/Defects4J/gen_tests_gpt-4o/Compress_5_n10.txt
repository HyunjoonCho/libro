public void testTruncatedZipArchive() throws IOException {
    byte[] truncatedZip = new byte[]{80, 75, 3, 4, 20, 0, 0, 0, 8, 0, 108, 111, 111, 84, 84, 98, 100, 167, 103, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0};
    ByteArrayInputStream bais = new ByteArrayInputStream(truncatedZip);
    ZipArchiveInputStream zis = new ZipArchiveInputStream(bais);
    try {
        int read = zis.read();
        fail("Expected IOException due to truncated ZIP file but read returned: " + read);
    } catch (IOException e) {
        assertEquals("Truncated ZIP file", e.getMessage());
    }
}