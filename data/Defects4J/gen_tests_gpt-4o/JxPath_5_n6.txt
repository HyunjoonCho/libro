
import org.apache.commons.jxpath.JXPathContext;
import org.apache.commons.jxpath.JXPathException;
import org.junit.Test;

import static org.junit.Assert.*;

public class JXPathBugTest {

    @Test(expected = JXPathException.class)
    public void testUnionOfVariableAndNode() {
        // Create a JXPath context with a root object
        Object root = new Object(); // Replace with the appropriate root object if needed
        JXPathContext context = JXPathContext.newContext(root);

        // Define a variable in the context
        context.getVariables().declareVariable("var", "someValue");

        // Execute the problematic XPath expression
        context.selectNodes("$var | /MAIN/A");
    }
}
