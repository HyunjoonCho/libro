public void testCannotComparePointersFromDifferentTrees() {
    JXPathContext context = JXPathContext.newContext(new Main());
    context.getVariables().declareVariable("var", "/dummy/path");

    try {
        context.selectNodes("$var | /MAIN/A");
        fail("Expected JXPathException due to pointers from different trees");
    } catch (JXPathException e) {
        assertTrue(e.getMessage().contains("Cannot compare pointers that do not belong to the same tree"));
    }
}

public static class Main {
    private final List<A> a = new ArrayList<>();

    public List<A> getA() {
        return a;
    }
}

public static class A {
    // Dummy class for structure
}