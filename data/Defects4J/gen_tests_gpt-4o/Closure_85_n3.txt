public void testSwitchStatementCompilation() {
    String code = "function a(b) {\n" +
                  " switch (b.v) {\n" +
                  " case 'SWITCH':\n" +
                  " if (b.i >= 0) {\n" +
                  " return b.o;\n" +
                  " } else {\n" +
                  " return undefined;\n" +
                  " }\n" +
                  " break;\n" +
                  " }\n" +
                  "}";
    
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    JSSourceFile extern = JSSourceFile.fromCode("externs.js", "");
    JSSourceFile input = JSSourceFile.fromCode("input.js", code);
    
    try {
        compiler.compile(extern, input, options);
        fail("Expected RuntimeException due to internal compiler error.");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}