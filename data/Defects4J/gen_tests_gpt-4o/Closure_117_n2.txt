public void testWrongTypeNameReported() {
    try {
        CompilerTestCase test = new CompilerTestCase() {
            @Override
            protected void setUp() throws Exception {
                super.setUp();
            }
        };
        test.test(new String[] {
            "/**",
            " * @constructor",
            " */",
            "function C2() {}",
            "/**",
            " * @constructor",
            " */",
            "function C3(c2) {",
            " /**",
            "  * @type {C2}",
            "  * @private",
            "  */",
            " this.c2_ = c2;",
            " use(this.c2_.prop);",
            "}"
        });
    } catch (Exception e) {
        String expectedMessage = "Property prop never defined on C2";
        assertTrue(e.getMessage().contains(expectedMessage));
    }
}