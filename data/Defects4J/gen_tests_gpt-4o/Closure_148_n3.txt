
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;
import static org.junit.Assert.*;

public class ClosureCompilerWritingModeTest {

    @Test
    public void testWritingModeRecognition() {
        // Initialize the Closure Compiler
        Compiler compiler = new Compiler();
        
        // Set compiler options
        CompilerOptions options = new CompilerOptions();
        options.setCompilationLevel(CompilerOptions.CompilationLevel.ADVANCED_OPTIMIZATIONS);
        
        // Input JavaScript code to simulate an environment where writingMode is used
        String jsCode = "var element = document.createElement('div');"
                      + "element.style.writingMode = 'vertical-rl';";
        
        // Compile the input code
        SourceFile input = SourceFile.fromCode("testInput.js", jsCode);
        Result result = compiler.compile(SourceFile.externs(new ArrayList<>()), input, options);
        
        // Check that compilation was successful
        assertTrue("Compilation should succeed without errors", result.success);
        
        // Check that the compiler didn't obfuscate writingMode
        String compiledCode = compiler.toSource();
        assertTrue("Compiled code should still contain 'writingMode'", compiledCode.contains("writingMode"));
    }
}
