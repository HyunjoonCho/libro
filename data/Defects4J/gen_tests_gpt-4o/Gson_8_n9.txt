
import com.google.gson.Gson;
import org.junit.Test;

class FeedItem {
    private String feedItemChannel;
    private EstimatedData estimatedData;
    private Object hashedObjects;
    private boolean isDeleted;
    private int isDeletingEventually;
    private Object mutex;
    private Object[] operationSetQueue;
    private SaveEvent saveEvent;
    private State state;
    private TaskQueue taskQueue;

    // Nested classes representing the structure inside the JSON
    static class EstimatedData {
        private String feedTopic;
        private int feedComments;
        private String createdBy;
        private String feedQuestion;
        private String feedDesc;
    }

    static class SaveEvent {
        private Object[] callbacks;
    }

    static class State {
        private String className;
        private long createdAt;
        private boolean isComplete;
        private String objectId;
        private ServerData serverData;
        private long updatedAt;
    }

    static class ServerData {
        private String feedTopic;
        private String createdBy;
        private int feedComments;
        private String feedQuestion;
        private String feedDesc;
    }

    static class TaskQueue {
        private Lock lock;
    }

    static class Lock {
        private Sync sync;
    }

    static class Sync {
        private int state;
    }
}

public class GsonErrorTest {

    @Test
    public void testGsonDeserializationError() {
        String jsonString = "{"
                + "\"feedItemChannel\":\"mdldsrgXN1\","
                + "\"estimatedData\":{"
                + "\"feedTopic\":\"Testing\","
                + "\"feedComments\":2,"
                + "\"createdBy\":\"KXTQtpfBSW\","
                + "\"feedQuestion\":\"Test Question \","
                + "\"feedDesc\":\"Test \""
                + "},"
                + "\"hashedObjects\":{},"
                + "\"isDeleted\":false,"
                + "\"isDeletingEventually\":0,"
                + "\"mutex\":{},"
                + "\"operationSetQueue\":[{}],"
                + "\"saveEvent\":{"
                + "\"callbacks\":[]"
                + "},"
                + "\"state\":{"
                + "\"className\":\"FeedItem\","
                + "\"createdAt\":1458798818385,"
                + "\"isComplete\":true,"
                + "\"objectId\":\"mdldsrgXN1\","
                + "\"serverData\":{"
                + "\"feedTopic\":\"TestTopic\","
                + "\"createdBy\":\"KXTQtpfBSW\","
                + "\"feedComments\":2,"
                + "\"feedQuestion\":\"Test Question \","
                + "\"feedDesc\":\"Test \""
                + "},"
                + "\"updatedAt\":1458803553636"
                + "},"
                + "\"taskQueue\":{"
                + "\"lock\":{"
                + "\"sync\":{"
                + "\"state\":0"
                + "}"
                + "}"
                + "}"
                + "}";

        Gson gson = new Gson();
        try {
            FeedItem item = gson.fromJson(jsonString, FeedItem.class);
            // Output some of the parsed data to confirm the test ran, although
            // the main point is to observe any exceptions that are thrown
            System.out.println(item);
        } catch (Exception e) {
            e.printStackTrace();
            // The error would typically be caught here
        }
    }
}
