public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    Options options = new Options();
    options.addOption("d", "description", true, "This option has a very long description that should cause the help formatter to wrap onto several lines to demonstrate the wrapping behavior issue reported.");

    StringWriter out = new StringWriter();
    PrintWriter pw = new PrintWriter(out);
    formatter.printHelp(pw, 40, "app", "header", options, 2, 2, "footer");
    pw.flush();

    String output = out.toString();
    String[] lines = output.split(System.lineSeparator());
    
    for (String line : lines) {
        assertTrue("Line exceeded wrapping width: " + line, line.length() <= 40);
    }
}