
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVParser;
import org.apache.commons.csv.QuoteMode;
import org.junit.Test;
import java.io.StringReader;

public class CSVFormatTest {

    @Test(expected = IllegalArgumentException.class)
    public void testCSVFormatRejectsDuplicateHeaders() throws Exception {
        // Setup with duplicate headers "name"
        String[] headers = {"id", "name", "name", "age"};
        CSVFormat csvFormat = CSVFormat.DEFAULT
            .withHeader(headers)
            .withQuoteMode(QuoteMode.NON_NUMERIC);
        
        // Mock CSV data
        String csvData = "1,John Doe,John Doe,30";

        // This should throw an IllegalArgumentException
        CSVParser parser = csvFormat.parse(new StringReader(csvData));
    }
}
