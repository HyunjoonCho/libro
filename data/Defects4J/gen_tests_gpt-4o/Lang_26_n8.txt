@Test
public void testFastDateFormatWeekNumberWithLocale() {
    Locale defaultLocale = Locale.getDefault();
    try {
        Locale.setDefault(new Locale("en", "US"));
        Locale locale = new Locale("sv", "SE");

        Calendar cal = Calendar.getInstance();
        cal.set(2010, Calendar.JANUARY, 1, 12, 0, 0);
        Date date = cal.getTime();

        FastDateFormat fdf = FastDateFormat.getInstance("EEEE', week 'ww", locale);
        SimpleDateFormat sdf = new SimpleDateFormat("EEEE', week 'ww", locale);

        String fdfFormatted = fdf.format(date);
        String sdfFormatted = sdf.format(date);

        // SimpleDateFormat is expected to output week 53 due to Swedish locale rules
        assertEquals("SimpleDateFormat failed", "fredag, week 53", sdfFormatted);

        // FastDateFormat should also follow the locale rules and output week 53
        assertEquals("FastDateFormat failed", sdfFormatted, fdfFormatted);
    } finally {
        Locale.setDefault(defaultLocale);
    }
}