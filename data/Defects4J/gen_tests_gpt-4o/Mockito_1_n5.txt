
import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.doNothing;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.verify;

import org.junit.Before;
import org.junit.Test;
import org.mockito.ArgumentCaptor;

public class VarargsCaptorTest {

    interface VarargsInterface {
        void someMethod(String... args);
    }

    private VarargsInterface mockVarargsInterface;

    @Before
    public void setUp() {
        mockVarargsInterface = mock(VarargsInterface.class);
    }

    @Test
    public void testVarargsCaptor() {
        // Using ArgumentCaptor to capture varargs
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);

        // Stubbing the varargs method
        doNothing().when(mockVarargsInterface).someMethod(captor.capture(), captor.capture());

        // Calling the method with varargs
        mockVarargsInterface.someMethod("firstArg", "secondArg");

        // Verifying the interactions
        verify(mockVarargsInterface).someMethod(captor.capture(), captor.capture());

        // Asserting the captured values
        assertEquals("firstArg", captor.getAllValues().get(0));
        assertEquals("secondArg", captor.getAllValues().get(1));        
    }
}
