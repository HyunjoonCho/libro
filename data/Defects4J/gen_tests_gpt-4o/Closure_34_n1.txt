public void testStackOverflowErrorInClosureCompiler() {
    String[] args = {
        "--js", "AdMedia.eam.js",
        "--js_output_file", "AdMedia.eam.min.js"
    };
    try {
        new CommandLineRunner(args).run();
        fail("Expected RuntimeException due to StackOverflowError");
    } catch (RuntimeException e) {
        Throwable rootCause = getRootCause(e);
        assertTrue(rootCause instanceof StackOverflowError);
    }
}

private Throwable getRootCause(Throwable throwable) {
    Throwable cause;
    Throwable result = throwable;
    while((cause = result.getCause()) != null && cause != result) {
        result = cause;
    }
    return result;
}