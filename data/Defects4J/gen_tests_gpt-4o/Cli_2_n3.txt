
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.CommandLineParser;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.Options;
import org.apache.commons.cli.ParseException;
import org.apache.commons.cli.PosixParser;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

public class PosixParserTest {

    @Test
    public void testParameterValueStartingWithHyphen() {
        // Setup command line options
        Options options = new Options();
        options.addOption(new Option("t", true, "a parameter with a value"));

        // Create the parser
        CommandLineParser parser = new PosixParser();
        String[] args = new String[]{"-t", "-something"};

        try {
            // Parse the command line arguments
            CommandLine commandLine = parser.parse(options, args);

            // Assert that "-something" is treated as a value of the "-t" option
            assertTrue(commandLine.hasOption("t"));
            assertEquals("-something", commandLine.getOptionValue("t"));
        } catch (ParseException e) {
            fail("Parsing failed. Exception: " + e.getMessage());
        }
    }
}
