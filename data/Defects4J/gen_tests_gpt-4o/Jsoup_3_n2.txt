
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;
import static org.junit.Assert.*;

public class HtmlAppendTest {

    @Test
    public void testAppendTableRow() {
        // Create a simple HTML document with a table
        String html = "<html><body><table id='myTable'><tbody></tbody></table></body></html>";

        // Parse the document
        Document document = Jsoup.parse(html);

        // Select the existing table
        Element table = document.getElementById("myTable");

        // Create a new row to append
        Element newRow = Jsoup.parse("<tr><td>Data</td></tr>").select("tr").first();

        // Append the row to the existing table's tbody
        table.select("tbody").appendChild(newRow);

        // Verify that the row is directly appended to the table without being wrapped in another table
        assertEquals(1, table.select("tr").size());
        assertEquals("Data", table.select("td").first().text());
        
        // Check that there are no nested tables created
        assertEquals(1, document.select("table").size());
    }
}
