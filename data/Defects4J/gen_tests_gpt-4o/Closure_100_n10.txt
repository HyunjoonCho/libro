
public class DangerousGlobalThisWarningTest {

    /**
     * @constructor
     */
    function Foo() {
        this._bar = null;
    }

    /**
     * @this {Foo}
     */
    function writeMethodWithAnnotation() {
        this._bar = 123; // no warning. ok
    }

    /**
     * @this {Foo}
     */
    function readMethodWithAnnotation() {
        return this._bar; // no warning. ok
    }

    function writeMethodWithoutAnnotation() {
        this._bar = 123; // warning. ok.
    }

    function readMethodWithoutAnnotation() {
        return this._bar; // <- No warning! Bug report states it should warn.
    }

    public static void main(String[] args) {
        Foo foo = new Foo();
        foo.writeMethodWithAnnotation();
        foo.readMethodWithAnnotation();

        // The following calls should produce warnings as discussed in the bug report
        writeMethodWithoutAnnotation();
        readMethodWithoutAnnotation();
    }
}
