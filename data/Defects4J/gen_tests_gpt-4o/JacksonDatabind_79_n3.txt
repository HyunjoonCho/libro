public void testClassLevelJsonIdentityReference() throws Exception {
    ObjectMapper mapper = new ObjectMapper();

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    @JsonIdentityReference(alwaysAsId = true)
    class Entity {
        public int id;

        public Entity(int id) {
            this.id = id;
        }
    }

    class Container {
        public Entity entity = new Entity(1);
    }

    Container container = new Container();
    String resultJson = mapper.writeValueAsString(container);

    assertEquals("{\"entity\":1}", resultJson);
}