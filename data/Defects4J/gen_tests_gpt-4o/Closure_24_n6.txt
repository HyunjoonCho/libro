script
const { runInNewContext } = require('vm');
const assert = require('assert');

function testGoogleClosureScope() {
    // First code snippet should trigger an error
    let errorTriggered = false;
    try {
        runInNewContext(`
            goog.scope(function() {
                var x = function() {};
            });
        `, { goog: { scope: function(fn) { fn(); } } });
    } catch (e) {
        errorTriggered = true;
    }
    assert.strictEqual(errorTriggered, true, "Expected an error for using var with function expression inside goog.scope.");

    // Second code snippet should also trigger an error
    errorTriggered = false;
    try {
        runInNewContext(`
            goog.scope(function() {
                function x() {}
            });
        `, { goog: { scope: function(fn) { fn(); } } });
    } catch (e) {
        errorTriggered = true;
    }
    assert.strictEqual(errorTriggered, true, "Expected an error for using function declaration inside goog.scope.");
}

// Running the test
try {
    testGoogleClosureScope();
    console.log("Test passed.");
} catch (error) {
    console.error("Test failed:", error);
}
