
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class StringEscapeTest {

    @Test
    public void testNullByteEscaping() throws ScriptException {
        // JavaScript engine
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");

        // The JavaScript code to test
        String jsCode = "var x = \"\\u00003\"; x.length < 2 ? 'fail' : 'win';";
        
        // Execute the script and capture the result
        String result = (String) engine.eval(jsCode);
        
        // Assert that the result is "win", failing initial implementation yields "fail"
        assertEquals("win", result);
    }
}
