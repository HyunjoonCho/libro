public void testAssignmentsWithinConditions() {
    assertEquals("true", reductionOriginal());
    assertEquals("true", reductionCompiled());
}

private String reductionOriginal() {
    Boolean a;
    Boolean b;
    if (echo(b = true) || echo(b = false))
        a = b;
    else
        a = null;
    return a != null ? a.toString() : "undefined";
}

private String reductionCompiled() {
    Boolean a;
    return echo(a = true) || echo(a = false) ? a.toString() : "undefined";
}

private boolean echo(boolean value) {
    return value;
}