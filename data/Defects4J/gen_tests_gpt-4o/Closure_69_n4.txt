script
goog.require('goog.graphics.Path');

function testInstanceMethodWarning() {
    // Setting up the test expectations
    var expectedWarning = "Warning: 'this' has been changed from 'path' to 'window'";

    // Configure the console for capturing warning/error messages
    var consoleWarnOutput = '';
    var originalConsoleWarn = console.warn;
    console.warn = function(message) {
        consoleWarnOutput = message;
    };

    // Test code from the bug report
    function demo() {
        var path = new goog.graphics.Path();
        var points = [[1, 1], [2, 2]];
        for (var i = 0; i < points.length; i++) {
            try {
                (i == 0 ? path.moveTo : path.lineTo)(points[i][0], points[i][1]);
            } catch (error) {
                console.warn("Warning: 'this' has been changed from 'path' to 'window'");
            }
        }
    }
    
    // Execute demo
    demo();

    // Restore the original console.warn
    console.warn = originalConsoleWarn;
    
    // Assert that the warning message was captured
    if (consoleWarnOutput !== expectedWarning) {
        throw new Error('Test failed: Expected warning not emitted. Got: ' + consoleWarnOutput);
    }
    
    // Success message
    console.log('Test passed: Warning message was correctly captured');
}

// Run the test
testInstanceMethodWarning();
