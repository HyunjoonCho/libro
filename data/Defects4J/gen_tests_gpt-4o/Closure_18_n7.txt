public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    CompilerOptions compilerOptions = new CompilerOptions();
    
    // Set closurePass to false
    compilerOptions.setClosurePass(false);
    
    // Turn dependency sorting on
    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    
    // Provide the compiler options
    compiler.initOptions(compilerOptions);
    
    // Sample JS input that requires sorting
    SourceFile input1 = SourceFile.fromCode("input1.js", "goog.require('dependency'); var main = {}; ");
    SourceFile input2 = SourceFile.fromCode("input2.js", "goog.provide('dependency'); var dependency = {}; ");
    
    Result result = compiler.compile(
        ImmutableList.of(), // no externs
        ImmutableList.of(input1, input2),
        compilerOptions
    );
    
    String expectedOutput = "goog.provide('dependency'); var dependency = {}; goog.require('dependency'); var main = {};";

    assertTrue(result.success);
    assertEquals(expectedOutput, compiler.toSource());
}