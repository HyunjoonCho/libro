
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

public class JsoupDeepNestingTest {

    @Test
    public void testDeeplyNestedHtmlParsingPerformance() {
        // Construct a deeply nested HTML structure
        StringBuilder htmlBuilder = new StringBuilder();
        int depth = 10000;  // Adjust this value for a deeper or shallower structure
        htmlBuilder.append("<html><head><title>Deep Nest</title></head><body>");
        
        for (int i = 0; i < depth; i++) {
            htmlBuilder.append("<div>");
        }
        
        for (int i = 0; i < depth; i++) {
            htmlBuilder.append("</div>");
        }
        
        htmlBuilder.append("</body></html>");
        String deeplyNestedHtml = htmlBuilder.toString();

        long startTime = System.currentTimeMillis();
        Document doc = Jsoup.parse(deeplyNestedHtml);
        long endTime = System.currentTimeMillis();

        System.out.println("Parsing time for deeply nested HTML: " + (endTime - startTime) + "ms");
        
        // Add some assertions if needed, such as checking document structure
        // This is just to check the parsing does not throw any exceptions
        String title = doc.title();
        assertEquals("Deep Nest", title);
    }
}
