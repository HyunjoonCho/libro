public void testGoogIsArrayCompilerHint() {
    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5);
    options.setLanguageOut(CompilerOptions.LanguageMode.ECMASCRIPT5);
    options.setClosurePass(true);
    options.setWarningLevel(DiagnosticGroups.CHECK_TYPES, CheckLevel.ERROR);
    options.setWarningLevel(DiagnosticGroups.CHECK_VARIABLES, CheckLevel.ERROR);

    String code = ""
        + "/** @type {!Object} */ var goog = {};\n"
        + "/** @param {*} object \n @return {boolean} */\n"
        + "goog.isArray = function(object) { return Array.isArray(object); };\n"
        + "/**\n"
        + " * @param {*} object\n"
        + " * @return {*}\n"
        + " */\n"
        + "var test = function(object) {\n"
        + "  if (goog.isArray(object)) {\n"
        + "    /** @type {Array} */ var x = object;\n"
        + "    return x;\n"
        + "  }\n"
        + "};";

    Compiler compiler = new Compiler();
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", code), options);

    assertEquals(0, compiler.getErrorCount());
}