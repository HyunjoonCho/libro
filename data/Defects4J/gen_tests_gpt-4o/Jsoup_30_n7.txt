
import org.jsoup.Jsoup;
import org.jsoup.safety.Safelist;
import org.junit.Test;

public class JsoupStackOverflowTest {

    @Test(expected = java.util.concurrent.ExecutionException.class)
    public void testJsoupCleanStackOverflow() {
        // Generate a large document with many <wbr> tags
        StringBuilder inputHtml = new StringBuilder("<html><body>");
        String wbrTag = "<wbr>";
        for (int i = 0; i < 25000; i++) { // Create an input with excessive <wbr> tags
            inputHtml.append(wbrTag);
        }
        inputHtml.append("</body></html>");

        // Attempt to clean the document using Jsoup, triggering the stack overflow
        try {
            Jsoup.clean(inputHtml.toString(), Safelist.basic());
        } catch (java.lang.StackOverflowError e) {
            throw new java.util.concurrent.ExecutionException(e);
        }
    }
}
