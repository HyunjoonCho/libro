public void testPolymorphicTypeLostWithJsonValue() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    mapper.enableDefaultTyping();

    CommandAPDU expected = new CommandAPDU(new byte[]{0, 1, 2, 3});
    String json = mapper.writeValueAsString(expected);
    
    CommandAPDU result = mapper.readValue(json, CommandAPDU.class);
    
    assertArrayEquals(expected.getBytes(), result.getBytes());
}