
import static org.junit.Assert.*;
import static org.mockito.ArgumentCaptor.forClass;
import static org.mockito.Mockito.*;

import java.util.List;

import org.junit.Test;
import org.mockito.ArgumentCaptor;

public class ArgumentCaptorVarargsTest {
    
    interface Service {
        void process(String... items);
    }
    
    @Test
    public void testArgumentCaptorForVarargs() {
        // Create a mock service
        Service mockService = mock(Service.class);

        // Call the method with varargs
        mockService.process("item1", "item2", "item3");

        // Create an ArgumentCaptor for varargs
        ArgumentCaptor<String> captor = forClass(String.class);

        // Verify and capture the arguments
        verify(mockService).process(captor.capture());

        List<String> capturedArgs = captor.getAllValues();

        // Assert that we captured all the varargs correctly
        assertEquals(3, capturedArgs.size());
        assertEquals("item1", capturedArgs.get(0));
        assertEquals("item2", capturedArgs.get(1));
        assertEquals("item3", capturedArgs.get(2));
    }
}
