
import org.junit.Test;
import static org.junit.Assert.*;

public class AttributeTest {

    @Test(expected = NullPointerException.class)
    public void testSetValueWithNullParent() {
        // Arrange
        Attribute attribute = new Attribute();
        attribute.setParent(null); // Simulating Attribute with no parent

        // Act
        String oldVal = attribute.setValue("newValue");

        // Assert should not be reached due to expected exception
        assertNull(oldVal);
    }
    
    private class Attribute {
        private Attributes parent;
        private String key;
        private String val;

        public void setParent(Attributes parent) {
            this.parent = parent;
        }
        
        public String setValue(String val) {
            String oldVal = parent.get(this.key); // This will cause NPE if parent is null
            if (parent != null) {
                int i = parent.indexOfKey(this.key);
                if (i != Attributes.NotFound)
                    parent.vals[i] = val;
            }
            this.val = val;
            return oldVal;
        }
    }
    
    private class Attributes {
        public static final int NotFound = -1;
        private String[] vals;
        private String[] keys;

        public int indexOfKey(String key) {
            return NotFound; // Simplified for test case
        }
        
        public String get(String key) {
            return null; // Simplified for test case
        }
    }
}
