public void testAssignmentRemovedWhenUsedAsExpression() {
    String inputCode = "function f() { var a = [], b; a.push(b = []); b[0] = 1; return a; }";
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.SIMPLE_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    CompilationResult result = Compiler.compile(SourceFile.fromCode("test.js", inputCode), options);
    String expectedOutput = "function f(){var a=[],b;a.push(b=[]);b[0]=1;return a}";
    assertEquals(expectedOutput, result.js);
}