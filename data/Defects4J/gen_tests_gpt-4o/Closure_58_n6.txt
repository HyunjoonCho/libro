
import com.google.javascript.jscomp.CommandLineRunner;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;
import static org.junit.Assert.*;

public class ClosureCompilerTest {

    @Test
    public void testCompilerFunctionKeys() {
        // JavaScript code that caused the issue
        String jsCode = "function keys(obj) {\n" +
                        "  var a = [], i = 0;\n" +
                        "  for (a[i++] in obj);\n" +
                        "  return a;\n" +
                        "}";

        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        // Set Options if necessary
        // e.g., options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT_NEXT);

        // Create input source file
        SourceFile input = SourceFile.fromCode("test.js", jsCode);

        // Compile the JavaScript code
        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), input, options);

        // Check the compilation result
        assertTrue("Compilation should be successful", result.success);
    }
}
