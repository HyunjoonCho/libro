public void testBadVariableInliningInClosure() {
    // Simulating a similar environment to check the behavior
    final int[] arr = {1, 2, 3, 4, 5};
    final StringBuilder output = new StringBuilder();
    for (int i = 0; i < arr.length; i++) {
        final int j = arr[i];
        new Thread(new Runnable() {
            public void run() {
                final int k = j;
                output.append(k).append(" ");
            }
        }).start();
    }
    
    // Give some time for threads to update output
    try {
        Thread.sleep(100);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    assertEquals("1 2 3 4 5 ", output.toString().trim());
}