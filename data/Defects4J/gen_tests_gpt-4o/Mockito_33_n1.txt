
import static org.junit.Assert.*;
import static org.mockito.Mockito.*;

import org.junit.Test;
import org.mockito.ArgumentCaptor;
import java.util.function.Consumer;

public class ArgumentCaptorTest {

    @Test
    public void testCaptorTypeMatching() {
        // Simulating the behavior of ArgumentCaptor.fromClass
        ArgumentCaptor<Consumer<String>> captor = ArgumentCaptor.forClass(Consumer.class);

        // Assume we have a mock object with a method accepting Consumer<String>
        Consumer<String> mockConsumer = mock(Consumer.class);

        // Interact with the mock
        mockConsumer.accept("test");

        // Capture the argument
        verify(mockConsumer).accept(captor.capture());

        // At runtime, we'll check it captures correctly.
        assertNotNull(captor.getValue());

        // Let's verify it is indeed of the expected type, demonstrating intent.
        Consumer<String> captured = captor.getValue();
        assertTrue(captured instanceof Consumer);
    }
}
