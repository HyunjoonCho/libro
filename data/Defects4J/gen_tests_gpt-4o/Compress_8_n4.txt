
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.junit.Test;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import static org.junit.Assert.assertEquals;

public class TarArchiveEntryTest {

    @Test
    public void testParseTarHeaderWithTrailingSpace() throws IOException {
        byte[] header = new byte[512];
        
        // Fill the header with spaces
        for (int i = 0; i < header.length; i++) {
            header[i] = ' ';
        }

        // Set the size field (12 bytes starting from index 124) with a size of 100 (octal "000000000100 ")
        String octalSize = "000000000100";
        System.arraycopy(octalSize.getBytes(), 0, header, 124, octalSize.length());
        header[135] = ' '; // Trailing space or null character as per TAR format

        // Parse the header
        TarArchiveEntry entry = new TarArchiveEntry(header);

        // Verify if the size is correctly parsed as 64 (decimal) which is 100 in octal
        assertEquals(64L, entry.getSize());
    }
}
