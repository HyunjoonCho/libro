
import org.apache.commons.math3.complex.Complex;
import org.junit.Test;
import static org.junit.Assert.*;

public class ComplexTest {

    @Test
    public void testAddWithNaN() {
        Complex complexNaN1 = new Complex(Double.NaN, 1);
        Complex complexNaN2 = new Complex(1, Double.NaN);
        Complex normalComplex = new Complex(1, 1);

        // When either part is NaN, the result should be Complex.NaN according to the contract
        assertTrue(Complex.NaN.equals(complexNaN1.add(normalComplex)));
        assertTrue(Complex.NaN.equals(normalComplex.add(complexNaN2)));
        assertTrue(Complex.NaN.equals(complexNaN1.add(complexNaN2)));
    }

    @Test
    public void testSubtractWithNaN() {
        Complex complexNaN1 = new Complex(Double.NaN, 1);
        Complex complexNaN2 = new Complex(1, Double.NaN);
        Complex normalComplex = new Complex(1, 1);

        // When either part is NaN, the result should be Complex.NaN according to the contract
        assertTrue(Complex.NaN.equals(complexNaN1.subtract(normalComplex)));
        assertTrue(Complex.NaN.equals(normalComplex.subtract(complexNaN2)));
        assertTrue(Complex.NaN.equals(complexNaN1.subtract(complexNaN2)));
    }
}
