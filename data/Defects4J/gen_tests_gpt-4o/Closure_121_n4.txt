script
// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// ==/ClosureCompiler==

var uid;
function reset() {
  uid = Math.random();
}
function doStuff() {
  reset();
  var _uid = uid;

  if (uid < 0.5) {
    doStuff();
  }

  if (_uid !== uid) {
    throw new Error('reset() was called');
  }
}

try {
  doStuff();
  console.log("Test passed: no error thrown.");
} catch (e) {
  console.error("Test failed:", e.message);
}
