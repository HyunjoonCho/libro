
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.TextNode;
import org.jsoup.parser.Parser;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class JsoupJapaneseTagTest {

    @Test
    public void testJsoupParsingJapaneseTags() {
        String xml = "<進捗推移グラフ>" +
                     "<開始予定凡例名 表示状態=\"0\" 線色=\"00CED1\">" +
                     "&#9312;&#35373;&#35336; &#38283;&#22987;&#20104;&#23450;" +
                     "</開始予定凡例名>" +
                     "</進捗推移グラフ>";

        // Parse the XML with Jsoup
        Document doc = Jsoup.parse(xml, "UTF-8", Parser.xmlParser());

        // Retrieve all elements
        Elements elements = doc.getAllElements();

        // Check that the root element is correctly parsed
        Element rootElement = elements.first();
        assertEquals("進捗推移グラフ", rootElement.tagName());

        // Check that the child element is correctly parsed
        Element childElement = elements.get(1); // second element
        assertEquals("開始予定凡例名", childElement.tagName());
        assertEquals("0", childElement.attr("表示状態"));
        assertEquals("00CED1", childElement.attr("線色"));

        // Validate the text content inside the child element
        for (TextNode textNode : childElement.textNodes()) {
            String textContent = textNode.text();
            assertTrue(textContent.contains("設定 開始予定"));
        }
    }
}
