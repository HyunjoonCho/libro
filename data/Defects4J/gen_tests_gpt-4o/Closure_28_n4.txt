
import java.io.IOException;
import com.google.javascript.jscomp.CommandLineRunner;

public class ClosureCompilerTest {
    
    public static void main(String[] args) {
        String jsCode = "function f() { return false; }\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n" +
                        "if (!f()) alert('hi');\n";

        try {
            runClosureCompiler(jsCode);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static void runClosureCompiler(String jsCode) throws IOException {
        String[] parameters = new String[] {
            "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--js_output_file", "default.js"
        };

        CommandLineRunner runner = new CommandLineRunner(parameters);
        runner.setInputSource(jsCode, "test");
        int exitCode = runner.execute();

        if (exitCode == 0) {
            System.out.println("Compilation succeeded.");
        } else {
            System.out.println("Compilation failed with exit code: " + exitCode);
        }
    }
}
