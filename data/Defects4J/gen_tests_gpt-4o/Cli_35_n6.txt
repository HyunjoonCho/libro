
import org.apache.commons.cli.DefaultParser;
import org.apache.commons.cli.Options;
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.CommandLineParser;
import org.apache.commons.cli.ParseException;
import org.apache.commons.cli.Option;
import org.junit.Test;
import static org.junit.Assert.fail;

public class LongOptAmbiguityTest {

    @Test
    public void testAmbiguousOptionException() {
        // Setup options
        Options options = new Options();
        options.addOption(Option.builder().longOpt("importToOpen").hasArg().argName("FILE").build());
        options.addOption(Option.builder("i").longOpt("import").hasArg().argName("FILE").build());

        // Command line arguments
        String[] args = new String[]{"--import=FILE"};

        // Parse command line
        CommandLineParser parser = new DefaultParser();
        try {
            CommandLine cmd = parser.parse(options, args);
            fail("Expected an AmbiguousOptionException to be thrown.");
        } catch (ParseException e) {
            // Check if the exception is related to ambiguous options
            if (!e.getMessage().contains("Ambiguous option")) {
                fail("Expected an AmbiguousOptionException, but got: " + e.getMessage());
            }
        }
    }
}
