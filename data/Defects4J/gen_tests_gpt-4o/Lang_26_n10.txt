
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;
import java.text.SimpleDateFormat;

import org.junit.Test;
import static org.junit.Assert.assertEquals;

import org.apache.commons.lang.time.FastDateFormat;

public class FastDateFormatWeekBugTest {

    @Test
    public void testWeekOfYearWithDifferentLocales() {
        Locale.setDefault(new Locale("en", "US"));
        Locale locale = new Locale("sv", "SE");

        Calendar cal = Calendar.getInstance(); // using system default locale
        cal.set(2010, Calendar.JANUARY, 1, 12, 0, 0);
        Date date = cal.getTime();

        FastDateFormat fastDateFormat = FastDateFormat.getInstance("EEEE', week 'ww", locale);
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("EEEE', week 'ww", locale);

        String fastDateFormatResult = fastDateFormat.format(date);
        String simpleDateFormatResult = simpleDateFormat.format(date);

        // Assert that FastDateFormat and SimpleDateFormat should give the same result
        assertEquals("Mismatch in week output", simpleDateFormatResult, fastDateFormatResult);

        System.out.println("FastDateFormat: " + fastDateFormatResult);
        System.out.println("SimpleDateFormat: " + simpleDateFormatResult);
    }
}
