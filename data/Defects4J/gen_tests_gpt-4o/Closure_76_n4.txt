script
// A function to mimic the echo behavior described in the bug report.
function echo(value) {
  console.log(value);
  return value;
}

// Original function
function originalReduction() {
  var a, b;
  if (echo(b = true) || echo(b = false)) {
    a = b;
  } else {
    a = null;
  }
  return a;
}

// Compiled function (based on the description of the issue)
function compiledReduction() {
  var a;
  return echo(true) || echo(a = false) ? a : null;
}

// Test case to reproduce the bug
function testAssignmentsWithinConditions() {
  var originalResult = originalReduction();
  var compiledResult = compiledReduction();

  console.log("Original function returned:", originalResult); // Expected: "true"
  console.log("Compiled function returned:", compiledResult); // Expected: "true"

  if (originalResult !== compiledResult) {
    console.error("Test failed: Outputs do not match.");
  } else {
    console.log("Test passed: Outputs match.");
  }
}

// Run the test case
testAssignmentsWithinConditions();
