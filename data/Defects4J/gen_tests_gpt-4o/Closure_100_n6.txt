public void testUnsafeGlobalThisUsageWithoutAnnotation() {
    String jsCode = "/** @constructor */\n" +
                    "function Foo() {\n" +
                    "  this._bar = null;\n" +
                    "};\n\n" +
                    "function readMethodWithoutAnnotation() {\n" +
                    "  return this._bar;\n" +
                    "}";
    
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setWarningLevel(DiagnosticGroups.GLOBAL_THIS, CheckLevel.WARNING);
    
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", jsCode), options);
    
    // Check if a warning was issued for using `this` without annotation
    boolean warningsDetected = !compiler.getWarnings().isEmpty();
    assertTrue("Expected a warning for use of global `this` in readMethodWithoutAnnotation", warningsDetected);
}