public void testAdvancedOptimizationsMode() throws Exception {
    // This assumes existence of a method to simulate compilation with Advanced Optimizations in an existing framework
    String sourceCode = 
        "window['anchor'] = function(obj, modifiesProp) {" +
        "  return (function(saved) {" +
        "    return modifiesProp(obj) + saved;" +
        "  })(obj['prop']);" +
        "};";
    
    String expectedOutput = "window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};";
    
    String output = compileWithAdvancedOptimizations(sourceCode);
    
    assertEquals(expectedOutput, output);
}