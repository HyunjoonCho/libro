
import org.jfree.data.time.Day;
import org.jfree.data.time.TimeSeries;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class TimeSeriesTest {

    @Test
    public void testCreateCopy_Issue818() {
        TimeSeries foo = new TimeSeries("foo", Day.class);
        foo.add(new Day(19, 4, 2005), 1);
        foo.add(new Day(25, 5, 2005), 1);
        foo.add(new Day(28, 5, 2005), 1);
        foo.add(new Day(30, 5, 2005), 1);
        foo.add(new Day(1, 6, 2005), 1);
        foo.add(new Day(3, 6, 2005), 1);
        foo.add(new Day(19, 8, 2005), 1);
        foo.add(new Day(31, 1, 2006), 1);

        try {
            // Attempt to create a copy with the specified date range
            TimeSeries bar = foo.createCopy(new Day(1, 12, 2005), new Day(18, 1, 2006));
            
            // Check that the resulting TimeSeries is empty
            assertEquals(0, bar.getItemCount());

        } catch (CloneNotSupportedException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // In the case of the bug, this exception is thrown. We don't want this to happen.
            e.printStackTrace();
            throw new AssertionError("The createCopy method threw an IllegalArgumentException: " + e.getMessage());
        }
    }
}
