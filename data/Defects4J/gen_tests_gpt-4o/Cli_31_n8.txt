
import org.apache.commons.cli.*;

import org.junit.Test;

import static org.junit.Assert.assertTrue;

public class HelpFormatterTest {

    @Test
    public void testSetArgNameEffect() {
        // Create the options object
        Options options = new Options();
        
        // Add an option with an argument
        Option option = Option.builder("f")
                              .longOpt("file")
                              .hasArg()
                              .desc("file to process")
                              .build();
        options.addOption(option);
        
        // Create a HelpFormatter instance
        HelpFormatter formatter = new HelpFormatter();
        
        // Set a custom argument name
        formatter.setArgName("customArg");
        
        // Capture the output of the help formatter
        StringBuilder helpOutput = new StringBuilder();
        formatter.printHelp(new PrintWriter(new OutputStreamWriter(new OutputStream() {
            @Override
            public void write(int b) {
                helpOutput.append((char) b);
            }
        })), 80, "commandLineTool", "header", options, 4, 8, "footer", true);
        
        // Check if the 'arg' is replaced with the 'customArg'
        String helpString = helpOutput.toString();
        assertTrue("The help output should contain 'customArg' instead of 'arg'",
                   helpString.contains("customArg"));
    }
}
