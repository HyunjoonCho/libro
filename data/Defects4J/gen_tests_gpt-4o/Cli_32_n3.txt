
import org.apache.commons.cli.HelpFormatter;
import org.junit.Test;
import static org.junit.Assert.*;

public class HelpFormatterTest {

    @Test(expected = StringIndexOutOfBoundsException.class)
    public void testFindWrapPosStringIndexOutOfBoundsException() {
        HelpFormatter helpFormatter = new HelpFormatter();

        // Prepare a test input where the last space character is at the end
        String text = "This is a test input string to reproduce the bug scenario ";
        int width = text.length(); // Set wrapWidth to exactly the string length
        int startPos = 0;

        // Call findWrapPos, expecting it to throw StringIndexOutOfBoundsException
        // under the erroneous condition; should be fixed with < instead of <=
        helpFormatter.findWrapPos(text, width, startPos);
    }
}
