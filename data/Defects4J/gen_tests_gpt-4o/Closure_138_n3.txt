public void testJSCDeterministicTest() {
    String code = "var t = null; "
                + "window.test = function() {"
                + " if (t != null) {"
                + " t = null;"
                + " }"
                + " t = 1;"
                + "};";
    
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
    Compiler compiler = new Compiler();
    
    Result result = compiler.compile(Collections.emptyList(), Collections.singletonList(SourceFile.fromCode("test.js", code)), options);
    
    assertFalse("Compile should not produce errors or warnings", result.errors.length > 0 || result.warnings.length > 0);
    assertEquals("Warning (JSC_DETERMINISTIC_TEST) should not be present", 0, result.warnings.length);
}