public void testOverzealousOptimizationConfusesVariables() {
    String originalCode = 
        "var uid;\n" +
        "function reset() {\n" +
        "    uid = Math.random();\n" +
        "}\n" +
        "function doStuff() {\n" +
        "    reset();\n" +
        "    var _uid = uid;\n" +
        "    if (uid < 0.5) {\n" +
        "        doStuff();\n" +
        "    }\n" +
        "    if (_uid !== uid) {\n" +
        "        throw 'reset() was called';\n" +
        "    }\n" +
        "}\n" +
        "doStuff();";

    // Assuming `compileAndRunJavaScript` is a method that compiles the JS code
    // with ADVANCED_OPTIMIZATIONS and returns either the result or an exception.
    try {
        compileAndRunJavaScript(originalCode);
        fail("Expected exception was not thrown");
    } catch (Exception e) {
        assertEquals("reset() was called", e.getMessage());
    }
}