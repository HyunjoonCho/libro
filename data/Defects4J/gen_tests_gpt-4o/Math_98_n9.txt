
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.linear.RealMatrixImpl;
import org.apache.commons.math.linear.InvalidMatrixException;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertArrayEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class RealMatrixImplTest {

    @Test
    public void testOperateWithNonSquareMatrix() {
        // Create a non-square matrix (2x3 matrix)
        double[][] data = {
            {1, 2, 3},
            {4, 5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(data);

        // Input vector with length matching the column dimension of the matrix
        double[] inputVector = {1, 2, 3};

        // Expected result for operation: [14, 32]
        double[] expectedOutput = {14, 32};

        // Check if the output is as expected
        double[] result = matrix.operate(inputVector);
        assertArrayEquals(expectedOutput, result, "The operate method did not produce the expected result for a non-square matrix.");
    }

    @Test
    public void testOperateDimensionMismatch() {
        // Create a non-square matrix (2x3 matrix)
        double[][] data = {
            {1, 2, 3},
            {4, 5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(data);

        // Input vector with incorrect length (should be 3 for columns)
        double[] inputVector = {1, 2};

        // Expect an InvalidMatrixException due to dimension mismatch
        assertThrows(InvalidMatrixException.class, () -> {
            matrix.operate(inputVector);
        }, "Operate did not throw an exception for input vector with incorrect length.");
    }
}
