public void testPrimitiveAndWrapperTypeRefinement() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    
    // Custom serializer that supports refinement from int to Integer 
    module.addSerializer(int.class, new JsonSerializer<Integer>() {
        @Override
        public void serialize(Integer value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            gen.writeNumber(value);
        }
    });
    
    mapper.registerModule(module);
    
    assertEquals("\"123\"", mapper.writeValueAsString(123));
}