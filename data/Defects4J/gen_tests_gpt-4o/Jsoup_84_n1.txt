
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.helper.W3CDom;
import org.junit.Test;
import org.w3c.dom.Element;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import static org.junit.Assert.fail;

public class W3CDomHelperTest {

    @Test
    public void testNamespaceError() {
        String html = "<html><head></head><body><fb:like></fb:like></body></html>";

        try {
            // Parse the HTML using Jsoup
            Document jsoupDoc = Jsoup.parse(html);

            // Convert to W3C Document
            W3CDom w3cDom = new W3CDom();
            org.w3c.dom.Document w3cDocument = w3cDom.fromJsoup(jsoupDoc);

            // The test should fail if no exception is thrown
            fail("Expected namespace error due to missing namespace declaration.");
        } catch (Exception e) {
            // Check if the exception is related to a namespace error
            if (!(e instanceof org.w3c.dom.DOMException && e.getMessage().contains("NAMESPACE_ERR"))) {
                fail("Unexpected exception type: " + e.getClass() + ", message: " + e.getMessage());
            }
            // Expected behavior: a namespace error is caught
            System.out.println("Caught expected namespace error: " + e.getMessage());
        }
    }
}
