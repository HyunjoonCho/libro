public void testTokenBufferDeserialization() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{ \"a\":1, \"b\":null }";
    
    JsonParser parser = mapper.createParser(json);
    parser.nextToken(); // Move to START_OBJECT
    
    TokenBuffer buffer = new TokenBuffer(parser);
    buffer.copyCurrentStructure(parser);
    
    JsonParser bufferParser = buffer.asParser();
    bufferParser.nextToken(); // Move to the first token in the buffer
    
    List<JsonToken> expectedTokens = Arrays.asList(
        JsonToken.START_OBJECT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NUMBER_INT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NULL,
        JsonToken.END_OBJECT
    );
    
    int index = 0;
    while (bufferParser.nextToken() != null) {
        assertEquals(expectedTokens.get(index), bufferParser.currentToken());
        index++;
    }
    assertEquals(expectedTokens.size(), index);
}