
import static org.junit.Assert.assertEquals;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import org.junit.Test;

public class InlineIfOptimizationTest {

    @Test
    public void testTernaryOperatorOptimization() throws ScriptException {
        // Set up the JavaScript engine
        ScriptEngine engine = new ScriptEngineManager().getEngineByName("nashorn");

        // Test case where optimization should trigger b() only
        // "true == null ? 'a' : 'b'" should result in 'b'
        String script1 = "var result = (true == null ? 'a' : 'b'); result";
        assertEquals("b", engine.eval(script1));
        
        // Test case for real life use case where sum should be correctly calculated
        // Sum function where a == true should result in 2 + b
        String script2 = "function sum(a, b) { return (a == true ? 2 : a) + b; } sum(true, 1)";
        assertEquals(3, engine.eval(script2));
    }
}
