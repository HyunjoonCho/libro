
import org.apache.commons.cli.*;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class PosixParserTest {

    @Test
    public void testTargetOptionParsing() {
        CommandLineParser parser = new PosixParser();
        
        Option targetOption = new Option("t", "target", true, "Generate files for the specified target machine");
        Options options = new Options();
        options.addOption(targetOption);

        String[] args = {"-target", "foobar.com"};
        
        try {
            CommandLine cmd = parser.parse(options, args);
        
            if (cmd.hasOption("t")) {
                // This should be "foobar.com" but due to the bug it will be "arget"
                String targetValue = cmd.getOptionValue("t");
                // Assert the buggy behavior
                assertEquals("arget", targetValue);
            }
            
        } catch (ParseException e) {
            System.out.println("Invalid command: " + e.getMessage());
        }
    }
}
