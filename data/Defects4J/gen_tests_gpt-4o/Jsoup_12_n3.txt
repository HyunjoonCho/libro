
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.jsoup.select.Selector;
import org.junit.Test;

import static org.junit.Assert.fail;

public class JsoupSelectorTest {

    @Test
    public void testSelectorsWithRegexInAttribute() {
        String html = "<div><table class='x y'></table></div>";

        try {
            Document doc = Jsoup.parse(html);

            // Test failing selectors.
            doc.select("div table[class~=x|y]");
            doc.select("div > table[class~=x|y]");
            doc.select("div + table[class~=x|y]");
            doc.select("div ~ table[class~=x|y]");

            // If no exception, the test should fail.
            fail("Expected SelectorParseException was not thrown.");
        } catch (Selector.SelectorParseException e) {
            // Expected exception, passing the test
        }
    }
}
