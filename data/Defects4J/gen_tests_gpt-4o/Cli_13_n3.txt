
import org.apache.commons.cli.*;

import org.junit.Test;
import static org.junit.Assert.*;

public class CommandLineArgumentDefaultTest {

    @Test
    public void testArgumentDefaultPreventsCommandLineOverride() {
        // Setup the options with a default value
        Option option = Option.builder("a")
                .longOpt("optionA")
                .hasArg()
                .desc("Option A with a default value")
                .build();

        Options options = new Options();
        options.addOption(option);

        // Default value assignment
        CommandLineParser parser = new DefaultParser();
        CommandLine cmd;
        try {
            cmd = parser.parse(options, new String[]{"--optionA", "default"});

            // Simulate the override using command line input
            CommandLine cmdOverride = parser.parse(options, new String[]{"--optionA", "override"});

            // Assert that the value was overridden 
            String value = cmdOverride.getOptionValue("optionA");
            assertNotNull("The option A should have a value", value);
            assertEquals("override", value);
        
        } catch (ParseException e) {
            fail("Failed to parse command line options: " + e.getMessage());
        }
    }
}
