public void testSideEffectsAnalysis() {
    // Create a fake window object to capture the setTimeout side effect
    class MockWindow {
        String location;
        void setTimeout(Runnable r, int delay) { r.run(); }
    }
    
    // Initialize the MockWindow and Foo object
    MockWindow window = new MockWindow();
    Foo foo = new Foo(window);
    
    // Set the location
    foo.setLocation("http://www.google.com/");
    
    // Assertion to ensure that the `setLocation` call was not removed
    assertEquals("http://www.google.com/", window.location);
}

private static class Foo {
    private String location;
    private MockWindow window;

    Foo(MockWindow window) {
        this.window = window;
        Foo self = this;
        this.window.setTimeout(new Runnable() {
            @Override
            public void run() {
                window.location = self.location;
            }
        }, 0);
    }

    void setLocation(String loc) {
        this.location = loc;
    }
}

private static class MockWindow {
    String location;
    void setTimeout(Runnable r, int delay) { r.run(); }
}