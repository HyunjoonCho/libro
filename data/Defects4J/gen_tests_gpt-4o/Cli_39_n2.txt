
import org.apache.commons.cli.*;

import java.io.File;
import java.io.FileInputStream;

import static org.junit.Assert.*;

public class OptionParserTest {

    @org.junit.Test
    public void testExistingFileValue() {
        // Setup Options
        Options options = new Options();
        options.addOption(Option.builder("f").hasArg().type(FileInputStream.class).build());

        // Provide a path to an existing test file
        String[] args = {"-f", "testfile.txt"}; // Ensure "testfile.txt" exists in the test environment

        // Parse the arguments
        CommandLineParser parser = new DefaultParser();
        try {
            CommandLine cline = parser.parse(options, args);
            
            // Attempt to get the FileInputStream
            FileInputStream fileInputStream = (FileInputStream) cline.getParsedOptionValue("f");

            // Assert fileInputStream is not null
            assertNotNull("FileInputStream should not be null", fileInputStream);

            // Close the input stream if opened successfully
            fileInputStream.close();
        } catch (ParseException e) {
            fail("Parsing failed: " + e.getMessage());
        } catch (ClassCastException e) {
            fail("Expected a FileInputStream but got: " + e.getMessage());
        } catch (Exception e) {
            fail("An exception occurred: " + e.getMessage());
        }
    }
}
