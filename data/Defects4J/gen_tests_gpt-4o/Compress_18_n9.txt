public void testLongDirectoryNameInTar() {
    File tempFile = null;
    TarArchiveOutputStream tarOutput = null;
    try {
        tempFile = File.createTempFile("test", ".tar");
        try (FileOutputStream fos = new FileOutputStream(tempFile)) {
            tarOutput = new TarArchiveOutputStream(fos);
            tarOutput.setLongFileMode(TarArchiveOutputStream.LONGFILE_POSIX);
            
            String dirName = "layers/openstreetmap__osm.disy.net/.tiles/1.0.0/openstreetmap__osm.disy.net/default/";
            StringBuilder longDirName = new StringBuilder("./PaxHeaders.X/");
            while (longDirName.length() + dirName.length() <= 101) {
                longDirName.append(dirName);
            }
            longDirName.append(dirName.substring(0, 100 - longDirName.length()));

            TarArchiveEntry entry = new TarArchiveEntry(longDirName.toString() + "/");
            entry.setSize(0); 

            tarOutput.putArchiveEntry(entry);
            tarOutput.closeArchiveEntry();
        }
    } catch (IOException e) {
        e.printStackTrace();
        fail("Exception occurred when writing a long directory name to TAR: " + e.getMessage());
    } finally {
        if (tarOutput != null) {
            try {
                tarOutput.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        if (tempFile != null) {
            tempFile.delete();
        }
    }
}