
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import org.apache.commons.text.StringEscapeUtils;
import org.springframework.web.util.JavaScriptUtils;

public class StringEscapeUtilsTest {

    @Test
    public void testEscapeJavaScript() {
        String s = "<script>alert('aaa');</script>";

        // Using Spring's JavaScript escape method
        String springEscapedStr = JavaScriptUtils.javaScriptEscape(s);
        assertEquals("<script>alert(\\'aaa\\');<\\/script>", springEscapedStr);

        // Using Apache Commons Lang's escapeJavaScript method
        String apacheEscapedStr = org.apache.commons.lang.StringEscapeUtils.escapeJavaScript(s);

        // This is expected to fail since the bug describes that '/' is not escaped properly.
        assertEquals("<script>alert(\\'aaa\\');<\\/script>", apacheEscapedStr);
    }
}
