
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

import org.jfree.chart.plot.MultiplePiePlot;
import org.jfree.data.category.DefaultCategoryDataset;
import org.junit.Test;

public class MultiplePiePlotTest {

    @Test
    public void testDatasetListenerWiringInConstructor() {
        DefaultCategoryDataset dataset = new DefaultCategoryDataset();
        MockDatasetChangeListener listener = new MockDatasetChangeListener();
        
        try {
            MultiplePiePlot plot = new MultiplePiePlot(dataset);
            dataset.addChangeListener(listener);
            dataset.addValue(1.0, "Row1", "Column1");
            
            assertTrue("Dataset change listener should have been notified.",
                    listener.isNotifyCalled());
                    
        } catch (Exception e) {
            fail("An exception occurred: " + e.getMessage());
        }
    }

    private static class MockDatasetChangeListener implements org.jfree.data.event.DatasetChangeListener {
        private boolean notifyCalled = false;

        @Override
        public void datasetChanged(org.jfree.data.event.DatasetChangeEvent event) {
            this.notifyCalled = true;
        }
        
        public boolean isNotifyCalled() {
            return notifyCalled;
        }
    }
}
