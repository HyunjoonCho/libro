
import org.apache.commons.math3.stat.inference.MannWhitneyUTest;
import org.junit.Test;

import static org.junit.Assert.*;

public class MannWhitneyUTestOverflow {

    @Test
    public void testMannWhitneyUWithLargeDataSets() {
        // Create large data sets with 1500 elements each
        double[] sample1 = new double[1500];
        double[] sample2 = new double[1500];

        // Fill the arrays with some test data
        for (int i = 0; i < 1500; i++) {
            sample1[i] = (double) i;
            sample2[i] = (double) (i + 1);
        }

        MannWhitneyUTest mannWhitneyUTest = new MannWhitneyUTest();

        // Perform the Mann-Whitney U Test
        double pValue = mannWhitneyUTest.mannWhitneyUTest(sample1, sample2);

        // Check the p-value to ensure it is valid (i.e., not NaN or insane value)
        assertFalse("P-value should not be NaN", Double.isNaN(pValue));
        // Additional assertion can be done here depending on expected p-value range
        assertTrue("P-value should be within [0, 1]", pValue >= 0.0 && pValue <= 1.0);
    }
}
