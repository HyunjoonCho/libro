
import org.junit.Test;
import com.google.javascript.jscomp.CommandLineRunner;
import com.google.javascript.jscomp.Compiler;

public class ClosureCompilerTest {

    @Test
    public void testVarCheckCrashWithModules() {
        String[] args = {
            "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--formatting", "PRETTY_PRINT",
            "--debug",
            "--module", "jquery:1",
            "--module", "core:1:jquery",
            "--module_output_path_prefix", "mod_",
            "--js", "path/to/your/jquery.js",
            "--js", "path/to/your/core.js",
            "--externs", "path/to/your/qunit_externs.js"
        };

        try {
            CommandLineRunner.main(args);
        } catch (Exception e) {
            // A RuntimeException is expected based on the bug report
            assert e instanceof RuntimeException;
            String message = e.getMessage();
            assert message.contains("INTERNAL COMPILER ERROR");
            System.out.println("Test triggered expected internal compiler error: " + message);
        }
    }
}
