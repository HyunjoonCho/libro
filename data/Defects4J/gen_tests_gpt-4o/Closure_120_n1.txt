
import static org.junit.Assert.*;
import org.junit.Test;

public class CompilerOptimizationTest {

    @Test(expected = RuntimeException.class)
    public void testOverzealousOptimization() {
        // Simulate the optimized JavaScript behavior in a Java test

        // JavaScript logic
        double[] uid = {generateRandom()};
        callDoStuff(uid);
    }

    private double generateRandom() {
        return Math.random();
    }

    private void callDoStuff(double[] uid) {
        // Simulation of the 'doStuff' method with expected logic
        reset(uid);
        double _uid = uid[0];

        if (_uid < 0.5) {
            callDoStuff(uid);
        }

        if (_uid != uid[0]) {
            throw new RuntimeException("reset() was called");
        }
    }

    private void reset(double[] uid) {
        uid[0] = generateRandom();
    }
}
