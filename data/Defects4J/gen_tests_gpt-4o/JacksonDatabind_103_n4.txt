public void testJsonMappingExceptionDoubleLocation() {
    ObjectMapper objectMapper = new ObjectMapper();
    String json = "{\"invalidField\": \"invalidValue\"}";

    try {
        objectMapper.readValue(json, ValidClass.class);
        fail("Expected InvalidFormatException");
    } catch (InvalidFormatException e) {
        String message = e.getMessage();
        String duplicateLocation = " at [Source: ";
        int firstIndex = message.indexOf(duplicateLocation);
        int secondIndex = message.indexOf(duplicateLocation, firstIndex + 1);
        assertTrue("Location information is included twice", firstIndex != -1 && secondIndex != -1);
    }
}