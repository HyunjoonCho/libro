public void testBase64InputStreamRead() throws IOException {
    byte[] encodedData = Base64.getEncoder().encode("abc".getBytes(StandardCharsets.UTF_8)); // "abc" is 3 bytes long
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(encodedData);
    Base64InputStream base64InputStream = new Base64InputStream(byteArrayInputStream, true);
    InputStreamReader reader = new InputStreamReader(base64InputStream, StandardCharsets.UTF_8);
    char[] buffer = new char[4];
    int bytesRead = reader.read(buffer);
    while (bytesRead != -1) {
        bytesRead = reader.read(buffer);
    }
    assertNotEquals(0, bytesRead); // At the end of a multiple of 3 bytes long stream, should not return 0
}