public void testJsonDeserializeWithNonFinalTyping() throws JsonParseException, JsonMappingException, IOException {
    String testInstanceSerialized = "{\"mapProperty\":[\"java.util.HashMap\",{\"Compound|Key\":\"Value\"}]}";

    ObjectMapper mapper = new ObjectMapper().enableDefaultTyping(DefaultTyping.NON_FINAL);

    TestClass testInstance = mapper.readValue(testInstanceSerialized, TestClass.class);
    String serializedOutput = mapper.writeValueAsString(testInstance);

    assertEquals(testInstanceSerialized, serializedOutput);
}