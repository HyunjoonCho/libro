public void testDefaultPrettyPrinterSubclassCreateInstanceFails() {
    class CustomPrettyPrinter extends DefaultPrettyPrinter {
        // no override of createInstance()
    }

    CustomPrettyPrinter customPrinter = new CustomPrettyPrinter();
    try {
        customPrinter.createInstance();
        fail("Expected an IllegalStateException for calling createInstance on a subclass without override.");
    } catch (IllegalStateException e) {
        assertEquals("Cannot create instance of subclass without overriding createInstance", e.getMessage());
    }
}