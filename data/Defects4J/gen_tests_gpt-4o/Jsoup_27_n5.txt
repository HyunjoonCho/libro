
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.nio.charset.UnsupportedCharsetException;

import static org.junit.Assert.*;

public class InvalidCharsetTest {

    @Test
    public void testInvalidHttpResponseCharset() {
        String htmlContent = "<html><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UFT8\"></head><body></body></html>";
        ByteArrayInputStream inputStream = new ByteArrayInputStream(htmlContent.getBytes());

        try {
            Document doc = Jsoup.parse(inputStream, "UFT8", "http://example.com");
            assertNotNull(doc);
        } catch (UnsupportedCharsetException e) {
            // Catching the expected faulty charset exception
            fail("UnsupportedCharsetException should be handled within the library.");
        } catch (Exception e) {
            fail("No exception should be thrown when charset is invalid: " + e.getMessage());
        }
    }
}
