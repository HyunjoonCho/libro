public void testZipArchiveInputStreamThrowsExceptionForUnknownCompressedSize() {
    ByteArrayInputStream bais = new ByteArrayInputStream(new byte[] {
        // Example ZIP header with unknown compressed size
        0x50, 0x4b, 0x03, 0x04, // Local file header signature
        20, 0,  // Version needed to extract
        0, 0,   // General purpose bit flag
        8, 0,   // Compression method (deflate)
        0, 0, 0, 0, // Last mod file time/date
        0, 0, 0, 0, // CRC-32
        0, 0, 0, 0, // Compressed size (unknown)
        0, 0, 0, 0, // Uncompressed size
        0, 0,   // File name length
        0, 0    // Extra field length
    });

    ZipArchiveInputStream zis = new ZipArchiveInputStream(bais);
    try {
        zis.getNextZipEntry();
        fail("Expected IllegalStateException due to unknown compressed size");
    } catch (IllegalStateException e) {
        assertEquals("Compressed size is unknown for entry with special compression method", e.getMessage());
    } catch (IOException e) {
        fail("Unexpected IOException: " + e.getMessage());
    }
}