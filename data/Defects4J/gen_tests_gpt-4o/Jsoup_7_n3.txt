
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class JsoupMalformedTreeTest {

    @Test
    public void testMalformedTreeWithMultipleBodyElements() {
        // Hypothetical HTML content simulating the issue
        String html = "<html><head><title>Test Page</title></head>"
                + "<body><p>First body content</p></body>"
                + "<body><p>Second body content</p></body></html>";

        // Parse the HTML using Jsoup
        Document doc = Jsoup.parse(html);

        // Count the number of <body> elements
        int bodyCount = 0;
        for (Element element : doc.getAllElements()) {
            if (element.tagName().equals("body")) {
                bodyCount++;
            }
        }

        // Assert that there should only be one <body> element directly under <html>
        assertEquals(1, bodyCount, "Expected one body element but found " + bodyCount);
    }
}
