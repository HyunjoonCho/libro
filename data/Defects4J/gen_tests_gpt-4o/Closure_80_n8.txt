
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JSSourceFile;
import com.google.javascript.jscomp.Result;

public class ClosureCompilerTest {

    public static void main(String[] args) {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setCompilationLevel(CompilerOptions.CompilationLevel.ADVANCED_OPTIMIZATIONS);

        // JavaScript input to the compiler
        String jsCode = "function x() { return delete a; }";

        // Compile the JavaScript code
        Result result = compiler.compile(
            JSSourceFile.fromCode("externs.js", ""), // No externs
            JSSourceFile.fromCode("input.js", jsCode), // Input with the error
            options
        );

        if (result.success) {
            System.out.println("Compilation successful, output:");
            System.out.println(compiler.toSource());
        } else {
            System.err.println("Compilation failed with errors:");
            result.errors.forEach(System.err::println);
        }
    }
}
