
import org.junit.Test;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.xml.sax.SAXException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import java.io.ByteArrayInputStream;
import java.io.IOException;

import static org.junit.Assert.assertEquals;

public class DomNamespaceTest {

    @Test
    public void testNamespaceInheritance() throws ParserConfigurationException, IOException, SAXException {
        String xmlContent = "<root xmlns:ns=\"http://example.com\">\n" +
                "    <ns:child>Namespaced Child</ns:child>\n" +
                "    <sibling>Non-namespaced Sibling</sibling>\n" +
                "</root>";

        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new ByteArrayInputStream(xmlContent.getBytes()));

        Element childElement = (Element) document.getElementsByTagNameNS("http://example.com", "child").item(0);
        Element siblingElement = (Element) document.getElementsByTagName("sibling").item(0);

        // Verify that the namespaces are handled correctly
        assertEquals("http://example.com", childElement.getNamespaceURI());

        // This assertion should pass if the sibling does not incorrectly inherit the namespace.
        assertEquals(null, siblingElement.getNamespaceURI());
    }
}
