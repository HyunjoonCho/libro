public void testExternalPropertyPolymorphicDeserializationWithEnum() throws IOException {
    String json = "{ \"kind\": \"CONTACT\", \"to\": { \"name\": \"Foo\" } }";

    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.registerModule(new KotlinModule());

    try {
        Message message = objectMapper.readValue(json, Message.class);
        fail("Expected JsonMappingException due to enum deserialization issue");
    } catch (JsonMappingException e) {
        assertTrue(e.getMessage().contains("Can not construct instance of enum.Invite, problem: argument type mismatch"));
    }
}