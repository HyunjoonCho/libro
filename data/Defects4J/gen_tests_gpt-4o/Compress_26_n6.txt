public void testIOUtilsSkip() throws IOException {
    byte[] data = new byte[100];
    Arrays.fill(data, (byte) 'x');
    ByteArrayInputStream bais = new ByteArrayInputStream(data);
    Cipher cipher;
    try {
        cipher = Cipher.getInstance("AES/ECB/NoPadding");
        SecretKey secretKey = KeyGenerator.getInstance("AES").generateKey();
        cipher.init(Cipher.ENCRYPT_MODE, secretKey);
    } catch (GeneralSecurityException e) {
        throw new RuntimeException(e);
    }
    CipherOutputStream cipherOutputStream = new CipherOutputStream(new ByteArrayOutputStream(), cipher);
    cipherOutputStream.write(data);
    cipherOutputStream.flush();
    cipherOutputStream.close();

    ByteArrayInputStream encryptedInput = new ByteArrayInputStream(((ByteArrayOutputStream) cipherOutputStream.getOutputStream()).toByteArray());
    CipherInputStream cipherInputStream = new CipherInputStream(encryptedInput, cipher);

    long bytesToSkip = 50;
    long skippedBytes = IOUtils.skip(cipherInputStream, bytesToSkip);

    assertEquals("IOUtils.skip() should skip the requested number of bytes", bytesToSkip, skippedBytes);
}