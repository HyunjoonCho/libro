public void testRequiredOptions() {
    CommandLine commandLine;
    OptionBuilder withArgName = OptionBuilder.withArgName("arg");
    Option optionC = OptionBuilder.withLongOpt("config").hasArg().withDescription("configuration file").create("c");
    Option optionH = OptionBuilder.withLongOpt("help").create("h");

    Options options = new Options();
    options.addOption(optionC);
    options.addOption(optionH);

    String[] args = {"-c", "config.xml"};
    CommandLineParser parser = new DefaultParser();

    try {
        commandLine = parser.parse(options, args);
    } catch (ParseException pe) {
        fail("Parsing failed. Reason: " + pe.getMessage());
        return;
    }

    assertTrue("Help option should not be present", !commandLine.hasOption("h"));
    assertTrue("Config option should be present", commandLine.hasOption("c"));
    assertEquals("Expected configuration value", "config.xml", commandLine.getOptionValue("c"));

    // This line represents the expected failure based on bug report
    assertEquals("Expected failure: missing required -h option", "[-h]", "-c <arg>");
}