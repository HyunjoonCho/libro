
import org.junit.Test;
import java.io.ByteArrayOutputStream;
import java.io.PrintStream;
import java.lang.ProcessBuilder;

import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

public class CompilerVersionOptionTest {

    @Test
    public void testCompilerVersionOption() {
        // Set up the process builder to run the jar
        ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
        
        try {
            // Redirect error stream to the output stream
            processBuilder.redirectErrorStream(true);
            
            // Capture the output
            Process process = processBuilder.start();
            ByteArrayOutputStream output = new ByteArrayOutputStream();
            try (PrintStream ps = new PrintStream(output)) {
                process.getInputStream().transferTo(ps);
            }

            // Wait for the process to finish and check the output
            int exitCode = process.waitFor();
            String outputString = output.toString();

            // Check for expected outcome
            assertTrue("The --version option should print a version statement.",
                       outputString.contains("version"));

        } catch (Exception e) {
            fail("An error occurred while trying to check the --version option: " + e.getMessage());
        }
    }
}
