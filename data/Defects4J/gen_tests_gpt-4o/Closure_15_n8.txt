script
function testOriginalBehavior() {
    var customData = { key: 'value' };

    function testRemoveKey(key) {
        var dataSlot = customData,
            retval = dataSlot && dataSlot[key],
            hadKey = dataSlot && (key in dataSlot);

        if (dataSlot) {
            delete dataSlot[key];
        }

        return hadKey ? retval : null;
    };

    console.log(testRemoveKey('key')); // Expected: 'value'
    console.log('key' in customData); // Expected: false
}

function testCompiledBehavior() {
    var customData = { key: "value" };
    
    function testRemoveKey(b) {
        var a = customData, c = a && a[b];
        a && delete a[b]; // Deletion happens before the key check
        return a && b in a ? c : null;
    }

    console.log(testRemoveKey("key")); // Expected: 'value', Compiled: null
    console.log("key" in customData); // Expected: false, Same in compiled
}

// Run the tests
console.log("Testing original behavior:");
testOriginalBehavior();

console.log("Testing compiled behavior:");
testCompiledBehavior();
