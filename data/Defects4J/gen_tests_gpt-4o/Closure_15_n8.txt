public void testDeleteKeyInStatementOrder() {
    Map<String, String> customData = new HashMap<>();
    customData.put("key", "value");
    
    assertEquals("value", testRemoveKey(customData, "key"));
    assertFalse(customData.containsKey("key"));
}

private String testRemoveKey(Map<String, String> data, String key) {
    String retval = data != null ? data.get(key) : null;
    boolean hadKey = data != null && data.containsKey(key);

    if (data != null) {
        data.remove(key);
    }

    return hadKey ? retval : null;
}