
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import java.util.List;
import static org.junit.Assert.assertArrayEquals;
import static org.mockito.Mockito.*;

public class VarargsCaptorTest {

    interface VarargsService {
        void performAction(String... args);
    }

    @Test
    public void testMockitoVarargsCaptor() {
        // Create a mock of the VarargsService interface
        VarargsService service = Mockito.mock(VarargsService.class);

        // Call the mock with varargs
        service.performAction("arg1", "arg2", "arg3");

        // Capture the varargs using ArgumentCaptor
        ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
        verify(service).performAction(captor.capture());

        // Retrieve the captured arguments
        List<String> capturedArgs = captor.getAllValues();

        // Expecting the captured arguments to match the passed varargs
        assertArrayEquals(new String[]{"arg1", "arg2", "arg3"}, capturedArgs.toArray());
    }
}
