public void testCompilerCrashOnGoogScopeLocals() {
    try {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        String code = "goog.provide(\"main\");\n" +
                      "goog.scope(function () {\n" +
                      "    var a = foo, b, c = 1;\n" +
                      "});";
        SourceFile extern = SourceFile.fromCode("externs", "");
        SourceFile input = SourceFile.fromCode("input", code);
        compiler.compile(extern, input, options);
        
        // If there is a compilation error or crash, an exception should be thrown
    } catch (Exception e) {
        fail("The compiler crashed or produced an error: " + e.getMessage());
    }
}