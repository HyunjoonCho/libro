script
/** 
 * Example of a utility function to create a class 
 */
function makeClass(name, definition) {
    var constructor = function() {};
    constructor.prototype = definition;
    return constructor;
}

/** 
 * Attempting to use @lends without prior class definition 
 * with advanced optimizations
 */

/** 
 * @constructor
 */
var Person = makeClass('Person', /** @lends {Person.prototype} */ {
    /** @type {string} */
    name: '',
    
    /** 
     * @param {string} name
     */
    setName: function(name) {
        this.name = name;
    },
    
    /** 
     * @return {string}
     */
    getName: function() {
        return this.name;
    }
});

// Closure Compiler will likely produce an error:
// ERROR - Variable Person.prototype not declared before @lends annotation.

function testLendsAnnotationIssue() {
    var person = new Person();
    person.setName('John');
    console.assert(person.getName() === 'John', "Person name should be 'John'");
}
