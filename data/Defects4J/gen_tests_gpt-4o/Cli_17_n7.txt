
import org.apache.commons.cli.*;

public class PosixParserTestBug {

    public void testStopAtNonOptionWithPosixParser() throws ParseException {
        String[] args = {"-azb"};

        Options options = new Options();
        options.addOption("a", false, "Option A");
        options.addOption("b", false, "Option B");

        CommandLineParser parser = new PosixParser();
        CommandLine cmd;

        boolean stopAtNonOption = true;
        try {
            cmd = parser.parse(options, args, stopAtNonOption);
        } catch (UnrecognizedOptionException e) {
            // This should not happen
            cmd = null;
        }

        assertNotNull(cmd);
        assertTrue(cmd.hasOption("a"));
        assertFalse(cmd.hasOption("b")); // b should not be identified as an option
        assertEquals("zb", cmd.getArgList().get(0)); // 'zb' should be treated as a non-option argument
    }
}
