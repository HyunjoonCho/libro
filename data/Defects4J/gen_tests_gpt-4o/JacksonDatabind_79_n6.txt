public void testJsonIdentityReferenceOnClassOnly() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    
    @JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property="id")
    @JsonIdentityReference(alwaysAsId=true)
    class TestClass {
        public int value;
        public TestClass() { this(0); }
        public TestClass(int v) { value = v; }
    }

    TestClass instance = new TestClass(42);
    String json = mapper.writeValueAsString(instance);
    
    // Validate that the serialized json is an ID, not an object.
    assertEquals("1", json);
}