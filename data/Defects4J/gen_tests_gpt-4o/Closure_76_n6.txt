
import org.junit.Test;
import static org.junit.Assert.*;

public class CompilerBugTest {

    private boolean echo(boolean value) {
        return value;
    }

    public Boolean originalBehavior() {
        Boolean a, b;
        if (echo(b = true) || echo(b = false))
            a = b;
        else
            a = null;
        return a;
    }

    public Boolean compiledBehavior() {
        Boolean a;
        return echo(true) || echo(a = false) ? a : null;
    }

    @Test
    public void testOriginalBehavior() {
        assertTrue("Original should return true", originalBehavior());
    }

    @Test
    public void testCompiledBehavior() {
        assertTrue("Compiled should return true", compiledBehavior());
    }
}
