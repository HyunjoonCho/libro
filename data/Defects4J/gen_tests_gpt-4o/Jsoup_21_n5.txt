
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class SelectorRegexCommaTest {

    @Test
    public void testSelectorParsingWithCommasInRegex() {
        String html = "<div>123</div><li>456</li><li>789</li><li>12,34</li>";
        Document doc = Jsoup.parse(html);
        
        // This selector should match li elements with numbers and commas
        Elements elements = doc.select("div, li:matches([0-9,]+)");
        
        // Expecting it to select 4 elements: the div and all li elements containing numbers
        assertEquals(4, elements.size());
        
        // Checking the text content to ensure correct selection
        assertEquals("123", elements.get(0).text());
        assertEquals("456", elements.get(1).text());
        assertEquals("789", elements.get(2).text());
        assertEquals("12,34", elements.get(3).text());
    }
}
