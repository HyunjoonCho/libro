public void testJscDeterministicWarning() {
    String code = 
        "// ==ClosureCompiler==\n" +
        "// @output_file_name default.js\n" +
        "// @compilation_level ADVANCED_OPTIMIZATIONS\n" +
        "// ==/ClosureCompiler==\n" +
        "var t = null;\n" +
        "\n" +
        "window.test = function() {\n" +
        "  if (t != null) {\n" +
        "    t = null;\n" +
        "  }\n" +
        "  t = 1;\n" +
        "};";
    
    CompilerOptions options = new CompilerOptions();
    CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

    Compiler compiler = new Compiler();
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("test.js", code), options);

    assertEquals("Warning detected: JSC_DETERMINISTIC_TEST", 0, compiler.getWarningCount());
}