
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.nio.charset.StandardCharsets;

import static org.junit.Assert.assertEquals;

public class UTF16BOMTest {

    @Test
    public void testUTF16StreamWithBOM() throws Exception {
        // UTF-16 encoded string with BOM
        byte[] utf16BEWithBOM = new byte[] {(byte) 0xFE, (byte) 0xFF, 0x00, 0x3C, 0x00, 0x68, 0x00, 0x74, 0x00, 0x6D, 0x00, 0x6C, 0x00, 0x3E};
        ByteArrayInputStream inputStream = new ByteArrayInputStream(utf16BEWithBOM);

        // Parsing with Jsoup
        Document doc = Jsoup.parse(inputStream, null, "");

        // Verifying the parsed content
        assertEquals("<html></html>", doc.html());
    }
}
