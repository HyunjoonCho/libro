
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class StringConversionTest {

    @Test
    public void testStringConversionOptimization() throws ScriptException {
        // Initialize a JavaScript engine
        ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");

        // JavaScript code that reproduces the problem
        String script = "var f = { valueOf: function() { return undefined; } }; String(f);";

        // Evaluate the script and get the result
        String result = (String) engine.eval(script);

        // Verify the output
        assertEquals("[object Object]", result);
    }
}
