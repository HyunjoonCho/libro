public void testBase64InputStreamRead() throws IOException {
    byte[] data = Base64.getEncoder().encode("abc".getBytes(StandardCharsets.UTF_8)); // 3 bytes so encoded length is a multiple of 3
    Base64InputStream base64InputStream = new Base64InputStream(new ByteArrayInputStream(data), true);
    byte[] buffer = new byte[10];
    int bytesRead;

    // Read until stream is exhausted
    while ((bytesRead = base64InputStream.read(buffer)) != -1) {
        assertTrue("Bytes should be read, expected positive integer, got: " + bytesRead, bytesRead > 0);
    }
}