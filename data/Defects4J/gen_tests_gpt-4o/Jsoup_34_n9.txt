
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.junit.Test;

import static org.junit.Assert.fail;

public class ParserErrorTest {

    @Test
    public void testCDATACommentedOutParsingIssue() {
        // This is the content from the gist with problematic CDATA.
        String html = "<rss><channel><title>Example Feed</title>" +
            "<description>Example feed description</description>" +
            "<item>" +
            "<title>Example Entry</title>" +
            "<description><![CDATA[" +
            "  Example content.] // ]]>\n" + // Commenting out CDATA end might cause parsing issues
            "]]>" +
            "</description>" +
            "</item>" +
            "</channel></rss>";

        try {
            // Attempt to parse the HTML
            Document document = Jsoup.parse(html, "", Parser.xmlParser());

            // If parsing doesn't throw, at least check if certain elements exist
            assertNotNull(document.select("rss").first());
            assertNotNull(document.select("channel").first());
            assertNotNull(document.select("item").first());
        } catch (Exception e) {
            fail("Parsing failed with exception: " + e.getMessage());
        }
    }
}
