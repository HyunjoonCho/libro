public void testBase64InputStreamRead() throws IOException {
    byte[] data = Base64.getEncoder().encode("abcabc".getBytes());
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(data);
    Base64InputStream base64InputStream = new Base64InputStream(byteArrayInputStream, true);
    byte[] buffer = new byte[8];

    int bytesRead = base64InputStream.read(buffer);
    while (bytesRead != -1) {
        bytesRead = base64InputStream.read(buffer);
    }
    
    int lastRead = base64InputStream.read(buffer);
    assertEquals(-1, lastRead);
}