public void testArgumentsScope() {
    Runnable function = new Runnable() {
        @Override
        public void run() {
            final Object[] args = { "arg1", "arg2" };
            Runnable innerFunction = new Runnable() {
                @Override
                public void run() {
                    final Object[] arguments = args;
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            assertArrayEquals(args, arguments);
                        }
                    }).start();
                }
            };
            innerFunction.run();
        }
    };
    function.run();
}