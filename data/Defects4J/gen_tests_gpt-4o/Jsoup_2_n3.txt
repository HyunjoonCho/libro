
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class HtmlParserTest {

    @Test
    public void testUnadornedTextFollowingScriptTag() {
        String htmlInput = "<html><body><script type=\"text/javascript\">var inside = true;</script>this should be outside.</body></html>";
        String expectedOutput = "<html><head></head><body><script type=\"text/javascript\">var inside = true;</script>this should be outside.</body></html>";

        Document document = Jsoup.parse(htmlInput, "", Parser.htmlParser());
        String parsedHtml = document.toString();

        // Jsoup automatically adds <head></head> if not present, which is why it's in expectedOutput
        assertEquals(expectedOutput, parsedHtml);
    }
}
