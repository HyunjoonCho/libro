
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.helper.W3CDom;
import org.junit.Test;
import org.w3c.dom.Element;

import javax.xml.parsers.DocumentBuilderFactory;

import static org.junit.Assert.*;

public class W3CDomNamespaceTest {

    @Test
    public void testNamespaceHandling() {
        try {
            // Sample HTML with an undeclared namespace
            String html = "<html><body><fb:like></fb:like></body></html>";
            
            // Parse HTML with Jsoup
            Document jsoupDoc = Jsoup.parse(html);

            // Convert to org.w3c.dom.Document using W3CDom
            W3CDom w3cDom = new W3CDom();
            org.w3c.dom.Document w3cDoc = w3cDom.fromJsoup(jsoupDoc);

            // Attempt to access the "fb:like" element
            Element fbLikeElement = (Element) w3cDoc.getElementsByTagName("fb:like").item(0);

            // Check if the element was properly created
            assertNotNull("Element should not be null", fbLikeElement);
        } catch (Exception e) {
            // In case of errors, fail the test and print the exception
            fail("Test failed due to exception: " + e.toString());
        }
    }
}
