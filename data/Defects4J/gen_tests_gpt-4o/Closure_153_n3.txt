public void testNamespaceDefinitionInPrototype() {
    String inputScript = "if (!Node) var Node = { };";
    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5);
    options.setLanguageOut(CompilerOptions.LanguageMode.ECMASCRIPT5);

    Compiler compiler = new Compiler();
    compiler.compile(SourceFile.fromCode("externs.js", ""), SourceFile.fromCode("input.js", inputScript), options);

    String compiledCode = compiler.toSource();

    assertTrue("Compiled code does not match expected pattern", compiledCode.contains("if(!Node)var Node={}"));
    assertFalse("Compiled code contains incorrect pattern", compiledCode.contains("Node||(Node={})"));
}