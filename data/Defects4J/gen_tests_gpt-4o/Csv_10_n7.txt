public void testCSVPrinterWithHeader() throws IOException {
    Path tempFilePath = Files.createTempFile("test", ".csv");
    try (BufferedWriter writer = Files.newBufferedWriter(tempFilePath);
         CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(writer)) {
        csvPrinter.printRecord(42);
    }

    List<String> lines = Files.readAllLines(tempFilePath);
    assertEquals("x", lines.get(0));
    assertEquals("42", lines.get(1));
}