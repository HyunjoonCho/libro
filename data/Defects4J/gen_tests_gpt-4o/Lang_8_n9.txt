
import org.apache.commons.lang3.time.FastDateFormat;
import org.junit.Test;

import java.util.Calendar;
import java.util.TimeZone;

import static org.junit.Assert.assertEquals;

public class FastDateFormatTimeZoneTest {

    @Test
    public void testFastDateFormatShouldRespectCalendarTimeZone() {
        // Set a specific timezone for the calendar different from the system default
        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("US/Pacific"));
        
        // Format to test - Time in hours & minutes with AM/PM and timezone
        FastDateFormat fdf = FastDateFormat.getInstance("h:mma z");
        
        // Format the calendar
        String formattedDate = fdf.format(calendar);
        
        // Expected output: For Pacific standard time (PST) it should end with "PST"
        // Adjust the expected pattern as per the time of the test running
        String expectedTimeZone = "PST";

        // Verify if the formatted date strings timezone matches the calendar's timezone 
        assertEquals(expectedTimeZone, formattedDate.substring(formattedDate.length() - 3));
    }
}
