public void testMissingPropertiesWithRecursiveTypes() throws Exception {
    ObjectMapper objectMapper = new ObjectMapper();
    Sub subObject = new Sub();
    
    // This step ensures Base is constructed by TypeFactory first
    JavaType baseType = objectMapper.getTypeFactory().constructType(Base.class);
    JsonNode baseJson = objectMapper.valueToTree(baseType);

    String jsonResult = objectMapper.writeValueAsString(subObject);
    
    // Verify that both base and sub properties are serialized
    assertTrue(jsonResult.contains("\"base\":1"));
    assertTrue(jsonResult.contains("\"sub\":2"));
}