
import org.apache.commons.math.analysis.UnivariateRealFunction;
import org.apache.commons.math.analysis.solvers.BrentSolver;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class BrentSolverTest {

    @Test
    public void testSolverWithEndpointAsRoot() {
        UnivariateRealFunction function = new UnivariateRealFunction() {
            @Override
            public double value(double x) {
                // (x - 2)(x + 2) = 0 has roots at x = -2 and x = 2
                return (x - 2) * (x + 2);
            }
        };

        BrentSolver solver = new BrentSolver();
        
        double rootAtMin = solver.solve(Integer.MAX_VALUE, function, -2, 0);
        assertEquals(-2.0, rootAtMin, 0.0);

        double rootAtMax = solver.solve(Integer.MAX_VALUE, function, 0, 2);
        assertEquals(2.0, rootAtMax, 0.0);
    }
}
