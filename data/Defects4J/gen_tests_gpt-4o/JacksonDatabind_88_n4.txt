public void testPolymorphicTypeIdCompatibility() {
    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.activateDefaultTyping(objectMapper.getPolymorphicTypeValidator(),
            ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE, JsonTypeInfo.As.PROPERTY);

    String json = "[\"java.util.HashMap\", {\"key\":\"value\"}]";

    try {
        Map<String, String> map = objectMapper.readValue(json, new TypeReference<Map<String, String>>() {});
        fail("Expected a MismatchedInputException due to incompatible type assignment");
    } catch (MismatchedInputException e) {
        // Success, exception expected
    } catch (Exception e) {
        fail("Expected a MismatchedInputException, but got: " + e.getClass().getName());
    }
}