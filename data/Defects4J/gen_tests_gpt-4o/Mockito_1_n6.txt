
import org.junit.Test;
import org.mockito.ArgumentCaptor;
import org.mockito.Mockito;

import static org.junit.Assert.assertArrayEquals;
import static org.mockito.Mockito.*;

public class ArgumentCaptorVarargsTest {

    interface SomeService {
        void doSomething(String... args);
    }

    @Test
    public void testArgumentCaptorWithVarargs() {
        // Create a mock of the SomeService interface
        SomeService mockService = mock(SomeService.class);

        // Call the method on the mock with varargs
        mockService.doSomething("arg1", "arg2", "arg3");

        // Capture arguments with ArgumentCaptor
        ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);
        
        // Verify that the method was called and capture the arguments
        verify(mockService).doSomething(captor.capture());

        // Check that the captured arguments are as expected
        String[] expectedArgs = {"arg1", "arg2", "arg3"};
        assertArrayEquals(expectedArgs, captor.getValue());
    }
}
