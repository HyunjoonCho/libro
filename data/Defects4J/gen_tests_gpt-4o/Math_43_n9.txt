
import org.apache.commons.math3.stat.descriptive.SummaryStatistics;
import org.apache.commons.math3.stat.descriptive.moment.Variance;
import org.junit.Test;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.assertEquals;

public class StatisticsTest {

    @Test
    public void testStandardDeviationWithVarianceImpl() {
        int[] scores = {1, 2, 3, 4};
        SummaryStatistics stats = new SummaryStatistics();
        // Setting variance to 'population variance'
        stats.setVarianceImpl(new Variance(false));

        for (int i : scores) {
            stats.addValue(i);
        }

        double sd = stats.getStandardDeviation();
        // Verify that the standard deviation should not be NaN
        assertFalse("Standard deviation should not be NaN", Double.isNaN(sd));
        
        // Verify against manually calculated population standard deviation
        double expectedSd = Math.sqrt(1.25); // Using population variance formula
        assertEquals(expectedSd, sd, 1e-9);
    }
}
