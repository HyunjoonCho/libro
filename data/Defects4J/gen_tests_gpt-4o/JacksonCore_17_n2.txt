public void testJsonGenerationExceptionWithSurrogates() {
    try {
        JsonFactory jsonFactory = new JsonFactory();
        String problematicString = "xxxxxxx\ud83d\ude00"; // Unicode surrogate example
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        JsonGenerator jsonGenerator = jsonFactory.createGenerator(outputStream, JsonEncoding.UTF8);
        
        jsonGenerator.writeStartObject();
        jsonGenerator.writeFieldName("text");
        
        // Trigger the exception
        jsonGenerator.writeRaw(problematicString);
        
        jsonGenerator.writeEndObject();
        jsonGenerator.close();
        
        fail("Expected JsonGenerationException was not thrown");
    } catch (JsonGenerationException e) {
        assertTrue(e.getMessage().contains("Split surrogate on writeRaw() input"));
    } catch (IOException e) {
        fail("Unexpected IOException: " + e.getMessage());
    }
}