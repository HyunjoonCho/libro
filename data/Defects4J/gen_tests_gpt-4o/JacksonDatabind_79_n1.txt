public void testJsonIdentityReferenceClassLevel() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ReallyAlwaysAsId obj = new ReallyAlwaysAsId(42);
    String json = mapper.writeValueAsString(obj);
    
    // The expected behavior is for the object to be serialized as a reference ID only
    assertEquals("1", json);
}

@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
@JsonIdentityReference(alwaysAsId = true)
static class ReallyAlwaysAsId {
    public int id;

    public ReallyAlwaysAsId() {
        this(0);
    }

    public ReallyAlwaysAsId(int id) {
        this.id = id;
    }
}