
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

import java.net.URL;

import static org.junit.Assert.fail;

public class JsoupBugTest {

    @Test
    public void testStringIndexOutOfBoundsException() {
        try {
            Document doc = Jsoup.parse(new URL("https://gist.githubusercontent.com/valodzka/91ed27043628e9023009e503d41f1aad/raw/a15f68671e6f0517e48fdac812983b85fea27c16/test.html"), 10_000);
            // If no exception is thrown, you might want to add assertions to verify the document content
            // depending on the intended behavior, but since we're reproducing a bug, we expect an exception.
        } catch (StringIndexOutOfBoundsException e) {
            // Expected behavior due to the bug described
            return;
        } catch (Exception e) {
            // If any other exception is caught, it indicates an unexpected failure.
            fail("Expected StringIndexOutOfBoundsException but got " + e.getClass().getSimpleName());
        }

        // If no exception is thrown, fail the test
        fail("Expected StringIndexOutOfBoundsException but no exception was thrown.");
    }
}
