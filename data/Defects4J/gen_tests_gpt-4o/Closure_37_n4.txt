public void testIncompleteFunctionDefinitionCrashesCompiler() {
    try {
        String code = "f f f ;\nfunction t";
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setIdeMode(true);
        SourceFile extern = SourceFile.fromCode("externs", "");
        SourceFile input = SourceFile.fromCode("input", code);
        compiler.compile(extern, input, options);
        fail("Expected RuntimeException due to incomplete function definition");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR."));
    }
}