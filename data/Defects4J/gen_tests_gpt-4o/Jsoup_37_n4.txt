
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.Parser;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class ElementWhitespaceTest {

    @Test
    public void testWhitespacePreservation() {
        String xmlInput = "<root>\n  <child>  \n    <grandchild>Text</grandchild>\n  </child>\n</root>";
        
        // Parse the XML input without pretty printing
        Document document = Jsoup.parse(xmlInput, "", Parser.xmlParser());
        
        // Simulate modification (e.g., change an attribute)
        Element root = document.selectFirst("root");
        if (root != null) {
            root.attr("modified", "true");
        }
        
        // Output the document as HTML
        String output = document.html();
        
        // The output should retain whitespaces as they are if prettyPrint is false
        String expectedOutput = "<root modified=\"true\">\n  <child>  \n    <grandchild>Text</grandchild>\n  </child>\n</root>";
        
        assertEquals("Whitespace should be preserved without prettyPrint", expectedOutput, output);
    }
}
