
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.parser.Parser;
import org.junit.Test;
import java.nio.charset.Charset;

import static org.junit.Assert.assertEquals;

public class JsoupCharsetTest {

    @Test
    public void testXmlEncodingDetection() throws Exception {
        // URL with XML content that has ISO-8859-1 encoding specified
        final String url = "http://www.elacontecer.com.uy/rss/hoy.xml";

        // Connect and parse the document with the XML parser
        Document doc = Jsoup.connect(url).parser(Parser.xmlParser()).get();

        // Check if the detected charset matches the expected ISO-8859-1
        Charset expectedCharset = Charset.forName("ISO-8859-1");
        assertEquals(expectedCharset, doc.charset());
    }
}
