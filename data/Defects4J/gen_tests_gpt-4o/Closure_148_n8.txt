
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;
import static org.junit.Assert.assertTrue;

public class WritingModeCssTest {

    @Test
    public void testWritingModePropertyPreserved() {
        String jsCode = "var element = document.createElement('div');" +
                        "element.style.writingMode = 'vertical-rl';";

        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        CompilationLevel.ADVANCED_OPTIMIZATIONS.setOptionsForCompilationLevel(options);

        SourceFile input = SourceFile.fromCode("input.js", jsCode);

        Result result = compiler.compile(SourceFile.fromCode("externs.js", ""), input, options);

        // Extract the compiled output
        String compiledCode = compiler.toSource();

        // Check that 'writingMode' is preserved in the compiled output
        assertTrue("writingMode should be present in compiled code",
                  compiledCode.contains("style.writingMode"));
    }
}
