public void testCSVRecordToMapWithShorterRowThanHeader() throws Exception {
    final CSVParser parser = new CSVParser(new StringReader("a,b"), CSVFormat.DEFAULT.withHeader("A", "B", "C"));
    final CSVRecord record = parser.iterator().next();
    try {
        record.toMap();
        fail("Expected ArrayIndexOutOfBoundsException or similar when header length is greater than row length");
    } catch (ArrayIndexOutOfBoundsException | IllegalArgumentException e) {
        // Test passes if this exception is thrown
    }
}