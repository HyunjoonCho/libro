
import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.linear.RealMatrixImpl;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertArrayEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class RealMatrixImplTest {

    @Test
    public void testOperateWithNonSquareMatrix() {
        // Create a non-square matrix (2x3)
        double[][] matrixData = {
                {1, 2, 3},
                {4, 5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(matrixData);

        // Create a vector of length 3
        double[] vector = {1, 2, 3};

        // Expected result should be of length 2
        double[] expected = {1 * 1 + 2 * 2 + 3 * 3, 4 * 1 + 5 * 2 + 6 * 3};

        // Operate the non-square matrix with the vector
        double[] result = matrix.operate(vector);

        // Check if the result is as expected
        assertArrayEquals(expected, result);
    }

    @Test
    public void testOperateThrowsExceptionOnIncompatibleVector() {
        // Create a non-square matrix (2x3)
        double[][] matrixData = {
                {1, 2, 3},
                {4, 5, 6}
        };
        RealMatrix matrix = new RealMatrixImpl(matrixData);

        // Create a vector of incorrect length 2
        double[] vector = {1, 2};

        // Expect an exception because the vector length does not match column count
        assertThrows(IllegalArgumentException.class, () -> {
            matrix.operate(vector);
        });
    }
}
