
import org.apache.commons.lang3.ArrayUtils;
import org.junit.Test;

import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

public class ArrayUtilsAddTest {

    @Test
    public void testAddBothParametersNull() {
        String[] stringArray = null;
        String aString = null;

        try {
            String[] result = ArrayUtils.add(stringArray, aString);
            // If no exception is thrown, we expect the type to be Object[]
            assertTrue(result instanceof Object[]);
        } catch (ClassCastException e) {
            fail("Expected no ClassCastException, but got one.");
        } catch (IllegalArgumentException e) {
            // Expected behavior as per proposed fix in the bug report
        }
    }
}
