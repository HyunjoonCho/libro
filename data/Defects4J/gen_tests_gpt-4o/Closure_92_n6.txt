
import org.junit.Test;
import static org.junit.Assert.*;

public class ModuleNamespaceTest {

    @Test
    public void testNamespaceCreationInSimpleOptimization() {
        // Simulate the order of operations in SIMPLE_OPTIMIZATIONS mode

        // Module A
        // This initialization order is incorrect and will trigger issues.
        apps = {}; 
        apps.foo.bar = {}; // This should fail due to missing `apps.foo`
        apps.foo = {};     // Too late, this should have been before apps.foo.bar

        // Mock the expected exception
        boolean exceptionThrown = false;
        
        // Module B
        try {
            apps.foo.bar.B = {}; // This should throw an exception
        } catch (Exception e) {
            exceptionThrown = true;
        }

        assertTrue("Expected runtime error for incorrect namespace assignment", exceptionThrown);

        // Module C
        // To make sure Module B's error was isolated only here
        apps.foo.bar.C = {}; 
    }

    // Debug log to showcase expected behavior (not strictly necessary):
    private static class apps {
        static foo foo = new foo();
    }

    private static class foo {
        bar bar = new bar();
    }

    private static class bar {
        Object B, C;
    }
}
