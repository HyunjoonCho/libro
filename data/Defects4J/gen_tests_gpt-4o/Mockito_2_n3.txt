
import org.junit.Test;
import org.mockito.Mockito;

import static org.mockito.Mockito.*;

public class MockitoAfterNegativeTest {

    @Test
    public void testMockitoAfterWithNegativeTime() {
        Runnable runnable = Mockito.mock(Runnable.class);

        // Verify runnable has never been run - expected to pass
        Mockito.verify(runnable, Mockito.never()).run();

        // Verify runnable has never been run after 1000 milliseconds - expected to pass
        Mockito.verify(runnable, Mockito.after(1000).never()).run();

        // This test demonstrates the bug:
        // Verify runnable run at least once after -1000 milliseconds - expected to fail but passes incorrectly
        Mockito.verify(runnable, Mockito.after(-1000).atLeastOnce()).run();
    }
}
