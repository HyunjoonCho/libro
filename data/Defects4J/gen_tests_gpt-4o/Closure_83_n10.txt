
import org.junit.Test;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;

import static org.junit.Assert.*;

public class ClosureCompilerVersionTest {

    @Test
    public void testVersionOutput() throws IOException, InterruptedException {
        // Path to your Closure Compiler JAR file
        String jarPath = "path/to/compiler.jar";

        // Command to execute the JAR file with the --version flag
        ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", jarPath, "--version");
        Process process = processBuilder.start();

        // Capture the output
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        StringBuilder output = new StringBuilder();
        String line;
        
        while ((line = reader.readLine()) != null) {
            output.append(line).append("\n");
        }
        
        // Wait for the process to finish
        int exitCode = process.waitFor();
        assertEquals("Expected the process to exit with code 0", 0, exitCode);

        // Check the content of the output
        String expectedOutput = "Closure Compiler (http://code.google.com/closure/compiler)\n" +
                                "Version: 698\n" +
                                "Built on: 2011/01/17 12:16\n";
        
        assertEquals("The output did not match the expected version information.", expectedOutput, output.toString().trim());
    }
}
