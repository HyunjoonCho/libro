public void testPolymorphicTypeDefaultImpl() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    
    // Base class with a simple property
    class Base {
        public String baseProperty = "baseValue";
    }
    
    // Subclass that extends Base
    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_OBJECT, defaultImpl = Sub.class)
    @JsonSubTypes({ @JsonSubTypes.Type(value = Sub.class, name = "sub") })
    class Sub extends Base {
        public String subProperty = "subValue";
    }
    
    // JSON without specified subtype
    String json = "{\"baseProperty\":\"base123\",\"subProperty\":\"sub456\"}";
    
    Base result = mapper.readValue(json, Base.class);
    
    assertTrue(result instanceof Sub);
    Sub subResult = (Sub) result;
    
    assertEquals("base123", subResult.baseProperty);
    assertEquals("sub456", subResult.subProperty);
}