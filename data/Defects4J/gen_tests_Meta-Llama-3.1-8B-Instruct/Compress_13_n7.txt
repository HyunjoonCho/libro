java
public void testArchiveInputStreamWithUmlauts() throws IOException {
    // Create a zip file with umlauts in directory names
    try (ZipOutputStream out = new ZipOutputStream(new ByteArrayOutputStream())) {
        ZipEntry directory = new ZipEntry("ä Directory/");
        out.putNextEntry(directory);
        out.closeEntry();

        ZipEntry file = new ZipEntry("ä Directory/file.txt");
        out.putNextEntry(file);
        out.write("Hello World!".getBytes());
        out.closeEntry();

        ZipEntry file2 = new ZipEntry("ä Directory/ö File.txt");
        out.putNextEntry(file2);
        out.write("Hello World!".getBytes());
        out.closeEntry();
    }

    try (ArchiveInputStream in = new ArchiveInputStream(new ByteArrayInputStream(new ByteArrayOutputStream()))) {
        ZipArchiveInputStream zipIn = (ZipArchiveInputStream) in;

        // Test that the directory is correctly identified as a directory
        ZipArchiveEntry entry = zipIn.getNextEntry();
        assertEquals(true, entry.isDirectory());

        // Test that the file names are correctly encoded
        entry = zipIn.getNextEntry();
        assertEquals("ä Directory/file.txt", entry.getName());

        entry = zipIn.getNextEntry();
        assertEquals("ä Directory/ö File.txt", entry