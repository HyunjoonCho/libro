public void testAcceptSingleValueAsArray() throws IOException {
    ObjectMapper om = new ObjectMapper();
    om.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);

    String json = "[{\"message\":\"messageHere\"}]";
    try {
        om.readValue(json, A.class);
        fail("Expected InputMismatchException");
    } catch (InputMismatchException e) {
        // expected
    }

    json = "{\"message\":\"messageHere\"}";
    try {
        om.readValue(json, A.class);
        fail("Expected InputMismatchException");
    } catch (InputMismatchException e) {
        // expected
    }
}