java
import org.apache.commons.math3.linear.Array2DRowRealMatrix;
import org.apache.commons.math3.linear.RealMatrix;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class QuaternionTest {

    @Test
    public void testNumericalProblemInRotationCreation() {
        // Create the vectors
        double[][] u1 = {{-4921140.837095533, -215120942504.1, -890093.279426377}};
        double[][] u2 = {{-272385809387.25, -21696649213.88, 6749688708.85}};
        double[][] v1 = {{1, 0, 0}};
        double[][] v2 = {{0, 0, 1}};

        // Create the matrices
        RealMatrix u1Matrix = new Array2DRowRealMatrix(u1);
        RealMatrix u2Matrix = new Array2DRowRealMatrix(u2);
        RealMatrix v1Matrix = new Array2DRowRealMatrix(v1);
        RealMatrix v2Matrix = new Array2DRowRealMatrix(v2);

        // Perform the computation manually with high precision
        double[] kHighPrecision = new double[]{385144