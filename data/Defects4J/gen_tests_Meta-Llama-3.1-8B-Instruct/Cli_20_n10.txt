java
public void testPosixParser() {
    PosixParser parser = new PosixParser();
    parser.setStopAtNonOption(true);
    parser.addOption('a');
    parser.addOption('b');
    parser.addArgument('b');
    List<String> tokens = Arrays.asList("--zop", "-abfoo");
    try {
        parser.parse(tokens);
        fail("Expected parsing to fail");
    } catch (Exception e) {
        // Expected exception
    }
    assertEquals(4, parser.getTokens().size());
    assertEquals("--zop", parser.getTokens().get(0));
    assertEquals("-a", parser.getTokens().get(1));
    assertEquals("-b", parser.getTokens().get(2));
    assertEquals("foo", parser.getTokens().get(3));
}
