javascript
describe('Issue with type checking when replacing a function with a stub after calling', function() {
    it('should throw an error when calling a function before replacing it', function() {
        var MyClass = function() {};
        MyClass.prototype.fn = function() {};
        var obj = new MyClass();
        expect(function() {
            obj.fn();
        }).to.throw(Error);
    });

    it('should throw an error when replacing a function after calling it', function() {
        var MyClass = function() {};
        MyClass.prototype.fn = function() {};
        var obj = new MyClass();
        obj.fn();
        obj.fn = function() {};
        expect(function() {
            obj.fn();
        }).to.throw(Error);
    });
});
