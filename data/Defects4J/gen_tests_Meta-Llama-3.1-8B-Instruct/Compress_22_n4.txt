public void testReadTruncated() throws IOException {
    byte[] input = new byte[770];
    Arrays.fill(input, (byte) 0x42);
    byte[] truncatedInput = Arrays.copyOfRange(input, 0, 769);
    BZip2CompressorInputStream bis = new BZip2CompressorInputStream(new ByteArrayInputStream(truncatedInput));
    int bytesRead = bis.read(input);
    assertEquals(769, bytesRead);
}