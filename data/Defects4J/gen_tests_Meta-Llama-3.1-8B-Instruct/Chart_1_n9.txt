java
public void testIssue983() {
    // Create a plot with a null dataset
    Plot plot = new CategoryPlot();
    plot.setDataset(null);

    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer();
    renderer.setPlot(plot);

    LegendItemCollection result = renderer.getLegendItems();
    assert result!= null; // Should not throw a NPE here
    int seriesCount = result.getSeriesCount();
    assertEquals(0, seriesCount); // Check that seriesCount is 0, not null
}
