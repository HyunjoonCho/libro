public void testClosureRemovesNeededCode() {
    ClosureCompiler compiler = new ClosureCompiler();
    String code = "Math.blah = function(test) { test.a = 5; }; var test = new Object(); Math.blah(test);";
    CompilationUnit compilationUnit = compiler.compile(code);
    assertEquals("Math.blah=function(a){a.a=5};var test={};", compilationUnit.toString());
}