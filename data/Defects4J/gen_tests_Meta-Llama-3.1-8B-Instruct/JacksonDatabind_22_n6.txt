java
@JsonSerializer(MyPojo.class)
public class MyPojoSerializer implements JsonSerializer<MyPojo> {
    @Override
    public JsonValue serialize(MyPojo myPojo, Type type, JsonGenerator jsonGenerator, SerializerProvider provider) throws JsonProcessingException {
        return myPojo.getValue();
    }
}

@JsonValue
public class MyPojo {
    private String value;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }
}

public void testCustomSerializerNotUsedWithJsonValue() {
    MyPojo myPojo = new MyPojo();
    myPojo.setValue("test");
    ObjectMapper mapper = new ObjectMapper();
    try {
        // Custom serializer should be used here, but it's not because of the @JsonValue annotation
        JsonNode jsonNode = mapper.valueToTree(myPojo);
        fail("Expected custom serializer to be used");
    } catch (JsonProcessingException e) {
        // Custom serializer should be used here, but it's not because of the @JsonValue annotation
    }
}
