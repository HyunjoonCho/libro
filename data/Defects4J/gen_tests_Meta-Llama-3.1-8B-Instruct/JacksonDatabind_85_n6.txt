java
@Test
public void testDateTimeSerializerBaseContextual() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ObjectWriter writer = mapper.writer().withFormat(StdDateFormat.getDateInstance(StdDateFormat.SHORT));
    String pattern = mapper.getSerializationConfig().getDateFormat().getPattern();
    assertEquals("yyyy-MM-dd", pattern);

    // Use the same date format for deserialization
    ObjectReader reader = mapper.reader();
    ObjectNode node = JsonNodeFactory.instance.objectNode();
    node.put("date", "2022-01-01");
    // The serializer should use the configured date format
    String actual = reader.readValue(node, String.class);
    assertEquals("2022-01-01", actual);
}
