java
public void testCSVRecordToMap() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader("Name", "Age");
    CSVParser parser = new CSVParser(format, CSVFormat.DEFAULT.withHeader("Name", "Age"));
    CSVRecord record = parser.parseRecord("Name,Age\nJohn,30");
    Map<String, String> map = record.toMap();
    assertNotNull(map);

    format = CSVFormat.DEFAULT.withHeader(null, "Age");
    parser = new CSVParser(format, CSVFormat.DEFAULT.withHeader(null, "Age"));
    record = parser.parseRecord("John,30");
    map = record.toMap();
    assertNull(map);
}
