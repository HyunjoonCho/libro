public void testTypeCheckerMissesAnnotationsOnFunctionsDefinedWithinFunctions() {
    // Define a class to mimic the JavaScript environment
    class TestClass {
        var ns = {};
        
        public void test() {
            ns.a();
            ns.a(123);
        }
        
        public void testAnonymousFunction() {
            (function() {
                /** @param {string=} b */
                ns.a = function(b) {};
            })();
            ns.a();
            ns.a(123);
        }
        
        public void testNoFunction() {
            ns.a();
            ns.a(123);
        }
    }
    
    // Test that warnings are emitted correctly
    assertWarningCount(1, "test");
    assertWarningCount(0, "testAnonymousFunction");
    assertWarningCount(0, "testNoFunction");
}