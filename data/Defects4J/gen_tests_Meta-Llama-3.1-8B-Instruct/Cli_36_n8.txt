public void testOptionComparator() {
    OptionGroup group = new OptionGroup();
    Option h = Option.builder("h").build();
    Option s = Option.builder("s").build();
    Option b = Option.builder("b").build();
    Option t = Option.builder("t").build();
    group.addOption(h)
       .addOption(s)
       .addOption(b)
       .addOption(t);
    Options options = new Options();
    options.addOptionGroup(group);
    options.addOption(Option.builder("o").build());
    HelpFormatter formatter = new HelpFormatter();
    formatter.setOptionComparator(null);
    formatter.printHelp("cmd", "", options, null);
    // The order of the groups in the output is now determined by the order of addition to the Options object
    String[] expected = {"1. ", "2. ", "3. ", "4. ", "5. ", "6. "};
    String[] actual = formatter.getOptions().getOptionGroups().get(0).getOptions().stream()
       .map(option -> option.getOpt())
       .toArray(String[]::new);
    assertArrayEquals(expected, actual);
}