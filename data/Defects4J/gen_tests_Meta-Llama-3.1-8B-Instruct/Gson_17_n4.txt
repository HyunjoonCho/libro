java
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import com.google.gson.JsonSerializationContext;
import com.google.gson.JsonSerializationContextWrapper;
import com.google.gson.JsonSerializer;
import com.google.gson.stream.JsonWriter;
import java.io.StringWriter;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.time.format.DateTimeParseException;
import java.util.TimeZone;

import org.junit.Test;
import static org.junit.Assert.*;

public class GsonSerializationTest {

    private static final Gson gson = new GsonBuilder()
           .setDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX")
           .create();

    @Test
    public void testDefaultDateTypeAdapterNullSafety() {
        ZonedDateTime date = null;
        try {
            gson.toJson(date, ZonedDateTime.class);
            fail("Expected JsonSyntaxException");
        } catch (NullPointerException e) {
            // Expected
        }

        // Test that 2.8.0 works fine
        Gson gson28_0 = new Gson();
        StringWriter writer = new StringWriter();
        gson28_0.toJson(date, ZonedDateTime.class, writer);
        writer