public void testZipArchiveError() throws Exception {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipOutputStreamzos = new ZipOutputStream(bos);
    zos.putNextEntry(new ZipEntry("test"));
    zos.write(new byte[1000]); // write more data than the buffer size
    zos.closeEntry();
    zos.close();
    bos.close();
    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    try {
        ZipInputStream zis = new ZipInputStream(bis);
        zis.getNextEntry();
        fail("Expected EOFException");
    } catch (EOFException e) {
        assertTrue(e.getMessage().length() > 100); // check that the message is too long
    }
}