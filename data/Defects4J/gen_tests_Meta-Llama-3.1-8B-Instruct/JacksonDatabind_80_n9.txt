public void testTypeResolution() {
    Class<?> baseType = new Object(){}.getClass();
    Class<?> typeWithExplicitName = MyClass.class;
    Class<?> typeWithoutExplicitName = Object.class;

    TypeResolutionContext context = new TypeResolutionContext();

    context.addTypeMapping(baseType, "baseType");
    context.addTypeMapping(typeWithExplicitName, "explicitType");
    context.addTypeMapping(typeWithoutExplicitName, "defaultType");

    assertEquals(3, context.getTypeIds().size());
    assertTrue(context.getTypeIds().contains("baseType"));
    assertTrue(context.getTypeIds().contains("explicitType"));
    assertTrue(context.getTypeIds().contains("defaultType"));

    context = new TypeResolutionContext();

    context.addTypeMapping(baseType, "baseType");
    context.addTypeMapping(typeWithoutExplicitName, "defaultType");

    assertEquals(2, context.getTypeIds().size());
    assertTrue(context.getTypeIds().contains("baseType"));
    assertTrue(context.getTypeIds().contains("defaultType"));
}