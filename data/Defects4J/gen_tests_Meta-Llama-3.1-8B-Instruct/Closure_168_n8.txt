javascript
describe('issue #107', function() {
    it('should report wrong argument count error on aliasing with @this annotation', function() {
        var makeClass = function(protoMethods) {
            var clazz = function() {
                this.initialize.apply(this, arguments);
            }
            for (var i in protoMethods) {
                clazz.prototype[i] = protoMethods[i];
            }
            return clazz;
        }

        var Person = function(name){};
        Person = makeClass({
            initialize: function(name) {
                this.name = name;
            },
            getName: function() {
                return this.name;
            },
            say: function(message) {
                // Intentionally call getName with one argument
                window.console.log(this.getName(1) +'says:'+ message);
            }
        });

        var joe = new Person('joe');
        expect(function() {
            joe.say('hi');
        }).toThrowError(/Function Person.prototype.say: called with 1 argument\(s\). Function requires at least 0 argument\(s\) and no more than 0 argument\(s\)/);
    });

    it('should not report wrong argument count error on aliasing with @this annotation when called within setTimeout', function()