java
public void testResettingDefaultNamespace() throws JXPathContextException {
    // Create a Document
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.newDocument();

    // Create a root element with a default namespace
    Element root = document.createElementNS("test111", "b:foo");
    root.setAttribute("xmlns:b", "bla");
    document.appendChild(root);

    // Create a child element with no namespace
    Element test = document.createElement("test");
    root.appendChild(test);

    // Create a child element in the default namespace
    Element bar = document.createElementNS("test111", "b:bar");
    root.appendChild(bar);

    // Set the text content of the child element
    bar.setTextContent("a");

    // Create a JXPathContext
    JXPathContext context = JXPathContext.newContext(document);

    // Create a NodePointer for the test node
    NodePointer pointer = context.getSelector().createNodePointer(document, "/b:foo/test");

    // Request the asPath() method, which should not loop
    String path = pointer.asPath();
    assertEquals("//b:foo[test]", path);
}
