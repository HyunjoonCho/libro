public void testCheckVarsUndefinedVars() throws Exception {
    File tempDir = new File(System.getProperty("java.io.tmpdir"));
    File tempFile = new File(tempDir, "test.js");
    FileWriter writer = new FileWriter(tempFile);
    writer.write("foo = {}; foo.bar = function() { alert(this.baz); };");
    writer.close();

    String[] args = {"--js", tempFile.getAbsolutePath()};
    Process process = Runtime.getRuntime().exec(new String[]{"java", "-jar", "compiler.jar", "--jscomp_warning", "checkVars", tempFile.getAbsolutePath()});
    assertEquals(1, process.waitFor());

    process = Runtime.getRuntime().exec(new String[]{"java", "-jar", "compiler.jar", "--jscomp_warning", "undefinedVars", tempFile.getAbsolutePath()});
    assertEquals(1, process.waitFor());

    process = Runtime.getRuntime().exec(new String[]{"java", "-jar", "compiler.jar", "--jscomp_warning", "checkVars", "--jscomp_warning", "undefinedVars", tempFile.getAbsolutePath()});
    assertEquals(1, process.waitFor());

    process = Runtime.getRuntime().exec(new String[]{"java", "-jar", "compiler.jar", "--js", tempFile.getAbsolutePath(), "--warning_level", "VERBOSE"});
    assertEquals(1