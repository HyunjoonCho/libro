public void testInstanceMethodInvocationWarning() {
    try {
        new Object() {
            public void foo() {
                System.out.println("bar");
            }
        }.foo.apply(this);
        fail("Expected error or warning");
    } catch (Exception e) {
        // expected
    }
}