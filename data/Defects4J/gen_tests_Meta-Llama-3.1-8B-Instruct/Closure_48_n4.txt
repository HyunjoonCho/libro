javascript
function Myclass() {}

Myclass.prototype.fn = function(success) {};

Myclass.prototype.test = function() {
    this.fn();
    this.fn = function() {};
    this.fn(); // This should throw a TypeError, but it doesn't because of the redefinition
};

test('TypeError should be thrown on redefinition', function() {
    var obj = new Myclass();
    expect(function() { obj.test(); }).toThrow();
    expect(function() { obj.fn(); }).toThrow();
});
