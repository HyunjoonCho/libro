java
public void testCSVFormatWithHeader() throws IOException {
    CSVFormat csvFormat = CSVFormat.TDF.withHeader("x");
    CSVPrinter csvPrinter = csvFormat.print(Files.newBufferedWriter(Paths.get("data.csv")));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    
    // Read the generated CSV file and verify its contents
    CSVParserSettings settings = new CSVParserSettings();
    CSVParser parser = new CSVParser(new FileReader(Paths.get("data.csv").toFile()), settings);
    CSVReader reader = parser.getReader();
    assertEquals(2, reader.readNext());
    assertEquals("x", reader.readNext());
    assertEquals(42, reader.readNext());
}
