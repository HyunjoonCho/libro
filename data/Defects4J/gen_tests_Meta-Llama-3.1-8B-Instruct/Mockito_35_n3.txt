java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.powermock.core.classloader.annotations.PowerMockIgnore;
import org.powermock.core.classloader.annotations.PowerMockery;
import org.powermock.modules.junit4.PowerMockRunner;
import org.powermock.reflect.Whitebox;

import static org.junit.Assert.assertNotNull;

@RunWith(PowerMockRunner.class)
@PowerMockIgnore({"javax.management.*"})
@PowerMockery
public class Issue107Test {

    @Test
    public void testPossibleNPEException() throws Exception {
        // Arrange
        Class<?> clazz = Mockito.mock(Class.class);
        Mockito.when(Whitebox.getInternalState(clazz, "someField")).thenReturn(null);

        // Act and Assert
        try {
            // The code that triggers the exception
            Mockito.mock(clazz);
            fail("Expected NullPointerException");
        } catch (NullPointerException e) {
            assertNotNull(e);
        }
    }
}
