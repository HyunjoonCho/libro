public void testRemoveIgnoreCaseConcurrentModificationException() {
    Element element = new Element("abc");
    element.addAttribute("attr1", "value1");
    element.addAttribute("attr2", "value2");
    List<String> removedKeys = new ArrayList<>();
    Iterator<Map.Entry<String, Attribute>> iter = element.attributes().entrySet().iterator();
    while (iter.hasNext()) {
        Map.Entry<String, Attribute> entry = iter.next();
        if (entry.getKey().equalsIgnoreCase("attr1")) {
            iter.remove();
            removedKeys.add(entry.getKey());
        }
    }
    assertEquals(1, removedKeys.size());
    assertEquals(1, element.attributes().size());
}