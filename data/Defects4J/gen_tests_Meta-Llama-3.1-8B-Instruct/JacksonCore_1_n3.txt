public void testNanAsBigDecimal() {
    JsonParser jp = new JsonParser() {
        @Override
        public String nextTextValue() {
            return "NaN";
        }

        @Override
        public int nextIntValue() {
            throw new UnsupportedOperationException();
        }

        @Override
        public long nextLongValue() {
            throw new UnsupportedOperationException();
        }

        @Override
        public double nextDoubleValue() {
            throw new UnsupportedOperationException();
        }

        @Override
        public boolean nextBooleanValue() {
            throw new UnsupportedOperationException();
        }

        @Override
        public byte nextByteValue() {
            throw new UnsupportedOperationException();
        }

        @Override
        public short nextShortValue() {
            throw new UnsupportedOperationException();
        }

        @Override
        public int nextIntValue(int defaultValue) {
            throw new UnsupportedOperationException();
        }

        @Override
        public long nextLongValue(long defaultValue) {
            throw new UnsupportedOperationException();
        }

        @Override
        public double nextDoubleValue(double defaultValue) {
            throw new UnsupportedOperationException();
        }

        @Override
        public String nextTextValue(String defaultValue) {
            return "NaN";
        }

        @Override
        public void close() {
        }

        @Override