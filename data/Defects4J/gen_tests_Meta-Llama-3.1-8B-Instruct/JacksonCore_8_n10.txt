java
public void testTextBufferInconsistentBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    assertNotSame("", buffer.getTextBuffer()); // should not be an empty string
    assertNull(buffer.getTextBuffer()); // should be null
    buffer.contentsAsString(); // reset the buffer
    assertArrayEquals(new char[0], buffer.getTextBuffer()); // should be an empty array
}
