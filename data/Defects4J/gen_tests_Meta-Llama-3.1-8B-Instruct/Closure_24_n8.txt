java
import org.mozilla.javascript.Context;
import org.mozilla.javascript.Scriptable;
import org.mozilla.javascript.ScriptableObject;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

import java.io.IOException;

public class ScopeTest {

    @Test
    public void testScope() throws IOException {
        String html = "<script>goog.scope(function() { var x = function(){}; });</script>";
        Document doc = Jsoup.parse(html);
        Context context = Context.enter();
        Scriptable scope = context.initStandardContext();
        ScriptableObject scopeObj = (ScriptableObject) scope;
        context.evaluateString(scopeObj, doc.body().toString(), "scope", 1, null);
        try {
            context.evaluateString(scopeObj, "goog.scope(function() { function x() {} });", "x", 1, null);
            assert false : "Expected a compiler