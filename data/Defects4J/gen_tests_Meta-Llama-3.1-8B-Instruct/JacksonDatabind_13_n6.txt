public void testAllowDeserializationOfNullObjectId() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    try {
        mapper.readValue("{\"id\":null}", MyClass.class);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        // expected
    }
}

public void testAllowDeserializationOfMissingObjectId() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    try {
        mapper.readValue("{\"id\":}", MyClass.class);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        // expected
    }
}

public static class MyClass {
    @JsonDeserialize(contentAs = ObjectIdDeserializer.class)
    public ObjectId id;
}