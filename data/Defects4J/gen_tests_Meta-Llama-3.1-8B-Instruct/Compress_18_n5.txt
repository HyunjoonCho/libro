public void testTarArchiveLongDirectoryName() throws IOException {
    TarArchiveOutputStream tar = new TarArchiveOutputStream(new ByteArrayOutputStream());
    tar.putArchiveEntry(new TarArchiveEntry("path/to/very/long/directory/name/that/exceeds/100/bytes/that/continues/to/exceed/100/bytes"));
    tar.closeEntry();
    tar.close();
    byte[] bytes = ((ByteArrayOutputStream) tar).toByteArray();
    try {
        TarArchiveInputStream tarIn = new TarArchiveInputStream(new ByteArrayInputStream(bytes));
        tarIn.nextEntry();
        fail("Expected IOException");
    } catch (IOException e) {
        // expected
    }
}