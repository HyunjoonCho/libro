java
public void testBZip2CompressorInputStreamReadTruncated() throws Exception {
    // Create a test file with a BZip2 compressed block that is 770 bytes long
    byte[] compressedData = new byte[770];
    // Initialize compressedData with some data...

    // Truncate the file to 769 bytes
    byte[] truncatedData = new byte[769];
    System.arraycopy(compressedData, 0, truncatedData, 0, 769);

    // Create a BZip2CompressorInputStream from the truncated data
    BZip2CompressorInputStream in = new BZip2CompressorInputStream(new ByteArrayInputStream(truncatedData));

    // Read the data from the stream
    byte[] buffer = new byte[1024];
    int bytesRead = in.read(buffer);

    // Check that the correct number of bytes was read
    assertEquals(769, bytesRead);
}
