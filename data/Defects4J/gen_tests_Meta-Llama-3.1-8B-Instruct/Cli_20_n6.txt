java
public void testPosixParser() {
    PosixParser parser = new PosixParser();
    parser.setStopAtNonOption(true);
    parser.addOption("a", 'a');
    parser.addOption("b", 'b');
    parser.addOption("b", 'b');

    String[] args = new String[] {"--zop", "-abfoo"};

    try {
        parser.parse(args);
        fail("Expected ParseException");
    } catch (ParseException e) {
        // Expected behavior
    }

    // Test that the last token is not split
    String[] expectedArgs = new String[] {"--zop", "-ab", "foo"};
    assertEquals(expectedArgs.length, parser.getRemainingArgs().length);
    for (int i = 0; i < expectedArgs.length; i++) {
        assertEquals(expectedArgs[i], parser.getRemainingArgs()[i]);
    }
}
