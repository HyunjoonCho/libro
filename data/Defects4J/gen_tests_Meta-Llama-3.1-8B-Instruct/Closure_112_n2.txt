javascript
describe('issue with template types on methods', () => {
    class Class {
        /**
         * @constructor
         * @template CLASS
         */
        constructor() {}

        /**
         * @param {function(CLASS):CLASS} a
         * @template T
         */
        foo(a) {
            return'string';
        }
    }

    /**
     * @param {number} a
     * @return {string}
     */
    function a(a) {
        return '';
    }

    it('should compile without specifying CLASS', () => {
        new Class().foo(a);
    });

    it('should fail to compile if CLASS is not specified', () => {
        class Class {
            /**
             * @constructor
             * @template CLASS
             */
            constructor() {}

            /**
             * @param {function(CLASS):CLASS} a
             */
            foo(a) {
                return'string';
            }
        }

        expect(() => {
            new Class().foo(a);
        }).toThrow();
    });
});
