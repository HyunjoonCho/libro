public void testZipFileCollision() {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipOutputStream zos = new ZipOutputStream(bos);
    ZipArchiveEntry e1 = new ZipArchiveEntry("file1.txt");
    ZipArchiveEntry e2 = new ZipArchiveEntry("file1.txt");
    ZipArchiveEntry e3 = new ZipArchiveEntry("file2.txt");
    zos.putArchiveEntry(e1);
    zos.putArchiveEntry(e2);
    zos.putArchiveEntry(e3);
    zos.close();
    byte[] zipData = bos.toByteArray();
    try {
        ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(zipData));
        ZipArchiveEntry entry1 = zis.getNextEntry();
        ZipArchiveEntry entry2 = zis.getNextEntry();
        ZipArchiveEntry entry3 = zis.getNextEntry();
        assertNotSame(e1, entry1);
        assertSame(e2, entry2);
        assertSame(e3, entry3);
    } catch (IOException e) {
        fail("Unexpected IO exception: " + e.getMessage());
    }
}