java
public class TestBeanPropertyWriter {
    
    public static class TestBean {
        @JsonFormat(shape = JsonFormat.Shape.ARRAY)
        public List<TestInner> array;

        public TestBean() {
            this.array = new ArrayList<>();
            this.array.add(new TestInner(1, "one"));
            this.array.add(new TestInner(0, null));
        }

        private static class TestInner {
            public int i;
            public String mayBeNull;

            public TestInner(int i, String s) {
                this.i = i;
                this.mayBeNull = s;
            }
        }
    }

    public static class TestBeanWriter {
        public void serialize(TestBean bean, JsonGenerator jgen, SerializerProvider prov) throws Exception {
            BeanPropertyWriter beanPropertyWriter = new BeanPropertyWriter();
            beanPropertyWriter.serializeAsColumn(bean, jgen, prov);
        }
    }

    @Test
    public void testBeanPropertyWriter() throws Exception {
        TestBean testBean = new TestBean();
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        TestBeanWriter writer = new TestBeanWriter();
        writer.serialize(testBean, new JsonFactory().createJsonGenerator(bos), new SerializerProvider());
        String json = bos.toString();
