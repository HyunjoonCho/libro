public void testCompressorStreamFactoryWithZlibHeader() {
    byte[] data = readTestData("bla.tar.deflatez");
    ByteArrayInputStream bis = new ByteArrayInputStream(data);
    try {
        CompressorStreamFactory.createCompressorInputStream(bis);
        fail("Expected CompressorException for zlib header");
    } catch (CompressorException e) {
        // expected
    }
}

private byte[] readTestData(String filename) {
    // implement a method to read a test data file
    // or use a temporary file
}