java
public void testIssue983() {
    // Create a plot with a null dataset
    Plot plot = new CategoryPlot();
    plot.setDataset(null);
    
    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer();
    renderer.setPlot(plot);
    
    LegendItemCollection result = renderer.getLegendItems();
    
    // Check that the test doesn't throw a NullPointerException
    try {
        result.getRowCount();
    } catch (NullPointerException e) {
        fail("Expected no NullPointerException");
    }
}
