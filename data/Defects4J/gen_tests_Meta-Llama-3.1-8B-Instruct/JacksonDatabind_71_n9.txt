java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;
import org.mapstruct.Mapper;
import org.mapstruct.factory.Mappers;

import java.util.HashMap;
import java.util.Map;

import static org.junit.Assert.assertEquals;

@RunWith(JUnit4.class)
public class MapstructTest {

    @Mapper
    public interface CharSequenceMapper {
        @Mappings({
            @Mapping(target = "key", source = "charSeq"),
            @Mapping(target = "value", source = "value")
        })
        Map<String, Integer> map(CharSequence charSeq, Integer value);
    }

    @Test
    public void testCharSequenceKey() {
        MapstructTestMapper mapper = Mappers.getMapper(MapstructTestMapper.class);
        MapstructTestMapper.Mapper instance = mapper.map("hello", 1);
        assertEquals("hello", instance.getKey());
        assertEquals(1, instance.getValue());
    }

    public static class MapstructTestMapper implements CharSequenceMapper {
        @Override
        public Map<String, Integer> map(CharSequence charSeq, Integer value) {
            Map<String, Integer> map = new HashMap<>();
            map.put(charSeq.toString(), value);
            return map;
        }
    }
}
