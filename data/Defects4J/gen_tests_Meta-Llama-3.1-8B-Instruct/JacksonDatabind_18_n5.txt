public void testReadValuesErrorRecovery() throws Exception {
    JsonFactory f = new JsonFactory();
    JsonParser jp = f.createParser(new StringReader("{\"a\": [1,2,3]"));
    MappingIterator<Object> it = new MappingIterator<>(f, jp, JsonNode.class);
    try {
        while (it.hasNext()) {
            it.next();
        }
        it.readValue();
    } catch (JsonProcessingException e) {
        // expected
    }
    assertEquals(2, it.getReader().getCurrentLocation().getCharOffset());
    it.close();
    jp = f.createParser(new StringReader("{\"a\": [1,2,3]"));
    it = new MappingIterator<>(f, jp, JsonNode.class, JsonParser.Feature.RECOVER_FROM_TRAILING_DATA);
    try {
        while (it.hasNext()) {
            it.next();
        }
        it.readValue();
    } catch (JsonProcessingException e) {
        // expected
    }
    assertEquals(2, it.getReader().getCurrentLocation().getCharOffset());
}