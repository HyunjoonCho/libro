public void testWriteEmbeddedObject() {
    ObjectMapper mapper = new ObjectMapper();
    JsonGenerator gen = mapper.getFactory().createGenerator(System.out);
    try {
        gen.writeStartObject();
        gen.writeFieldName("bytes");
        byte[] bytes = "Hello, World!".getBytes();
        gen.writeBinary(bytes);
        gen.writeFieldName("nullBytes");
        gen.writeNull();
        gen.writeFieldName("bytesNull");
        gen.writeBinary(null);
        gen.writeFieldName("bytesArray");
        gen.writeBinary(new byte[]{1, 2, 3});
        gen.writeFieldName("bytesArrayNull");
        gen.writeBinary(new byte[]{1, 2, 3}, null);
        gen.writeFieldName("bytesArrayNull2");
        gen.writeBinary(null, new byte[]{1, 2, 3});
        gen.writeFieldName("bytesArray2");
        gen.writeBinary(new byte[]{1, 2, 3}, new byte[]{4, 5, 6});
        gen.writeFieldName("bytesArray2Null");
        gen.writeBinary(null, new byte[]{4, 5, 6});
        gen.writeFieldName("bytesArray3");
        gen.writeBinary(new byte[]{1, 2, 3}, new