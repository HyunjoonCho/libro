java
public void testAbstractEstimator() throws Exception {
    // Create a problem with bound and unbound parameters
    LinearModel problem = new LinearModel(2);
    problem.addParameter(new Parameter("x1", 0, 10));
    problem.addParameter(new Parameter("x2", 0, 10, true));
    problem.addParameter(new Parameter("x3", 0, 10, true));
    
    // Create an estimator with the problem
    AbstractEstimator estimator = new AbstractEstimator(problem);
    
    // Test that calling getCovariances() with bound parameters crashes
    try {
        estimator.getCovariances();
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // Expected
    }
    
    // Fix the bug by using getUnboundParameters() instead of getAllParameters()
    problem = new LinearModel(2);
    problem.addParameter(new Parameter("x1", 0, 10));
    problem.addParameter(new Parameter("x2", 0, 10, true));
    problem.addParameter(new Parameter("x3", 0, 10, true));
    
    estimator = new AbstractEstimator(problem);
    double[] covariances =