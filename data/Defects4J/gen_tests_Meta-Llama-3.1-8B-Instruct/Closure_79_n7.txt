public void testRuntimeExceptionWithExternPrototype() throws Exception {
    String prototypeJs = "..."; // contents of prototype.js
    String bootloaderJs = "..."; // contents of bootloader.js
    Compiler compiler = new Compiler();
    compiler.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
    compiler.externs.add(prototypeJs);
    compiler.input.add(bootloaderJs);
    try {
        compiler.compile();
        fail("Expected RuntimeException");
    } catch (RuntimeException e) {
        // expected
    }
}