java
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.DocumentBuilderFactory;
import org.w3c.dom.DocumentBuilder;
import org.w3c.dom.DocumentBuilderFactory;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.ByteArrayInputStream;

import org.junit.Test;

import static org.junit.Assert.fail;

public class NamespaceTest {
    
    @Test(expected = Exception.class)
    public void testIncompleteNamespaceHandling() throws Exception {
        String xml = "<ElementA xmlns:A=\"http://example.com/A\" xmlns:B=\"http://example.com/B\">" +
                "<A:myAttr=\"Mytype\">" +
                "<B:ElementB>MY VALUE</B:ElementB>" +
                "</A:myAttr>" +
                "</ElementA>";
        
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        db.setNamespaceAware(true);
        Document doc = db.parse(new ByteArrayInputStream(xml.getBytes()));
        
        // Attempt to access an attribute with an unknown namespace prefix
        Element element = doc.getDocumentElement();
        element.getAttribute("A:myAttr");
    }
}
