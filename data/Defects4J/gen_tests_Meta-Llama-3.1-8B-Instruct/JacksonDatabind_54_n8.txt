java
public void testJacksonOptionalSerialization() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_ABSENT);
    mapper.registerModule(new Jdk8Module());

    JsonResult result = new JsonResult();
    result.setA(Optional.empty());
    result.setB(Optional.empty());

    // Verify that NON_ABSENT inclusion does not exclude Optional.empty()
    String json = mapper.writeValueAsString(result);
    assertEquals("{\"a\":null,\"b\":null}", json);

    // Verify that NON_ABSENT inclusion does exclude null values
    result.setA(null);
    json = mapper.writeValueAsString(result);
    assertEquals("{\"a\":null,\"b\":null}", json);

    // Verify that NON_EMPTY inclusion excludes empty values, including empty arrays and strings
    mapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);
    result.setA("");
    result.setB(Arrays.asList());
    json = mapper.writeValueAsString(result);
    assertEquals("{\"a\":\"\",\"b\":[]}", json);
}
