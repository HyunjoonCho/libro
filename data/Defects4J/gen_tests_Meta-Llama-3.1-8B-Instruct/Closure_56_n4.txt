public void testLastWarningOrErrorTruncated() {
    ByteArrayOutputStream outContent = new ByteArrayOutputStream();
    System.setOut(new PrintStream(outContent));
    // Run the compilation command here, e.g. using ProcessBuilder
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--warning_level", "VERBOSE", "test.js");
    Process process = processBuilder.start();
    process.waitFor();
    String output = outContent.toString();
    // Check that the last error is not truncated
    assertTrue(output.contains("variable bar is undefined"));
}