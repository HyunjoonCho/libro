public void testRuntimeExceptionWhenCompilingWithExternPrototype() {
    String source = "function Str(key, holder, stack) {";
    String externs = "prototype.js";
    String entryPoint = "bootloader.js";
    try {
        Compiler compiler = new Compiler();
        compiler.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
        compiler.addSource(source);
        compiler.addExterns(externs);
        compiler.setEntryPoint(entryPoint);
        compiler.compile();
        fail("Expected RuntimeException to be thrown");
    } catch (RuntimeException e) {
        // expected
    }
}