public void testPolymorphicTypeLost() throws JsonProcessingException, IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    mapper.enableDefaultTyping();

    CommandAPDU command = new CommandAPDU(new byte[] {0x01, 0x02});
    String json = mapper.writeValueAsString(command);

    // The bug is that the deserialized object should be of type CommandAPDU, but it's a byte array
    byte[] deserializedBytes = mapper.readValue(json, byte[].class);
    assertNotSame(CommandAPDU.class, deserializedBytes.getClass());
}