java
public void testUnmodifiableNonRandomAccessList() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);

    // Create an unmodifiable list of a non-random access list
    Collection<?> originalList = new LinkedList<>(Arrays.asList("first", "second"));
    Collection<?> unmodifiableList = Collections.unmodifiableList(originalList);

    // Serialize the unmodifiable list
    String json = mapper.writeValueAsString(unmodifiableList);

    // Deserialize the json back into a collection
    Collection<?> deserializedList = mapper.readValue(json, Collection.class);

    // Check that the deserialized list is equal to the original list
    assertEquals(originalList, deserializedList);
    assertEquals(originalList.getClass(), deserializedList.getClass());
}
