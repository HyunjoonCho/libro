public void testWriteBinaryWithInputStream() throws Exception {
    ToXmlGenerator gen = new ToXmlGenerator();
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    gen.writeValue(baos);
    try {
        gen.writeBinary(0, new FileInputStream("test.txt"), 10);
        fail("Expected IOException");
    } catch (IOException e) {
        // expected
    }
    try {
        gen.writeBinary(0, new FileInputStream("test.txt"));
        fail("Expected IOException");
    } catch (IOException e) {
        // expected
    }
}