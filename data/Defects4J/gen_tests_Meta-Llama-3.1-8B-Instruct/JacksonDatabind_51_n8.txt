public void testTypeIdResolver() {
    ObjectMapper mapper = new ObjectMapper();
    TypeIdResolver resolver = new TypeIdResolver() {
        @Override
        public String idFromObject(Object o) {
            return "{\"type\":\"com.example.GenericType<String>\"}";
        }

        @Override
        public JavaType typeFromId(String id) {
            return TypeFactory.defaultInstance().constructParametricType(GenericType.class, String.class);
        }
    };
    mapper.setTypeIdResolver(resolver);
    try {
        mapper.writeValueAsString(new GenericType<String>());
    } catch (JsonProcessingException e) {
        fail("Expected successful serialization");
    }
}