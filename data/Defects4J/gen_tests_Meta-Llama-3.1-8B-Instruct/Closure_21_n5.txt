java
public void testClassifyNonRightmostExpressions() {
    Expression a = Expression.createLiteral(1);
    Expression b = Expression.createLiteral(2);
    Expression c = Expression.createLiteral(42);
    Expression d = Expression.createLiteral(4);
    Expression e = Expression.createLiteral(5);

    // Test case 1
    Expression expr1 = Expression.createSequence(a, b, c);
    expr1 = expr1.removeSideEffects();
    assertEquals(1, expr1.getSequence().size());
    assertEquals(2, expr1.getSequence().get(0).getSequence().size());

    // Test case 2
    Expression expr2 = Expression.createSequence(a, Expression.createFunctionCall("bar"), c);
    expr2 = expr2.removeSideEffects();
    assertEquals(1, expr2.getSequence().size());
    assertEquals(1, expr2.getSequence().get(0).getSequence().size());

    // Test case 3
    Expression expr3 = Expression.createSequence(expr1, Expression.createSequence(d, e, c));
    expr3 = expr3.removeSideEffects();
    assertEquals(2, expr3.getSequence().size());
    assertEquals(2, expr3.getSequence().get(0).