java
public void testWhitespacePreservation() {
    Document doc = Parser.xml().parse("<root><child>   text   </child></root>");
    Element root = doc.getRootElement();
    String originalHtml = root.html();
    root.setText("new text");
    String newHtml = root.html();
    
    // Check that whitespace is preserved
    assertEquals("<root><child>   new text   </child></root>", originalHtml);
    assertEquals("<root><child>new text</child></root>", newHtml);
}
