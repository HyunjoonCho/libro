public void testTokenBufferDelegateDeserialization() {
    TokenBuffer tokenBuffer = new TokenBuffer(new ByteArrayFeeder(new byte[0]));
    tokenBuffer.writeStartObject();
    tokenBuffer.writeStringField("a", "1");
    tokenBuffer.writeStringField("b", null);
    tokenBuffer.writeEndObject();
    
    JsonCreator creator = new Value.from;
    creator.deserialize(tokenBuffer);
    
    // expected tokens after calling copyCurrentStructure()
    TokenBuffer expectedBuffer = new TokenBuffer(new ByteArrayFeeder(new byte[0]));
    expectedBuffer.writeStartObject();
    expectedBuffer.writeStringField("a", "1");
    expectedBuffer.writeStringField("b", null);
    expectedBuffer.writeEndObject();
    
    // actual tokens after calling copyCurrentStructure()
    TokenBuffer actualBuffer = new TokenBuffer(new ByteArrayFeeder(new byte[0]));
    creator.deserialize(actualBuffer);
    actualBuffer.reset();
    actualBuffer.writeStartObject();
    assertEquals("a", actualBuffer.readFieldName());
    assertEquals(1, actualBuffer.readNumberValueAsInt());
    assertEquals("b", actualBuffer.readFieldName());
    assertNull(actualBuffer.readNullValue());
    actualBuffer.writeEndObject();
    
    // comparing the two buffers
    assertEquals(expectedBuffer, actualBuffer