java
public void testNanAsBigDecimal() throws Exception {
    JsonFactory jsonFactory = new JsonFactory();
    JsonParser jp = jsonFactory.createParser(new StringReader("NaN"));
    jp.configure(Feature.ALLOW_NON_NUMERIC_NUMBERS, true);
    jp.nextToken(); // Advance to NUMBER token
    try {
        BigDecimal bd = jp.getDecimalNumber();
        fail("Expected NumberFormatException, but got BigDecimal");
    } catch (JsonParseException e) {
        assertTrue(e.getCause() instanceof NumberFormatException);
    }
}
