java
public void testExtendedBufferedReaderEOLHandling() {
    ExtendedBufferedReader reader = new ExtendedBufferedReader(new StringReader("ABC\r"));
    int lineCount = 0;
    int c = reader.read();
    assertEquals('A', (char) c);
    assertEquals(1, lineCount);
    
    c = reader.read();
    assertEquals('B', (char) c);
    assertEquals(1, lineCount);
    
    c = reader.read();
    assertEquals('C', (char) c);
    assertEquals(1, lineCount);
    
    reader = new ExtendedBufferedReader(new StringReader("ABC\n"));
    lineCount = 0;
    c = reader.read();
    assertEquals('A', (char) c);
    assertEquals(1, lineCount);
    
    c = reader.read();
    assertEquals('B', (char) c);
    assertEquals(1, lineCount);
    
    c = reader.read();
    assertEquals('C', (char) c);
    assertEquals(1, lineCount);
    
    reader = new ExtendedBufferedReader(new StringReader("ABC\r\n"));
    lineCount = 0;
    c = reader.read();
    assertEquals('A', (char) c);
    assertEquals(1, lineCount