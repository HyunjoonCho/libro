java
public void testSqlDateSerializerFormatOverride() throws Exception {
    // Try to override format with configOverride
    ObjectMapper mapper1 = new ObjectMapper();
    mapper1.configOverride(java.sql.Date.class).setFormat(JsonFormat.Value.forPattern("yyyy-MM-dd"));
    try {
        mapper1.writeValueAsString(new java.sql.Date(0));
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }

    // Now try the hacky workaround
    ObjectMapper mapper2 = new ObjectMapper();
    mapper2.registerModule(new SimpleModule() {
        {
            addSerializer(
                    java.sql.Date.class,
                    new SqlDateSerializer().withFormat(false, new SimpleDateFormat("yyyy-MM-dd"))
            );
        }
    });
    String json = mapper2.writeValueAsString(new java.sql.Date(0));
    assertEquals("0000-01-01", json);
}
