public void testCloseEventDetection() {
    // Create a switching function that increases around the first event and decreases around the second event
    // The events are very close, so the bug should occur
    final double[] x = {67.5, 112.5, 135, 153.0};
    final double[] y = {-1.0, 0.0, 0.0, -1.0};
    final double[] yDot = {0.0, 0.0, -1.0, 0.0};
    
    // Create an event with a very small occurrence time
    Event event = new Event(x[0] + 0.000001, 0.0, 1.0);
    
    // Set up the solver
    Solver solver = new Solver();
    solver.setStepSize(0.1);
    
    // Simulate the first step
    solver.solve(y, yDot, x[0], x[1], event);
    
    // Set up the second event
    event = new Event(x[2], 0.0, 2.0);
    
    // Simulate the second step with a very small occurrence time