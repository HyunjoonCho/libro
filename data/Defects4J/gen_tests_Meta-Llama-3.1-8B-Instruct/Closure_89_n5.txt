java
import com.google.common.collect.Maps;
import com.google.common.collect.Multimap;
import com.google.common.collect.Sets;

public class CompilerRemovesFunctionPropertiesTest {

    public static class TestFunction {
        public boolean alwaysCall = false;
    }

    public void testCompilerRemovesFunctionProperties() {
        TestFunction f1 = new TestFunction();
        f1.alwaysCall = true;

        Multimap<String, TestFunction> map = Maps.newHashMap();
        map.put("f1", f1);

        TestFunction f2 = new TestFunction();

        map.put("f2", f2);

        for (TestFunction f : map.get("f1")) {
            if (f.alwaysCall) {
                System.out.println("Expected f1 to be called, but it was not");
            }
        }
    }
}
