public void testBase64EncodeCRLF() throws Exception {
    Base64 b64 = new Base64();
    String s1 = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
    String s2 = "aaaaaaaaaa";
    String s3 = "a";
    byte[] b1 = s1.getBytes("UTF-8");
    byte[] b2 = s2.getBytes("UTF-8");
    byte[] b3 = s3.getBytes("UTF-8");
    byte[] result;
    result = b64.encode(b1);
    String encodedString = new String(result, "UTF-8");
    assertTrue(encodedString.contains("\r\n")); // check for CRLF
    String[] lines = encodedString.split("\r\n");
    for (String line : lines) {
        assertTrue(line.length() <= 76); // check for line length
    }
    result = b64.encode(b2);
    encodedString = new String(result, "UTF-8");
    assertTrue(encodedString.contains("\r\n")); // check for CRLF
    lines = encodedString.split("\r\n");
    for (String line : lines) {
        assertTrue(line.length() <= 76); // check for line length
    }