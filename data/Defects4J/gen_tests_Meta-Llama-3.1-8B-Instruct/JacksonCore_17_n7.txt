java
import com.fasterxml.jackson.core.JsonGenerationException;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonToken;

import java.io.IOException;
import java.io.StringWriter;
import java.util.Locale;

public class BadMsg {
    public static void main(String[] args) throws JsonGenerationException, IOException {
        StringWriter sw = new StringWriter();
        JsonGenerator jg = JsonFactory.createJsonGenerator(sw);
        jg.writeRaw("{'key': '");
        jg.writeRaw("x".repeat(1024)); // 1024 is a number that triggers the exception
        jg.writeRaw("x'}");
        jg.close();

        System.out.println(sw.toString());
    }
}

public class JsonFactory {
    public static JsonGenerator createJsonGenerator(StringWriter writer) throws IOException {
        return new JsonGenerator() {
            @Override
            public void writeRaw(String text) throws IOException {
                // Simulate the issue by not splitting the input into smaller chunks
                writeRaw(text);
            }

            @Override
            public void writeRaw(char c) throws IOException {
                // Simulate the issue by not handling surrogate pairs correctly
                if (c >= 0xD800 && c