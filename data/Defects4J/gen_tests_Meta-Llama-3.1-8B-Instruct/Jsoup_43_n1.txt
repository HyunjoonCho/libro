java
public void testElementSiblingIndex() {
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element root = doc.createElement("root");
    doc.appendChild(root);

    Element elem1 = doc.createElement("elem");
    root.appendChild(elem1);

    Element elem2 = doc.createElement("elem");
    root.appendChild(elem2);

    Element elem3 = doc.createElement("elem");
    root.appendChild(elem3);

    Element elem4 = doc.createElement("elem");
    root.appendChild(elem4);

    assertEquals(0, elem1.elementSiblingIndex());
    assertEquals(1, elem2.elementSiblingIndex());
    assertEquals(2, elem3.elementSiblingIndex());
    assertEquals(3, elem4.elementSiblingIndex());

    // Check that elem2's parent().children().get(n) does not equal elem2
    Document doc2 = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element root2 = doc2.createElement("root");
    doc2.appendChild(root2);

    Element elem5 = doc2.createElement("elem");
    root2.appendChild(elem5);

    Element elem6 = doc2.createElement("elem");
    root2.appendChild(elem6);

    Element elem7 = doc2.createElement("elem");
    root2.appendChild(elem7);

