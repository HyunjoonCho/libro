java
public void testJacksonSerialization() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    ServerIndexPair sip = new ServerIndexPair(new byte[2080]);
    byte[] indexPairBytes = mapper.writeValueAsBytes(ImmutableMap.of("key", sip));
    for (int i = 0; i < 10000; i++) {
        byte[] s = new byte[2080];
        mapper.writeValue(s, indexPairBytes);
        try {
            mapper.readValue(s, new TypeReference<Map<String, ServerIndexPair>>() {});
        } catch (JsonProcessingException e) {
            fail("Expected to deserialize without exception");
        }
    }
}
