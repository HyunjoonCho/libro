javascript
describe('Issue: Switched order of "delete key" and "key in" statements changes semantic', () => {
    let customData = { key: 'value' };

    it('should return the correct value for a key that is deleted', () => {
        let result = testRemoveKey('key');
        expect(result).toBe('value');
        expect('key' in customData).toBe(false);
    });

    function testRemoveKey(key) {
        var dataSlot = customData,
            retval = dataSlot && dataSlot[key],
            hadKey = dataSlot && (key in dataSlot);

        if (dataSlot)
            delete dataSlot[key];

        return hadKey? retval : null;
    }
});
