public void testAbstractClassSpying() {
    // Example 1
    AbstractUserAccount fakeUserAccount = spy(new FakeUserAccount());
    fakeUserAccount.addEmail("email1");
    fakeUserAccount.addEmail("email2");
    assertEquals(2, ((FakeUserAccount) fakeUserAccount).getEmails().size());

    // Example 2
    AbstractAccountService service = spy(new MockAccountService() {
        @Override
        public UserAccount getAccount(String id) {
            return new FakeUserAccount();
        }
    });
    when(service.getAccount("id")).thenReturn(new FakeUserAccount());
    verify(service).getAccount("id");

    // Example 3
    AbstractAccountRpcService service = spy(new MockAccountRpcService() {
        @Override
        public Future<Account> getAccount(String id) {
            return null;
        }
    });
    when(service.getAccount("id")).thenReturn(null);
    verify(service).getAccount("id");
}