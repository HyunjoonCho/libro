public void testCustomSerializerAttributeAvailability() throws IOException {
    Map<String, Object> map = new HashMap<>();
    map.put("data", new Data());
    String mapOut = mapper.writer().withAttribute("myAttr", "Hello!").writeValueAsString(map);
    assertEquals("{\"data\":{\"aStr\":\"The value is: Hello!\"}}", mapOut);

    ObjectNode tree = mapper.createObjectNode();
    tree.putPOJO("data", new Data());
    String treeOut = mapper.writer().withAttribute("myAttr", "Hello!").writeValueAsString(tree);
    assertEquals("{\"data\":{\"aStr\":\"The value is: Hello!\"}}", treeOut);
}