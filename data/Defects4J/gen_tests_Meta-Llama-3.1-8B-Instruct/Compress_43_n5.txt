public void testZipVersionNeededToExtract() throws IOException {
    ZipArchiveOutputStream zos = new ZipArchiveOutputStream(new ByteArrayOutputStream());
    zos.setLevel(ZipArchiveOutputStream.DEFLATED);
    zos.putNextEntry(new ZipEntry("test"));
    zos.closeEntry();
    zos.setLevel(ZipArchiveOutputStream.STORED);
    zos.putNextEntry(new ZipEntry("test"));
    zos.closeEntry();
    zos.close();
    byte[] archive = new ByteArrayOutputStream().toByteArray();
    ZipArchiveInputStream zis = new ZipArchiveInputStream(new ByteArrayInputStream(archive));
    ZipEntry entry1 = zis.getNextEntry();
    ZipEntry entry2 = zis.getNextEntry();
    assertEquals(2, entry1.getExtraField(ZipShortField.LOCAL_VERSION_NEEDED_TO_EXTRACT));
    assertEquals(2, entry2.getExtraField(ZipShortField.LOCAL_VERSION_NEEDED_TO_EXTRACT));
}