public void testMissingOptionExceptionMessage() throws Exception {
    Option option1 = new Option("f", "format");
    Option option2 = new Option("s", "source");
    Option option3 = new Option("p", "properties");
    OptionParser parser = new OptionParser();
    parser.addOption(option1);
    parser.addOption(option2);
    parser.addOption(option3);
    parser.parse("-h", new String[0]);
    try {
        parser.parse("-s", new String[0]);
        fail("Expected MissingOptionException");
    } catch (MissingOptionException e) {
        String expectedMessage = "Missing required options: -f -s -p";
        String actualMessage = e.getMessage();
        if (actualMessage == null) {
            fail("getMessage() returned null");
        } else {
            assertEquals(expectedMessage, actualMessage);
        }
    }
}