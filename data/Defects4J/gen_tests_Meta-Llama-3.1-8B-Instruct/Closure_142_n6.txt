public void testSortByReference() {
    int threshold = 250;
    // Create an array of arrays
    Object[][] arr = new Object[threshold][];
    for (int i = 0; i < threshold; i++) {
        arr[i] = new Object[] { i };
    }
    // Sort the array of arrays
    Arrays.sort(arr, new Comparator<Object[]>() {
        @Override
        public int compare(Object[] o1, Object[] o2) {
            return o1[0].hashCode() - o2[0].hashCode();
        }
    });
    // Check that the arrays were modified
    for (int i = 1; i < threshold; i++) {
        assertEquals(i, arr[i][0]);
    }
}