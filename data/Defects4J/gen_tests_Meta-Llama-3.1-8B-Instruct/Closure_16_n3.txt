public void testJSCompilerTypedefResolution() {
    JSCompiler compiler = new JSCompiler();
    compiler.addProvide("a.b.c");
    compiler.enterScope();
    compiler.addVariable("b", "a.b");
    compiler.addVariable("c", "b.c");
    try {
        compiler.addTypedef("c.MyType", "string");
        compiler.addFunction("c.myFunc", new Function() {
            public void apply(Context context, Arguments arguments) {}
        }, new String[] {"c.MyType"}, new String[] {"x"}, new String[] {"The variable."});
        fail("Expected compiler error");
    } catch (JSCompilerException e) {
        // expected
    }
}