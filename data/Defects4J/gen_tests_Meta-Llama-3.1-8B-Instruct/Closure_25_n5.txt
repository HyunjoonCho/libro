javascript
function testAnonymousObjectInference() {
    /**
     * @param {{prop1: string, prop2: (number|undefined)}} parry
     */
    function callz(parry) {
        if (parry.prop2 && parry.prop2 < 5) {
            console.log('alright!');
        }
        console.log(parry.prop1);
    }

    // This should compile fine
    callz({prop1: 'hi'});

    // This should not compile
    try {
        new callz({prop1: 'hi'});
        assert(false, "Expected error");
    } catch (e) {
        assert(e.message.includes("actual parameter 1 of callz does not match formal parameter"));
    }
}
