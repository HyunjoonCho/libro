java
public void testHelpFormatterWrapPos() {
    HelpFormatter formatter = new HelpFormatter();
    String description = "This is a very long description that will wrap incorrectly when printed by the HelpFormatter. It will wrap to many characters beyond the specified width.";
    formatter.printHelp("test", new Option[] { new Option("option", "description") }, 80, description);
    String lines[] = description.split("\n");
    for (int i = 1; i < lines.length; i++) {
        String line = lines[i];
        int width = 80 - 4; // subtract 4 for the prefix "option: "
        int startPos = 0;
        int pos = formatter.findWrapPos(line, width, startPos);
        // the line should wrap at the correct position
        if (pos > startPos + width) {
            fail("Line " + (i + 1) + " wraps to many characters: " + line.substring(startPos, pos));
        }
    }
}
