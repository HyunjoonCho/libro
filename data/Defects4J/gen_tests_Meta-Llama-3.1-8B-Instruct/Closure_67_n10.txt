public void testAdvancedCompilation() {
    AdvancedCompiler compiler = new AdvancedCompiler();
    String code = "function A() { this._x = 1; } A.prototype['func1'] = A.prototype.func1; A.prototype.func1 = function() { this._x = 2; this.func2(); } A.prototype.func2 = function() { this._x = 3; this.func3(); } window['A'] = A;";
    String minified = compiler.minify(code);
    assertEquals("function A() { this.a = 1; } A.prototype.func1 = A.prototype.b; A.prototype.b = function() { this.a = 2; this.c(); }; window.A = A;", minified);
}