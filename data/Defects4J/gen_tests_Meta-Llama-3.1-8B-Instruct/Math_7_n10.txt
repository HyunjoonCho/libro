public void testEventStateNotUpdated() {
    // Create a solver with multiple events
    Solver solver = new Solver();
    solver.addEvent(0, new Event1());
    solver.addEvent(1, new Event2());

    // Set the initial condition
    double[] y0 = new double[2];
    y0[0] = 0;
    y0[1] = 0;
    solver.setInitialConditions(y0);

    // Simulate the first step
    solver.step();

    // Trigger the first event, which resets the state
    Event1.eventOccurred(solver);

    // The second event should not have been triggered yet, so its state should still be at the initial condition
    Event2 event2 = (Event2) solver.getEvents().get(1);
    assertEquals(0, event2.getState()[0], 1e-6);
    assertEquals(0, event2.getState()[1], 1e-6);
}