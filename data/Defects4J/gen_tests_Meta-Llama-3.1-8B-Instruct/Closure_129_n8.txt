public void testCastFunctionBeforeCall() {
    JavaScriptEngine engine = new JavaScriptEngine();
    engine.execute("var f = (function() {\n" +
            "  var o = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n" +
            "  return o['GetVariable'];\n" +
            "})();");
    Object result1 = engine.execute("(0,f)('$version')");
    assertNotEquals("version string", result1);

    engine.execute("var f = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable");
    Object result2 = engine.execute("(f)('$version')");
    assertTrue(result2 instanceof String);
}