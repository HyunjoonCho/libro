javascript
// Test that casting a function before calling it produces bad code and breaks plugin code
var code1 = `
console.log(/\*\* @type {function(!string):!string} \*/ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'])( '$version' ))
`;
var code2 = `
console.log(/\*\* @type {!string} \*/ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable']( '$version' )))
`;

// Test that code1 produces incorrect code
var output1 = compileAndRun(code1);
expect(output1).toContain("(0,");

// Test that code2 produces correct code
var output2 = compileAndRun(code2);
expect(output2).not.toContain("(0,");
