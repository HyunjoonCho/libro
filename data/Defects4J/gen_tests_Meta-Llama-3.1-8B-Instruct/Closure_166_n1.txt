typescript
describe('anonymous object type inference inconsistency', () => {
    it('should throw error when passing object to func2', () => {
        const func = (record: { prop: string }) => {
            console.log(record.prop);
        };

        const func2 = (record: { prop: string, prop2: string | undefined } | string) => {
            if (typeof record ==='string') {
                console.log(record);
            } else {
                console.log(record.prop);
            }
        };

        const obj = { prop: 'a' };
        func(obj);
        expect(() => func2(obj)).toThrowError();
    });

    it('should not throw error when passing string to func2', () => {
        const func2 = (record: { prop: string, prop2: string | undefined } | string) => {
            if (typeof record ==='string') {
                console.log(record);
            } else {
                console.log(record.prop);
            }
        };

        func2('hello');
    });
});
