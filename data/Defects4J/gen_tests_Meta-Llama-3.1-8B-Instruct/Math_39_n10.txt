public void testTooLargeFirstStep() {
    // Create a function that returns a large value to force the first step to be too large
    final int MAX_VALUE = 1000000;
    final double[] y = new double[] { MAX_VALUE };
    final double[] dydx = new double[] { 1.0 };
    final double min = 0.0;
    final double max = 0.1;

    // Use a short integration range to force the first step to be too large
    Integrator integrator = new Integrator(new ODE() {
        @Override
        public void integrate(double t, double[] y, double[] dydx, double tInc) {
            // Return a large value to force the first step to be too large
            y[0] = MAX_VALUE;
        }
    }, 0.0, 0.1, y, dydx);

    try {
        integrator.integrate();
        fail("Expected an exception to be thrown");
    } catch (ODEException e) {
        // Expected exception
    }
}