public void testTruncatedZipArchive() throws IOException {
    File tempFile = File.createTempFile("test", ".zip");
    try (ZipArchiveOutputStream zos = new ZipArchiveOutputStream(tempFile)) {
        zos.putArchiveEntry(new ZipArchiveEntry("test"));
        zos.closeArchiveEntry();
    }
    // make the file smaller than the expected minimum size
    Files.write(Paths.get(tempFile.getAbsolutePath()), new byte[10]);
    ZipArchiveInputStream zis = new ZipArchiveInputStream(new FileInputStream(tempFile));
    assertEquals(-1, zis.read());
}