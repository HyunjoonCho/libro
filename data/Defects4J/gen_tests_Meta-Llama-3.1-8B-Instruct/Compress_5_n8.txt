java
public void testTruncatedZipArchive() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipOutputStream zos = new ZipOutputStream(bos);
    zos.putNextEntry(new ZipEntry("test"));
    zos.closeEntry();
    zos.close();

    ZipArchiveInputStream zais = new ZipArchiveInputStream(new ByteArrayInputStream(bos.toByteArray()));
    int bytesRead = zais.read();
    assertEquals(-1, bytesRead);
}
