java
public void testVarianceEvaluate() {
    double[] values = {1.0, 2.0, 3.0, 4.0, 5.0};
    double[] weights = {1.0, 1.0, 1.0, 1.0, 1.0};
    double mean = 3.0;
    double expectedVariance = (2.0 * 1.0 + 1.0 * 1.0 + 0.0 * 1.0 + 1.0 * 1.0 + 2.0 * 1.0) / (1.0 + 1.0 + 0.0 + 1.0 + 1.0) - mean * mean;
    double actualVariance = Variance.evaluate(values, weights, mean, 0, 2);
    assertEquals(expectedVariance, actualVariance, 1e-9);

    // Test with full length to ensure it doesn't work as expected
    actualVariance = Variance.evaluate(values, weights, mean, 0, values.length);
    // Since the method is supposed to be incorrect, we can't assert equality here