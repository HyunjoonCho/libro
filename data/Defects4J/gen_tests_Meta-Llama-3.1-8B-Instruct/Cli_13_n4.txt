java
public void testArgumentDefaultsPreventCommandLineUsage() {
    Option option = new Option("option", true, "value");
    option.setDefault("default");

    WritableCommandLine cmd = new WritableCommandLine();
    cmd.addOption(option);

    try {
        cmd.parse("option value");
        fail("Expected IllegalArgumentException to be thrown");
    } catch (IllegalArgumentException e) {
        // Expected
    }

    // With the patch, the following should not throw an exception
    cmd.addOption(option, "value");
    cmd.parse("option value");
}
