java
public class TestSomething {
    public static class Ruleform {}
    public static class Something {
        public <T extends Ruleform> T getEntity() {
            return null;
        }
        public <T extends Ruleform> void setEntity(T entity) {}
    }

    @Test
    public void testSerialization() throws Exception {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(bos);
        Something something = new Something();
        oos.writeObject(something);
        oos.flush();
        oos.close();
        
        ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
        ObjectInputStream ois = new ObjectInputStream(bis);
        Something deserializedSomething = (Something) ois.readObject();
        // Use a different type to verify the issue
        try {
            deserializedSomething.setEntity((Object) new Ruleform());
            fail("Expected ClassCastException");
        } catch (ClassCastException e) {
            // Expected
        }
    }
}
