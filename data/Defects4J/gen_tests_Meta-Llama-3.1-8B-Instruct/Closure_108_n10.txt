public void testPreconditionCrash() {
    Map<String, Object> ns = new HashMap<>();
    Map<String, Object> sub = new HashMap<>();
    sub.put("C", new Object());
    ns.put("sub", sub);
    
    Map<String, Object> goog = new HashMap<>();
    goog.put("scope", new Runnable() {
        @Override
        public void run() {
            sub = ns.get("sub");
            Object x = null;
        }
    });
    
    Preconditions.checkNotNull(goog.get("scope"));
    ((Runnable) goog.get("scope")).run();
}