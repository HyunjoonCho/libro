public void testPrototypesWithQuotesWarning() throws Exception {
    // Create a JavaScript engine
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("javascript");

    // Compile the code
    engine.eval("var MyClass = function() {}; MyClass.prototype['MyMethod'] = function(a) { this.a = a; }; window['MyClass'] = MyClass;");

    // Verify the warning is produced
    String[] warnings = ((JavaScriptEngine) engine).getWarnings();
    assertTrue(warnings.length > 0);
    for (String warning : warnings) {
        assertTrue(warning.contains("dangerous use of the global this object"));
    }

    // Compile the code with externs
    engine.eval("var MyParent = function() {}; MyParent.prototype.MyMethod = function(a) { };");
    engine.eval("var MyClass = function() { }; MyClass.prototype['MyMethod'] = function(a) { this.a2 = a; }; window['MyClass'] = MyClass;");

    // Verify the warning is produced
    warnings = ((JavaScriptEngine) engine).getWarnings();
    assertTrue(warnings.length > 0);
    for (String warning : warnings) {
        assertTrue(warning