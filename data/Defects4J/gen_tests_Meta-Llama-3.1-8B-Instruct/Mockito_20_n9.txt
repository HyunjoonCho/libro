public void testAbstractClassSpying() {
    // Example 1
    FakeUserAccount userAccount = new FakeUserAccount();
    when(userAccount.getEmails()).thenReturn(Arrays.asList("email1", "email2"));
    userAccount.addEmail("email3");
    assertEquals(3, userAccount.getEmails().size());

    // Example 2
    MockAccountService service = new MockAccountService() {
        @Override
        public UserAccount getAccount(String id) {
            return new UserAccount() {
                @Override
                public List<String> getEmails() {
                    return Arrays.asList("email1", "email2");
                }
                @Override
                public void addEmail(String email) {
                    // do nothing
                }
            };
        }
    };
    when(service.getAccount("id")).thenAnswer(invocation -> service.getAccount("id"));
    service.getAccount("id");
    verify(service).getAccount("id");

    // Example 3
    MockAccountRpcService service = new MockAccountRpcService() {
        @Override
        public Future<Account> getAccount(String id) {
            return new MockFuture<>(new Account()) {
                @Override
                public void onCompleted(Runnable runnable) {
                    runnable.run();