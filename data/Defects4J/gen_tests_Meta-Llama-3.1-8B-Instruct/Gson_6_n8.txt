public void testGsonNullPointerException() {
    TypeAdapterFactory adapterFactory = null;
    Gson gson = new GsonBuilder().setPrettyPrinting().create();
    try {
        gson.fromJson("{\"key\":\"value\"}", String.class, adapterFactory);
    } catch (NullPointerException e) {
        // expected
    }
}