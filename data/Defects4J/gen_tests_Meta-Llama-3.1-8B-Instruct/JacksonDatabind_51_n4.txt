public void testTypeIdResolver() {
    TypeFactory typeFactory = new TypeFactory();
    TypeIdResolver resolver = new TypeIdResolver() {
        @Override
        public Type findType(DeserializationConfig config, TypeKey typeKey) {
            JavaType type = typeFactory.constructParametricType(Map.class, Integer.class, String.class);
            return type;
        }
    };
    ObjectMapper mapper = new ObjectMapper();
    mapper.setTypeFactory(typeFactory);
    mapper.setTypeIdResolver(resolver);
    JavaType javaType = mapper.getTypeFactory().constructType(Map.class);
    FieldAccessor acc = FieldAccessor.getInstance(javaType);
    assertNotSame(Integer.class, acc.getType());
}