public void testCreateArchiveInputStreamTextFileDetection() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bos.write("Hello World!".getBytes());
    bos.write(0); // EOF
    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    ArchiveStreamFactory asf = new ArchiveStreamFactory();
    try {
        asf.createArchiveInputStream(bis);
        fail("Expected exception for non-archive text file");
    } catch (IOException e) {
        // Expected behavior
    }
}