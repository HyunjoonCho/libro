java
public class RecursiveTypeSerializationTest {

    static class Base implements IFace<Sub> {
        @JsonProperty("base")
        int base = 1;
    }

    static class Sub {
        @JsonProperty("sub")
        int sub = 2;
    }

    interface IFace<T> {
    }

    @Test
    public void testRecursiveTypeSerialization() throws JsonProcessingException {
        Sub sub = new Sub();
        ObjectMapper mapper = new ObjectMapper();
        JsonNode json = mapper.writeValueAsBytes(sub);
        JsonNode expectedJson = new ObjectMapper().valueToTree(new Sub());
        JsonNode expectedJsonWithBase = new ObjectMapper().valueToTree(new Base());

        // Expected JSON: {"base":1,"sub":2}
        assertEquals(expectedJsonWithBase, json);
    }
}
