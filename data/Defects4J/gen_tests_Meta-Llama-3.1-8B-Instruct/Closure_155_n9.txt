public void testOverzealousArgumentsOptimisation() {
    Object obj = new Object();
    Object a = new Object();
    Object b = new Object();

    Object originalFunction = new Function() {
        @Override
        public Object apply(Object... args) {
            return null;
        }
    };

    Object optimisedFunction = new Function() {
        @Override
        public Object apply(Object... args) {
            args[0] = obj;
            return apply(obj, args);
        }
    };

    originalFunction.apply(a, b);
    assertNotSame(obj, a);

    optimisedFunction.apply(a, b);
    assertSame(obj, a);
}