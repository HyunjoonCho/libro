public void testIssueAdvancedOptimizations() throws IOException {
    // Create a temporary file for the input JavaScript code
    File inputFile = File.createTempFile("input", ".js");
    FileWriter writer = new FileWriter(inputFile);
    writer.write("window['anchor'] = function (obj, modifiesProp) {\n" +
            " return (function (saved) {\n" +
            " return modifiesProp(obj) + saved;\n" +
            " })(obj['prop']);\n");
    writer.close();

    // Compile the JavaScript code
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar",
            "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--warning_level", "VERBOSE",
            "--externs", "window.js",
            "--js", inputFile.getAbsolutePath(),
            "--js_output_file", "output.js");
    Process process = processBuilder.start();
    process.waitFor();

    // Read the output JavaScript code
    File outputFile = new File("output.js");
    String output = new Scanner(outputFile).useDelimiter("\\Z").next();

    // Check that the output is incorrect
    Assert.assertFalse(output.contains("HOLD"));
}