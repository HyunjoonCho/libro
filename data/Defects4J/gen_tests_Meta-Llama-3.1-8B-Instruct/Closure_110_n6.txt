public void testScope() {
    Closure scope = new Closure(new Runnable() {
        @Override
        public void run() {
            Closure privateScope = new Closure(new Runnable() {
                @Override
                public void run() {
                    // @private
                    void test() {}
                }
            });
        }
    });
    try {
        scope.run();
        Closure inner = scope.get("test");
        fail("Expected exception for private function");
    } catch (Exception e) {
        // Expected exception
    }
}