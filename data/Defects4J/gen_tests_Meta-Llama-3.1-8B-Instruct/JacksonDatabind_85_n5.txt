java
public class TestDateTimeSerializerBase {
    
    @Test
    public void testDateTimeSerializerBaseContextual() throws JsonProcessingException {
        ObjectWriter ow = new ObjectMapper().writer();
        ObjectWriter owCustomFormat = new ObjectMapper().writer().withFormat(new SimpleDateFormat("yyyy-MM-dd"));
        
        // Test case 1: Using @JsonFormat on a field
        @JsonFormat(pattern = "yyyy-MM-dd")
        private static class TestBean1 {
            @JsonFormat(pattern = "yyyy-MM-dd")
            private Date date;
        }
        String json1 = ow.writeValueAsString(new TestBean1());
        String json1CustomFormat = owCustomFormat.writeValueAsString(new TestBean1());
        
        // Test case 2: Using a custom date format
        private static class TestBean2 {
            private Date date;
        }
        ObjectMapper mapper = new ObjectMapper();
        mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd"));
        String json2 = ow.writeValueAsString(new TestBean2());
        String json2CustomFormat = owCustomFormat.writeValueAsString(new TestBean2());
        
        // Test case 3: Using StdDateFormat.DATE_FORMAT_STR_ISO8601
        private static class TestBean3