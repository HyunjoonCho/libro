public void testToStringStyleMemoryLeak() {
    try {
        ThreadLocal<ToStringStyle> threadLocal = new ThreadLocal<>();
        threadLocal.set(ToStringStyle.SHORT_PREFIX_STYLE);
        Thread thread = new Thread(() -> {
            threadLocal.get();
            // Do some work to prevent thread from finishing immediately
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        });
        thread.start();
        thread.join();
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
}