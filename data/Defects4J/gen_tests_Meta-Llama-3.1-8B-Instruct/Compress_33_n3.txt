java
public void testCompressorStreamFactoryWithZlibHeader() throws IOException {
    // Create a test file with a zlib header
    try (FileOutputStream fos = new FileOutputStream("test.deflatez")) {
        // Write a zlib header
        byte[] header = new byte[] { 0x78, 0x9c };
        fos.write(header);
        // Write some deflate data (just some random bytes)
        byte[] data = new byte[10];
        new Random().nextBytes(data);
        fos.write(data);
    }

    // Try to create a compressor stream
    try {
        CompressorStreamFactory.createCompressorInputStream(new FileInputStream("test.deflatez"));
        fail("Expected CompressorException");
    } catch (CompressorException e) {
        // Expected exception
    }

    // Clean up
    new File("test.deflatez").delete();
}
