public void testIssue() {
    int[] es = new int[] {1, 0};
    int e = es.length;
    int s = 0;
    if (es[--e] == es[e + s]) {
        es[e] = 0;
    } else {
        es[e] = 1;
    }
    assert es[e] == (es[e] == es[e + s]? 0 : 1);
    // Manually check the array to see the correct behavior
    assert es[0] == (es[0] == es[1]? 0 : 1);
}