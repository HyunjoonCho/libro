javascript
// input.js
window["anchor"] = function (obj, modifiesProp) {
  return (function (saved) {
    return modifiesProp(obj) + saved;
  })(obj["prop"]);
}

// Compile with:
// java -jar.../build/compiler.jar \
//   --compilation_level ADVANCED_OPTIMIZATIONS \
//   --warning_level VERBOSE \
//   --externs window.js \
//   --js input.js \
//   --js_output_file output.js

// Expected output:
// window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};

// Actual output:
// window.foo=function(a,b){return b(a)+a.prop};

// Test case:
function testAnchorFunction() {
  var obj = {};
  obj.prop = 'value';
  var modifiesProp = function (x) { return x.toString(); };
  var anchor = window["anchor"];
  var result = anchor(obj, modifiesProp);
  assertEquals('valuevalue', result);
}
