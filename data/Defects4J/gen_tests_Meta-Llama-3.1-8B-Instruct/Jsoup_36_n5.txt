public void testRobustCharsetDetection() {
    String url = "http://example.com";
    Document document = Jsoup.connect(url).execute().parse();
    assertEquals("UTF-8", document.charset());
}