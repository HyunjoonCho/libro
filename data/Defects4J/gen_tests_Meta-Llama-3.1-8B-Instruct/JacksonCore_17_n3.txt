public void testJsonGenerationException() {
    byte[] data = "x".repeat(64) + "xd800xd83d".getBytes(StandardCharsets.UTF_8);
    try (ByteArrayOutputStream bos = new ByteArrayOutputStream();
         JsonGenerator gen = new JsonFactory().createGenerator(bos, JsonEncoding.UTF8)) {
        gen.writeRaw(data);
        gen.flush();
        gen.close();
        fail("Expected JsonGenerationException");
    } catch (JsonGenerationException e) {
        // expected
    }
}