java
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class AmdModuleTest {

    @Test
    public void testAmdModuleInSubdirectory() throws Exception {
        // Create a test directory structure
        File testDir = new File("test");
        testDir.mkdirs();

        // Create the first AMD module in lib/Foo.js
        File libDir = new File(testDir, "lib");
        libDir.mkdirs();
        File fooFile = new File(libDir, "Foo.js");
        FileWriter writer = new FileWriter(fooFile);
        writer.write("define('module$lib$Foo', [], function() { return 'Foo'; });");
        writer.close();

        // Create the second AMD module in Bar.js
        File barFile = new File(testDir, "Bar.js");
        writer = new FileWriter(barFile);
        writer.write("define('module$Bar', ['module$lib$Foo'], function(Foo) { return 'Bar:'+ Foo; });");
        writer.close();

        // Compile the files with Bar.js as the main module
        ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--transform_amd_modules",
                "--process_common_js_modules",