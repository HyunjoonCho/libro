public void testVersionOption() {
    try {
        Process process = Runtime.getRuntime().exec(new String[] {"java", "-jar", "compiler.jar", "--version"});
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line = reader.readLine();
        assertEquals("Closure Compiler (http://code.google.com/closure/compiler)", line);
        line = reader.readLine();
        assertEquals("Version: 698", line);
        line = reader.readLine();
        assertEquals("Built on: 2011/01/17 12:16", line);
        line = reader.readLine();
        fail("Expected end of output, but got more");
    } catch (IOException e) {
        fail("Expected successful execution, but got exception");
    }
}