java
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;

import org.junit.Test;

import java.util.concurrent.locks.Lock;

public class GsonTest {

    @Test(expected = RuntimeException.class)
    public void testGsonWithLock() {
        Gson gson = new GsonBuilder().create();
        String jsonString = "{\"lock\":{\"sync\":{\"state\":0}}}";
        JsonElement json = JsonParser.parseString(jsonString);
        JsonObject jsonObject = json.getAsJsonObject();
        Lock lock = new java.util.concurrent.locks.ReentrantLock();
        gson.fromJson(json, lock.getClass());
    }
}
