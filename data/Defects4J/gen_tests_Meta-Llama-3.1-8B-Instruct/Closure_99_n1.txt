javascript
describe('Prototypes declared with quotes produce a JSC_USED_GLOBAL_THIS warning', () => {
    it('should produce a warning', () => {
        // Arrange
        const console = {
            warn: jest.fn(),
        };

        // Act
        (function MyClass() {});
        MyClass.prototype["MyMethod"] = function(a) {
            this.a = a;
        };
        window["MyClass"] = MyClass;

        // Assert
        expect(console.warn).toHaveBeenCalledTimes(1);
        expect(console.warn).toHaveBeenCalledWith("dangerous use of the global this object.");
    });

    it('should produce a warning when implementing an interface', () => {
        // Arrange
        const console = {
            warn: jest.fn(),
        };

        // Act
        (function MyParent() {});
        MyParent.prototype.MyMethod = function(a) {};

        (function MyClass() {});
        MyClass.prototype["MyMethod"] = function(a) {
            this.a2 = a;
        };
        window["MyClass"] = MyClass;

        // Assert
        expect(console.warn).toHaveBeenCalledTimes(2);
        expect(console.warn).toHaveBeenCalledWith("dangerous use of the global this object.");
        expect(console.warn).toHaveBeenCalledWith("property MyMethod on interface MyParent is not implemented