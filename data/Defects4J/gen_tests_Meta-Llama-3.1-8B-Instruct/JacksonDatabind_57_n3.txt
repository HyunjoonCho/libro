java
public void testReadValuesIgnoringOffsetAndLength() throws JsonProcessingException {
    ObjectReader reader = new ObjectMapper().readerForArray(Map.class);
    String json = "{\"a\":1,\"b\":2}";
    byte[] data = json.getBytes(StandardCharsets.UTF_8);
    byte[] fullData = Arrays.copyOfRange(data, 0, data.length);
    byte[] partialData = Arrays.copyOfRange(data, 0, data.length / 2);

    Map<String, Integer> resultFull = reader.readValue(fullData);
    Map<String, Integer> resultPartial = reader.readValue(partialData);

    // If the bug is present, the results should be the same
    assertEquals(resultFull, resultPartial);
}
