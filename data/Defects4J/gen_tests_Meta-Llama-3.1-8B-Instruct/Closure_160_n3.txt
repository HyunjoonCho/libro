public void testUndefinedVars() throws Exception {
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", "test.js");
    pb.redirectErrorStream(true);
    Process p = pb.start();
    p.waitFor();
    String output = new String(p.getInputStream().readAllBytes());
    assertTrue(output.contains("WARNING - variable foo is undefined"));
    p = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "VERBOSE").start();
    p.waitFor();
    output = new String(p.getInputStream().readAllBytes());
    assertTrue(output.contains("WARNING - variable foo is undefined"));
    p = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "globalThis").start();
    p.waitFor();
    output = new String(p.getInputStream().readAllBytes());
    assertTrue(output.contains("WARNING - dangerous use of the global this object"));
    p = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", "test.js", "--jscomp_warning", "checkVars").start();
    p.waitFor();
    output = new String(p.getInputStream().readAllBytes());