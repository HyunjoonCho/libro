java
public void testCheckVarsUndefinedVarsDiagnostics() {
    String testJs = "foo = {}; foo.bar = function() { alert(this.baz); };";
    String[] args1 = {"--js", testJs};
    String[] args2 = {"--js", testJs, "--warning_level", "VERBOSE"};
    String[] args3 = {"--js", testJs, "--jscomp_warning", "globalThis"};
    String[] args4 = {"--js", testJs, "--jscomp_warning", "checkVars"};
    String[] args5 = {"--js", testJs, "--jscomp_warning", "undefinedVars"};

    // Test case 1: checkVars and undefinedVars do not work
    assertNotEquals(0, runCompiler(args4));
    assertNotEquals(0, runCompiler(args5));

    // Test case 2: checkVars and undefinedVars do not work, but VERBOSE does
    assertNotEquals(0, runCompiler(args4));
    assertNotEquals(0, runCompiler(args5));

    // Test case 3: globalThis works
    assertEquals(0, runCompiler(args3));

    // Helper method to run the compiler with given arguments
    private int run