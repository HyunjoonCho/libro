public void testProcessClosurePrimitives() throws Exception {
    // Test with --process_closure_primitives false
    System.setProperty("process_closure_primitives", "false");
    Process process = Runtime.getRuntime().exec(new String[]{"java", "-cp", System.getProperty("java.class.path"), "MyCompiler", "--process_closure_primitives", "false"});
    assertEquals(0, process.waitFor());
    
    // Test with --process_closure_primitives true (default)
    System.setProperty("process_closure_primitives", "true");
    process = Runtime.getRuntime().exec(new String[]{"java", "-cp", System.getProperty("java.class.path"), "MyCompiler", "--process_closure_primitives", "true"});
    assertEquals(0, process.waitFor());
    
    // Check that primitives were processed in both cases
    // Note: This test assumes that the compiled code is not a JAR file
    // and that the output files are in the same directory as the test
    File fileFalse = new File("MyCompiler_false.class");
    File fileTrue = new File("MyCompiler_true.class");
    assertFalse(fileFalse.exists());
    assertTrue(fileTrue.exists());
}