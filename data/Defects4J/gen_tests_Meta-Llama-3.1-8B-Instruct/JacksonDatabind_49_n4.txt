public void testJsonIdentityInfoForwardReferences() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    Foo foo = new Foo();
    Bar bar = new Bar();
    foo.bar1 = bar;
    foo.bar2 = bar;
    
    String json = mapper.writeValueAsString(foo);
    // Output should be {"bar1":0,"bar2":0} because both fields reference the same object
    assertEquals("{\"bar1\":0,\"bar2\":0}", json);
}