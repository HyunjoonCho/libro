public void testDeserializeExternalTypeId() {
    ObjectMapper mapper = new ObjectMapper();
    JavaType type = mapper.getTypeFactory().constructType(OuterClass.class);
    ObjectReader reader = mapper.readerFor(type).withTypeReference(OuterClass.class);
    String json = "{\"type\":\"com.example.OuterClass\",\"field\":\"value\"}";
    try {
        reader.readValue(json);
        fail("Expected DeserializationProblemKey with External Type Id");
    } catch (JsonMappingException e) {
        // expected
    }
}

class OuterClass {
    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY)
    public static class InnerClass {
        @JsonProperty("field")
        private String value;
    }
}