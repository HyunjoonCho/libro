javascript
describe('issue 123', function() {
    it('should not wrap function calls in a cast', function() {
        // Test case 1: function cast
        var func = /\*\* @type {function(!string):!string} \*/ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable']);
        var result = func('$version');
        expect(result).not.to.equal(0); // Check that the cast did not wrap the function in a cast
        expect(typeof result).toBe('string'); // Check that the function call returned a string

        // Test case 2: function call without cast
        func = (new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'];
        result = func('$version');
        expect(typeof result).toBe('string'); // Check that the function call returned a string
    });
});
