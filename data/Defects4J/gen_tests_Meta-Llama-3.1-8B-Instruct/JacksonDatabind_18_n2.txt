public void testErrorRecovery() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    JsonNode json = mapper.readTree("{\"a\": [\"b\", \"c\""));
    JsonParser jp = mapper.treeAsTokens(json).iterator();
    jp.nextToken();
    jp.nextToken(); // should throw JsonProcessingException
    try {
        jp.nextToken(); // should recover to end of array
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        // expected
    }
    jp.close();
}