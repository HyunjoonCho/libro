public void testUndefinedVars() throws Exception {
    String[] args = {"--js", "test.js"};
    String output = runCompilerWithOutput(args);
    assertFalse(output.contains("WARNING - variable foo is undefined"));
    
    args = new String[] {"--js", "test.js", "--jscomp_warning", "VERBOSE"};
    output = runCompilerWithOutput(args);
    assertTrue(output.contains("WARNING - variable foo is undefined"));
    
    args = new String[] {"--js", "test.js", "--jscomp_warning", "globalThis"};
    output = runCompilerWithOutput(args);
    assertTrue(output.contains("WARNING - dangerous use of the global this object"));
    
    args = new String[] {"--js", "test.js", "--jscomp_warning", "checkVars"};
    output = runCompilerWithOutput(args);
    assertFalse(output.contains("WARNING - variable foo is undefined"));
    
    args = new String[] {"--js", "test.js", "--jscomp_warning", "undefinedVars"};
    output = runCompilerWithOutput(args);
    assertFalse(output.contains("WARNING - variable foo is undefined"));
}

private String runCompilerWithOutput(String[] args) throws Exception {
    // implementation to run the compiler with the given arguments and return