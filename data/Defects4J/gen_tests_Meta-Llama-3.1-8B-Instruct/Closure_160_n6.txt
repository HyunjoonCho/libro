java
public void testCheckVarsUndefinedVarsDiagnostics() {
    String testJs = "foo = {};" +
            "foo.bar = function() { alert(this.baz); }";

    // test that checkVars and undefinedVars do not work from command line
    List<String> output1 = runCompilerWithWarnings(testJs, "--jscomp_warning", "checkVars");
    assertTrue(output1.isEmpty());

    List<String> output2 = runCompilerWithWarnings(testJs, "--jscomp_warning", "undefinedVars");
    assertTrue(output2.isEmpty());

    // test that warning_level VERBOSE works
    List<String> output3 = runCompilerWithWarnings(testJs, "--warning_level", "VERBOSE");
    assertTrue(output3.size() == 2);

    // test that globalThis works
    List<String> output4 = runCompilerWithWarnings(testJs, "--jscomp_warning", "globalThis");
    assertTrue(output4.size() == 1);
}

private List<String> runCompilerWithWarnings(String testJs, String... args) {
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", testJs);
    pb.command().addAll(Arrays.asList(args));
    Process p;
    try {
        p =