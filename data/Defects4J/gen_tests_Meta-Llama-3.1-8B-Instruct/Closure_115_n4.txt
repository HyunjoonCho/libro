public void testAdvancedOptimizations() throws Exception {
    // Create a temporary directory for compilation
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "test-advanced-optimizations");
    tempDir.deleteOnExit();

    // Create input file
    File inputFile = new File(tempDir, "input.js");
    BufferedWriter writer = new BufferedWriter(new FileWriter(inputFile));
    writer.write("window['anchor'] = function (obj, modifiesProp) {\n");
    writer.write("  return (function (saved) {\n");
    writer.write("    return modifiesProp(obj) + saved;\n");
    writer.write("  })(obj['prop']);\n");
    writer.close();

    // Compile with advanced optimizations
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--warning_level", "VERBOSE", "--externs", "window.js", "--js", inputFile.getAbsolutePath(), "--js_output_file", tempDir.getAbsolutePath() + "/output.js");
    Process process = pb.start();
    int exitCode = process.waitFor();

    // Check the compiled output
    File outputFile = new File(tempDir, "output.js