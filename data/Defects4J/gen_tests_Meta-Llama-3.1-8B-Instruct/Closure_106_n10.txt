public void testCollapseProperties() {
    // Create a simple JavaScript file that triggers the exception
    String jsCode = "goog.exportSymbol('foo', function() {});";
    
    // Compile the JavaScript code with ADVANCED_OPTIMIZATIONS
    Compiler compiler = new Compiler();
    compiler.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
    compiler.compile(new SourceFileExpando("test.js", jsCode));
    
    // Verify that no exception is thrown
    // (Note: The actual assertion will depend on the expected behavior of the compiler)
    // For this example, we'll just verify that the compilation was successful
    assertTrue(compiler.getWarnings().isEmpty());
}