public void testLongDirectoryNames() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    TarArchiveOutputStream tas = new TarArchiveOutputStream(baos);
    tas.putArchiveEntry(new TarArchiveEntry("path/to/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/long/directory/name"));
    tas.closeEntry();
    tas.close();
    assertThrows(IOException.class, () -> tas.putArchiveEntry(new TarArchiveEntry("path/to/another/long/directory/name")));
}