javascript
// test.js
function preload_check_all() {
    console.log("preload_check_all");
}

// test.js
goog.require('goog.testing.jsunit');

function testClosureCompilerFunctionName() {
    var code = 'function preload_check_all() { console.log("preload_check_all"); }';
    var compiledCode = goog.closure.compile(code);
    var func = compiledCode.toFunction();
    assertEquals("preload_check_all", func.name); // expected: "preload_check_all"
    assertEquals("preload_check_all", compiledCode.toSource().match(/function\s+preload_check_all/)[0].trim()); // expected: "preload_check_all"
    var originalCode = 'preload_check_all();'; // function call
    var compiledOriginalCode = goog.closure.compile(originalCode);
    var originalFunc = compiledOriginalCode.toFunction();
    assertEquals("preload_check_all", originalFunc.name); // expected: "preload_check_all"
    var compiledOriginalCodeSource = compiledOriginalCode.toSource();
    assertNotEquals("preload_check_all", compiledOriginalCodeSource.match(/function\s+preload_check_all/)[0].trim()); // expected: "f" (not "preload_check_all")
}
