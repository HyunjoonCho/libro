public void testTarDirectoryLongName() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    TarArchiveOutputStream tas = new TarArchiveOutputStream(bos);
    TarArchiveEntry entry = new TarArchiveEntry("verylongdirectoryname/verylongdirectoryname/verylongdirectoryname");
    entry.setSize(0); // this is incorrect, as the size is actually the size of the directory name
    tas.putArchiveEntry(entry);
    tas.closeEntry();
    tas.close();
    assertTrue(bos.size() > 0);
}