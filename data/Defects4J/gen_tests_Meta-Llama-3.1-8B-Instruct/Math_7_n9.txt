public void testEventStateNotUpdated() {
    ODEIntegrator ode = new ODEIntegrator();
    Event e1 = new Event() {
        public boolean eventOccurred(double t, double[] y) {
            ode.resetState();
            return true;
        }
    };
    Event e2 = new Event() {
        public boolean eventOccurred(double t, double[] y) {
            // This event should not be triggered in the same step as e1
            return false;
        }
    };
    ode.addEvent(e1);
    ode.addEvent(e2);
    ode.step(1);
    // Check that the event e2 was not updated correctly
    // For example, check that its eventOccurred method is still using the old state
    assertEquals(0, ode.getState().length);
}