public void testOptimizationFailsWithVariableInCatchClause() {
    try {
        Object getStack = new Object() {
            public Object getErrorObject() {
                try {
                    throw new Error("");
                } catch (Error err) {
                    return err;
                }
            }
        };
        getStack = getStack.getErrorObject();
    } catch (Error err) {
        err = null;
    }
    try {
        System.out.println(getStack.getClass().getMethod("getErrorObject").invoke(getStack));
    } catch (Exception e) {
        fail("Expected getErrorObject to be called");
    }
}