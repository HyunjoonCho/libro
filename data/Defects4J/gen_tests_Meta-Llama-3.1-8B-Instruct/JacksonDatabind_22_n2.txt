public void testCustomSerializerPrecedence() {
    // Given
    ObjectMapper mapper = new ObjectMapper();
    CustomSerializer serializer = new CustomSerializer();
    mapper.registerModule(new SimpleModule().addSerializer(MyClass.class, serializer));
    
    // When
    MyClass obj = new MyClass();
    JsonNode json = mapper.valueToTree(obj);
    
    // Then
    assertNotSame(serializer, json.get("field").getSerializer());
}

class MyClass {
    @JsonValue
    public String getValue() {
        return "value";
    }
}

class CustomSerializer extends JsonSerializer<MyClass> {
    @Override
    public void serialize(MyClass value, JsonGenerator gen, SerializerProvider provider) throws IOException {
        gen.writeString("custom-value");
    }
}