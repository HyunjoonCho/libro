public void testBase64InputStream() throws IOException {
    byte[] data =...; // the input data from the bug report
    ByteArrayInputStream bais = new ByteArrayInputStream(data);
    Base64InputStream bis = new Base64InputStream(bais);
    byte[] buf = new byte[1024];
    int bytesRead = bis.read(buf);
    bis.close();
    assertEquals(-1, bytesRead);
    bais = new ByteArrayInputStream(data);
    bis = new Base64InputStream(bais);
    bis.read(buf);
    bis.close();
    try {
        bis.read(buf);
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}