public void testScopeLocalWithAliasedInTypeDeclaration() throws Exception {
    JavaScriptParser parser = new JavaScriptParser();
    JavaScriptFile file = parser.parse("var goog = {};goog.scope;\n" +
            "var ns = {};ns.sub = {};/** @constructor */ns.sub.C = function() {};\n" +
            "goog.scope(function() { var sub = ns.sub; /** @type {sub.C} */ var x = null; });");

    Preconditions.checkNotNull(file.getScopeChain());
    Preconditions.checkNotNull(file.getScopeChain().getScope(0));
    Preconditions.checkNotNull(file.getScopeChain().getScope(1));
}