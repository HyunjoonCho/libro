public void testUndefinedVars() {
    String testCode = "foo = {}; foo.bar = function() { alert(this.baz); };";
    String[] args = {"--jscomp_warning", "checkVars", "--jscomp_warning", "undefinedVars"};
    String[] output1 = new String[] {"test.js:1: ERROR - variable foo is undefined"};
    String[] output2 = new String[] {"test.js:1: ERROR - variable foo is undefined", "test.js:1: WARNING - variable baz is undefined"};
    String[] output3 = new String[] {"test.js:1: WARNING - variable foo is undefined"};
    String[] output4 = new String[] {"test.js:1: WARNING - variable foo is undefined"};

    // Check that checkVars and undefinedVars don't work separately
    String[] result1 = runCompiler(testCode, args);
    assertArrayEquals(output1, result1);

    // Check that checkVars and undefinedVars don't work together
    String[] result2 = runCompiler(testCode, args);
    assertArrayEquals(output2, result2);

    // Check that globalThis works
    args = new String[] {"--jscomp_warning", "globalThis"};