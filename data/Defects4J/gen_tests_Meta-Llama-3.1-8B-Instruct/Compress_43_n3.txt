java
public void testVersionNeededToExtract() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zaos = new ZipArchiveOutputStream(new BufferedOutputStream(baos));
    ZipEntry entry = new ZipEntry("test.txt");
    zaos.putArchiveEntry(entry);
    // Write some data to the entry
    zaos.write("Hello World!".getBytes());
    zaos.closeEntry();

    // Create the local file header with the default version needed to extract
    byte[] localHeader = new byte[30];
    zaos.getLocalHeader(localHeader, 0, entry);

    // Create the central directory entry with the correct version needed to extract
    ZipArchiveEntry centralDirectoryEntry = new ZipArchiveEntry(entry);
    centralDirectoryEntry.setSize(13);
    centralDirectoryEntry.setMethod(8); // Deflate compression
    centralDirectoryEntry.setZip64(false);
    zaos.putCentralDirectory(centralDirectoryEntry, localHeader);

    // Compare the version needed to extract in the local header and central directory
    assertEquals(20, zaos.getVersionNeededToExtract(entry.getMethod(), entry.isZip64()));
    int lfhVersionNeeded = Integer.reverseBytes(new byte[] {localHeader[14], localHeader[15]});
