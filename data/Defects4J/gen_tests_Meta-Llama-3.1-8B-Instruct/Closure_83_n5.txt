public void testVersionOption() throws Exception {
    Process process = Runtime.getRuntime().exec("java -jar compiler.jar --version");
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String line;
    while ((line = reader.readLine())!= null) {
        System.out.println(line);
    }
    assertEquals("Closure Compiler (http://code.google.com/closure/compiler)\nVersion: 698\nBuilt on: 2011/01/17 12:16", getOutputWithoutVersionMessage(process));
}

private String getOutputWithoutVersionMessage(Process process) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    StringBuilder sb = new StringBuilder();
    String line;
    boolean versionMessage = false;
    while ((line = reader.readLine())!= null) {
        if (line.contains("Closure Compiler (http://code.google.com/closure/compiler)")) {
            versionMessage = true;
        } else if (line.contains("Built on:")) {
            break;
        }
        if (!versionMessage) {
            sb.append(line).append("\n");
        }
    }
    return sb.toString().trim();
}