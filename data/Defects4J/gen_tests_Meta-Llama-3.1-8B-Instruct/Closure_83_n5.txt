java
public void testVersionOption() {
    // Run the command
    Process process = Runtime.getRuntime().exec(new String[] {"java", "-jar", "compiler.jar", "--version"});
    // Check that the error message is printed first
    String error = getErrorStream(process);
    assertTrue(error.contains("Option \"--version\" requires operand"));
    // Check that the version info is printed next
    String version = getOutputStream(process);
    assertTrue(version.contains("Closure Compiler (http://code.google.com/closure/compiler)"));
    // Check that the full list of options is printed last
    String options = getOutputStream(process);
    assertTrue(options.contains("--help"));
}

private String getErrorStream(Process process) {
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getErrorStream()))) {
        return reader.readLine();
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
}

private String getOutputStream(Process process) {
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
        StringBuilder builder = new StringBuilder();
        String line;
        while ((line = reader.readLine())!= null) {
            builder.append(line).append("\n");
        }
        return builder.toString().trim();
    } catch (IOException