public void testJsonFormatShapeOnEnum() {
    ObjectMapper mapper = new ObjectMapper();
    JsonFormat annotation = JsonFormat.Shape.NUMBER_INT.annotationType().newInstance();
    mapper.configure(MapperFeature.USE_ANNOTATIONS, true);
    mapper.addMixIn(Color.class, MixIn.class);
    mapper.addMixInAnnotation(JsonFormat.class, MixIn.class);
    mapper.addMixInAnnotation(annotation, MixIn.class);
    mapper.configure(MapperFeature.USE_ANNOTATIONS, false);
    mapper.addMixIn(Color.class, MixIn.class);
    assertEquals("1", mapper.writeValueAsString(new Color()));
}

class MixIn {
    @JsonFormat(shape = JsonFormat.Shape.NUMBER_INT)
    public static class Color {
    }
}