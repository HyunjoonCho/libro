public void testIssue() {
    // Create a simple JavaScript engine
    JavaScriptEngine engine = new JavaScriptEngine();

    // Create a JavaScript object
    Scriptable scope = engine.getTopScope();

    // Define the window object
    scope.put("window", scope);

    // Define the anchor function
    engine.execute("window['anchor'] = function (obj, modifiesProp) { return (function (saved) { return modifiesProp(obj) + saved; })(obj['prop']); }");

    // Call the anchor function
    Scriptable result = engine.execute("anchor({prop: 'hello'}, function (obj) { obj.prop +='world'; return obj; })");

    // Get the window object from the result
    Scriptable window = result;

    // Define a function to get the foo function from the window object
    engine.execute("var foo = window.foo");

    // Call the foo function
    result = engine.execute("foo({prop: 'hello'}, function (obj) { obj.prop +='world'; return obj; })");

    // Get the result of the foo function
    String resultStr = engine.execute("result").toString();

    // Check if the result is as expected
    assertEquals("window