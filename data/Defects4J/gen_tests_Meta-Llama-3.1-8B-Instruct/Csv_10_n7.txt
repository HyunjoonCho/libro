public void testCSVFormatWithHeader() throws Exception {
    CSVFormat csvFormat = CSVFormat.TDF.withHeader("x");
    CSVPrinter csvPrinter = csvFormat.print(Files.newBufferedWriter(Paths.get("data.csv")));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    BufferedReader reader = Files.newBufferedReader(Paths.get("data.csv"));
    String line1 = reader.readLine();
    String line2 = reader.readLine();
    assertEquals("x", line1.trim());
    assertEquals("42", line2.trim());
    reader.close();
    Files.delete(Paths.get("data.csv"));
}