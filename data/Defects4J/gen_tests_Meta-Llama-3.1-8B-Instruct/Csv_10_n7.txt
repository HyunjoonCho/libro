java
public void testCSVFormatWithHeader() throws Exception {
    try (CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(Files.newBufferedWriter(Paths.get("data.csv"))) {
        csvPrinter.printRecord(42);
        csvPrinter.close();
        // Load the file and check the contents
        String expectedContent = "x\n42\n";
        String actualContent = Files.readString(Paths.get("data.csv"));
        assertEquals(expectedContent, actualContent);
    }
}
