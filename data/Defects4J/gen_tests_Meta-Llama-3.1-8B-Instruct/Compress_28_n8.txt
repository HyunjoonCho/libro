java
public void testTarArchiveInputStreamSilentlyFinished() throws IOException {
    // Create a corrupted BZip2 file
    try (BZip2CompressorOutputStream bos = new BZip2CompressorOutputStream(new FileOutputStream("test-corrupted.tar.bz2"))) {
        bos.write(new byte[]{0x00}); // Write a single byte to make it corrupted
    }

    // Attempt to read from the corrupted archive
    try (TarArchiveInputStream input = new TarArchiveInputStream(new BZip2CompressorInputStream(new FileInputStream("test-corrupted.tar.bz2"), true))) {
        assertThrows(IOException.class, () -> {
            while (input.getNextEntry()!= null) {
                // Do nothing
            }
        });
    }
}
