public void testResolveChainCollapse() {
    Gson gson = new Gson();
    Type type = new TypeToken<Foo1<?>>() {}.getType();
    Type type2 = new TypeToken<Foo2<?>>() {}.getType();
    Type type3 = new TypeToken<Foo1>() {}.getType();
    Type type4 = new TypeToken<Foo2>() {}.getType();

    assertEquals(type, gson.getAdapter(type).getType());
    assertEquals(type, gson.getAdapter(type3).getType());
    assertEquals(Object.class, gson.getAdapter(type2).getType());
    assertEquals(Object.class, gson.getAdapter(type4).getType());
}

private static class Foo1<A> {
    Foo2<? extends A> foo2;
}

private static class Foo2<B> {
    Foo1<? super B> foo1;
}