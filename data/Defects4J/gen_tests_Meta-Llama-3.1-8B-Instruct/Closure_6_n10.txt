javascript
function testThisTypeChecking() {
    function F() {}
    F.prototype.bar = function() { this.baz(); };
    F.prototype.baz = function() {};

    function G() {}
    G.prototype.bar = F.prototype.bar;

    var f = new F();
    var g = new G();

    // Test that bar() in F and G have different this types
    try {
        g.bar();
        assert(false, "Expected TypeError");
    } catch (e) {
        assert(e instanceof TypeError, "Expected TypeError, but got " + e);
    }
}
