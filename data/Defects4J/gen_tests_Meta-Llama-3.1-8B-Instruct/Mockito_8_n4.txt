public void testSelfReferentialGenericInterface() {
    GenericsSelfReference<?> genericSelfReference = new GenericsSelfReference<Object>() {
        @Override
        public GenericsSelfReference<?> self() {
            return this;
        }
    };

    GenericMetadataSupport genericMetadata = inferFrom(GenericsSelfReference.class).resolveGenericReturnType(genericSelfReference.getClass().getMethod("self").getGenericReturnType());

    assertSame(genericSelfReference.getClass(), genericMetadata.rawType());
}