java
import com.google.common.collect.ImmutableMap;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.SourceFile;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.SourceMap;
import com.google.javascript.jscomp.SourceMapWriter;
import com.google.javascript.jscomp.Externs;

public class TestExternExportWithTypedef {
    public static void main(String[] args) {
        String source = """
            @typedef typedef MyType {function(x: number): void}
            var a = MyType; // references the typedef
            @externs
            export { MyType as MyType2 };
            function foo(x?: MyType2) { } // tries to embed the typedef body
            """;

        Compiler compiler = new Compiler();
        SourceFile sourceFile = compiler.createSourceFile("test.js", source, null, null, false);
        compiler.compile(sourceFile);
        Externs externs = compiler.getExterns();

        // Verify that the externs contain the correct information
        ImmutableMap<String, String> externsMap = externs.getExports();
        assertEquals(1, externsMap.size());
        assertEquals("MyType2", externsMap.keySet