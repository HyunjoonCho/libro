public void testPrototypeMethodRemoved() {
    Object foo = new Object();
    foo.getClass().getField("bar").set(foo, new Object() {
        public void bar1() {
            System.out.println("bar1");
        }
    });

    foo.getClass().getField("foobar").set(foo, new Object() {
        public Object bar() {
            return new Object() {
                public void bar1() {
                    System.out.println("bar1");
                }
            };
        }
    });

    try {
        ((Object) foo.getClass().getField("foobar").get(foo)).getClass().getField("bar1").setAccessible(true);
        ((Object) foo.getClass().getField("foobar").get(foo)).getClass().getField("bar1").get(null);
    } catch (Exception e) {
        fail("Expected 'bar1' to be printed to the console");
    }
}