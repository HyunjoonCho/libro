javascript
describe('testTypeCheckingError', function() {
    it('should report error at first line of test()', function() {
        var MyClass = function() {}
        MyClass.prototype.fn = function(success) {}
        MyClass.prototype.test = function() {
            this.fn();
            this.fn = function() { };
            this.fn(); // should throw TypeError
        }
        var myClass = new MyClass();
        expect(function() { myClass.test() }).toThrowError(TypeError);
    });

    it('should report error at second line of test()', function() {
        var MyClass = function() {}
        MyClass.prototype.fn = function(success) {}
        MyClass.prototype.test = function() {
            this.fn = function() { };
            this.fn(); // should throw TypeError
        }
        var myClass = new MyClass();
        expect(function() { myClass.test() }).toThrowError(TypeError);
    });
});
