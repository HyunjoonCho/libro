java
import org.apache.commons.jxpath.JXPathContext;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

import javax.xml.parsers.DocumentBuilderFactory;
import java.io.StringReader;

public void testIteratePointers() throws Exception {
    String xml = "<a:doc xmlns:a=\"ns\">"
            + "  <a:elem/>"
            + "  <b:elem xmlns:b=\"ns\"/>"
            + "</a:doc>";

    Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder()
           .parse(new InputSource(new StringReader(xml)));

    JXPathContext context = JXPathContext.newContext(document);
    NodeList pointers = context.iteratePointers("//ns:elem");

    int count = pointers.getLength();
    assertEquals(2, count);

    for (int i = 0; i < count; i++) {
        Node node = pointers.item(i);
        if (i == 0) {
            assertEquals("a:elem", node.getNodeName());
        } else {
            assertEquals("b:elem", node.getNodeName());
        }
    }
}
