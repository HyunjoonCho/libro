javascript
// Test that instance methods are not being called correctly when used as function expressions

function TestClass() {
  this.x = 10;
  this.y = 20;

  this.add = function(a, b) {
    return this.x + a + b;
  };
}

function testInstanceMethod() {
  var obj = new TestClass();
  console.log((obj.y == 20? obj.add : function(a, b) { return a + b; })(10, 5));
}

testInstanceMethod();
