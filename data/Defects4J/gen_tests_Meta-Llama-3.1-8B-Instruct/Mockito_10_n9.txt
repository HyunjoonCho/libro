java
public void testRETURNS_DEEP_STUBS_serializableMockCreation() {
    try {
        ToBeMocked mock = mock(ToBeMocked.class, RETURNS_DEEP_STUBS);
        fail("Mock creation should fail due to non-serializable type");
    } catch (MockitoException e) {
        assertThat(e.getMessage(), containsString("do not implement Serializable"));
        assertThat(e.getMessage(), containsString("do not have a no-arg constructor"));
    }
}

public static class ToBeMocked {

    NotSerializableReturnValue field1;

    public ToBeMocked(NotSerializableReturnValue field1) {
        this.field1 = field1;
    }

    public NotSerializableReturnValue getSomething() {
        return field1;
    }
}

public static class NotSerializableReturnValue {

    String field1 = "";

    public NotSerializableReturnValue(String field1) {
        this.field1 = field1;
    }

    public String getSomething2() {
        return field1;
    }
}
