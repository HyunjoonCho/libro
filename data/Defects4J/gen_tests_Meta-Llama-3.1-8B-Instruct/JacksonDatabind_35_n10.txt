public void testObjectIdWithWrapperType() {
    ObjectMapper mapper = new ObjectMapper();
    TypeFactory typeFactory = mapper.getTypeFactory();
    SimpleType type = typeFactory.constructSimpleType(Object.class, Integer.class);
    Object id = type.getId();
    JsonNode json = JsonNodeFactory.instance.objectNode();
    json.put("id", id);
    json.put("type", id);
    try {
        mapper.treeToValue(json, Object.class);
        fail("Expected to throw JsonMappingException");
    } catch (JsonProcessingException e) {
        // expected
    }
}