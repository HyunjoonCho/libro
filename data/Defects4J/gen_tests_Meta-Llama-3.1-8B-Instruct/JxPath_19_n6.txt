public void testIteratePointers() throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.parse(new InputSource(new StringReader("<a:doc xmlns:a=\"ns\"><a:elem/><b:elem xmlns:b=\"ns\"/></a:doc>")));

    JXPathContext context = JXPathContext.newInstance(document);
    List<NodePointer> pointers = context.iteratePointers("//*");

    NodeList list = document.getElementsByTagNameNS("ns", "elem");
    assertEquals(2, list.getLength());
    NodeList expectedPointers = document.getElementsByTagNameNS("ns", "elem");
    int count = 0;
    for (int i = 0; i < pointers.size(); i++) {
        Node node = pointers.get(i).getNode();
        for (int j = 0; j < expectedPointers.getLength(); j++) {
            if (node == expectedPointers.item(j)) {
                count++;
                break;
            }
        }
    }
    assertEquals(2, count);
}