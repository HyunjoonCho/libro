public void testTokenBufferDelegateDeserialization() {
    TokenBuffer buffer = new TokenBuffer();
    buffer.writeStartObject();
    buffer.writeStringField("a", 1);
    buffer.writeStringField("b", null);
    buffer.writeEndObject();
    
    Value value = Value.from(buffer);
    assertEquals(1, value.getA());
    assertNull(value.getB());
    
    TokenBuffer expectedBuffer = new TokenBuffer();
    expectedBuffer.writeStartObject();
    expectedBuffer.writeFieldName("a");
    expectedBuffer.writeValueNumberInt(1);
    expectedBuffer.writeFieldName("b");
    expectedBuffer.writeValueNull();
    expectedBuffer.writeEndObject();
    
    assertEquals(expectedBuffer, buffer);
}