java
public void testTokenBufferDelegateDeserialization() throws JsonParseException {
    ObjectMapper mapper = new ObjectMapper();
    JsonFactory jsonFactory = mapper.getFactory();
    TokenBuffer tokenBuffer = jsonFactory.createParser(new ByteArrayInputStream("{\"a\":1, \"b\":null}".getBytes()));
    tokenBuffer.nextToken(); // START_OBJECT
    assertEquals(JsonToken.FIELD_NAME, tokenBuffer.nextToken()); // FIELD_NAME
    assertEquals(JsonToken.VALUE_NUMBER_INT, tokenBuffer.nextToken()); // VALUE_NUMBER_INT
    assertEquals(JsonToken.FIELD_NAME, tokenBuffer.nextToken()); // FIELD_NAME
    assertEquals(JsonToken.VALUE_NULL, tokenBuffer.nextToken()); // VALUE_NULL
    assertEquals(JsonToken.END_OBJECT, tokenBuffer.nextToken()); // END_OBJECT

    // Now test the bug
    Value value = mapper.treeToValue(tokenBuffer, Value.class);
    assertEquals(1, value.getA());
    assertNull(value.getB());

    // Create a new TokenBuffer with the same tokens
    tokenBuffer = jsonFactory.createParser(new ByteArrayInputStream("{\"a\":1, \"b\":null}".getBytes()));
    tokenBuffer.nextToken(); // FIELD_NAME
    assertEquals(JsonToken.VALUE_NUMBER_INT, tokenBuffer.nextToken()); // VALUE_NUMBER_INT

    // Expected exception
    try {
        mapper.treeToValue(tokenBuffer, Value.class