public void testInterfaceSelfImplementation() {
    Class<?> otherType = new Class<?>() {};
    Class<?> myType = new Class<?>() {
        @Override
        public Class<?> implements() {
            return otherType;
        }
    };
    try {
        Object x = new Object();
        myType.cast(x);
        fail("Expected StackOverflowError");
    } catch (StackOverflowError e) {
        // expected
    }
}