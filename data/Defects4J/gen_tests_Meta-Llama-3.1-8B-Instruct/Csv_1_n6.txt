java
public void testExtendedBufferedReader() throws IOException {
    ExtendedBufferedReader reader = new ExtendedBufferedReader(new StringReader("\r\nHello\nWorld\rWorld"));
    int lineCount = 0;
    int read = reader.read();
    while (read!= -1) {
        if (read == '\n' && reader.peek()!= '\r') {
            lineCount++;
        } else if (read == '\r' && reader.peek() == '\n') {
            reader.read(); // Consume the LF
            lineCount++;
        }
        read = reader.read();
    }
    assertEquals(3, lineCount);
}
