java
@Test
public void testEscapeSurrogatePairs() throws Exception {
    CharSequenceTranslator translator = new CharSequenceTranslator() {
        @Override
        public int translate(char currentChar) {
            // Simulate the buggy behavior
            if (currentChar == '\uD83D') {
                return 0; // return an index out of range
            }
            return 0; // always return 0 to simulate the bug
        }
    };

    try {
        translator.translate("\uD83D\uDE30", null);
        fail("Expected StringIndexOutOfBoundsException");
    } catch (StringIndexOutOfBoundsException e) {
        // Expected exception
    }
}
