public void testWriteBigDecimalAsPlainIgnoredWithJsonFormat() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN, true);
    JsonFormat format = new JsonFormat();
    format.shape(JsonFormat.Shape.STRING);
    mapper.configure(SerializationFeature.WRITE_NULL_MAP_ENTRIES_AS_EMPTY, true);
    mapper.addMixIn(Object.class, Object.class);
    BigDecimal value = new BigDecimal("0.0000000005");
    try {
        String json = mapper.writeValueAsString(value);
        fail("Expected WRITE_BIGDECIMAL_AS_PLAIN to be ignored");
    } catch (JsonProcessingException e) {
        // expected
    }
}