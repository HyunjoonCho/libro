public void testTarDirectoryLongName() throws IOException {
    TarArchiveOutputStream tar = new TarArchiveOutputStream(new ByteArrayOutputStream());
    tar.putArchiveEntry(new TarArchiveEntry("very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/long/directory"));
    tar.closeEntry();
    tar.finish();
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try {
        tar.writeTo(bos);
        fail("Expected IOException");
    } catch (IOException e) {
        assertTrue(true);
    }
}