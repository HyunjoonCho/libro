java
public class Node {
    // Assume this class has methods to add and remove nodes from the graph/tree
    private Node parent;
    private List<Node> children;

    public String toString() {
        if (parent == null && children == null) {
            // If the node is orphaned, throw a more informative exception
            throw new IllegalStateException("Node is detached from the graph/tree");
        }
        // Otherwise, perform the normal string representation logic
        //...
    }
}

public class NodeTest {
    @Test(expected = IllegalStateException.class)
    public void testToStringNPE() {
        Node node = new Node();
        // Detach the node from the graph/tree
        node.parent = null;
        node.children = null;
       