public void testTryFoldArrayAccess() {
    // Simulate the console.log function
    ByteArrayOutputStream consoleOut = new ByteArrayOutputStream();
    PrintStream originalOut = System.out;
    PrintStream consoleOutStream = new PrintStream(consoleOut);
    System.setOut(consoleOutStream);

    // Create a test array with a side-effecting element
    Object[] array = new Object[] {new PrintStream(new ByteArrayOutputStream()), "world!"};

    // Simulate the tryFoldArrayAccess behavior
    Object result = array[0];
    array[0] = "hello";

    // Restore the original System.out
    System.setOut(originalOut);

    // Check the result
    assertEquals("world!", result);
    assertEquals("hello, world!\n", consoleOut.toString());
}