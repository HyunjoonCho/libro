javascript
/**
 * @constructor
 */
function Foo() {
  this._bar = null;
};

/**
 * @this {Foo}
 */
function writeMethodWithAnnotation() {
  this._bar = 123; // no warning. ok
}

/**
 * @this {Foo}
 */
function readMethodWithAnnotation() {
  return this._bar; // no warning. ok
}

/**
 * @this {Foo}
 */
function writeMethodWithoutAnnotation() {
  this._bar = 123; // warning. ok.
}

function readMethodWithoutAnnotation() {
  return this._bar; // <- No warning!
}

function testDangerousUseOfGlobalThisObject() {
  // Create an instance of Foo
  var foo = new Foo();

  // Test that writeMethodWithAnnotation and writeMethodWithoutAnnotation
  // do not warn
  writeMethodWithAnnotation.call(foo);
  writeMethodWithoutAnnotation.call(foo);

  // Test that readMethodWithAnnotation and readMethodWithoutAnnotation
  // do not warn
  readMethodWithAnnotation.call(foo);
  readMethodWithoutAnnotation.call(foo);

  // Check that the properties were set correctly
  assertEquals(123, foo._bar);
}
``