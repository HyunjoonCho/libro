java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerInput;
import com.google.javascript.jscomp.JsAst;
import com.google.javascript.jscomp.NodeTraversal;
import com.google.javascript.jscomp.PrepareAst;

import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

public class TestIncompleteFunctionDefinitionCrash {

    @Test(expected = RuntimeException.class)
    public void testIncompleteFunctionDefinitionCrash() throws Exception {
        ByteArrayOutputStream outContent = new ByteArrayOutputStream();
        System.setOut(new PrintStream(outContent));
        CompilerInput input = new CompilerInput("function f\nf\nf;");
        Compiler compiler = new Compiler();
        compiler.compile(input);
        compiler.getOutput();
        System.setOut(System.out);
    }
}
