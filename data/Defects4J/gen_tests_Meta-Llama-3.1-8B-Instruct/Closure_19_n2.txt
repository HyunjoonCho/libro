java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;

public class TestTypeRefiningOfThis {
    public void testTypeRefiningOfThis() {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setWarningLevel(CompilerOptions.WarningLevel.OFF);
        SourceFile sourceFile = new SourceFile("test.js", "function test() { goog.isFunction(this); }");
        compiler.compile(sourceFile, options);
        try {
            compiler.compile();
        } catch (Exception e) {
            if (!(e.getCause() instanceof IllegalArgumentException)) {
                throw e;
            }
            assertEquals("Node cannot be refined.", e.getCause().getMessage());
        }
    }
}
