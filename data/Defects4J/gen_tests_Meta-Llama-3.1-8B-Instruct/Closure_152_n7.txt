java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JSError;
import com.google.javascript.jscomp.SourceFile;
import org.junit.Test;

public class TestResolveTypesBug {
    @Test
    public void testResolveTypesBug() throws Exception {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setWarningLevel(CompilerOptions.WarningLevel.VERBOSE);
        options.setSummaryDetailLevel(3);
        options.setProcessClosurePrimitives(true);
        options.setErrorOnUnknownTypes(true);

        String code = "function f(x) { if (typeof x == 'number') { return x; } else if (typeof x =='string') { return x; } }";
        SourceFile sf = SourceFile.fromCode("test.js", code);
        compiler.compile(sf, options);
        // Check that there are no errors
        if (compiler.getErrors().size()!= 0) {
            for (JSError error : compiler.getErrors()) {
                System.out.println(error.getMessage());
            }
            assert false;
        }
    }
}
