public void testToStringStyleMemoryLeak() {
    ToStringStyle style = ToStringStyle.SIMPLE_STYLE;
    Thread thread = new Thread(() -> {
        try {
            Thread.sleep(1000); // allow time for the thread local to be created
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    });
    thread.start();
    try {
        thread.join(100); // wait for the thread to create the thread local
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
    // simulate a web application reload
    System.gc();
    System.runFinalization();
    assertNotSame(style, ToStringStyle.getThreadLocal());
}