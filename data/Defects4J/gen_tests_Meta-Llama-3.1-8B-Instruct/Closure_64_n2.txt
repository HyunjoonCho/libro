public void testLanguageInStrict() throws IOException {
    File tempDir = new File(System.getProperty("java.io.tmpdir"));
    File getNumFile = new File(tempDir, "get_num.js");
    File alertFile = new File(tempDir, "alert.js");

    getNumFile.createNewFile();
    PrintWriter getNumWriter = new PrintWriter(getNumFile);
    getNumWriter.println("var getNum = function() { return 5; };");
    getNumWriter.close();

    alertFile.createNewFile();
    PrintWriter alertWriter = new PrintWriter(alertFile);
    alertWriter.println("alert(getNum());");
    alertWriter.close();

    Process process = Runtime.getRuntime().exec(new String[] {
        "java", "-jar", "compiler.jar",
        "--language_in=ECMASCRIPT5_STRICT",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--warning_level=VERBOSE",
        "--js", getNumFile.getAbsolutePath(),
        "--js", alertFile.getAbsolutePath()
    });

    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String output = reader.readLine();
    assertEquals("'use strict';alert(5);", output);
}