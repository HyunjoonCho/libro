public void testBase64InputStreamRead() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    Base64OutputStream bos = new Base64OutputStream(baos);
    for (int i = 0; i < 3; i++) {
        bos.write("abc".getBytes());
    }
    bos.close();
    ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
    Base64InputStream bis = new Base64InputStream(bais, true);
    byte[] buffer = new byte[3];
    int bytesRead = bis.read(buffer);
    assertEquals(0, bytesRead);
}