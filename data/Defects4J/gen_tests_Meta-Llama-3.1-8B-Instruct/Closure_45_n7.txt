javascript
describe('Closure Compiler issue', () => {
  it('should not remove assignment when used as an expression result to Array.push', () => {
    const code = `
      function f() {
        var a = [], b;
        a.push(b = []);
        b[0] = 1;
        return a;
      }
    `;
    const expected = `
      function f() {
        var a = [], b;
        a.push(b = []);
        b[0] = 1;
        return a;
      }
    `;
    const compiled = compileCode(code);
    expect(compiled).toBe(expected);
  });
});

function compileCode(code) {
  // Simple function to compile the code using a JavaScript engine (e.g. V8)
  // This is a simplified example and may not accurately represent the Closure Compiler's behavior
  const vm = require('vm');
  const sandbox = {};
  vm.runInNewContext(code, sandbox);
  return sandbox.f.toString();
}
