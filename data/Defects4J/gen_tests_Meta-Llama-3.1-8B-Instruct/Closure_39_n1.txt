public void testExportWithTypedef() {
    String sourceCode = "typedef {var x = 1;} T;\n" +
            "function f(a:T opt) {}\n" +
            "typedef {var x = 2;} T;\n" +
            "function g(a:T opt) {}";
    String expectedExternExport = "function f(a:T opt) { var x = 1; }\n" +
            "function g(a:T opt) { var x = 2; }";
    String actualExternExport = ExternalCompiler.compile(sourceCode).getExternExports();
    assertEquals(expectedExternExport, actualExternExport);
}