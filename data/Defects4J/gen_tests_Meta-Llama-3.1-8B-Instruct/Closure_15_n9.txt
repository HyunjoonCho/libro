javascript
function testIssue() {
    var customData = { key: 'value' };

    function testRemoveKey(key) {
        var dataSlot = customData,
            retval = dataSlot && dataSlot[key],
            hadKey = dataSlot && (key in dataSlot);

        if (dataSlot)
            delete dataSlot[key];

        return hadKey? retval : null;
    };

    console.log(testRemoveKey('key')); // 'value'
    console.log('key' in customData); // false

    var compiledCode = 'var customData={key:"value"};function testRemoveKey(b){var a=customData,c=a&&a[b];a&&delete a[b];return a&&b in a?c:null}';
    eval(compiledCode);
    console.log(testRemoveKey("key")); // null
    console.log("key" in customData); // false

    // Check that the issue is reproducible
    assert(testRemoveKey('key') === null);
    assert(!( 'key' in customData ));
}

testIssue();
