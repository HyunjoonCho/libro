public void testRemoveKeyInOrder() {
    Map<String, String> customData = new HashMap<>();
    customData.put("key", "value");

    String retval = testRemoveKey("key", customData);
    boolean hadKey = "key" in customData;

    deleteKey("key", customData);

    assertEquals("value", retval);
    assertFalse(hadKey);
}

public void deleteKey(String key, Map<String, String> data) {
    data.remove(key);
}

public String testRemoveKey(String key, Map<String, String> data) {
    Object dataSlot = data;
    String retval = (String) dataSlot.get(key);
    boolean hadKey = dataSlot!= null && dataSlot.containsKey(key);

    if (dataSlot!= null) {
        deleteKey(key, data);
    }

    return hadKey? retval : null;
}