public void testInvalidPropertyInForLoop() {
    String jsCode = "var thing = {subthing: {prop: 3}};\n" +
            "for (var i = 0; i < thing.subthing.noprop; i++) {\n" +
            "window.console.log(i);\n" +
            "}";
    try {
        Compiler compiler = new Compiler();
        compiler.compile("test.js", jsCode);
        fail("Expected compilation error");
    } catch (CompilationException e) {
        // expected
    }
}