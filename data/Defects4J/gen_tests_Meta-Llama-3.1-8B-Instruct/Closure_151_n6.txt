public void testVersionOption() {
    try {
        Process process = Runtime.getRuntime().exec("java -jar compiler.jar --version");
        int exitCode = process.waitFor();
        fail("Expected non-zero exit code, but got " + exitCode);
    } catch (IOException | InterruptedException e) {
        fail("Expected --version option to be supported", e);
    }
}