public void testSevenZFile() throws IOException {
    byte[] data = createLargeLZMAFile(16 * 1024 * 1024); // 16 MB dictionary
    SevenZArchiveEntry entry = new SevenZArchiveEntry("test", "test", "test", new byte[0]);
    SevenZArchiveFile archive = new SevenZArchiveFile(entry);
    archive.putArchiveEntry(entry, data);
    archive.close();
    SevenZFile sevenZFile = new SevenZFile(archive);
    sevenZFile.close(); // Should not throw an exception
}

private byte[] createLargeLZMAFile(int size) throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try (LZMAOutputStream los = new LZMAOutputStream(bos)) {
        byte[] data = new byte[size];
        los.write(data);
    }
    return bos.toByteArray();
}