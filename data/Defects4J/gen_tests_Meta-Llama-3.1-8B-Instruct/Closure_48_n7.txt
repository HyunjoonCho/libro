public void testTypeCheckingError() {
    Myclass myclass = new Myclass();
    myclass.test();
    try {
        ((Runnable) myclass).run();
        fail("Expected TypeMismatchException on first line");
    } catch (Exception e) {
        // expected
    }
    try {
        ((Runnable) myclass).run();
        fail("Expected TypeMismatchException on second line");
    } catch (Exception e) {
        // expected
    }
}

class Myclass {
    public Runnable fn = new Runnable() {};
    public void test() {
        fn.run();
        fn = new Runnable() {};
    }
}