java
public void testSelectorParsingWithComma() {
    try {
        Selector parser = new Selector("div, li:matches([0-9,]+)");
        fail("Expected java.util.regex.PatternSyntaxException");
    } catch (PatternSyntaxException e) {
        // expected exception
    }

    try {
        Selector parser = new Selector("div, li:matches([0-9])");
        fail("Expected java.util.regex.PatternSyntaxException");
    } catch (PatternSyntaxException e) {
        // expected exception
    }

    try {
        Selector parser = new Selector("[attr=a,b]");
        fail("Expected java.util.regex.PatternSyntaxException");
    } catch (PatternSyntaxException e) {
        // expected exception
    }

    try {
        Selector parser = new Selector("div, li:matches([0-9])");
        // test that it still works with a valid regex
        assertEquals("li", parser.select("div, li").first().tagName());
    } catch (PatternSyntaxException e) {
        fail("Unexpected exception: " + e.getMessage());
    }
}
