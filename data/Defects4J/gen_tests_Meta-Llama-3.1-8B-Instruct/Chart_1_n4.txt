public void testIssue983() {
    Plot plot = new CategoryPlot(new DefaultCategoryDataset());
    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer();
    renderer.setPlot(plot);
    renderer.getLegendItems();
    assertThrows(NullPointerException.class, () -> {
        int seriesCount = ((CategoryDataset) plot.getDataset(0)).getRowCount();
    });
}