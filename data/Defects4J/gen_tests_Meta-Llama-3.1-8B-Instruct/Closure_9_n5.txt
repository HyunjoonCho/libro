java
import org.junit.Test;

public class AMDModuleTest {
    @Test
    public void testAMDModuleInSubdirectory() throws Exception {
        // Create 1st AMD module in lib/Foo.js
        String fooJs = "define('lib/Foo', function() { return 'Hello from Foo'; });";
        File fooFile = new File("lib/Foo.js");
        writeToFile(fooFile, fooJs);

        // Create 2nd AMD module in Bar.js depending on lib/Foo.js
        String barJs = "define('Bar', ['lib/Foo'], function(Foo) { return 'Hello from Bar,'+ Foo; });";
        File barFile = new File("Bar.js");
        writeToFile(barFile, barJs);

        // Try to compile both files with Bar.js as main module
        ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar",
                "--transform_amd_modules",
                "--process_common_js_modules",
                "--common_js_entry_module=Bar",
                "--compilation_level=ADVANCED_OPTIMIZATIONS",
                "--js_output_file=out.js",
                "--js=Bar.js",
                "--