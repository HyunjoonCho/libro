java
import com.mchange.v2.c3p0.ConnectionManager;
import com.mchange.v2.c3p0.PoolBackedDataSource;
import org.junit.Test;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;

public class C3P0ExploitTest {

    @Test(expected = SQLException.class)
    public void testC3P0Exploit() throws SQLException {
        PoolBackedDataSource ds = new PoolBackedDataSource();
        ds.setJdbcUrl("jdbc:mysql://localhost:3306/test");
        ds.setDriverClass("com.mysql.cj.jdbc.Driver");
        ds.setUser("test");
        ds.setPassword("test");

        DataSource dataSource = ds;
        Connection connection = dataSource.getConnection();
    }
}
