java
public void testHeaderMapInconsistency() throws IOException {
    // Create a CSV parser with header and skip header record
    CSVFormat myFormat = CSVFormat.RFC4180.withDelimiter(",").withQuoteChar('"').withQuotePolicy(Quote.MINIMAL)
           .withIgnoreSurroundingSpaces(true).withHeader().withSkipHeaderRecord(true);

    // Create a CSV file with duplicate header names
    String content = "Col1,Col2,Col2,Col3,Col4\n1,2,3,4,5\n4,5,6,7,8";
    Path tempFile = Files.createTempFile(null, null);
    Files.write(tempFile, content.getBytes());

    // Parse the CSV file
    CSVParser parser = new CSVParser(myFormat, new FileReader(tempFile.toFile()));
    CSVReader csvReader = new CSVReader(parser);

    // Check if the HeaderMap contains all columns
    CSVRecord header = csvReader.readNextRecord();
    Map<String, Integer> headerMap = csvReader.getHeaderMap();
    assertEquals(5, header.size());
    assertEquals(0, headerMap.get("Col1").intValue());
    assertEquals(0, headerMap.get("Col2").intValue