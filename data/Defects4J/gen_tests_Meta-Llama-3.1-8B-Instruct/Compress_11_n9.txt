public void testCreateArchiveInputStream() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bos.write("tar".getBytes());
    ArchiveInputStream ais = ArchiveStreamFactory.getInstance().createArchiveInputStream(new ByteArrayInputStream(bos.toByteArray()));
    assertTrue(ais instanceof NullInputStream);
    
    bos = new ByteArrayOutputStream();
    bos.write("tar".getBytes());
    bos.write("small file".getBytes());
    ais = ArchiveStreamFactory.getInstance().createArchiveInputStream(new ByteArrayInputStream(bos.toByteArray()));
    assertTrue(ais instanceof NullInputStream);
    
    bos = new ByteArrayOutputStream();
    for (int i = 0; i < 101; i++) {
        bos.write("tar".getBytes());
    }
    bos.write("large file".getBytes());
    ais = ArchiveStreamFactory.getInstance().createArchiveInputStream(new ByteArrayInputStream(bos.toByteArray()));
    assertFalse(ais instanceof NullInputStream);
}