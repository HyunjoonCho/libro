java
public void testCreateArchiveInputStream() throws IOException {
    byte[] bytes = new byte[100];
    bytes[0] = (byte) 0x75; // TAR magic number
    bytes[1] = (byte) 0x73; // TAR magic number
    bytes[2] = (byte) 0x68; // TAR magic number
    bytes[3] = (byte) 0x61; // TAR magic number
    bytes[4] = (byte) 0x72; // TAR magic number
    bytes[5] = (byte) 0x63; // TAR magic number
    bytes[6] = (byte) 0x68; // TAR magic number
    bytes[7] = (byte) 0x2e; // TAR magic number
    bytes[8] = (byte) 0x0;  // TAR magic number

    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    try {
        ArchiveStreamFactory.createArchiveInputStream(bais);
        fail("Should not detect archive with size less than 100 bytes");
    } catch (IOException e) {
        // expected
    }
}
