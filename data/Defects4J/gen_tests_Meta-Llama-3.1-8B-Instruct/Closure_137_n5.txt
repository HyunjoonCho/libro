public void testJscDeterministicTest() {
    JavaScriptCompiler compiler = new JavaScriptCompiler();
    String code = "var t = null; window.test = function() { if (t!= null) { t = null; } t = 1; };";
    try {
        compiler.compile(code);
        fail("Expected JSC_DETERMINISTIC_TEST warning");
    } catch (CompilationWarning e) {
        assertTrue(e.getWarnings().contains("JSC_DETERMINISTIC_TEST"));
    }
}