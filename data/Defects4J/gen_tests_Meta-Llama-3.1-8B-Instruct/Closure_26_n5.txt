java
public void testProcessCommonJSModules() throws IOException {
    // Define the module echo.js
    String echoJs = "define(function() { return { echo: function(val) { console.log(val); } }; })";

    // Define the entry point echo-main.js
    String echoMainJs = "var echo = require('echo'); echo.echo('hello world');";

    // Compile the code with ProcessCommonJSModules
    // We don't actually need to compile the code, we just need to test the error
    // So we'll just use the provided code as input

    // Check that the error is thrown when compiling with checkTypes enabled
    try {
        // This should throw a compile error
        // We'll use the code from the bug report to test the error
        // The error is expected to be a compile error
        // We'll use a custom compiler or a mocking library to test the error
        // For simplicity, let's assume we have a custom compiler that throws an exception when a compile error occurs
        CustomCompiler compiler = new CustomCompiler();
        compiler.compile(echoJs, echoMainJs, "echo-main.js", "echo.js", true);
        fail("Expected compile error");
