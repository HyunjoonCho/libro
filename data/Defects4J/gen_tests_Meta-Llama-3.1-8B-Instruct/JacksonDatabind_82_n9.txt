public void testJsonIgnorePropertiesAllowSettersNotWorking() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setVisibility(mapper.getVisibilityChecker()
           .withFieldVisibility(JsonAutoDetect.Visibility.ANY)
           .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
           .withSetterVisibility(JsonAutoDetect.Visibility.NONE)
           .withCreatorVisibility(JsonAutoDetect.Visibility.ANY));
    JsonTest json = new JsonTest("user", "password");
    String jsonString = "{\"username\":\"username\",\"password\":\"password\"}";
    try {
        json = mapper.readValue(jsonString, JsonTest.class);
        assertEquals("password", json.getPassword());
    } catch (IOException e) {
        fail("Failed to deserialize password", e);
    }
}