java
public void testCheckVarsUndefinedVars() {
    String jsCode = "foo = {};\n" +
            "foo.bar = function() { alert(this.baz); };";

    // Test that checkVars does not work from command line
    // (no warning is printed)
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    System.setOut(new PrintStream(out));
    JsCompiler.main(new String[] {"--jscomp_warning", "checkVars", "-"});
    System.out.println(out.toString());
    assertNotEquals("WARNING - variable foo is undefined", out.toString());

    // Test that undefinedVars does not work from command line
    // (no warning is printed)
    out = new ByteArrayOutputStream();
    System.setOut(new PrintStream(out));
    JsCompiler.main(new String[] {"--jscomp_warning", "undefinedVars", "-"});
    System.out.println(out.toString());
    assertNotEquals("WARNING - variable foo is undefined", out.toString());

    // Test that checkVars and undefinedVars work when warning_level is set to VERBOSE
    out = new ByteArrayOutputStream();
    System.setOut(new PrintStream(out));
    JsCompiler.main(new String[] {"--jscomp_warning", "checkVars", "--jscomp_warning", "undefinedVars", "--warning