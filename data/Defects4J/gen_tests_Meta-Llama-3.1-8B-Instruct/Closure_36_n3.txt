public void testAddSingletonGetter() {
    Compiler compiler = new Compiler();
    CompilationResult result = compiler.compile(
        "goog.provide('foo');\n" +
        "var foo = function() { this.values = []; };\n" +
        "goog.addSingletonGetter(foo);\n" +
        "foo.prototype.add = function(value) { this.values.push(value) };",
        "default.js",
        CompilerCompilationLevel ADVANCED_OPTIMIZATIONS,
        true,
        true,
        CompilationLevel.WARNING_LEVEL_VERBOSE,
        true
    );
    Assert.assertTrue(result.getWarnings().isEmpty());
    Assert.assertNotEquals("", result.getCode());
}