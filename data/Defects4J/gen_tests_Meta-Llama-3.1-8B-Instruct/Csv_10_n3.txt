public void testCSVFormatWithHeader() throws IOException {
    CSVFormat csvFormat = CSVFormat.TDF.withHeader("x");
    CSVPrinter csvPrinter = csvFormat.print(Files.newBufferedWriter(Paths.get("data.csv")));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    String contents = new String(Files.readAllBytes(Paths.get("data.csv")));
    assertEquals("x,42\n", contents);
}