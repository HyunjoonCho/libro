java
public void testTokenBufferDelegateDeserialization() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    TokenBuffer buffer = new TokenBuffer(JsonFactory.createJsonGenerator(new ByteArrayOutputStream()));
    buffer.writeStartObject();
    buffer.writeStringField("a", "1");
    buffer.writeNullField("b");
    buffer.writeEndObject();

    Value value = mapper.treeToValue(buffer.asParser(), Value.class);
    JsonToken[] expectedTokens = new JsonToken[] {
        JsonToken.START_OBJECT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NUMBER_INT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NULL,
        JsonToken.END_OBJECT
    };

    TokenBuffer actualBuffer = value.getBuffer();
    assertArrayEquals(expectedTokens, actualTokens);
}
