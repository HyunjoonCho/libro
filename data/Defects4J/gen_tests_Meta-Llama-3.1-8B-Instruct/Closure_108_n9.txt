java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;

public void testPreconditionCrash() throws Exception {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    SourceFile main = new SourceFile("main.js", 
        "var goog = {};\n" +
        "goog.scope;\n" +
        "var ns = {};\n" +
        "ns.sub = {};\n" +
        "/** @constructor */\n" +
        "ns.sub.C = function() {};\n" +
        "goog.scope(function() {\n" +
        " var sub = ns.sub;\n" +
        " /** @type {sub.C} */\n" +
        " var x = null;\n" +
        "});"
    );
    compiler.compile().addSourceFile(main);
    compiler.process();
}
