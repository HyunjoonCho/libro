public void testArgumentCaptorVarargs() {
    ArgumentCaptor<Integer> captor = ArgumentCaptor.forClass(Integer.class);
    when(mockMethod(1, 2, captor.capture())).thenReturn("result");
    mockMethod(1, 2, 3, 4);
    List<Integer> arguments = captor.getAllValues();
    assertEquals(3, arguments.get(0));
    assertEquals(4, arguments.get(1));
}