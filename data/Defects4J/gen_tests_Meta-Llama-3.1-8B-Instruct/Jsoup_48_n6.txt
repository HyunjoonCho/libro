public void testDuplicateHeader() {
    Map<String, List<String>> headers = new HashMap<>();
    List<String> xPoweredByValues = new ArrayList<>();
    xPoweredByValues.add("PHP/5.2.8");
    xPoweredByValues.add("ASP.NET");
    headers.put("X-Powered-By", xPoweredByValues);

    // Original behavior
    processResponseHeaders(headers);
    String expectedValue1 = "ASP.NET";
    assertEquals(expectedValue1, getHeader("X-Powered-By"));

    // Fixed behavior
    headers.put("X-Powered-By", xPoweredByValues);
    processResponseHeaders(headers);
    String expectedValue2 = "PHP/5.2.8 ASP.NET";
    assertEquals(expectedValue2, getHeader("X-Powered-By"));
}