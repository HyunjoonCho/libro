public void testBOMHandling() throws Exception {
    byte[] utf16Bom = new byte[] {(byte) 0xfe, (byte) 0xff};
    byte[] utf16Data = "test".getBytes("UTF-16");
    byte[] data = new byte[utf16Bom.length + utf16Data.length];
    System.arraycopy(utf16Bom, 0, data, 0, utf16Bom.length);
    System.arraycopy(utf16Data, 0, data, utf16Bom.length, utf16Data.length);

    byte[] utf8Bom = new byte[] {(byte) 0xef, (byte) 0xbb, (byte) 0xbf};
    byte[] utf8Data = "test".getBytes("UTF-8");
    byte[] expectedData = new byte[utf8Bom.length + utf8Data.length];
    System.arraycopy(utf8Bom, 0, expectedData, 0, utf8Bom.length);
    System.arraycopy(utf8Data, 0, expectedData, utf8Bom.length, utf8Data.length);

    byte[] result = DataUtil.parseByteData(data);
    byte[] expected = DataUtil.parseByteData(expected