public void testRuntimeExceptionWhenCompilingWithExternPrototype() throws Exception {
    Compiler compiler = new Compiler();
    compiler.setWarningLevel(WarningLevel.ADVANCED_OPTIMIZATIONS);
    compiler.setExterns(Arrays.asList("prototype.js"));
    compiler.setSource("bootloader.js");
    compiler.compile();
    try {
        compiler.compile();
        fail("Expected RuntimeException");
    } catch (RuntimeException e) {
        // expected
    }
}