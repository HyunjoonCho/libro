public void testArgumentCaptorVarargs() {
    ArgumentCaptor<Integer> captor = ArgumentCaptor.forClass(Integer.class);
    when(mockMethod(Integer.class, Integer.class, "arg1", "arg2", 1, 2, 3)).thenReturn(0);
    mockMethod(1, 2, "arg1", "arg2", captor.capture(), 3, 4);
    assertEquals(3, captor.getValue()[2]);
}