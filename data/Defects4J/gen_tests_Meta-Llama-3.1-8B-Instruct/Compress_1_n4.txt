public void testCpioUnpack() throws IOException {
    final File input = getFile("cmdcreated.cpio");
    final InputStream in = new FileInputStream(input);
    CpioArchiveInputStream cin = new CpioArchiveInputStream(in);
    try {
        for (int i = 0; i < 2; i++) {
            CpioArchiveEntry entry = cin.getNextCPIOEntry();
            if (entry == null) {
                break;
            }
            File target = new File(dir, entry.getName());
            final OutputStream out = new FileOutputStream(target);
            IOUtils.copy(in, out);
            out.close();
        }
    } finally {
        cin.close();
    }
}