java
import org.junit.Test;

public class TestIE8Bug {
    public static class Prototype {
        public static Function emptyFunction = new Function() {
            public Object invoke() {
                return null;
            }
        };
    }

    @Test
    public void testIE8Bug() {
        Element element = new Element();
        element.setAttribute("onchange", "function(e) { e.onchange({ extendedByPrototype: Prototype.emptyFunction, target: this }); }");
        String expected = "if(b.onchange){b.onchange({extendedByPrototype:Prototype.emptyFunction,target:b})}";
        String actual = element.getAttribute("onchange");
        assertEquals(expected, actual);
    }
}
