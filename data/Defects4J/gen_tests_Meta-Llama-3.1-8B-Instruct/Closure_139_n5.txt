javascript
function assert(b) {
    if (!b) throw "error";
}

assert(f() === 1);
var f = function() {return 2;}
assert(f() === 2);

function f() {return 1;}

// Compile it as third_party
var third_party = function() {
    function f() {return 1;}
    f(); // This should raise an error, but it doesn't
};

// Observe that the first definition of f has been changed from an assignment to a declaration, and that the code now raises an error
try {
    third_party();
    assert(false, "Expected error");
} catch (e) {
    assert(e.message === "error");
}
