public void testPolymorphicTypeLost() throws JsonProcessingException, IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    mapper.enableDefaultTyping();

    CommandAPDU obj = new CommandAPDU(new byte[] {1, 2, 3});
    String json = mapper.writeValueAsString(obj);

    // Expected JSON with polymorphic type information
    String expectedJson = "{\"@class\":\"com.ubitricity.devices.common.pal.CommandAPDU\",\"bytes\":[B,\"AKQEAAnw8fLz9AAAAgA=\"]}";

    // Verify that polymorphic type information is lost
    assertEquals(expectedJson, json);

    // Deserialize the JSON
    CommandAPDU deserializedObj = mapper.readValue(json, CommandAPDU.class);

    // Verify that the deserialized object is a byte array, not CommandAPDU
    assertTrue(deserializedObj instanceof byte[].class);
}