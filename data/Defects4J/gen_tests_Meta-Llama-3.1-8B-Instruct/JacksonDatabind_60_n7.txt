java
public class TestPolymorphicTypeLost {

    @JsonIgnore
    private byte[] apdu;

    @JsonValue
    public byte[] getBytes() {
        return apdu.clone();
    }

    @JsonCreator
    public TestPolymorphicTypeLost(@JsonProperty(value = "bytes") byte[] apdu) {
        this.apdu = apdu.clone();
    }

    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = "@class")
    public static class Subclass {
        private byte[] subApdu;

        @JsonCreator
        public Subclass(@JsonProperty(value = "bytes") byte[] subApdu) {
            this.subApdu = subApdu.clone();
        }
    }

    public static class TestObject {
        private byte[] apdu;
        @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = "@class")
        private Subclass subClass;

        public TestObject(byte[] apdu, Subclass subClass) {
            this.apdu = apdu.clone();
            this.subClass = subClass;
        }
    }

    @Test
    public void testPolymorphicTypeLost() throws JsonProcessingException