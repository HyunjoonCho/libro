java
public void testCustomDeserializerWithParentUpdate() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addDeserializer(DataA.class, new DataADeserializer());
    mapper.registerModule(module);

    DataB db = new DataB();
    db.da.i = 11;
    db.k = 13;
    String jsonBString = mapper.writeValueAsString(db);

    // Create parent
    DataB dbNewViaString = mapper.readValue(jsonBString, DataB.class);
    Assert.assertEquals(5, dbNewViaString.da.i);
    Assert.assertEquals(13, dbNewViaString.k);

    DataB dbNewViaNode = mapper.treeToValue(mapper.valueToTree(db), DataB.class);
    Assert.assertEquals(5, dbNewViaNode.da.i);
    Assert.assertEquals(13, dbNewViaNode.k);

    // Update parent
    DataB dbUpdViaString = new DataB();
    DataB dbUpdViaNode = new DataB();

    Assert.assertEquals(1, dbUpdViaString.da.i);
    Assert.assertEquals(3, dbUpdViaString.k);
    mapper.readerForUpdating(dbUpdViaString).readValue(jsonBString