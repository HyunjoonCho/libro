public void testVersionOption() {
    try {
        ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
        Process p = pb.start();
        int exitCode = p.waitFor();
        fail("Expected exit code 0, but got " + exitCode);
    } catch (IOException | InterruptedException e) {
        fail("Expected 'java -jar compiler.jar --version' to run without error");
    }
}