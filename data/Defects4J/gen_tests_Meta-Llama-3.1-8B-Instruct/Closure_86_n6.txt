public void testSideEffectsAnalysis() throws Exception {
    Object foo = new Object() {
        private String location;

        public void setTimeout(Runnable runnable) {
            try {
                Thread.sleep(0); // simulate setTimeout(0)
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
            runnable.run();
        }

        public void setLocation(String loc) {
            location = loc;
        }
    };

    ((Runnable) new Runnable() {
        @Override
        public void run() {
            ((Object) foo).setLocation("http://www.google.com/");
        }
    }).run();

    assertEquals("http://www.google.com/", ((Object) foo).location);
}