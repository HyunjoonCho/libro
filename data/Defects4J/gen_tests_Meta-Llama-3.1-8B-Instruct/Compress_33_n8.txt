public void testCompressorStreamFactoryWithZlibHeader() throws Exception {
    // create a test file with zlib header
    byte[] data = new byte[] { 0x78, 0x9c, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00 };
    byte[] header = new byte[] { 0x78, 0x9c, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00 };
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bos.write(header);
    bos.write(data);
    File tempFile = File.createTempFile("bla.tar", ".deflatez");
    Files.copy(bos.toByteArray(), tempFile.toPath());
    
    try {
        CompressorStreamFactory.createCompressorInputStream(tempFile);
        fail("Expected CompressorException");
    } catch (CompressorException e) {
        // expected
    } finally {
        Files.delete