java
public class Test {
    @Test
    public void testSpyingAbstractClass() {
        // Example 1
        UserAccount userAccount = Mockito.spy(new FakeUserAccount());
        when(userAccount.addEmail(anyString())).thenReturn(null);
        when(userAccount.getEmails()).thenReturn(Collections.emptyList());
        userAccount.addEmail("email1");
        userAccount.addEmail("email2");
        assertEquals(2, userAccount.getEmails().size());
        assertEquals(2, Mockito.mockingDetails(userAccount).getCalls().size());

        // Example 2
        AccountService service = Mockito.spy(new MockAccountService() {
            @Override
            public UserAccount getAccount(String id, AsyncCallback<UserAccount> callback) {
                callback.onSuccess(new UserAccount() {
                    @Override
                    public List<String> getEmails() {
                        return Collections.emptyList();
                    }
                });
                return null;
            }
        });
        when(service.getAccount(anyString(), any(AsyncCallback.class))).thenReturn(null);
        service.getAccount("id", new AsyncCallback<UserAccount>() {
            @Override
            public void onSuccess(UserAccount result) {
                // do nothing
            }

           