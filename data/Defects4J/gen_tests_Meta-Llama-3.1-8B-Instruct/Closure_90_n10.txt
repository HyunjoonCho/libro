javascript
goog.provide('test');

/**
 * @this {test.A|test.B}
 */
test.sharedMethod = function() {};

/**
 * @constructor
 */
test.A = function() {};

/**
 * @constructor
 */
test.B = function() {};

/**
 * @type {test.A|test.B}
 */
test.Thing = goog.typedef;

goog.log.warn = function(message) {
    console.log(message);
};

test.runTest = function() {
    goog.log.warn("sanityCheckVars");
    goog.log.warn("/home/elf/JSPATH/compiler_bug_this_typedef.js:6: WARNING - @this type of a function must be an object");
    goog.log.warn("Actual type: (test.A|test.B|null)");
    test.sharedMethod();
};

test.runTest();
