java
import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import static org.junit.Assert.assertEquals;

public class ZipOutputStreamTest {

    @Test
    public void testZipOutputStreamCorruption() throws IOException {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ZipOutputStream zos = new ZipOutputStream(bos);

        ZipArchiveEntry entry1 = new ZipArchiveEntry("file1.txt");
        ZipArchiveEntry entry2 = new ZipArchiveEntry("file2.txt");
        ZipArchiveEntry entry3 = new ZipArchiveEntry("file1.txt");

        // Test case where entry1 and entry3 have the same name
        zos.putArchiveEntry(entry1);
        zos.closeEntry();
        zos.putArchiveEntry(entry3); // This should overwrite the offset of entry1
        zos.closeEntry();

        // Verify that the offsets are correct
        Map<ZipArchiveEntry, Long> offsets = new HashMap<>();
        offsets.put(entry1, 0L); // This should be overwritten by entry3
        offsets.put(entry3, 0L); // This should be the correct offset
        assertEquals(0