public void testAsPathWithDefaultNamespace() {
    // Create a test document with a default namespace
    Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element root = document.createElementNS("test111", "b:foo");
    root.setAttribute("xmlns:b", "bla");
    root.setAttribute("xmlns", "test111");
    document.appendChild(root);
    Element bar = document.createElementNS("bla", "b:bar");
    bar.setTextContent("a");
    root.appendChild(bar);
    Element test = document.createElement("test");
    root.appendChild(test);
    DOMNodePointer pointer = new DOMNodePointer(document, test);

    // Get the path of the 'test' node
    String path = pointer.asPath();

    // The path should be correct and not cause an endless loop
    assertEquals("/test[1]", path);
}