public void testEnumPolymorphismDeserialization() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    KindEnum type = KindEnum.CONTACT;
    String json = "{\"kind\": \"CONTACT\", \"to\": {\"name\": \"Foo\"}}";
    KindEnum actual = mapper.readValue(json, KindEnum.class);
    assertEquals(type, actual);
}

enum KindEnum {
    CONTACT, MESSAGE
}