public void testZipOutputStreamCollision() {
    ZipOutputStreamzos = new ZipOutputStream(new ByteArrayOutputStream());
    ZipArchiveEntry entry1 = new ZipArchiveEntry("file1.txt");
    ZipArchiveEntry entry2 = new ZipArchiveEntry("file2.txt");
    zos.putArchiveEntry(entry1);
    zos.closeEntry();
    zos.putArchiveEntry(entry2);
    zos.closeEntry();
    zos.putArchiveEntry(new ZipArchiveEntry("file1.txt")); // hash collision
    zos.closeEntry();
    zos.close();
    // verify that the last entry is not overwritten
    ZipArchiveEntry[] entries = zos.getEntries();
    assertEquals(3, entries.length);
}