java
public void testExtendedMessageFormatOOM() {
    Map<String, Object> formatRegistry = new HashMap<String, Object>();
    formatRegistry.put(DummyFormatFactory.DUMMY_FORMAT, new DummyFormatFactory());
    
    ExtendedMessageFormat mf = new ExtendedMessageFormat("it''s a {dummy} 'test'!", formatRegistry);
    String formattedPattern = mf.format(new String[] {"great"});
    // We don't expect the actual formatted string, just that the test doesn't throw an OOM
    // The original test case would throw an OutOfMemoryError, so we can't assert on the result
    // Instead, we assert that the test doesn't throw an OOM
    try {
        mf.format(new String[] {"great"});
    } catch (OutOfMemoryError e) {
        fail("Expected no OutOfMemoryError");
    }
    
    // Test the fix by checking the formatted string
    mf = new ExtendedMessageFormat("it''s a {dummy} 'test'!", formatRegistry);
    String formattedPatternFixed = mf.format(new String[] {"great"});
    assertEquals("it's a great 'test'!", formattedPatternFixed);
}
