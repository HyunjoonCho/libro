public void testGammaDistributionCloning() throws Exception {
    GammaDistribution dist = new GammaDistribution(1.0, 1.0);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    oos.writeObject(dist);
    oos.close();
    ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(baos.toByteArray()));
    GammaDistribution clonedDist = (GammaDistribution) ois.readObject();
    ois.close();
    // The cloned distribution should produce the same samples as the original distribution
    Random random = dist.getRandomEngine();
    double[] originalSamples = new double[1000];
    double[] clonedSamples = new double[1000];
    for (int i = 0; i < 1000; i++) {
        originalSamples[i] = dist.sample(random);
        clonedSamples[i] = clonedDist.sample(random);
    }
    Assert.assertArrayEquals(originalSamples, clonedSamples, 1e-9);
}