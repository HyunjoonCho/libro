java
public void testIteratePointersMultiplePrefixes() throws Exception {
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(new File("test.xml"));
    
    JXPathContext context = JXPathContext.newContext(doc);
    NodeSet nodes = context.iteratePointers("//ns:elem", new NamespaceContext() {
        @Override
        public String getPrefix(String namespaceURI) {
            if (namespaceURI.equals("ns")) {
                return "a";
            } else if (namespaceURI.equals("ns")) {
                return "b";
            }
            return null;
        }
    });
    
    assertEquals(2, nodes.getLength());
}
