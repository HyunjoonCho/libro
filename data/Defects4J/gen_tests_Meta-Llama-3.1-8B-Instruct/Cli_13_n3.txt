public void testCommandLineDefaults() {
    CommandLine cli = new CommandLine(new Object());
    Option option = new Option("option", true);
    option.setDefault("default");
    cli.addOption(option);

    try {
        cli.parse("option value");
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }

    try {
        cli.parse("option", "value");
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }

    cli.parse("option");
    assertEquals("value", cli.getParsedOptionValue(option));
}