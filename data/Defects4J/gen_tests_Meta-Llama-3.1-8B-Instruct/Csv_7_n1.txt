java
public void testHeaderMapDuplicateColumns() throws IOException {
    CSVFormat myFormat = CSVFormat.RFC4180.withDelimiter(",").withQuoteChar('"').withQuotePolicy(Quote.MINIMAL)
           .withIgnoreSurroundingSpaces(true).withHeader().withSkipHeaderRecord(true);

    Reader reader = new StringReader(
            "Col1,Col2,Col2,Col3,Col4\n" +
                    "1,2,3,4,5\n" +
                    "4,5,6,7,8");

    CSVParser parser = new CSVParser(reader, myFormat);
    CSVReader csvReader = parser.getCSVReader();

    // Read the header
    String[] headers = csvReader.readNext();

    // The second occurrence of "Col2" should be ignored, but the HeaderMap should still have it
    Map<String, Integer> headerMap = csvReader.getHeaderMap();
    assertEquals(5, headerMap.size());
    assertEquals(0, headerMap.get("Col1"));
    assertEquals(1, headerMap.get("Col2"));
    assertEquals(2, headerMap.get("Col3"));
    assertEquals(3, headerMap.get("Col4"));
    assertEquals(-1, headerMap