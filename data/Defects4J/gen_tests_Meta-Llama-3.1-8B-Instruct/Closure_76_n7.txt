public void testAssignmentWithinCondition() {
    // Define the original function
    Function original = new Function() {
        private boolean b;
        public Object call() {
            if (System.out.println(b = true) || System.out.println(b = false)) {
                a = b;
            } else {
                a = null;
            }
            return a;
        }
    };

    // Define the compiled function
    Function compiled = new Function() {
        public Object call() {
            return System.out.println(true) || System.out.println(a = false)? a : null;
        }
    };

    // Test the original function
    boolean aOriginal = (Boolean) original.call();
    assertTrue(aOriginal);

    // Test the compiled function
    try {
        compiled.call();
        fail("Compiled function did not throw an error");
    } catch (Exception e) {
        // Ignore
    }
}