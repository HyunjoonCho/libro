public void testTreeTraversingParser() {
    ObjectMapper mapper = new ObjectMapper();
    Base64Variant base64Variant = Base64Variants.MIME;
    TreeTraversingParser parser = new TreeTraversingParser(mapper, base64Variant);
    TextNode node = new TextNode("SGVsbG8gd29ybGQ=");
    try {
        parser.getBinaryValue(node);
        fail("Expected Base64Variant to be used");
    } catch (JsonProcessingException e) {
        // expected, as TextNode#getBinaryValue uses default Base64 variant
    }
    TextNode nodeWithBase64Variant = new TextNode("SGVsbG8gd29ybGQ=", base64Variant);
    parser = new TreeTraversingParser(mapper, base64Variant);
    parser.getBinaryValue(nodeWithBase64Variant);
}