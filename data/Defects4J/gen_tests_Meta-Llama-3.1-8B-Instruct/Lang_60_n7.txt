java
public void testStrBuilderLengthVsSize() {
    StrBuilder sb = new StrBuilder(10);
    sb.append("Hello");
    // this should throw an ArrayIndexOutOfBoundsException
    try {
        sb.append(thisBuf, 0, thisBuf.length);
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // expected
    }
    
    // this should not throw an exception
    try {
        sb.append(thisBuf, 0, thisBuf.size());
    } catch (Exception e) {
        fail("Unexpected exception", e);
    }
}
