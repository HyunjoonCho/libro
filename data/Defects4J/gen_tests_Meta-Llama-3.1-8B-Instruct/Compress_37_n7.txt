public void testPaxHeadersNegativeArraySizeException() {
    TarArchiveInputStream tas = new TarArchiveInputStream(new ByteArrayInputStream("pax-header".getBytes()));
    byte[] buffer = new byte[10];
    int offset = 0;
    int ch = tas.read();
    while (ch!= -1) {
        if (ch == '\n') {
            if (offset == 0) {
                break;
            }
        } else if (ch >= '0' && ch <= '9') {
            buffer[offset++] = (byte) ch;
        } else {
            offset = 0;
        }
        ch = tas.read();
    }
    try {
        tas.parsePaxHeaders(buffer, 0, offset);
        fail("Expected NegativeArraySizeException");
    } catch (NegativeArraySizeException e) {
        // expected
    }
}