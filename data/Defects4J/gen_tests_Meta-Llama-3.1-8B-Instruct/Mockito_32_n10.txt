public void testMockitoWithPackagePrivateClass() {
    PackagePrivateParent parent = new PackagePrivateParent();
    PackagePrivateChild child = new PackagePrivateChild();
    try {
        when(child.getFromParent()).thenReturn("mock");
        when(parent.getFromChild()).thenThrow(new RuntimeException("test"));
        verify(parent).getFromChild();
        verify(child).getFromParent();
    } catch (Exception e) {
        fail("Expected exception not thrown");
    }
}

class PackagePrivateParent {
    public String getFromChild() {
        return new PackagePrivateChild().getFromParent();
    }
}

class PackagePrivateChild {
    public String getFromParent() {
        return "child";
    }
}