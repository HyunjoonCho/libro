javascript
describe('Closure removes needed code', () => {
    it('should not remove code when assigning to a custom object', () => {
        let n = {};
        n.blah = function(test) { test.a = 5; };
        let test = new Object();
        n.blah(test);
        expect(test.a).toBe(5);
    });

    it('should remove code when assigning to Math', () => {
        let originalMathBlah = Math.blah;
        Math.blah = function(test) { test.a = 5; };
        let test = new Object();
        Math.blah(test);
        expect(test.a).toBeUndefined();
        Math.blah = originalMathBlah;
    });

    it('should remove code when assigning to Math in Simple mode', () => {
        // Test in Simple mode
        delete globalThis.console;
        let originalMathBlah = Math.blah;
        Math.blah = function(test) { test.a = 5; };
        let test = new Object();
        Math.blah(test);
        expect(test.a).toBeUndefined();
        Math.blah = originalMathBlah;
        globalThis.console = {};
    });
});
