public void testArgumentCaptorWithVarargs() {
    ArgumentCaptor<Integer> captor = ArgumentCaptor.forClass(Integer.class);
    when(mockMethod(vararg(1, 2, 3))).thenReturn(0);
    mockMethod(captor.capture(), vararg(1, 2, 3));
    assertEquals(1, captor.getValue().length);
    assertEquals(1, captor.getValue()[0]);
}