public void testAnonymousObjectTypeInference() {
    Object record1 = new Object() {
        public String prop = "a";
    };
    Object record2 = "a";

    // This should compile without error
    System.out.println(record1.prop);

    // This should compile without error
    System.out.println(record2);

    // This should compile without error
    if (record2 instanceof String) {
        System.out.println(record2);
    } else {
        System.out.println(((Object) record2).prop);
    }
}