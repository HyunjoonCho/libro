java
public void testArjArchiveInputStreamEncoding() throws Exception {
    String encoding = "UTF-8";
    byte[] data = "Hello, World!".getBytes(encoding);
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ArjArchiveOutputStream aos = new ArjArchiveOutputStream(bos, encoding);
    aos.putArchiveEntry(new ArchiveEntry("test.txt"));
    aos.write(data);
    aos.closeArchiveEntry();
    aos.close();
    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    ArjArchiveInputStream ais = new ArjArchiveInputStream(bis, encoding);
    assertEquals(data, ais.read());
    ais.close();
}

public void testCpioArchiveInputStreamEncoding() throws Exception {
    String encoding = "UTF-8";
    byte[] data = "Hello, World!".getBytes(encoding);
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    CpioArchiveOutputStreamaos = new CpioArchiveOutputStream(bos, encoding);
    aos.putArchiveEntry(new ArchiveEntry("test.txt"));
    aos.write(data);
    aos.closeArchiveEntry();
    aos.close();
    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    CpioArchiveInputStream cis = new CpioArchiveInputStream(bis