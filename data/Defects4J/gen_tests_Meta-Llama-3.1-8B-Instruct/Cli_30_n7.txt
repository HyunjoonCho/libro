public void testDefaultOptionsNotUpdated() {
    OptionGroup group = new OptionGroup("group");
    group.addOption(new Option("a", false));
    group.addOption(new Option("b", false));
    group.setAllowMultipleOptions(true);
    group.setAllowUnrecognizedOptions(true);
    group.setAllowMultipleOccurrences(true);

    Properties defaults = new Properties();
    defaults.setProperty("a", "true");
    defaults.setProperty("b", "true");

    CommandLineParser parser = new DefaultParser();
    try {
        CommandLine cmd = parser.parse(new DefaultParser(), new String[] {"a"}, defaults);
        assertTrue(cmd.hasOption("a"));
        assertTrue(cmd.hasOption("b"));
        fail("Expected parser to throw an exception due to mutually exclusive options");
    } catch (ParseException e) {
        // expected
    }
}