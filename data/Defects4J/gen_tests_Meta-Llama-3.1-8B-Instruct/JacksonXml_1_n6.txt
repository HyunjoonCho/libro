public void testDeserializationOfNestedLists() {
    ObjectMapper mapper = new ObjectMapper();
    TypeFactory typeFactory = mapper.getTypeFactory();
    JavaType javaType = typeFactory.constructCollectionType(List.class, Record.class);
    Collection<Record> records = new ArrayList<>();
    Record record = new Record();
    record.setFields(new ArrayList<>());
    records.add(record);
    Object result = mapper.readValue(mapper.writeValueAsString(records), javaType);
    assertNotNull(result);
    assertEquals(1, ((List<Record>) result).size());
    Record actualRecord = ((List<Record>) result).get(0);
    assertNull(actualRecord.getFields());
}