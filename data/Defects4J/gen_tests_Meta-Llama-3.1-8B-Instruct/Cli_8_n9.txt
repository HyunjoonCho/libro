public void testHelpFormatterWrapPos() {
    HelpFormatter formatter = new HelpFormatter();
    formatter.setWidth(20);
    String text = "This is a very long option description that will wrap incorrectly on every line beyond the first";
    String result = formatter.printText(text, 0, text.length());
    String[] lines = result.split("\n");
    for (int i = 1; i < lines.length; i++) {
        String line = lines[i];
        int actualLength = line.length();
        int expectedLength = 20 - formatter.getIndent();
        if (actualLength > expectedLength) {
            fail("Line " + i + " is too long, expected " + expectedLength + " characters, got " + actualLength);
        }
    }
}