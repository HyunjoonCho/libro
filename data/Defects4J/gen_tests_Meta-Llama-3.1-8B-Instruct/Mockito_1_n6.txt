public void testArgumentCaptorWithVarargs() {
    ArgumentCaptor<Integer> captor = ArgumentCaptor.forClass(Integer.class);
    when(mockMethod(vararg(Integer.class))).thenReturn(true);
    mockMethod(captor.capture(), 1, 2);
    assertEquals(Arrays.asList(1, 2), captor.getValue());
}