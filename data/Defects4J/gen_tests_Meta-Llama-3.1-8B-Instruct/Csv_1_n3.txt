java
public void testExtendedBufferedReaderEOL() throws IOException {
    ExtendedBufferedReader br = new ExtendedBufferedReader(new StringReader("Hello\rWorld\r\n"));
    int lineCount = 0;
    StringBuilder sb = new StringBuilder();
    int c;
    while ((c = br.read())!= -1) {
        sb.append((char) c);
        if (c == '\r' && (br.peek() == '\n' || br.peek() == -1)) {
            br.read(); // consume the EOL
            lineCount++;
        } else if (c == '\n') {
            lineCount++;
        }
    }
    assertEquals(2, lineCount);
}

public void testExtendedBufferedReaderEOLCRFirst() throws IOException {
    ExtendedBufferedReader br = new ExtendedBufferedReader(new StringReader("\rHello\nWorld\n"));
    int lineCount = 0;
    StringBuilder sb = new StringBuilder();
    int c;
    while ((c = br.read())!= -1) {
        sb.append((char) c);
        if (c == '\r' && (br.peek() == '\n' || br.peek() == -1)) {
            br.read(); // consume the EOL
            lineCount