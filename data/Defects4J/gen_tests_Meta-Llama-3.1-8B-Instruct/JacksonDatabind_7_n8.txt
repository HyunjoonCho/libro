java
@Test
public void testTokenBufferDelegateDeserialization() throws JsonProcessingException {
    ObjectReader reader = new ObjectMapper().readerFor(Value.class);
    TokenBuffer buffer = new TokenBuffer();
    buffer.writeStartObject();
    buffer.writeName("a");
    buffer.writeNumber(1);
    buffer.writeName("b");
    buffer.writeNull();
    buffer.writeEndObject();

    TokenBuffer expectedBuffer = new TokenBuffer();
    expectedBuffer.writeStartObject();
    expectedBuffer.writeFieldName("a");
    expectedBuffer.writeNumber(1);
    expectedBuffer.writeFieldName("b");
    expectedBuffer.writeNull();
    expectedBuffer.writeEndObject();

    Value value = reader.readValue(buffer.asParser());
    Value expectedValue = reader.readValue(expectedBuffer.asParser());

    assertEquals(expectedValue, value);
}
