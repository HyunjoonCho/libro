public void testTokenBufferDelegateDeserialization() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    TokenBuffer tokenBuffer = new TokenBuffer();
    tokenBuffer.writeStartObject();
    tokenBuffer.writeStringField("a", "1");
    tokenBuffer.writeStringField("b", "null");
    tokenBuffer.writeEndObject();

    JsonParser jp = mapper.treeAsTokens(tokenBuffer.asParser());
    JsonNode tree = mapper.readTree(jp);
    assertEquals(2, tree.size());
    assertEquals(1, tree.get("a").asInt());
    assertNull(tree.get("b"));
}