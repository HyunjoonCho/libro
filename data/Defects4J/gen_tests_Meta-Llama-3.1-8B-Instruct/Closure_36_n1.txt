public void testSingletonGetter() {
    // Create a simple class with a method to add a value
    Class<?> fooClass = new TestClass();
    
    // Create an instance of the class
    Object fooInstance = fooClass.newInstance();
    
    // Add a value to the instance
    Method addMethod = fooClass.getMethod("add", Object.class);
    addMethod.invoke(fooInstance, "value");
    
    // Get the instance using the getter
    Method getInstanceMethod = fooClass.getMethod("getInstance");
    Object getInstance = getInstanceMethod.invoke(null);
    
    // Verify that the instance has the added value
    Field valuesField = fooClass.getField("values");
    Object values = valuesField.get(getInstance);
    assertNotNull(values);
    assertEquals(1, ((Object[]) values).length);
    assertEquals("value", ((Object[]) values)[0]);
}

private static class TestClass {
    private static Object instance_;
    public Object[] values = new Object[0];
    public static Object getInstance() {
        return instance_!= null? instance_ : (instance_ = new TestClass());
    }
    public void add(Object value) {
        values = Arrays.copyOf(values, values.length + 1);
        values[values.length -