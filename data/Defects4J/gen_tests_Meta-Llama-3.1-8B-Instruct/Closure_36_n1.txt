javascript
function testAddSingletonGetter() {
    var foo = function() { this.values = []; };
    goog.addSingletonGetter(foo);
    foo.prototype.add = function(value) {this.values.push(value)};

    var instance1 = foo.getInstance();
    instance1.add("value1");
    var instance2 = foo.getInstance();
    instance2.add("value2");

    // Check that both instances point to the same object
    assertEquals(instance1, instance2);
    assertEquals(2, instance1.values.length);
    assertEquals("value1", instance1.values[0]);
    assertEquals("value2", instance1.values[1]);
}
