java
public void testCreateArchiveInputStreamDetectsTarArchive() {
    byte[] data = "This is a text file".getBytes();
    InputStream inputStream = new ByteArrayInputStream(data);
    try {
        ArchiveStreamFactory.createArchiveInputStream(inputStream);
        fail("Expected IOException");
    } catch (IOException e) {
        // expected
    }

    data = new byte[101];
    data[0] = (byte) 0x75; // 'u' in ASCII
    data[1] = (byte) 0x73; //'s'
    data[2] = (byte) 0x74; // 't'
    data[3] = (byte) 0x61; // 'a'
    data[4] = (byte) 0x72; // 'r'
    data[5] = (byte) 0x0;  // null byte
    data[6] = (byte) 0x1f; // '\f'
    data[7] = (byte) 0x9d; // '\253'
    data[8] = (byte) 0x9a; // '\252'
    inputStream = new ByteArrayInputStream(data);
    ArchiveStream