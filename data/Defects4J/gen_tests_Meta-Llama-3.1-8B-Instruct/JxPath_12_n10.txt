public void testIncompleteNamespaceHandling() throws Exception {
    XMLReader reader = new XMLReader();
    reader.registerNamespace("A", "http://example.com/A");
    reader.registerNamespace("B", "http://example.com/B");
    String xml = "<ElementA A:myAttr=\"Mytype\"><B:ElementB>MY VALUE</B:ElementB></ElementA>";
    Document document = reader.parse(new InputSource(new StringReader(xml)));
    NodeList attributes = document.getDocumentElement().getAttributes();
    for (int i = 0; i < attributes.getLength(); i++) {
        Attr attribute = (Attr) attributes.item(i);
        if (attribute.getNamespaceURI().equals("http://example.com/A")) {
            assertEquals("A", attribute.getPrefix());
        } else if (attribute.getNamespaceURI().equals("http://example.com/B")) {
            assertEquals("B", attribute.getPrefix());
        } else {
            fail("Unknown namespace prefix: " + attribute.getPrefix());
        }
    }
}