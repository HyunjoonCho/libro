java
public void testW3CDomHelperWithMissingNamespaces() throws Exception {
    String html = "<html><body><fb:like></fb:like></body></html>";
    Document doc = Jsoup.parse(html).ownerDocument();
    W3CDom w3cDom = new W3CDom();
    Document w3cDoc = w3cDom.fromJsoup(doc);

    // Test that parsing without namespace declarations fails
    try {
        w3cDom.fromJsoup(Jsoup.parse("<html><body><a:link></a:link></body></html>"));
        fail("Expected NAMESPACE_ERR exception");
    } catch (NAMESPACE_ERR e) {
        // expected
    }

    // Test that parsing with namespace declarations succeeds
    w3cDoc = w3cDom.fromJsoup(Jsoup.parse("<html xmlns:a=\"http://example.com\"><body><a:link></a:link></body></html>"));
    assertNotNull(w3cDoc);
}
