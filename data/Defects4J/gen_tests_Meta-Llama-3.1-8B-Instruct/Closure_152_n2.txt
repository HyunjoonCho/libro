public void testResolveTypesUnionTypeCastException() {
    // Set up the compiler
    Compiler compiler = new Compiler();
    compiler.setOptions("create_name_map_files=true,jscomp_warning=missingProperties,jscomp_warning=undefinedVars,jscomp_warning=checkTypes,warning_level=VERBOSE,summary_detail_level=3,process_closure_primitives=true,jscomp_error=strictModuleDepCheck,jscomp_error=invalidCasts,logging_level=ALL,compilation_level=ADVANCED_OPTIMIZATIONS");

    // Compile a test code that causes the issue
    String testCode = "var a = function() { return 1; };";
    compiler.compile(testCode);

    // Check that the compiler throws the expected exception
    try {
        compiler.compile(testCode); // This should throw a ClassCastException
        fail("Expected ClassCastException");
    } catch (RuntimeException e) {
        assert e.getMessage().contains("java.lang.ClassCastException: com.google.javascript.rhino.jstype.UnionType cannot be cast to com.google.javascript.rhino.jstype.ObjectType");
    }
}