public void testArDeletion() throws IOException {
    // Create an archive
    File archive = new File("bla.ar");
    try (ZipArchiveOutputStream zos = new ZipArchiveOutputStream(new FileOutputStream(archive))) {
        zos.putArchiveEntry(new ZipArchiveEntry("test1.xml"));
        zos.putArchiveEntry(new ZipArchiveEntry("test2.xml"));
    }

    // Delete a file from the archive
    ZipArchiveInputStream zis = new ZipArchiveInputStream(new FileInputStream(archive));
    ZipArchiveEntry entry = zis.getNextEntry();
    while (entry!= null) {
        if (entry.getName().equals("test2.xml")) {
            zis.closeEntry();
            zis.close();
            break;
        }
        entry = zis.getNextEntry();
    }

    // Check that getNextEntry still returns entries
    zis = new ZipArchiveInputStream(new FileInputStream(archive));
    entry = zis.getNextEntry();
    assertEquals("test1.xml", entry.getName());

    // Check that the file is still present on disk
    ZipArchiveInputStream zis2 = new ZipArchiveInputStream(new FileInputStream(archive));
    entry = zis2.getNextEntry();
    while (entry!= null) {
        if (entry.getName().