public void testFileValidatorClassCastException() {
    DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
    ArgumentBuilder abuilder = new ArgumentBuilder();
    GroupBuilder gbuilder = new GroupBuilder();
    DefaultOption fileNameOption = obuilder
           .withShortName("f")
           .withLongName("file-name")
           .withRequired(true)
           .withDescription("name of an existing file")
           .withArgument(abuilder
                   .withName("file-name")
                   .withValidator(FileValidator.getExistingFileInstance())
                   .create())
           .create();
    Group options = gbuilder
           .withName("options")
           .withOption(fileNameOption)
           .create();
    String[] args = new String[] {"-f", "path-to-an-existing-file", "--help"};
    try {
        Parser parser = new Parser();
        parser.setHelpTrigger("--help");
        parser.setGroup(options);
        parser.parseAndHelp(args);
        fail("Expected ClassCastException");
    } catch (ClassCastException e) {
        assertEquals(File.class, e.getClass());
    }
}