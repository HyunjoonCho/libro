java
public void testEventDetection() {
    // Create a test function that switches at t = 90 and t = 135
    final double[] eventTimes = { 90.0, 135.0 };
    final double[] eventValues = { 1.0, -1.0 };

    // Create a test solver with a step size that spans the first event
    final double startTime = 67.5;
    final double endTime = 112.5;
    final double stepSize = endTime - startTime;

    // Simulate the event detection and solve the ODE
    // Assuming the event detection method is not correctly implemented, the first event will be missed
    // and the solver will start at 90.0
    final double initialY = 1.0; // Initial value of the switching function
    final double stepStart = 89.9999999; // The solver converged to a value slightly before 90.0
    final double stepEnd = stepStart + stepSize;

    // The second event should not be detected because the switching function is negative at both ends of the step
    final double expectedEventTime2 = 135.0;
    final double expectedEventValue2