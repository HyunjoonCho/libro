public void testReadTruncated() throws IOException {
    byte[] input = new byte[770];
    Arrays.fill(input, (byte) 0xFF);
    byte[] output = new byte[769];
    BZip2CompressorInputStream bis = new BZip2CompressorInputStream(new ByteArrayInputStream(input));
    int bytesRead = bis.read(output);
    assertEquals(769, bytesRead);
}