public void testIncompleteNamespaceHandling() {
    NamespaceContext namespaceContext = new NamespaceContext();
    namespaceContext.registerNamespace("A", "http://example.com/A");
    namespaceContext.registerNamespace("B", "http://example.com/B");
    namespaceContext.registerNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance");
    Element elementA = new Element("ElementA");
    elementA.setAttribute("myAttr", "Mytype", "A");
    Element elementB = new Element("B");
    elementB.setText("MY VALUE");
    elementA.appendChild(elementB);
    try {
        DOMNodePointer.createAttribute(elementA.getAttribute("myAttr"));
        fail("Expected exception not thrown");
    } catch (UnknownNamespaceException e) {
        assertEquals("A", e.getPrefix());
    }
}