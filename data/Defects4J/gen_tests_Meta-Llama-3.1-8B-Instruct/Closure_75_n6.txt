public void testUrlEncodeIfNecessary() {
    String input = "\"<>.;";
    String resultClosure = "[\"<>.;].exec(a)!=null&&typeof encodeURIComponent!=j?encodeURIComponent(a):a";
    String resultMinified = "/[\"<>.;]/";
    String resultManual = "[\"<>.;].exec(a)!=null&&typeof encodeURIComponent!=undefined?encodeURIComponent(a):a"; // Note: changed 'UNDEF' to 'undefined'
    String expectedResult = encodeURIComponent(input);
    
    assertEquals(expectedResult, resultManual);
    assertEquals(resultManual, "[\"<>.;].exec(a)!=null&&typeof encodeURIComponent!=undefined?encodeURIComponent(a):a");
    assertEquals(resultMinified, "[\"<>.;]/");
    assertNotEquals(resultClosure, "[\"<>.;].exec(a)!=null&&typeof encodeURIComponent!=j?encodeURIComponent(a):a");
}