public void testAcceptSingleValueAsArray() throws IOException {
    ObjectMapper om = new ObjectMapper();
    om.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);

    String json = "[{\"message\":\"messageHere\"}]";
    JsonNode tree = om.readTree(json);

    JsonNode arrayNode = tree.get(0);
    JsonNode valueNode = arrayNode.get("message");

    assertNotNull(valueNode);

    String json2 = "{\"message\":\"messageHere\"}";
    JsonNode singleNode = om.readTree(json2);
    JsonNode singleValueNode = singleNode.get("message");

    assertEquals(valueNode, singleValueNode);
}