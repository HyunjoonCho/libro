java
public void testODEIntegrationIssue() throws Exception {
    // Create an event handler that simulates a switching function
    EventHandlingODE solver = new EventHandlingODE() {
        @Override
        public double[] event(double t, double[] y, double[] dydt, double[] parameters) {
            // Simulate a switching function that changes sign at t = 90 and t = 135
            if (t >= 90 && t < 135) {
                return new double[]{-1};
            } else {
                return new double[]{1};
            }
        }
    };

    // Create an integrator
    ODESolver solverInstance = new DormandPrince853Integrator();
    solverInstance.setStepSize(0.1);

    // Set up the initial conditions
    double[] y0 = new double[]{0};
    double[] dydt = new double[]{0};
    double[] parameters = new double[]{0};

    // Integrate from 0 to 153 with a step size of 0.1
    double[] result = solverInstance.integrate(solver, 0, 153, y0, dydt, parameters);

    // Check that the event was detected
    assertEquals(90