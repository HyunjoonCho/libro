public void testSelfReference() {
    GenericMetadataSupport genericMetadata = inferFrom(GenericsSelfReference.class).resolveGenericReturnType(firstNamedMethod("self", GenericsSelfReference.class));

    assertThrows(StackOverflowError.class, () -> genericMetadata.rawType());
}