public void testAssigningObjectLiteralToPrototype() {
    Object foo = new Object();
    (new Runnable() {
        @Override
        public void run() {
            foo.getClass().getDeclaredField("prototype").set(foo, new Object() {
                public void alert() {
                    System.out.println("hello world");
                }
            });
        }
    }).run();
    assertNull(foo.getClass().getDeclaredField("prototype").get(foo));
}