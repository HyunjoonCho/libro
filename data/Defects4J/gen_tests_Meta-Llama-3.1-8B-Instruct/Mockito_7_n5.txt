public void testGenericsDeepStubbing() {
    MyClass1<MyClass2<MyClass3>> myMock1 = mock(MyClass1.class, RETURNS_DEEP_STUBS);

    when(myMock1.getNested()).thenReturn(mock(MyClass2.class, RETURNS_DEEP_STUBS));
    MyClass2<MyClass3> nestedMock = myMock1.getNested();
    when(nestedMock.getNested()).thenReturn(mock(MyClass3.class, RETURNS_DEEP_STUBS));
    MyClass3 innermostMock = nestedMock.getNested();
    when(innermostMock.returnSomething()).thenReturn("Hello World.");

    assertEquals("Hello World.", innermostMock.returnSomething());
}