public void testArgumentCaptorVarargs() {
    ArgumentCaptor<Integer> captor = ArgumentCaptor.forClass(Integer.class);
    doSomething(1, 2, 3);
    verify(mock).doSomething(captor.capture());
    List<Integer> list = captor.getAllValues();
    assertEquals(3, list.size());
    assertEquals(1, list.get(0));
    assertEquals(2, list.get(1));
    assertEquals(3, list.get(2));
}

private void doSomething(Integer... args) {
    mock.doSomething(args);
}