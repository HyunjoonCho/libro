public void testArgumentCaptorWithVarargs() {
    ArgumentCaptor<Integer> captor = ArgumentCaptor.forClass(Integer.class);
    spy = mock(MyClass.class);
    when(spy.myMethod(anyInt(), captor.capture())).thenReturn("result");
    spy.myMethod(1, 2, 3);
    assertEquals(Arrays.asList(2, 3), captor.getAllValues());
}