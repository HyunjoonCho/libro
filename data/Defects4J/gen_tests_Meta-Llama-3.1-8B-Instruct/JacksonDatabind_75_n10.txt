java
public void testJsonFormatShapeNumberIntOnEnum() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    // Test with field annotation
    mapper.configure(SerializationFeature.WRITE_ENUMS_USING_INDEX, true);
    mapper.writeValueAsString(new Foo(Color.GREEN));

    // Test with class annotation
    mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.WRITE_ENUMS_USING_INDEX, true);
    // This should not work in the latest version, so we check for JsonFormat.Shape.NUMBER_INT
    JsonFormat jsonFormat = new JsonFormat(JsonFormat.Shape.NUMBER_INT);
    mapper.addMixInAnnotations(Foo.class, JsonFormatMixIn.class);
    mapper.writerWithDefaultPrettyPrinter().writeValueAsString(new Foo(Color.GREEN));
}

private static class JsonFormatMixIn {
    @JsonFormat(shape = JsonFormat.Shape.NUMBER_INT)
    public static class Color {
        public static final Color RED = new Color();
        public static final Color YELLOW = new Color();
        public static final Color GREEN = new Color();
    }
}
