java
public class ImpossibleNonStaticInnerClassTest {

    public static class Outer {
        public Inner inner;

        @JsonCreator
        public Outer(@JsonProperty("inner") Inner inner) {}

        public static class Inner {
            @JsonCreator
            public Inner() {}
        }
    }

    public static void testImpossibleNonStaticInnerClass() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        String ser = mapper.writeValueAsString(new Outer(null));
        try {
            mapper.readValue(ser, Outer.class);
            fail("Expected ArrayIndexOutOfBoundsException");
        } catch (ArrayIndexOutOfBoundsException e) {
            // expected
        }
    }

    public static void main(String[] args) throws Exception {
        testImpossibleNonStaticInnerClass();
    }
}
