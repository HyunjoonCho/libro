public void testToStringStyleMemoryLeak() throws Exception {
    ClassLoader originalClassLoader = Thread.currentThread().getContextClassLoader();
    try {
        Thread.currentThread().setContextClassLoader(ToStringStyle.class.getClassLoader());
        new ToStringStyle();
        Thread.currentThread().setContextClassLoader(originalClassLoader);
        Thread.sleep(1000); // wait for the thread to be garbage collected
        assertTrue("ToStringStyle instance should be garbage collected", ToStringStyle.threadLocal.get() == null);
    } catch (InterruptedException e) {
        fail(e.getMessage());
    }
}