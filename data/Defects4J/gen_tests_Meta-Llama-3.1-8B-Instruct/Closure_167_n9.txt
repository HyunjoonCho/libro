public void testInvalidPropertyInForLoop() throws Exception {
    String js = """
    function ns() {}
    ns.MyClass = function(thing) {
        this.thing_ = thing;
    };
    ns.MyClass.prototype.doIt = function() {
        var subthing = this.thing_.subthing;
        // ERRORS:
        // window.console.log(subthing.noprop);
        // NO ERROR:
        for (var i = 0; i < subthing.noprop; i++) {
            window.console.log(i);
        }
    };
    var thing = ({subthing: {prop: 3}});
    var c = new ns.MyClass(thing);
    c.doIt();
    """.trim();
    JSType check = new JSType();
    check.setOption("jscomp_error", "externsValidation");
    check.setOption("jscomp_error", "checkTypes");
    check.check(js);
}