java
public void testVarianceEvaluate() {
    double[] values = {1, 2, 3, 4, 5};
    double[] weights = {1, 1, 1, 1, 1};
    double mean = 3.0; // calculated manually for simplicity
    
    // Calculate the variance of the full array
    double fullVariance = Variance.evaluate(values, weights, mean, 0, values.length);
    
    // Calculate the variance of the first 3 elements
    double[] valuesSub = Arrays.copyOfRange(values, 0, 3);
    double[] weightsSub = Arrays.copyOfRange(weights, 0, 3);
    double meanSub = Variance.evaluate(valuesSub, weightsSub, 0, valuesSub.length);
    double subVariance = Variance.evaluate(valuesSub, weightsSub, meanSub, 0, valuesSub.length);
    
    // The issue is that the Variance.evaluate() method ignores the length parameter
    // and grabs the whole dataset, so the subVariance should be equal to the fullVariance
    assertEquals(fullVariance, subVariance, 0.0);
}
