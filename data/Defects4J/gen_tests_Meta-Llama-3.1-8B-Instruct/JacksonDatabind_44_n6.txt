public void testPolymorphicTypes() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addAbstractTypeMapping(PropertyA.class, PropertyB.class);
    module.setDefaultImpl(PropertyB.class);
    mapper.registerModule(module);

    PropertyA a = new PropertyA();
    PropertyB b = new PropertyB();

    a.setProp("value");

    String jsonA = mapper.writeValueAsString(a);
    String jsonB = mapper.writeValueAsString(b);

    assertTrue(jsonA.contains("prop") && jsonA.contains("value"));
    assertTrue(jsonB.contains("prop") && jsonB.contains("value"));
}