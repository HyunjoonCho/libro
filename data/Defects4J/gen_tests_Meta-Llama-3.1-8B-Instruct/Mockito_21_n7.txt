public void testAbstractClassMocking() {
    // Example 1
    FakeUserAccount userAccount = mock(FakeUserAccount.class);
    when(userAccount.addEmail("email")).thenReturn(userAccount);
    assertEquals(Arrays.asList("email"), userAccount.getEmails());
    verify(userAccount).addEmail("email");

    // Example 2
    MockAccountService service = mock(MockAccountService.class);
    when(service.getAccount("id")).thenAnswer(new Answer<UserAccount>() {
        @Override
        public UserAccount answer(InvocationOnMock invocation) throws Throwable {
            return new FakeUserAccount();
        }
    });
    MockAccountService spyService = spy(service);
    when(spyService.getAccount("id")).thenReturn(new FakeUserAccount());

    // Example 3
    MockAccountRpcService service = mock(MockAccountRpcService.class);
    when(service.getAccount("id")).thenReturn(null);
    RpcContext context = mock(RpcContext.class);
    when(context.checkNotNull()).thenReturn(context);
    MockAccountRpcService spyService = spy(service);
    when(spyService.getAccount("id")).thenReturn(null);
}