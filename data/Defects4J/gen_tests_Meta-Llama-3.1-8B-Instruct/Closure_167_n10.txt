public void testInvalidPropertyInPrototypeFunction() {
    Object thing = new Object();
    thing.put("subthing", new Object());
    thing.get("subthing").put("prop", 3);
    
    // Test within a prototype function
    MyClass myClass = new MyClass();
    myClass.doIt(thing);
    
    // Test outside a prototype function
    for (int i = 0; i < ((Object)thing.get("subthing")).get("prop"); i++) {
        // Intentionally left blank
    }
}

class MyClass {
    public void doIt(Object thing) {
        Object subthing = thing.get("subthing");
        for (int i = 0; i < ((Object)subthing).get("prop"); i++) {
            // Intentionally left blank
        }
    }
}