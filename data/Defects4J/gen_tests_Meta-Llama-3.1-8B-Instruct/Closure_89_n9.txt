public void testClosureCompilerRemovesProperties() {
    Map<String, Runnable> map = new HashMap<>();
    Runnable f1 = () -> System.out.println("f1");
    f1.addProperty("alwaysCall", true);
    Runnable f2 = () -> System.out.println("f2");

    map.put("f1", f1);
    map.put("f2", f2);

    assert f1.getProperty("alwaysCall") == true;
    Runnable b = map.get(Math.random() > 0.5? "f1" : "f2");
    b.run();
    // Note: The property 'alwaysCall' should not be removed by the compiler
    // If it is, the test will fail because the 'f1' will not be called.
}