java
public void testPreconditionCrash() {
    com.google.javascript.jscomp.CompilerOptions options = new com.google.javascript.jscomp.CompilerOptions();
    options.setLanguageIn(com.google.javascript.jscomp.LanguageMode.ECMASCRIPT3);
    com.google.javascript.jscomp.Compiler compiler = new com.google.javascript.jscomp.Compiler(options);

    String code = 
        "var goog = {};goog.scope;\n" +
        "var ns = {};ns.sub = {};/** @constructor */\n" +
        "ns.sub.C = function() {}\n" +
        "goog.scope(function() {\n" +
        " var sub = ns.sub;\n" +
        " /** @type {sub.C} */\n" +
        " var x = null;\n" +
        "});\n";

    com.google.javascript.jscomp.SourceFile sourceFile = com.google.javascript.jscomp.SourceFile.fromCode("test.js", code);
    compiler.compile(sourceFile);

    try {
        compiler.execute();
        fail("Expected exception");
    } catch (com.google.javascript.jscomp.CompilerException e) {
        assertTrue(e.getMessage().contains("goog.scope local with aliased in the type declaration"));
    }
}
