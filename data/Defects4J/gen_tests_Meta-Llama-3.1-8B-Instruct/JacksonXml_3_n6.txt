java
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.XmlTokenStreamFactory;
import com.fasterxml.jackson.core.JsonToken;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonTokenStream;
import com.fasterxml.jackson.dataformat.xml.XmlParser;

import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class FromXMLParserTest {

    @Test
    public void testNextTextValueForAttributes() throws Exception {
        String xml = "<root attr='hello world'/>";
        XmlMapper xmlMapper = new XmlMapper();
        JsonTokenStream tokenStream = xmlMapper.createXmlParser(xml).getTokenStream();
        XmlParser parser = new XmlParser(tokenStream);

        parser.nextToken();
        parser.nextToken();
        JsonToken currToken = parser.getCurrentToken();
        assertEquals(JsonToken.VALUE_STRING, currToken);

        String value = parser.nextTextValue();
        assertEquals("hello world", value);

        parser.nextToken();
        value = parser.nextTextValue();
        assertEquals(null, value); // Currently returns null, but should return "hello world"
    }
}
