public void testZipFileCorruption() {
    ZipOutputStream zipOut = new ZipOutputStream(new ByteArrayOutputStream());
    ZipArchiveEntry entry1 = new ZipArchiveEntry("file1.txt");
    entry1.setSize(0);
    zipOut.putArchiveEntry(entry1);
    zipOut.closeEntry();

    ZipArchiveEntry entry2 = new ZipArchiveEntry("file1.txt");
    entry2.setSize(0);
    zipOut.putArchiveEntry(entry2);
    zipOut.closeEntry();

    // ZipArchiveEntry should not use the same filename if setName() is called after creation
    ZipArchiveEntry entry3 = new ZipArchiveEntry("file1.txt");
    entry3.setName("file2.txt");
    entry3.setSize(0);
    zipOut.putArchiveEntry(entry3);
    zipOut.closeEntry();
}