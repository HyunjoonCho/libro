public void testArchiveInputStream() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zos = new ZipArchiveOutputStream(bos);
    zos.putArchiveEntry(new ArchiveEntry("DirÄ"));
    zos.closeEntry();
    zos.putArchiveEntry(new ArchiveEntry("File.txt"));
    zos.closeEntry();
    zos.close();

    ArchiveInputStream ais = new ZipArchiveInputStream(new ByteArrayInputStream(bos.toByteArray()));
    ais.getNextEntry();
    assertEquals(ArchiveEntry.DIRECTORY, ais.getEntry().getType()); // should pass
    ais.getNextEntry();
    assertEquals("File.txt", ais.getEntry().getName()); // should pass
    ais.getNextEntry();
    assertEquals("DirÄ/", ais.getEntry().getName()); // should pass
}