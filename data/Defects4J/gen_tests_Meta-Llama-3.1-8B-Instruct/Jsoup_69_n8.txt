java
public void testIssueJsoupFormData() {
    String html = "<html><body><form><input name=\"alpha\" value=\"value\"/></form></body></html>";
    Document doc = Jsoup.parse(html);
    Connection.Response response = new Connection.Response(doc);
    FormElement form = (FormElement)doc.select("form").first();

    // Remove a form element
    form.select("input[name=alpha]").first().remove();

    // The issue is that formData() method is not updated to reflect the changes made to the form
    // We should manually update the form data to fix this issue
    List<Connection.KeyVal> data = new ArrayList<>();
    for (Element elem : form.elements()) {
        if (elem.tagName().equals("input") && elem.hasAttr("name")) {
            data.add(new Connection.KeyVal(elem.attr("name"), elem.attr("value")));
        }
    }
    assertEquals(0, data.size());
}
