public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    formatter.setWidth(20);
    String[] options = {"-option1", "This is a very long option description that should wrap to multiple lines."};
    formatter.printHelp("Test", options);
    String help = formatter.getFullHelp();
    int width = 20;
    for (int i = 1; i <= help.length() / width; i++) {
        int startPos = i * width;
        int wrapPos = HelpFormatter.findWrapPos(help.substring(startPos), width, 0);
        if (wrapPos!= -1) {
            assertEquals(startPos + wrapPos, Math.min(startPos + width, help.length()));
        }
    }
}