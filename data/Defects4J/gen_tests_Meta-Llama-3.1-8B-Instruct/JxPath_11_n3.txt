public void testIncompleteNamespaceHandling() {
    // Create a document with a namespace declaration
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element root = doc.createElementNS("http://example.com", "ElementA");
    root.setAttributeNS("http://example.com", "http://example.com/myAttr", "MyType");
    doc.appendChild(root);

    // Create an element with a namespace prefix
    Element child = doc.createElementNS("http://example.com", "B:ElementB");
    child.setTextContent("MY VALUE");
    root.appendChild(child);

    // Try to create an attribute with a namespace prefix
    try {
        doc.getDocumentElement().getAttributeNodeNS("A", "http://example.com/myAttr");
        fail("Expected UnknownPrefixException");
    } catch (DOMException e) {
        assertEquals("unknown namespace prefix: A", e.getMessage());
    }
}