java
public void testDeserializeExternalTypeIdBeforePojo() throws JsonProcessingException, JsonMappingException, IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new SimpleModule());
    ExternalType externalType = new ExternalType();
    JsonNode json = mapper.writeValueAsBytes(externalType);
    JsonNode expected = JsonNodeFactory.instance.fromString("{\"@type\":\"com.example.ExternalType\"}");
    JsonNode actual = mapper.readTree(json);
    assertEquals(expected, actual);
}

class ExternalType {
    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY)
    public static class Inner {
        public String foo = "bar";
    }
}
