public void testArchiveStreamFactoryEncoding() throws IOException {
    String encoding = "UTF-8";
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bos.write("test".getBytes(encoding));
    bos.close();

    byte[] bytes = bos.toByteArray();

    // ArjArchiveInputStream
    ArjArchiveInputStream ais = new ArjArchiveInputStream(new ByteArrayInputStream(bytes));
    assertEquals(encoding, ais.getEncoding());

    // CpioArchiveInputStream
    CpioArchiveInputStream cis = new CpioArchiveInputStream(new ByteArrayInputStream(bytes));
    assertEquals(encoding, cis.getEncoding());

    // DumpArchiveInputStream
    DumpArchiveInputStream dis = new DumpArchiveInputStream(new ByteArrayInputStream(bytes));
    assertEquals(encoding, dis.getEncoding());

    // JarArchiveInputStream
    JarArchiveInputStream jais = new JarArchiveInputStream(new ByteArrayInputStream(bytes));
    assertEquals(encoding, jais.getEncoding());

    // JarArchiveOutputStream
    ByteArrayOutputStream bos2 = new ByteArrayOutputStream();
    JarArchiveOutputStream jos = new JarArchiveOutputStream(bos2, encoding);
    jos.close();
    assertEquals(encoding, jos.getEncoding());
}