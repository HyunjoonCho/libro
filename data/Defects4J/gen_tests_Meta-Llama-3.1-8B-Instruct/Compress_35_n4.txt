public void testTarChecksum() {
    byte[] data = new byte[] {(byte) '1', (byte) '2', (byte) '3', (byte) '4'};
    int checksum = 0x1234;
    byte[] tarHeader = new byte[512];
    System.arraycopy(data, 0, tarHeader, 0, data.length);
    System.arraycopy(ByteUtils.intToBytes(checksum), 0, tarHeader, data.length, 4);
    // right-aligned checksum
    for (int i = data.length + 4; i < 512; i++) {
        tarHeader[i] = 0;
    }
    // left-aligned checksum
    tarHeader[data.length] ='';
    tarHeader[data.length + 1] ='';
    tarHeader[data.length + 2] ='';
    tarHeader[data.length + 3] ='';
    tarHeader[data.length + 4] ='';
    tarHeader[data.length + 5] ='';
    tarHeader[data.length + 6] = (byte) (checksum & 0x0F);
    tarHeader[data.length + 7] = (byte) ((checksum >> 4)