public void testToStringStyleMemoryLeak() {
    Thread thread = Thread.currentThread();
    ToStringStyle style = ToStringStyle.JSON_STYLE;
    thread.setContextClassLoader(new ClassLoader() {
        @Override
        protected Class<?> loadClass(String name) throws ClassNotFoundException {
            if (name.equals(ToStringStyle.class.getName())) {
                return null;
            }
            return super.loadClass(name);
        }
    });
    try {
        new ToStringStyle();
    } catch (Exception e) {
        fail("ToStringStyle should not throw an exception");
    }
    assertNotNull(ToStringStyle.JSON_STYLE);
    thread.setContextClassLoader(null);
    try {
        new ToStringStyle();
    } catch (Exception e) {
        fail("ToStringStyle should not throw an exception");
    }
}