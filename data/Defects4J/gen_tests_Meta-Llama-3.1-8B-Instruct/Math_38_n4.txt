public void testBOBYQAOptimizerFailure() {
    int dim = 5;
    BOBYQAOptimizer optim = new BOBYQAOptimizer(2 * dim + 2);
    try {
        optim.optimize(100000, new Function() {
            @Override
            public double value(double[] point) {
                return 0; // dummy function
            }
        }, Goal.MINIMIZE, new double[0], null, null);
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // expected
    }
}