java
public void testProcessCommonJSModulesFailures() throws Exception {
    // Create a temporary directory
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "process-common-js-modules-test");
    tempDir.mkdir();

    // Create echo.js file
    File echoJsFile = new File(tempDir, "echo.js");
    PrintWriter writer = new PrintWriter(echoJsFile);
    writer.println("define(function() { return { echo: function(val) { console.log(val); } }; });");
    writer.close();

    // Create echo-main.js file
    File echoMainJsFile = new File(tempDir, "echo-main.js");
    writer = new PrintWriter(echoMainJsFile);
    writer.println("var echo = require('echo'); echo.echo('hello world');");
    writer.close();

    // Compile the code with ProcessCommonJSModules
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar",
            "--formatting=PRETTY_PRINT",
            "--jscomp_error=checkTypes",
            "--compilation_level=SIMPLE_OPTIMIZATIONS",
            "--transform_amd_modules",
            "--process_common_js_modules",
            "--js=" + echoJsFile.getAbsolutePath(),
            "--js="