public void testInvalidTableContentsMovedUpTooFar() throws IOException {
    File in = getFile("/htmltests/table-invalid-elements.html");
    Document doc = Jsoup.parse(in, "UTF-8");
    String rendered = doc.toString();
    int endOfEmail = rendered.indexOf("Comment");
    int pTag = rendered.indexOf("<p>Why am I here?</p>");
    int startOfInnerTable = rendered.indexOf("<table>");
    assertTrue("Comment not found", endOfEmail > -1);
    assertTrue("Search text not found", pTag > -1);
    assertTrue("Inner table not found", startOfInnerTable > -1);
    assertTrue("P tag did not come after inner table", pTag > startOfInnerTable);
    assertTrue("P tag did not come after comment", pTag > endOfEmail);
}