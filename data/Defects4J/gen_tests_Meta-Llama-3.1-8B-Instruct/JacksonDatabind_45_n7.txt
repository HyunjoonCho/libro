public void testShapePrecedence() {
    // Fail before fix
    DateTimeFormatter dtf = DateTimeFormat.forPattern("M");
    try {
        dtf.parseDateTime("12", Locale.US);
        fail("Expected java.text.ParseException");
    } catch (ParseException e) {
    }
    
    // Pass after fix
    dtf = DateTimeFormat.forPattern("M").withTextProvider(Locale.US);
    dtf.parseDateTime("twelve");
    
    // Test precedence of explicit shape
    dtf = DateTimeFormat.forPattern("M").withLocale(Locale.US).withShape(Shape.Numeric);
    try {
        dtf.parseDateTime("twelve");
        fail("Expected java.text.ParseException");
    } catch (ParseException e) {
    }
}