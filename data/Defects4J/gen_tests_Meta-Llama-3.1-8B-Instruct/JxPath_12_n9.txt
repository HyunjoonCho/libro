public void testIncompleteNamespaceHandling() {
    // Create a Document with a namespace declaration
    Document document = new Document();
    document.registerNamespace("A", "http://example.com/A");
    document.registerNamespace("B", "http://example.com/B");

    // Create an ElementA with an attribute with namespace A
    Element elementA = new Element("ElementA");
    elementA.setAttributeNS("http://example.com/A", "A:myAttr", "Mytype");

    // Create an ElementB with namespace B
    Element elementB = new Element("ElementB");
    elementB.setText("MY VALUE");

    // Add ElementB to ElementA
    elementA.appendChild(elementB);

    // Try to create an attribute with an unknown namespace
    try {
        elementA.setAttributeNS("http://unknown.com", "A:unknownAttr", "unknownValue");
        fail("Expected exception for unknown namespace");
    } catch (UnknownNamespaceException e) {
        assertEquals("unknown namespace prefix: A", e.getMessage());
    }
}