public void testClosureCompiler() throws Exception {
    String input = "var foreignObject = gfx.parentNode.parentNode;\n" +
            "var parentContainer = foreignObject.parentNode.parentNode;";
    String expectedOutput = "if(b){if(a=b.parentNode.parentNode,b=a.parentNode.parentNode,null!==b)";
    String actualOutput = runClosureCompiler(input);
    assertEquals(expectedOutput, actualOutput);
}

private String runClosureCompiler(String input) throws Exception {
    // Run the Closure Compiler using the command line
    Process process = Runtime.getRuntime().exec("java -jar compiler.jar --js tmp.js");
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String output = reader.readLine();
    while (reader.readLine()!= null) {
        output += reader.readLine();
    }
    return output;
}