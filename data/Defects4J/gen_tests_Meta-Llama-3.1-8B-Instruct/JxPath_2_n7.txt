java
public void testNodeSetReturnedByExtensionFunction() {
    // Create a context
    ExpressionContext context = createContext();
    
    // Call the function that returns a NodeSet
    Expression expression = new Expression("ems:observations()");
    NodeSet nodeSet = (NodeSet) expression.evaluate(context);
    
    // Check if the NodeSet contains the expected number of nodes
    assertEquals(1, nodeSet.size());
    
    // Check if the NodeSet contains the expected nodes
    NodeSet expectedNodes = new BasicNodeSet();
    // Assuming you know the structure of the nodes returned by the function
    // and can create them programmatically
    Node node = createNode();
    expectedNodes.add(node);
    assertEquals(expectedNodes, nodeSet);
}
