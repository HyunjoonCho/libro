public void testNodeSet() {
    NodeSet ns = new BasicNodeSet();
    Node node = new Node();
    node.appendChild(new Node());
    ns.add(node);
    JXPathContext jc = JXPathContext.newInstance();
    Expression expr = jc.compileExpression("ems:observations()");
    Object result = expr.evaluate(ns);
    assertTrue(result instanceof NodeSet);
    assertEquals(1, ((NodeSet) result).size());
    NodeSet ns2 = (NodeSet) result;
    assertEquals(1, ns2.size());
    Node n = ns2.get(0);
    assertNotNull(n);
    assertEquals(1, n.getChildNodes().getLength());
}