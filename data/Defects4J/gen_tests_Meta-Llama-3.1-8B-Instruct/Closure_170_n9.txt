javascript
public void testOverlyAggressiveCommaRemoval() {
    Function test = new Function("n", "var i = 0; return typeof n!== 'undefined'? (i = n.length) : (n = 'foo'), i");
    Object dummy = "6chars";
    assertEquals(6, test.call(null, dummy));
}
