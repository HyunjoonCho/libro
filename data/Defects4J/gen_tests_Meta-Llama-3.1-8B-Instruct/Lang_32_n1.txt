public void testToStringStyleMemoryLeak() {
    ThreadLocal<ToStringStyle> threadLocal = new ThreadLocal<>();
    try {
        ToStringStyle style = ToStringStyle.SIMPLE_STYLE;
        threadLocal.set(style);
        // Do some work that keeps the thread alive
        while (true) {}
    } catch (StackOverflowError e) {
        // Ignore
    }
    threadLocal.remove();
}