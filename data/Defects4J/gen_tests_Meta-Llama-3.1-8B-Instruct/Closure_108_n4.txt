java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerTestCase;

public class ScopedAliasesTest extends CompilerTestCase {

    public void testPreconditionCrash() throws Exception {
        String code = """
            var goog = {};
            goog.scope;

            var ns = {};
            ns.sub = {};
            /** @constructor */
            ns.sub.C = function() {};

            goog.scope(function() {
              var sub = ns.sub;
              /** @type {sub.C} */
              var x = null;
            });
            """;

        Compiler compiler = getCompiler();
        compiler.setWarningLevel(Compiler.WarningLevel.ERROR);
        compiler.compile(code);
        assertErrorContains("goog.scope local with aliased in the type declaration");
    }
}
