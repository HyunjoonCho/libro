public void testTypedefResolution() {
    String jsCode = 
        "goog.provide('a.b.c');" +
        "goog.scope(function() {" +
        "var b = a.b;" +
        "var c = b.c;" +
        "/** @typedef {string} */" +
        "c.MyType;" +
        "/** @param {c.MyType} x The variable. */" +
        "c.myFunc = function(x) {};" +
        "});";
    try {
        JSCompiler.compile(jsCode);
        fail("Expected compilation error");
    } catch (Exception e) {
        // expected
    }
}