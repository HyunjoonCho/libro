public void testUtf16BomProcessing() {
    byte[] utf16Bom = new byte[] { (byte) 0xff, (byte) 0xfe, (byte) 0x00, 0x68 };
    byte[] utf8Bom = new byte[] { (byte) 0xef, (byte) 0xbb, (byte) 0xbf, 0x68 };
    byte[] data = new byte[] { 0x68 };

    byte[] utf16Bytes = new byte[utf16Bom.length + data.length];
    System.arraycopy(utf16Bom, 0, utf16Bytes, 0, utf16Bom.length);
    System.arraycopy(data, 0, utf16Bytes, utf16Bom.length, data.length);

    byte[] utf8Bytes = new byte[utf8Bom.length + data.length];
    System.arraycopy(utf8Bom, 0, utf8Bytes, 0, utf8Bom.length);
    System.arraycopy(data, 0, utf8Bytes, utf8Bom.length, data.length);

    byte[] expectedUtf16Bytes = new byte[utf16Bom.length + data.length];
    System.arraycopy(utf