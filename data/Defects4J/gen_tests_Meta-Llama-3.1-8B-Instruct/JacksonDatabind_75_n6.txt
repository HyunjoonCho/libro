public void testJsonFormatOnEnum() {
    ObjectMapper mapper = new ObjectMapper();
    JsonFormat annotation = JsonFormat.Shape.NUMBER_INT.annotationType().newInstance();
    annotation.shape(JsonFormat.Shape.NUMBER_INT);
    Field field = Color.class.getField("RED");
    field.setAccessible(true);
    field.setAnnotation(annotation);
    assertEquals(Integer.valueOf(0), mapper.writeValueAsInt(Color.RED));
}