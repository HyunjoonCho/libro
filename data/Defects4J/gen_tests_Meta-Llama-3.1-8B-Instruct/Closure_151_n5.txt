public void testVersionOption() {
    try {
        Process process = Runtime.getRuntime().exec("java -jar compiler.jar --version");
        int exitCode = process.waitFor();
        fail("Expected process to exit with error code, but exited with " + exitCode);
    } catch (IOException | InterruptedException e) {
        // expected, do nothing
    }
}