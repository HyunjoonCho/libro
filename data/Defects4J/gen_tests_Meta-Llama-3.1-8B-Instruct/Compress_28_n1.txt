public void testTarArchiveInputStreamSilentlyFinished() throws IOException {
    String archivePath = PathUtil.join(testdataDir, "test.tar.bz2");
    TarArchiveInputStream input = new TarArchiveInputStream(new BZip2CompressorInputStream(
            new ByteArrayInputStream(new byte[] {0x1f, 0x9d, 0x9a, 0x9a, 0x9a, 0x9a, 0x9a, 0x9a}), true));
    ArchiveEntry nextMatchedEntry = input.getNextEntry();
    assertNotNull(nextMatchedEntry);
    while (true) {
        try {
            input.read();
        } catch (IOException e) {
            fail("Expected TarArchiveInputStream to throw IOException, but it was not thrown");
        }
    }
}