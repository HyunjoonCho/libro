javascript
const { JSDoc } = require('jsdoc');

describe('JSDoc @lends test', () => {
  it('should throw an error when @lends is used without a class definition', () => {
    const code = `
      /**
       * @lends Person.prototype
       */
      function Person() {}
    `;
    expect(() => JSDoc.parse(code)).toThrowError('Variable Person.prototype not declared before @lends annotation.');
  });

  it('should work when class is defined before @lends', () => {
    const code = `
      /**
       * @class
       */
      function Person() {}

      /**
       * @lends Person.prototype
       */
      Person.prototype.someMethod = function() {};
    `;
    expect(() => JSDoc.parse(code)).not.toThrowError();
  });
});
