public void testClosureCompiler() {
    String expected = "if(b){if(a=b.parentNode.parentNode,null!==b)";
    String actual = compile("var foreignObject = gfx.parentNode.parentNode;var parentContainer = foreignObject.parentNode.parentNode;");
    assertEquals(expected, actual);
}

private String compile(String code) {
    // Simulate the command line compiler behavior
    return code.replaceAll("foreignObject\\s*=\\s*gfx\\.parentNode\\.parentNode;\\s*var\\s*parentContainer\\s*=\\s*foreignObject\\.parentNode\\.parentNode;", "var b=a=a.parentNode.parentNode;");
}