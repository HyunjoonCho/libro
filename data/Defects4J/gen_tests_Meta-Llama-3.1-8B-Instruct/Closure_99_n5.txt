javascript
describe('Prototypes declared with quotes produce a JSC_USED_GLOBAL_THIS warning', () => {
  it('should produce a warning', () => {
    // @ts-ignore
    class MyClass {}
    MyClass.prototype["MyMethod"] = function(a) {
      this.a = a;
    }
    window["MyClass"] = MyClass;
    expect(globalThis.console).toHaveConsoleError('JSC_USED_GLOBAL_THIS');
  });

  it('should produce a warning when implementing an interface', () => {
    interface MyParent {
      MyMethod(a: any): void;
    }

    // @ts-ignore
    class MyClass implements MyParent {}
    MyClass.prototype["MyMethod"] = function(a) {
      this.a2 = a;
    }
    window["MyClass"] = MyClass;
    expect(globalThis.console).toHaveConsoleError('JSC_USED_GLOBAL_THIS');
    expect(globalThis.console).toHaveConsoleError('property MyMethod on interface MyParent is not implemented by type MyClass');
  });
});
