public void testDefectiveZipArchive() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipOutputStream zos = new ZipOutputStream(bos);
    zos.putNextEntry(new ZipEntry("test"));
    zos.closeEntry();
    zos.close();
    ZipFile zf = new ZipFile(new ZipInputStream(new ByteArrayInputStream(bos.toByteArray())));
    try {
        zf.getEntry("test");
        fail("Expected EOFException");
    } catch (EOFException e) {
        // expected
    }
}