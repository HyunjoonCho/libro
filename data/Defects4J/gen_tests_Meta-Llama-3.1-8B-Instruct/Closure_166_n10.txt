public void testUnionInferenceInconsistency() {
    // Test that the type of the record input to func and func2 are identical
    Object record = new Object();
    record.getClass(); // This line should not throw any errors

    // Test that the function parameter types are not consistent
    @SuppressWarnings("unchecked")
    Object[] funcParamTypes = new Object[]{String.class, new Object() {
        @Override
        public String prop() {
            return "a";
        }
    }.getClass()};
    @SuppressWarnings("unchecked")
    Object[] func2ParamTypes = new Object[]{String.class, new Object() {
        @Override
        public String prop() {
            return "a";
        }
    }.getClass()};

    assertArrayEquals(funcParamTypes, new Object[]{String.class, new Object() {
        @Override
        public String prop() {
            return "a";
        }
    }.getClass()});
    assertArrayEquals(func2ParamTypes, new Object[]{String.class, new Object() {
        @Override
        public String prop() {
            return "a";
        }
    }.getClass()});
}