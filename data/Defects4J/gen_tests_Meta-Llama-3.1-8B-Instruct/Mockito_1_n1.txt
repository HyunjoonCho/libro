public void testArgumentCaptorWithVarargs() {
    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    doNothing().when(mock(Object.class).method("arg1", captor.capture(), "arg3", "arg4"));
    mock.method("arg1", "arg2", "arg3", "arg4");
    List<String> capturedArgs = captor.getAllValues();
    assertEquals(1, capturedArgs.size());
    assertEquals("arg2", capturedArgs.get(0));
}