java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.ObjectMapperTestBase;
import com.fasterxml.jackson.databind.SerializationConfig;
import com.fasterxml.jackson.databind.util.ISO8601Utils;

import org.junit.Test;

import static org.junit.Assert.fail;

public class JsonUnwrappedWithAcceptCaseInsensitivePropertiesTest extends ObjectMapperTestBase {

    @Test
    public void testIssue133() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(SerializationFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES);
        mapper.enable(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS);

        Person person = new Person();
        person.businessAddress.street = "street";
        person.businessAddress.addon = "addon";
        person.businessAddress.zip = "zip";
        person.businessAddress.town = "town";
        person.businessAddress.country = "country";

        String json = mapper.writeValueAsString(person);
        System.out.println(json);
    }

    public static class Person {
        @JsonUnwrapped(prefix = "businessAddress.")
        public Address businessAddress;
    }

    public static class Address {
        public String street;
        public String addon;
        public String zip = "";
        public String town;
        public String country;
    }
}
