public void testPrivateFunctionInScope() {
    try {
        // Attempt to compile the following JavaScript code
        String jsCode = "goog.scope(function() { /* @private */ function test() {} });";
        // No compilation error should be thrown
        // But in this Java test, we check that a compilation error is indeed thrown
        // when we try to access the function outside the scope
        String jsCodeWithAccess = "goog.scope(function() { /* @private */ function test() {} });\ntest();";
        JavaScriptEngineManager engineManager = new JavaScriptEngineManager();
        ScriptEngine engine = engineManager.getEngineByName("js");
        engine.eval(jsCode);
        try {
            engine.eval(jsCodeWithAccess);
            fail("Expected compilation error");
        } catch (ScriptException e) {
            // Expected compilation error
        }
    } catch (Exception e) {
        fail("Unexpected compilation error");
    }
}