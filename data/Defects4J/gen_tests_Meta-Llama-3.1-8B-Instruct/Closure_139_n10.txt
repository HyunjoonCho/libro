function testRedefinitionOfFunction() {
    var originalConsole = console;
    var originalAssert = assert;
    console = { error: function(message) {} };
    assert = function(b) { if (!b) throw "error" };

    assert(f() === 1);
    var f = function() { return 2; };
    assert(f() === 2);

    function f() { return 1; }

    console = originalConsole;
    assert = originalAssert;

    try {
        f();
    } catch (e) {
        assert(e === "error");
    }
}