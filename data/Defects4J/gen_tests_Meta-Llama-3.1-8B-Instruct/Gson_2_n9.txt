public void testTypeHierarchyAdapterRuntimeCheck() {
    Vehicle vehicle = new TypeHierarchyAdapter<Vehicle>(Vehicle.class);
    JSONDecoder decoder = new JSONDecoder(vehicle);
    try {
        decoder.decode("{\"make\":\"Ford\",\"model\":\"F-150\"}");
        fail("Expected ClassCastException");
    } catch (ClassCastException e) {
        // Expected
    }
}