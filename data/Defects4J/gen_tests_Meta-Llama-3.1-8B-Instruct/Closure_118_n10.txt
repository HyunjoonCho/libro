public void testPrototypeMethod() {
    Object foo = new Object();
    foo.getClass().getMethod("putField", String.class, Object.class).invoke(foo, "bar", new Object() {
        public void bar1() {
            System.out.println("bar1");
        }
    });
    ((Map) foo.getClass().getField("bar").get(foo)).put("bar1", "bar1");
    ((Map) foo.getClass().getField("bar").get(foo)).getClass().getMethod("get", String.class).invoke(((Map) foo.getClass().getField("bar").get(foo)), "bar1");
}