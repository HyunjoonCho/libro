public void testCastingFunction() {
    Object obj = new Object();
    Method method = obj.getClass().getMethod("toString");
    Object result = ((Method)method).invoke(obj);
    try {
        method = obj.getClass().getMethod("toString");
        method.invoke(obj);
        fail("Expected exception");
    } catch (Exception e) {
        // expected
    }
}