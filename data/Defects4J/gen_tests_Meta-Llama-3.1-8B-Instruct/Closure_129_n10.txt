javascript
// Test case for bug where casting a function before calling it produces bad code
function testCastFunction() {
    // Test case 1: Casting a function before calling it
    var func = /** @type {function(!string):!string} */ ((new ActiveXObject('ShockwaveFlash.ShockwaveFlash'))['GetVariable']);
    try {
        func("$version");
        assert(false); // This should throw an error
    } catch (e) {
        assert(true); // This should pass and throw an error
    }

    // Test case 2: Not casting a function before calling it
    func = (new ActiveXObject('ShockwaveFlash.ShockwaveFlash'))['GetVariable'];
    try {
        func("$version");
    } catch (e) {
        assert(false); // This should not throw an error
    }
}
