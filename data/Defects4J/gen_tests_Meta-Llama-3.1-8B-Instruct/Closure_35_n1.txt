public void testAssignmentInConditional() {
    Object result = new Object();
    if (true) {
        result = new HashMap<>();
        ((Map<String, Object>) result).put("prop1", new HashMap<String, Object>() {{
            put("a", 3);
        }});
    }
    if (true) {
        ((Map<String, Object>) result).put("prop2", "prop2");
    } else {
        ((Map<String, Object>) result).put("prop3", "prop3");
    }
    Map<String, Object> expected = new HashMap<>();
    expected.put("prop1", new HashMap<String, Object>() {{
        put("a", 3);
    }});
    expected.put("prop2", "prop2");
    assertEquals(expected, result);
}