public void testVersionOption() {
    Process process = new ProcessBuilder("java", "-jar", "compiler.jar", "--version")
           .redirectErrorStream(true)
           .redirectOutput(ProcessBuilder.Redirect.PIPE)
           .start();
    process.waitFor();
    assertEquals("Closure Compiler (http://code.google.com/closure/compiler)\nVersion: 698\nBuilt on: 2011/01/17 12:16", new String(process.getInputStream().readAllBytes()));
}