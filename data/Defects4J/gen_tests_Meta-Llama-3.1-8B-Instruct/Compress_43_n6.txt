java
public void testZipVersionNeededToExtract() throws IOException {
    ZipArchiveOutputStream zipOut = new ZipArchiveOutputStream(new ByteArrayOutputStream());
    zipOut.putArchiveEntry(new ZipArchiveEntry("test"));
    zipOut.closeEntry();

    // Create a zip file with Deflate compression and no data descriptors
    zipOut = new ZipArchiveOutputStream(new ByteArrayOutputStream());
    zipOut.putArchiveEntry(new ZipArchiveEntry("test"));
    zipOut.setMethod(ZipArchiveEntry.DEFLATED);
    zipOut.closeEntry();
    zipOut.close();

    // Load the zip file and check the version needed to extract in the local file header
    ZipFile zipFile = new ZipFile(new File("test.zip"));
    ZipEntry entry = zipFile.getEntry("test");
    assertEquals(ZIP64_MIN_VERSION, entry.getExtra().getInt(ZipShort.MIN_VERSION));

    // Load the zip file and check the version needed to extract in the central directory
    ZipArchiveInputStream zipIn = new ZipArchiveInputStream(new FileInputStream("test.zip"));
    ZipArchiveEntry centralDirEntry = zipIn.getNextEntry();
    assertEquals(DATA_DESCRIPTOR_MIN_VERSION, centralDirEntry.getZip64());

    // Clean up
    Files.delete(Paths.get("test.zip"));
}
