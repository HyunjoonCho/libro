java
public void testWriteEmbeddedObjectByteArray() throws JsonProcessingException {
    JsonGenerator gen = new JsonFactory().createGenerator(System.out);
    gen.writeStartObject();
    gen.writeFieldName("test");
    gen.writeEmbeddedObject(new byte[] {1, 2, 3});
    gen.writeEndObject();
    gen.close();

    // Manually serialize to get expected JSON
    JsonGenerator expectedGen = new JsonFactory().createGenerator(System.out);
    expectedGen.writeStartObject();
    expectedGen.writeFieldName("test");
    expectedGen.writeBinaryValue(new byte[] {1, 2, 3});
    expectedGen.writeEndObject();
    expectedGen.close();

    // Load JSON from output and compare
    ObjectMapper mapper = new ObjectMapper();
    JsonNode actual = mapper.readTree(gen.getOutputTarget());
    JsonNode expected = mapper.readTree(expectedGen.getOutputTarget());
    assertEquals(expected, actual);
}
