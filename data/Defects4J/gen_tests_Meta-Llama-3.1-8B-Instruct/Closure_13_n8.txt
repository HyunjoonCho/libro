public void testNonReplacedBooleanValues() {
    Boolean externalRef = true;
    boolean fn1 = null;
    boolean fn2 = null;

    if (true) {
        fn2 = externalRef;
        fn1 = new Boolean(true) {
            @Override
            public boolean booleanValue() {
                return fn2.booleanValue();
            }
        };
    }

    assert fn1 == null;
    assert fn2 == null;

    Object obj = new Object() {
        {
            fn1 = true;
        }
    };

    if (fn1!= null) {
        fn1 = true;
    }

    assert fn1 == null;

    obj = new Object() {
        {
            fn1 = true;
        }
    };

    if (fn1!= null) {
        fn1 = true;
    }

    assert fn1 == true;
}