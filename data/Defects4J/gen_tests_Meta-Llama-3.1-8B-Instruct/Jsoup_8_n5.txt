java
public void testToStringNPEForOrphans() {
    List<String> list = new ArrayList<>();
    String element = "testElement";
    list.add(element);
    list.remove(element);
    list.add(element); // element is now in a detached state
    try {
        list.toString(); // This should not throw a NPE
    } catch (NullPointerException e) {
        fail("Expected no NPE, but got: " + e.getMessage());
    }
}
