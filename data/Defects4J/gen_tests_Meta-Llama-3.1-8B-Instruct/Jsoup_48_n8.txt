public void testDuplicateHeader() {
    Map<String, List<String>> headers = new HashMap<>();
    List<String> values = new ArrayList<>();
    values.add("PHP/5.2.8");
    values.add("ASP.NET");
    headers.put("X-Powered-By", values);

    Response response = mock(Response.class);
    when(response.headers()).thenReturn(headers);

    processResponseHeaders(response.headers());

    ArgumentCaptor<String> headerCaptor = ArgumentCaptor.forClass(String.class);
    verify(response).header(headerCaptor.capture());
    String headerValue = headerCaptor.getValue();
    assertEquals("PHP/5.2.8 ASP.NET", headerValue);
}