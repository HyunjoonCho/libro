public void testDefaultOptionsNotUpdated() {
    OptionGroup group = new OptionGroup("group", "test");
    group.setRequired(false);
    group.addOption(new Option("a"));
    group.addOption(new Option("b"));
    group.setAllowMultiple(true);
    group.setAllowUnrecognized(true);
    group.setMutuallyExclusive(true);

    OptionSet options = new OptionSet();
    options.add("a");
    options.add("b");

    CommandLineParser parser = new DefaultParser();
    try {
        parser.parse(new DefaultParser(), new String[] {"-a"}, options);
    } catch (ParseException e) {
        fail("Unexpected exception");
    }

    assertTrue(options.containsOption("a"));
    assertTrue(options.containsOption("b"));
}