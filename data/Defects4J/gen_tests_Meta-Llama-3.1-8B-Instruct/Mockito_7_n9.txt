public void testGenericsDeepStubbing() {
    MyClass1<MyClass2<MyClass3>> myMock1 = mock(MyClass1.class, RETURNS_DEEP_STUBS);

    when(myMock1.getNested()).thenReturn(new MyClass2<MyClass3>() {
        @Override
        public MyClass3 getNested() {
            return mock(MyClass3.class);
        }
    });

    when(myMock1.getNested().getNested()).thenReturn(mock(MyClass3.class));
}