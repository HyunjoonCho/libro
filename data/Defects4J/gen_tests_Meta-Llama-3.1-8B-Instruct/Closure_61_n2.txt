public void testClosureRemovesNeededCode() {
    ClosureCompiler compiler = new Compiler();
    String source = "Math.blah = function(test) { test.a = 5; };\n" +
                    "var test = new Object();\n" +
                    "Math.blah(test);";
    CompilerOptions options = new CompilerOptions();
    CompilerResult result = compiler.compile(source, options);
    assertEquals("Math.blah=function(a){a.a=5};var test={};", result.toSource());
}