java
@Test
public void testDeserializeExternalTypeIdBeforePojo() {
    // Create a simple POJO
    class Person {
        @JsonTypeInfo(use = JsonTypeInfo.Id.EXTERNAL_PROPERTY, include = JsonTypeInfo.As.EXTERNAL_PROPERTY)
        public static final String TYPE_PROPERTY = "type";
        public String type;
        public String name;

        @JsonCreator
        public Person(@JsonProperty(TYPE_PROPERTY) String type, @JsonProperty("name") String name) {
            this.type = type;
            this.name = name;
        }
    }

    // Create a simple serializer and deserializer
    ObjectMapper mapper = new ObjectMapper();
    ObjectReader reader = mapper.readerFor(Person.class);
    ObjectWriter writer = mapper.writerFor(Person.class);

    // Serialize a Person object with External Type Id
    Person person = new Person("Person", "John");
    String json = writer.writeValueAsString(person);

    // Deserialize the Person object
    Person deserializedPerson = reader.readValue(json);

    // Check that the deserialization was successful
    assertEquals("Person", deserializedPerson.type);
    assertEquals("John", deserializedPerson.name);
}
