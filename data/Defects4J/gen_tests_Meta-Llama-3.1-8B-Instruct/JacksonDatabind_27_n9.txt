public void testExternalTypeIdBeforePojo() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(DeserializationFeature.USE_BIG_DECIMAL_FOR_FLOATS);
    ObjectWriter writer = mapper.writerWithDefaultPrettyPrinter();
    String json = "{\"@type\":\"com.example.MyPojo\",\"field1\":\"value1\"}";
    byte[] bytes = writer.writeValueAsBytes(json.getBytes());
    byte[] bytesWithExternalTypeId = new byte[bytes.length + 5];
    System.arraycopy(bytes, 0, bytesWithExternalTypeId, 0, bytes.length);
    for (int i = 0; i < 5; i++) {
        bytesWithExternalTypeId[bytes.length + i] = 'a';
    }
    String modifiedJson = new String(bytesWithExternalTypeId);
    try {
        ObjectReader reader = mapper.readerForUpdating(new Object());
        reader.readValue(modifiedJson);
        fail("Expected DeserializationException");
    } catch (JsonParseException e) {
        // expected
    }
}