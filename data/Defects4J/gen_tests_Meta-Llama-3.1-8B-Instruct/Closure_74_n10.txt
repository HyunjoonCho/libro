public void testInlineIfOptimization() {
    Object a = "a";
    Object b = "b";
    assertEquals("b", inlineIf(true == null? a : b));
    assertEquals("b", inlineIf(!0 == null? a : b));
    assertEquals(3, (int)inlineIf(true == false? 2 : 1) + 1);
}

private Object inlineIf(boolean condition, Object a, Object b) {
    return condition? a : b;
}