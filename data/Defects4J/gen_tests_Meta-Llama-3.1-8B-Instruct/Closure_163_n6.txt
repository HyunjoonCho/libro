public void testVarCheckCrashWhenUsingModules() {
    String jqueryJs = "jQuery(function($) { " +
            "  equal( jQuery(\" <div/> \").length, 1, \"Make sure whitespace is trimmed.\" );" +
            "});";

    String coreJs = "var jQuery$$2 = 'core';";

    String jqueryExterns = "";

    String qunitExterns = "";

    String outputDir = "output";

    String[] args = new String[] {
            "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--formatting", "PRETTY_PRINT",
            "--debug", "--module", "jquery:1",
            "--module", "core:1:jquery",
            "--module_output_path_prefix", "mod",
            "--js", "jquery.js",
            "--js", coreJs,
            "--externs", qunitExterns,
            "--js_output_file", outputDir + "/output.js"
    };

    // Set up a mock for the process builder to simulate the Java process execution
    ProcessBuilder processBuilder = mock(ProcessBuilder.class);
    when(processBuilder.command(anyString())).thenReturn(processBuilder);
    when(processBuilder.start()).thenThrow(new RuntimeException("INTERNAL COMPILER ERROR