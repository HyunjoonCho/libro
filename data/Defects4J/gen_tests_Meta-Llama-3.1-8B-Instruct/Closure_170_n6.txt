public void testOverlyAggressiveCommaRemoval() {
    Function<Integer> test = new Function<Integer>() {
        public Integer apply(Integer n) {
            Integer i = 0;
            return n!= null? (i = n.length()) : (n = "foo"), i;
        }
    };
    String dummy = "6chars";
    assertEquals(6, test.apply(dummy));
}