java
public void testTarArchiveInputStreamHandlesCorruptFiles() throws IOException {
    InputStream is = new InputStream() {
        @Override
        public int read() throws IOException {
            return -1;
        }
    };

    TarArchiveInputStream tas = new TarArchiveInputStream(is);
    try {
        tas.getNextEntry();
        fail("Expected IOException, but no exception was thrown");
    } catch (IOException e) {
        // expected
    } catch (IllegalArgumentException e) {
        fail("Expected IOException, but IllegalArgumentException was thrown");
    }
}
