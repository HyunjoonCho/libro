public void testJsonGenerationException() {
    String json = "xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0300xxx\u0301";
    byte[] bytes = json.getBytes(StandardCharsets.UTF_8);
    byte[] buffer = new byte[bytes.length + 1];
    System.arraycopy(bytes, 0, buffer, 0, bytes.length);
    try (ByteArrayOutputStream bos = new ByteArrayOutputStream()) {
        bos.write(buffer);
        bos.write(0); // adding a character to make the buffer full
        byte[] buffer2 = bos.toByteArray();
        JsonGenerator gen = new UTF8JsonGenerator(bos);
        gen.writeRaw(buffer2);
    } catch (IOException e) {
        // expected exception
    }
}