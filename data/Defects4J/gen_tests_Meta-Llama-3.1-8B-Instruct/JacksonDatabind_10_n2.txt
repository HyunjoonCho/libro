public void testJsonAnyGetterWithJsonSerialize() {
    Object obj = new Object() {
        @JsonSerialize(using = MySerializer.class)
        @JsonAnyGetter
        public Map<String, String> getParameters(){
            return Collections.singletonMap("key", "value");
        }
    };
    try {
        ObjectMapper mapper = new ObjectMapper();
        mapper.writeValueAsString(obj);
        fail("Expected exception should have been thrown");
    } catch (JsonMappingException e) {
        // expected
    }
}