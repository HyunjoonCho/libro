public void testTarDetection() {
    byte[] aiffBytes = IOUtils.toByteArray(new URL("https://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/test/resources/test-documents/testAIFF.aif").openStream());
    byte[] tarBytes = IOUtils.toByteArray(new URL("https://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/test/resources/test-documents/test.tar").openStream());
    
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    try {
        factory.isTarEntry(aiffBytes);
        fail("aiff file should not be detected as tar");
    } catch (Exception e) {
        // expected
    }
    
    try {
        factory.isTarEntry(tarBytes);
        assert true;
    } catch (Exception e) {
        fail("tar file should be detected as tar");
    }
}