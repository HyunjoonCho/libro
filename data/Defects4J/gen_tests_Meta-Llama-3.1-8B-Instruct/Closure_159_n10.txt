public void testClosureCompilerFunctionNameTranslation() {
    String code = "function preload_check_all() { alert('Hello'); } preload_check_all();";
    CompilationLevel.SIMPLE.compile().withOutputLocation(Output.toMemory()).withWarningLevel(WarningLevel.OFF).compile(code);
    String compiledCode = CompilationLevel.SIMPLE.compile().withOutputLocation(Output.toMemory()).withWarningLevel(WarningLevel.OFF).compile(code).toString();
    assertDoesNotThrow(() -> {
        JavaScriptEngineManager manager = new JavaScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("js");
        engine.eval(compiledCode);
    });
    // Check that the function declaration was renamed, but the call was not
    assertTrue(compiledCode.contains("preload_check_all$"));
    assertFalse(compiledCode.contains("preload_check_all()"));
}