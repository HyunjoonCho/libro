public void testProvideWithNonString() {
    try {
        String code = "goog.provide(some.function);";
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("js");
        engine.eval(code);
        fail("Expected a RuntimeException");
    } catch (ScriptException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}