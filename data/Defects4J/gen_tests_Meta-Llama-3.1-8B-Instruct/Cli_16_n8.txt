public void testGroupConstraints() {
    OptionGroup groupA = new OptionGroup("groupA");
    groupA.addOption(new Option("A"));
    
    OptionGroup groupB = new OptionGroup("groupB");
    groupB.addOption(new Option("B"));
    groupB.addOption(groupA);
    
    WriteableCommandLine cli = new WriteableCommandLine();
    cli.addOption(groupB);
    
    cli.parse("-B");
    assertFalse(cli.hasOption("groupB"));
    assertFalse(cli.hasOption("groupA"));
    
    cli.parse("-A");
    assertTrue(cli.hasOption("groupB"));
    assertTrue(cli.hasOption("groupA"));
    
    OptionGroupConstraints constraints = new OptionGroupConstraints(groupB);
    constraints.setMinimum(1);
    constraints.setMaximum(2);
    
    assertFalse(constraints.validate(cli));
    
    cli.parse("-A");
    assertTrue(constraints.validate(cli));
    
    constraints.setMinimum(3);
    assertFalse(constraints.validate(cli));
}