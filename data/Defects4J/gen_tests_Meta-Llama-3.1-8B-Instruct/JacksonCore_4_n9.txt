public void testLongKey() {
    TextBuffer tb = new TextBuffer();
    byte[] longKey = new byte[262145];
    try {
        tb.append(longKey);
        fail("Expected ArrayIndexOutOfBoundsException for long key");
    } catch (ArrayIndexOutOfBoundsException e) {
        // expected
    }
}