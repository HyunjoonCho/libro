java
public void testExtendedBufferedReaderEOLHandling() throws IOException {
    ExtendedBufferedReader reader = new ExtendedBufferedReader(new StringReader("ABC\rDEF\nGHI"));
    int initialLineCount = reader.getLineCount();

    reader.read();
    assertEquals(initialLineCount + 1, reader.getLineCount());

    reader.read();
    assertEquals(initialLineCount + 1, reader.getLineCount());

    reader.read();
    assertEquals(initialLineCount + 2, reader.getLineCount());

    reader = new ExtendedBufferedReader(new StringReader("ABC\r\nDEF\nGHI"));
    initialLineCount = reader.getLineCount();

    reader.read();
    assertEquals(initialLineCount + 1, reader.getLineCount());

    reader.read();
    assertEquals(initialLineCount + 1, reader.getLineCount());

    reader.read();
    assertEquals(initialLineCount + 2, reader.getLineCount());
}
