java
public void testCompressorStreamFactoryWithZlibHeader() throws IOException {
    // Create a test file with a zlib header
    try (FileOutputStream fos = new FileOutputStream("test.deflatez")) {
        // Create a zlib stream
        DeflaterOutputStream dos = new DeflaterOutputStream(fos);
        Deflater deflater = new Deflater(Deflater.DEFAULT_COMPRESSION, true);
        deflater.setLevel(Deflater.BEST_COMPRESSION);
        dos.write(new byte[] {0x78, 0x9c});
        dos.write(new byte[1024 * 1024]); // Add some data to make it a valid deflate stream
        dos.finish();
        dos.close();
    }

    try {
        // Try to create a CompressorInputStream with the test file
        CompressorInputStream cis = CompressorStreamFactory.createCompressorInputStream(new FileInputStream("test.deflatez"));
        fail("Expected CompressorException");
    } catch (CompressorException e) {
        // Expected exception
    }
}
