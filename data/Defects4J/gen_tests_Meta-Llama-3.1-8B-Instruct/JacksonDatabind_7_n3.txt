public void testTokenBufferDelegateDeserialization() {
    TokenBuffer buffer = new TokenBuffer();
    buffer.writeStartObject();
    buffer.writeStringField("a", 1);
    buffer.writeStringField("b", null);
    buffer.writeEndObject();
    
    JsonParser jp = new JsonParser(new TokenStream(buffer));
    jp.nextToken();
    assertEquals(JsonToken.FIELD_NAME, jp.getCurrentToken());
    assertEquals("a", jp.getCurrentName());
    jp.nextToken();
    assertEquals(JsonToken.VALUE_NUMBER_INT, jp.getCurrentToken());
    assertEquals(1, jp.getIntValue());
    jp.nextToken();
    assertEquals(JsonToken.FIELD_NAME, jp.getCurrentToken());
    assertEquals("b", jp.getCurrentName());
    jp.nextToken();
    assertEquals(JsonToken.VALUE_NULL, jp.getCurrentToken());
    jp.nextToken();
    assertEquals(JsonToken.END_OBJECT, jp.getCurrentToken());
}