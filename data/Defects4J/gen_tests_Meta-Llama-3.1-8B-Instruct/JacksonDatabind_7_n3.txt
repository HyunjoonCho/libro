java
public void testTokenBufferDelegateDeserialization() throws JsonProcessingException {
    TokenBuffer buffer = new TokenBuffer(new TokenStream(new JsonGenerator(JsonFactory.createJsonGenerator(new ByteArrayOutputStream()))
           .writeStartObject()
           .writeNumberField("a", 1)
           .writeNullField("b")
           .writeEndObject()));
    Value value = Value.from(buffer);
    assertEquals(1, value.getA());
    assertEquals(null, value.getB());
    
    // Verify TokenBuffer contents
    Object[] expectedTokens = new Object[] {
        TokenTypes.START_OBJECT,
        "a",
        TokenTypes.VALUE_NUMBER_INT,
        "b",
        TokenTypes.VALUE_NULL,
        TokenTypes.END_OBJECT
    };
    int i = 0;
    while (buffer.nextToken()!= TokenTypes.END_OF_INPUT) {
        assertEquals(expectedTokens[i++], buffer.getCurrentToken());
    }
}
