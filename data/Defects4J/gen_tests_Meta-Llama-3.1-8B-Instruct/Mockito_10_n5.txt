public void testReturnsDeepStubs() {
    try {
        ToBeMocked mock = mock(ToBeMocked.class, withSettings().serializable());
        assertThrows(MockitoException.class, () -> {
            when(mock.getSomething()).thenReturn(new NotSerializableReturnValue(""));
        });
    } catch (MockitoException e) {
        assertEquals("You are using the setting 'withSettings().serializable()' however the type you are trying to mock 'NotSerializableReturnValue' do not implement Serializable AND do not have a no-arg constructor.", e.getMessage());
    }
}