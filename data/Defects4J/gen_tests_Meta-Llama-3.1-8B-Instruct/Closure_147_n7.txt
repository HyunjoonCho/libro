java
import org.junit.Test;
import org.junit.Assert;

public class TestGlobalThis {
    
    public void testGlobalThisWarning() {
        var NS = new Object() {
            public String foo;
            public void read() {
                System.out.println(this.foo); // should warn "JSC_USED_GLOBAL_THIS: dangerous use of the global this object"
            }
            
            public void write() {
                this.foo = "bar"; // should warn "JSC_USED_GLOBAL_THIS: dangerous use of the global this object"
            }
        };
        
        // test inline notation
        NS.read();
        NS.write();
        
        // test non-inline notation
        NS.write2 = new Object() {
            public void write() {
                NS.foo = "baz";
            }
        };
        NS.write2.write();
    }
    
    public void testGlobalThisWarningInline() {
        var NS = new Object() {
            public String foo;
            public void read() {
                System.out.println(this.foo); // should warn "JSC_USED_GLOBAL_THIS: dangerous use of the global this object"
            }
        };
        
        // test inline notation
        NS.read();
    }
}
