public void testNodeSetReturnedByExtensionFunction() throws JXPathException {
    JXPathContext context = JXPathContext.newInstance();
    NodeSet nodeSet = new BasicNodeSet();
    nodeSet.add(new NodePointer("node1"));
    nodeSet.add(new NodePointer("node2"));
    context.setContextNode(nodeSet);
    NodeList nodeList = (NodeList) context.selectNodes("ems:observations()");
    assertEquals(2, nodeList.getLength());
}