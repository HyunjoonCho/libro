java
public void testProcessCommonJSModules() {
    // Define the echo.js module
    String echoJs = "define(function() { return { echo: function(val) { window.console.log(val); } }; });";

    // Define the echo-main.js entry point that requires the echo module
    String echoMainJs = "require(['echo'], function(echo) { echo.echo('hello world'); });";

    // Compile with checkTypes enabled
    // (Note: This is a simplified representation, actual compilation would be done using a Java process)
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "build/compiler.jar",
            "--formatting=PRETTY_PRINT", "--jscomp_error=checkTypes",
            "--compilation_level=SIMPLE_OPTIMIZATIONS",
            "--transform_amd_modules", "--process_common_js_modules",
            "--js", "echo.js", "--js", "echo-main.js",
            "--common_js_entry_module=echo-main.js");

    try {
        Process process = processBuilder.start();
        int exitCode = process.waitFor();
        if (exitCode!= 0) {
            fail("Compilation failed with exit code " + exitCode);
        }
    } catch (IOException | InterruptedException e