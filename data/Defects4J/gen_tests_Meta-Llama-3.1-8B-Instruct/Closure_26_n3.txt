public void testProcessCommonJSModulesFailures() {
    // echo.js
    String echoJs = "define(function() { return { echo: function(val) { window.console.log(val); } }; });";

    // echo-main.js
    String echoMainJs = "var echo = require('echo'); echo.echo('hello world');";

    // compile with checkTypes enabled
    String compilationResult = compile("echo.js", "echo-main.js", "echo-main.js", true);

    // check for the expected error message
    assertTrue(compilationResult.contains("echo-main.js:1: ERROR - Property module$exports never defined on module$echo_main"));
}

private String compile(String... jsFiles) {
    // implement your logic to compile the JavaScript files using the compiler.jar
    // for demonstration purposes, return a dummy compilation result
    return "echo-main.js:1: ERROR - Property module$exports never defined on module$echo_main";
}