javascript
describe('Issue with prototypes declared with quotes', function() {
    it('should produce a JSC_USED_GLOBAL_THIS warning', function() {
        function MyClass() {}
        MyClass.prototype["MyMethod"] = function(a) {
            this.a = a;
        }
        window["MyClass"] = MyClass;

        expect(compileWithFlags(['--jscomp_warning=globalThis']).stderr).toContain('dangerous use of the global this object.');
    });

    it('should produce a warning about implementing an interface', function() {
        function MyParent() {}
        MyParent.prototype.MyMethod = function(a) {}

        function MyClass() {}
        MyClass.prototype["MyMethod"] = function(a) {
            this.a2 = a;
        }
        window["MyClass"] = MyClass;

        expect(compileWithFlags(['--jscomp_warning=globalThis', '--jscomp_warning=checkTypes']).stderr).toContain('property MyMethod on interface MyParent is not implemented by type MyClass');
    });
});
