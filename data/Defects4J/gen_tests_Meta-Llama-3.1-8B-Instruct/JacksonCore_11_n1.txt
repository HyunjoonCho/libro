public void testJacksonOverflow() {
    ObjectMapper mapper = new ObjectMapper();
    for (int i = 0; i < 10000; ++i) {
        byte[] indexPairBytes = new byte[2080];
        new Random().nextBytes(indexPairBytes);
        ServerIndexPair sip = new ServerIndexPair(indexPairBytes);
        byte[] s = mapper.writeValueAsBytes(ImmutableMap.of("key", sip));
        try {
            mapper.readValue(s, Map.class);
            fail("Expected ArrayIndexOutOfBoundsException");
        } catch (JsonParseException e) {
            // expected
        }
    }
}