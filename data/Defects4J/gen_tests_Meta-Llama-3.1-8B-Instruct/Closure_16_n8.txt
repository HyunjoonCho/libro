public void testJSCompilerTypedefResolution() {
    Map<String, Object> namespace = new HashMap<>();
    namespace.put("a", new HashMap<>());
    ((Map<String, Object>) namespace.get("a")).put("b", new HashMap<>());
    ((Map<String, Object>) ((Map<String, Object>) namespace.get("a")).get("b")).put("c", new HashMap<>());

    JSCompiler compiler = new JSCompiler(namespace);
    compiler.addTypedef("MyType", "string");
    compiler.addFunction("myFunc", "function(x) {}", new String[]{"x", "MyType"}, new String[]{"x"}, new String[]{});

    try {
        compiler.compile();
        fail("Expected compiler error");
    } catch (CompilationException e) {
        // Expected exception
    }
}