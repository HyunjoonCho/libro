public void testInternalCompilerErrorOnBullet() throws Exception {
    File input = new File("bullet_1_1_q1.js");
    File output = new File("bullet_1_1_q1.cc.js");
    File variableMap = new File("js.vars");

    String[] args = new String[] {
        "--compilation_level", "ADVANCED_OPTIMIZATIONS",
        "--variable_map_output_file", variableMap.getAbsolutePath(),
        "--js", input.getAbsolutePath(),
        "--js_output_file", output.getAbsolutePath()
    };

    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", args);
    Process p = pb.start();
    int exitCode = p.waitFor();
    assertTrue("Compilation failed with exit code " + exitCode, exitCode == 0);
}