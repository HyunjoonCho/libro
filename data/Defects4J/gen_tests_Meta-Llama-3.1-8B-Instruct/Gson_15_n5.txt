java
public void testJsonWriterLenientNumber() {
    JsonWriter jsonWriter = new JsonWriter();
    jsonWriter.setLenient(true);
    jsonWriter.value(Double.NaN);
    jsonWriter.value(Double.POSITIVE_INFINITY);
    jsonWriter.value(Double.NEGATIVE_INFINITY);

    try {
        JsonWriter nonLenientJsonWriter = new JsonWriter();
        nonLenientJsonWriter.value(Double.NaN);
        fail("Expected IllegalArgumentException for NaN");
    } catch (IllegalArgumentException e) {
        // expected
    }

    try {
        JsonWriter nonLenientJsonWriter = new JsonWriter();
        nonLenientJsonWriter.value(Double.POSITIVE_INFINITY);
        fail("Expected IllegalArgumentException for POSITIVE_INFINITY");
    } catch (IllegalArgumentException e) {
        // expected
    }

    try {
        JsonWriter nonLenientJsonWriter = new JsonWriter();
        nonLenientJsonWriter.value(Double.NEGATIVE_INFINITY);
        fail("Expected IllegalArgumentException for NEGATIVE_INFINITY");
    } catch (IllegalArgumentException e) {
        // expected
    }

    try {
        JsonWriter lenientJsonWriter = new JsonWriter();
        lenientJsonWriter.value((Number) Double.valueOf(Double.NaN));
        fail("Expected IllegalArgumentException for NaN");
    } catch (IllegalArgumentException e) {
       