java
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;

public void testTarDirectoryNameLength() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    TarArchiveOutputStream tasos = new TarArchiveOutputStream(bos);
    tasos.setLongFileNames(true);
    tasos.putArchiveEntry("a".repeat(102)); // Create a directory name longer than 100 bytes
    tasos.closeArchiveEntry();
    tasos.close();
    // Assert that an IOException is thrown due to the length mismatch
    try {
        tasos.getArchiveEntry().getSize();
        fail("Expected IOException to be thrown");
    } catch (IOException e) {
        // Expected exception
    }
}
