public void testTarDirectoryNameLength() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    TarArchiveOutputStream tas = new TarArchiveOutputStream(bos);
    try {
        tas.putArchiveEntry(new TarArchiveEntry("veryveryveryveryveryveryveryveryveryverylongdirectoryname"));
        tas.closeArchiveEntry();
        fail("Expected IOException when writing directory name longer than 100 bytes");
    } catch (IOException e) {
        // expected
    } finally {
        tas.close();
    }
}