public void testAbstractClassMocking() {
    @Fake private FakeUserAccount userAccount;
    when(userAccount.addEmail("email")).thenReturn(userAccount);
    when(userAccount.getEmails()).thenReturn(Arrays.asList("email"));
    assertEquals(1, userAccount.getEmails().size());
    
    @Fake private MockAccountService service;
    when(service.getAccount("id")).thenAnswer(new Answer<UserAccount>() {
        @Override
        public UserAccount answer(InvocationOnMock invocation) throws Throwable {
            return new MockAccount("id");
        }
    });
    
    @Fake private MockAccountRpcService service;
    when(service.getAccount("id")).thenReturn(null);
}