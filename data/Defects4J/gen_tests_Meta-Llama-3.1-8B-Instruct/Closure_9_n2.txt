java
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import org.junit.Test;

public class AmdModuleTest {
    @Test
    public void testAmdModuleInSubdirectory() throws IOException {
        // Create 1st AMD module in lib/Foo.js
        String fooJs = "define('module$lib$Foo', [], function() { return 'Foo'; });";
        File fooFile = new File("lib/Foo.js");
        try (PrintWriter out = new PrintWriter(new FileWriter(fooFile))) {
            out.println(fooJs);
        }

        // Create 2nd AMD module in Bar.js depending on lib/Foo.js
        String barJs = "define('module$Bar', ['module$lib$Foo'], function(Foo) { return 'Bar'; });";
        File barFile = new File("Bar.js");
        try (PrintWriter out = new PrintWriter(new FileWriter(barFile))) {
            out.println(barJs);
        }

        // Try to compile both files with Bar.js as main module
        String[] args = {
                "--transform_amd_modules",
                "--process