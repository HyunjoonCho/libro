public void testRobustCharsetDetection() {
    Document doc = Jsoup.parse(
        "<html lang=\"en-US\">" +
        "<head>" +
        "<meta charset=\"UTF-8\">" +
        "<meta http-equiv=\"Content-Type\" content=\"text/html; \">" +
        "</head>" +
        "</html>");
    try {
        Jsoup.connect("http://example.com").get();
    } catch (IOException e) {
        fail("Expected to parse the document successfully");
    }
}