java
public void testStrBuilderLengthUsage() {
    StrBuilder sb = new StrBuilder(10);
    sb.append("abc");
    try {
        sb.append("d", thisBuf.length);
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // expected
    }
    
    try {
        sb.append("d", size());
        // expected to succeed
    } catch (ArrayIndexOutOfBoundsException e) {
        fail("Unexpected ArrayIndexOutOfBoundsException");
    }
}
