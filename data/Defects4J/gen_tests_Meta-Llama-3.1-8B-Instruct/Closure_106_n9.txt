public void testCollapseProperties() {
    String jsCode = "goog.exportSymbol('foo', function() {});";
    ClosureCompiler compiler = new ClosureCompiler();
    compiler.compileJavaScript(jsCode, "output.js");
    try {
        compiler.compileJavaScript(jsCode, "output.js");
        fail("Expected IllegalArgumentException to be thrown");
    } catch (IllegalArgumentException e) {
        // expected
    }
}