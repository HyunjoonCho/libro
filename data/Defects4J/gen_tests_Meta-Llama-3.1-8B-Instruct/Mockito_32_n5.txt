public void testMockitoCannotCreateMockOnPublicClassThatExtendsPackagePrivateClass() {
    try {
        when(new PublicClassThatExtendsPackagePrivateClass().method()).thenReturn("mocked");
    } catch (Exception e) {
        // expected, but Mockito should throw an exception here
    }
    try {
        when(new PublicClassThatExtendsPackagePrivateClass().method()).thenReturn("mocked");
        fail("Expected exception");
    } catch (Exception e) {
        // this is the actual exception thrown by Mockito
        assertTrue(e.getMessage().contains("Cannot mock this class"));
    }
}