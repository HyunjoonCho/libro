javascript
function testRemoveKey(key) {
    var data = { key: 'value' };
    var hadKey = key in data;
    if (data) {
        delete data[key];
    }
    return hadKey? data[key] : null;
}

console.log(testRemoveKey('key')); // 'value'
console.log('key' in data); // false

// Now, let's switch the order of the statements
function testRemoveKeyBroken(key) {
    var data = { key: 'value' };
    if (data) {
        delete data[key];
    }
    var hadKey = key in data;
    return hadKey? data[key] : null;
}

console.log(testRemoveKeyBroken('key')); // null
console.log('key' in data); // true
