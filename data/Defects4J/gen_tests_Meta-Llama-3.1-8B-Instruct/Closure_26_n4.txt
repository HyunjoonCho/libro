java
public void testProcessCommonJSModules() throws Exception {
    String echoJs = "define(function() { return { echo: function(val) { console.log(val); } }; });";
    String mainJs = "var echo = require('echo'); echo.echo('hello world');";

    String compilationArgs = "--formatting=PRETTY_PRINT --jscomp_error=checkTypes --compilation_level=SIMPLE_OPTIMIZATIONS --transform_amd_modules --process_common_js_modules --js=echo.js --js=echo-main.js --common_js_entry_module=echo-main.js";
    String jsOutput = JsCompiler.compile(echoJs, mainJs, compilationArgs);

    // Check for the error message
    assertTrue(jsOutput.contains("ERROR - Property module$exports never defined on module$echo_main"));
}

public static class JsCompiler {
    public static String compile(String... inputs) throws Exception {
        // Simulate compilation using the JsCompiler command
        // This is a simplified version, in a real scenario you would use a process or a library to run the compilation
        String[] args = new String[inputs.length + 1];
        args[0] = "--jscomp_error=checkTypes";
        System.arraycopy(inputs, 0