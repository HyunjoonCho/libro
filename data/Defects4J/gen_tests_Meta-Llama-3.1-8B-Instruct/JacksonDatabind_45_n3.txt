java
public void testNumberShapePrecedence() {
    // Before fix, textual representation should be enabled
    try {
        NumberFormat.getInstance(Locale.US).parse("123");
        fail("Expected NumberFormatException before fix");
    } catch (NumberFormatException e) {
        // expected
    }

    // After fix, textual representation should not be enabled when shape is explicitly defined as NUMBER
    try {
        NumberFormat.getInstance(Locale.US).parse("123", NumberFormat.getNumberInstance(Locale.US));
        fail("Expected NumberFormatException after fix");
    } catch (NumberFormatException e) {
        // expected
    }

    // After fix, textual representation should be enabled when shape is not explicitly defined
    NumberFormat.getInstance(Locale.US).parse("123");
}
