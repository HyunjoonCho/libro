public void testClosureCompilerBug() {
    Map<String, String> customData = new HashMap<>();
    customData.put("key", "value");

    String retval = null;
    boolean hadKey = customData.containsKey("key");

    if (customData!= null) {
        customData.remove("key");
    }

    // Simulate the incorrect order of operations
    if (customData!= null) {
        retval = customData.get("key");
    }
    boolean hadKeyAfterDelete = customData!= null && customData.containsKey("key");

    assertNotSame(retval, hadKeyAfterDelete? retval : null);
}