public void testClosureCompilerCrash() {
    String code = "var g=function(m){return m*Math.random()|0},d=document,h=d.getElementById('h'),c=d.getElementById('c'),l;\n" +
            "(l=function(){requestAnimationFrame(l);h.style.textShadow=\"0 0 1px #000,\"+(g(10)-5)+"px "+(g(10)-5)+"px 0 #888,0 0 180px rgb("+g(255)+","+g(255)+","+g(255)+")\"})();\n" +
            "d.addEventListener('mousemove',function(v){c.style.marginTop=(v.pageY/10+15|0)+'px'})";
    // Run the code in a JavaScript engine, such as Rhino or Nashorn
    // For simplicity, let's assume we're using Rhino
    org.mozilla.javascript.Context context = org.mozilla.javascript.Context.enter();
    org.mozilla.javascript.Scriptable scope = context.initStandardObjects();
    org.mozilla.javascript.Scriptable globalScope = context.initStandardObjects();
    context.evaluateString(globalScope, code, "script", 1, null);
    // This should throw an exception if the code crashes
    try