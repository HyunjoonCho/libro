public void testVersionOption() {
    try {
        ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
        Process p = pb.start();
        int exitValue = p.waitFor();
        fail("Expected non-zero exit value, but got " + exitValue);
    } catch (IOException | InterruptedException e) {
        fail("Unexpected exception: " + e.getMessage());
    }
}