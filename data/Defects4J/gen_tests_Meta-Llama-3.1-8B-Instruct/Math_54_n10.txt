java
import org.apache.commons.math.dfp.Dfp;
import org.apache.commons.math.dfp.DfpField;

public class TestDfp {

    public void testDfpToDouble() {
        DfpField field = new DfpField(100);
        Dfp zero = field.getZero();
        Dfp nonZero = field.newDfp(0.0);
        double zeroDouble = zero.toDouble();
        double nonZeroDouble = nonZero.toDouble();

        // Check that getZero() returns 0.0
        assertEquals(0.0, zeroDouble, 1e-9);
        // Check that newDfp(0.0) returns -Infinity when exposant is 0xFFF
        assertEquals(Double.NEGATIVE_INFINITY, nonZeroDouble, 1e-9);
    }
}
