public void testDefaultOptionsNotUpdated() {
    OptionGroup group = new OptionGroup();
    group.addOption(new Option("a"));
    group.addOption(new Option("b"));
    group.setAllowMultiple(false);
    group.setRequired(false);
    group.setAllowUnrecognized(true);
    group.setRequiredPosition(1);

    OptionSet options = new OptionSet();
    options.add("a");

    CommandLineParser parser = new DefaultParser();
    try {
        CommandLine line = parser.parse("a", options);
        assertTrue(line.hasOption("a"));
        assertTrue(line.hasOption("b"));
    } catch (ParseException e) {
        fail("Expected parsing to succeed");
    }
}