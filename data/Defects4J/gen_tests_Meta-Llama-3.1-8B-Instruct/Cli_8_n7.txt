public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    String longOption = "This is a very long option that will wrap incorrectly in the HelpFormatter because it uses startPos incorrectly.";
    String[] options = new String[] {"-longOption", longOption};
    formatter.printHelp("test", options);
    String[] lines = longOption.split("\n");
    for (int i = 1; i < lines.length; i++) {
        String line = lines[i];
        int expectedWidth = 80;
        int actualWidth = line.length();
        if (actualWidth > expectedWidth) {
            // Test that the line is not wrapped correctly
            fail("Line " + (i + 1) + " is too long: " + line);
        }
    }
}