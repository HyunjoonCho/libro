java
public void testPaxHeaderEntryWithTrailingSlash() throws Exception {
    TarArchiveInputStream tarIn = new TarArchiveInputStream(new ByteArrayInputStream(getPaxHeaderTarBytes()));
    TarArchiveEntry entry = tarIn.getNextEntry();
    assertTrue(entry.isDirectory());
    assertEquals("entry/with/trailing/", entry.getName());
    assertTrue(entry.isPaxHeader());

    // verify that the stream is not advanced correctly
    assertNull(tarIn.getNextEntry());

    // test fix 1: modifying the name when it's a pax header
    TarArchiveInputStream tarInFix1 = new TarArchiveInputStream(new ByteArrayInputStream(getPaxHeaderTarBytes()));
    tarInFix1.setPaxHeadersDelegate(new PaxHeadersDelegate() {
        @Override
        public String getHeader(String key) {
            return key.endsWith("/")? key.substring(0, key.length() - 1) : key;
        }
    });
    TarArchiveEntry entryFix1 = tarInFix1.getNextEntry();
    assertFalse(entryFix1.isDirectory());
    assertEquals("entry/with/trailing", entryFix1.getName());
    assertTrue(entryFix1.isPaxHeader());

    // test fix 2: returning false for isDirectory() when it's a pax header
    Tar