java
public void testFastDateFormatLocale() {
    // Set the locale to a specific value
    Locale.setDefault(Locale.US);
    
    // Get a date formatter with the current locale
    FastDateFormat df = FastDateFormat.getInstance("yyyy-MM-dd");
    
    // Store the date formatter in a map with a key that includes the locale
    Map<Object, FastDateFormat> map = new HashMap<>();
    map.put("US", df);
    
    // Change the locale
    Locale.setDefault(Locale.UK);
    
    // Now the stored date formatter should use the new locale
    assertEquals("dd MMMM yyyy", df.getPattern());
}
