public void testSmartNameRemovalCrash() {
    Map<String, Object> goog = new HashMap<>();
    goog.put("inherits", new Function() {
        @Override
        public Object apply(Object x, Object y) {
            return null;
        }
    });
    Map<String, Object> ns = new HashMap<>();
    ns.put("PageSelectionModel", new Object() {
        public void $() {}
    });
    ns.put("PageSelectionModel$FooEvent", new Object() {
        public void $() {}
    });
    ns.put("PageSelectionModel$SelectEvent", new Object() {
        public void $() {}
    });
    ((Function) goog.get("inherits")).apply(ns.get("PageSelectionModel$ChangeEvent"), ns.get("PageSelectionModel$FooEvent"));
}