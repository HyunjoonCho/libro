public void testImplicitNamespaces() throws Exception {
    // Define the modules
    String moduleA = "var apps={};apps.foo.bar={};apps.foo={};";
    String moduleB = "apps.foo.bar.B={};";
    String moduleC = "apps.foo.bar.C={};";

    // Compile the modules
    Compiler compiler = Compiler.createCompiler();
    Script moduleAScript = compiler.compile(moduleA);
    Script moduleBScript = compiler.compile(moduleB);
    Script moduleCScript = compiler.compile(moduleC);

    // Get the compiled code
    String compiledModuleA = moduleAScript.execute().toString();
    String compiledModuleB = moduleBScript.execute().toString();
    String compiledModuleC = moduleCScript.execute().toString();

    // Check for the runtime error in Module A
    String error = "TypeError: Cannot read property 'foo' of undefined";
    assertTrue(compiledModuleA.contains(error));
}