java
public void testAlwaysAsIdOnClass() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ReallyAlwaysContainer container = new ReallyAlwaysContainer();
    container.a = new ReallyAlwaysAsId(1);
    container.b = new ReallyAlwaysAsId(2);

    // Test with alwaysAsId on class
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
    String json = mapper.writeValueAsString(container);
    assertEquals("{\"a\":1,\"b\":2}", json);

    // Test with alwaysAsId on property
    mapper = new ObjectMapper();
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
    container = new ReallyAlwaysContainer();
    container.a = new AlwaysAsId(1);
    container.b = new AlwaysAsId(2);
    json = mapper.writeValueAsString(container);
    assertEquals("{\"a\":{\"value\":1},\"b\":{\"value\":2}}", json);

    // Test that alwaysAsId on class is not overridden by alwaysAsId on property
    mapper = new ObjectMapper();
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
    container = new ReallyAlwaysContainer();
    container.a =