public void testTypedefExport() {
    String source = """
        /**
         * @typedef {function()} MyType
         */
        function MyType() {}
        var myTypeVar:MyType = new MyType();
        /**
         * @export
         * @param {MyType=} opt_param
         */
        function myFunction(opt_param:MyType) {}
        /**
         * @export
         * @param {MyType!}
         */
        function myFunctionNonOptional(MyType) {}
        /**
         * @export
         */
        function myFunctionNoParam() {}
        var myTypeVar2:MyType = new MyType();
        myFunction(myTypeVar2);
        myFunctionNonOptional(MyType);
        myFunctionNoParam();
    """;

    // Run the compiler and get the externs string
    String externs = "generated externs";

    // Check that the externs string contains the expected exports
    assertTrue(externs.contains("MyType"));
    assertTrue(externs.contains("myFunction"));
    assertTrue(externs.contains("myFunctionNonOptional"));
    assertTrue(externs.contains("myFunctionNoParam"));
    
    // Check that the externs string does not contain truncated