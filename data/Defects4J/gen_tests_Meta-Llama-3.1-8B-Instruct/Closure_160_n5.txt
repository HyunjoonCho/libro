public void testUndefinedVars() {
    String jsCode = "foo = {}; foo.bar = function() { alert(this.baz); };";
    String[] expectedWarnings = {"variable foo is undefined"};
    String[] expectedErrors = {"variable foo is undefined"};
    String[] warnings = new String[0];
    String[] errors = new String[0];
    
    // Check undefinedVars warning
    Compiler compiler = new Compiler();
    compiler.setWarningLevel(WarningLevel.DEFAULT);
    compiler.setWarnings("undefinedVars");
    compiler.compile(new StringReader(jsCode));
    warnings = compiler.getWarnings();
    assertEquals(expectedWarnings.length, warnings.length);
    for (int i = 0; i < expectedWarnings.length; i++) {
        assertEquals(expectedWarnings[i], warnings[i]);
    }
    
    // Check checkVars warning
    compiler = new Compiler();
    compiler.setWarningLevel(WarningLevel.DEFAULT);
    compiler.setWarnings("checkVars");
    compiler.compile(new StringReader(jsCode));
    warnings = compiler.getWarnings();
    assertEquals(expectedWarnings.length, warnings.length);
    for (int i = 0; i < expectedWarnings.length; i++) {
        assertEquals(expectedWarnings[i], warnings[i]);
    }
    
    // Check globalThis warning