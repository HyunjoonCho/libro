java
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.JSCompiler;
import com.google.javascript.jscomp.JSModule;
import com.google.javascript.jscomp.Warning;

import org.junit.Test;

public class CheckVarsUndefinedVarsTest {

    @Test
    public void testCheckVarsUndefinedVars() throws Exception {
        String code = "foo = {}; foo.bar = function() { alert(this.baz); };";
        JSCompiler compiler = new JSCompiler();
        JSModule module = compiler.compile(code);

        // Test that checkVars does not work
        CompilationLevel.SIMPLE_OPTIMIZATIONS.setLevel(compiler);
        compiler.setWarningLevel(WarningLevel.ALL);
        compiler.processModule(module);
        assert!module.getWarnings().isEmpty();

        // Test that undefinedVars does not work
        compiler.setWarningLevel(WarningLevel.ALL);
        compiler.processModule(module);
        assert!module.getWarnings().isEmpty();

        // Test that globalThis works
        compiler.setWarningLevel(WarningLevel.ALL);
        compiler.processModule(module);
        assert module.getWarnings().size() == 1;
        Warning warning = module.getWarnings().get(0);
       