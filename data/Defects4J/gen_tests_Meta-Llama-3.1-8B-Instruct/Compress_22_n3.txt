public void testBZip2CompressorInputStreamReadTruncated() throws Exception {
    byte[] compressed = "Hello World".getBytes("UTF-8");
    byte[] truncated = new byte[769];
    System.arraycopy(compressed, 0, truncated, 0, 769);
    BZip2CompressorInputStream bis = new BZip2CompressorInputStream(new ByteArrayInputStream(truncated));
    int bytesRead = bis.read(new byte[1024]);
    assertEquals(769, bytesRead);
}