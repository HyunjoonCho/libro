public void testReplaceTrueFalse() {
    boolean anyExpression = true;
    Object externalRef = new Object();
    Function a = null;
    Function b = null;

    if (anyExpression) {
        b = externalRef;
        a = () -> b!= null? b : () -> false;
    }

    Function method1 = () -> a!= null && a!= null? a.apply() : true;
    Function method2 = () -> false;

    assertEquals(true, method1.apply());
    assertEquals(false, method2.apply());
}