public void testBOMHandling() throws IOException {
    byte[] utf16WithBom = new byte[] { (byte) 0xfe, (byte) 0xff, 'a' };
    byte[] utf8WithBom = new byte[] { (byte) 0xef, (byte) 0xbb, (byte) 0xbf, 'a' };
    byte[] noBomUtf8 = new byte[] { 'a' };

    byte[] resultUtf16 = DataUtil.parseByteData(utf16WithBom);
    byte[] resultUtf8 = DataUtil.parseByteData(utf8WithBom);
    byte[] resultNoBomUtf8 = DataUtil.parseByteData(noBomUtf8);

    assertNotEquals(resultUtf16, utf16WithBom);
    assertEquals(resultUtf8, utf8WithBom);
    assertEquals(resultNoBomUtf8, noBomUtf8);
}