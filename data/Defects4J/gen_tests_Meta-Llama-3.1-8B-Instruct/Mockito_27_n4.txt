public void testWhenThenThrow() {
    Object o = Mockito.mock(Object.class);
    // test behavior with Runtimeexception
    Mockito.when(o.toString()).thenThrow(new RuntimeException());
    // test behavior with another exception
    Mockito.when(o.toString()).thenThrow(new IllegalArgumentException());
    try {
        Mockito.mockingDetails(o).getInvocationContainer().getCalls().get(0).getArgument(0);
        fail("Expected RuntimeException");
    } catch (RuntimeException e) {
        // expected
    }
    try {
        Mockito.mockingDetails(o).getInvocationContainer().getCalls().get(1).getArgument(0);
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }
}