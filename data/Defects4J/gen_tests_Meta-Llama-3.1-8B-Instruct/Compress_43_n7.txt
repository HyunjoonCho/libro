java
public void testVersionNeededToExtract() throws IOException {
    // Create a ZipArchiveOutputStream with a BufferedOutputStream
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zaos = new ZipArchiveOutputStream(new BufferedOutputStream(bos));

    // Create a ZipEntry
    ZipEntry entry = new ZipEntry("test.txt");
    entry.setSize(10); // size > 0 to trigger data descriptor

    // Set zip64Mode to false to ensure zip64Extra is not added
    zaos.putArchiveEntry(entry, false);

    // Set zipMethod to DEFLATED (0x80) to trigger version 2.0
    zaos.setMethod(0x80);

    // Close the entry
    zaos.closeEntry();

    // Get the local file header
    byte[] lfh = bos.toByteArray();
    int lfhVersionNeeded = getShort(lfh, 6);

    // Create a ZipArchiveEntry to be used in the central directory
    ZipArchiveEntry centralEntry = new ZipArchiveEntry(entry.getName());
    centralEntry.setSize(entry.getSize());

    // Set zip64Mode to false to ensure zip64Extra is not added
    centralEntry.setZip64(false);

    // Set zipMethod to DE