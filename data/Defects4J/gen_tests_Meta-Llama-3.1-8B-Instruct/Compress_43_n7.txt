public void testVersionNeededToExtract() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zos = new ZipArchiveOutputStream(new BufferedOutputStream(bos));
    
    ZipEntry entry = new ZipEntry("test.txt");
    zos.putArchiveEntry(entry);
    zos.closeEntry();
    
    zos.putArchiveEntry(entry);
    zos.closeEntry();
    
    zos.close();
    
    ZipFile zf = new ZipFile(new File(bos.toByteArray()));
    ZipEntry firstEntry = zf.getEntry("test.txt");
    int localVersion = firstEntry.getExtraField(Short.MIN_VALUE).getShort();
    int centralVersion = zf.getCentralDirectory().getEntry(0).getVersionNeededToExtract();
    
    assertNotEquals(localVersion, centralVersion);
}