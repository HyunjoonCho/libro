java
public void testFastDateFormatLocale() {
    Locale originalLocale = Locale.getDefault();
    Locale.setDefault(Locale.US);

    FastDateFormat dateInstance = FastDateFormat.getDateInstance();
    FastDateFormat dateTimeInstance = FastDateFormat.getDateTimeInstance();

    Locale.setDefault(Locale.UK);

    try {
        Map<String, FastDateFormat> cache = FastDateFormat.getCache();
        assertEquals(originalLocale, cache.get("java.util.Date"));
        assertEquals(originalLocale, cache.get("java.util.DateTime"));
    } finally {
        Locale.setDefault(originalLocale);
    }
}
