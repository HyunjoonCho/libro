java
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class TestGlobalThisWarning {
    @Test
    public void testGlobalThisWarning() {
        // should warn "JSC_USED_GLOBAL_THIS: dangerous use of the global this object"
        // none of these warns in 0616 release
        Object NS = new Object() {
            public String read() {
                return this.foo; // does not warn in 0514 release
            }

            public void write() {
                this.foo = "123"; // warns in 0514 release
            }
        };

        // only the non-inline notation warns in 0616 release
        Object NS2 = new Object() {
            public void write2() {
                this.foo = "123";
            }
        };

        // expected output:
        // "JSC_USED_GLOBAL_THIS: dangerous use of the global this object"
        // in write method
        // nothing in write2 method

        // actual output:
        // no warning in write method
        // warning in write2 method
        // (in 0514 release)
        // warning in write method
        // no warning in write2 method
        // (in 0616 release)
    }
