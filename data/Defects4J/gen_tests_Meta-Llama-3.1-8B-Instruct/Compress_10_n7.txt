public void testZipFileUnicodeExtraFields() throws IOException {
    // Create a zip file with unicode extra fields
    ZipArchiveOutputStream zipOut = new ZipArchiveOutputStream(new FileOutputStream("test.zip"));
    ZipArchiveEntry entry = new ZipArchiveEntry("test.txt");
    zipOut.putCentralFileHeader(entry);
    entry.setExtraField(new ExtraField(new UnicodeExtraField("test")));
    zipOut.putCentralFileHeader(entry);
    zipOut.close();

    // Create a ZipFile and get its entries
    ZipFile zipFile = new ZipFile("test.zip");
    ZipArchiveEntry[] entries = zipFile.getEntries();
    String entryName = entries[0].getName();

    // Modify the entry's extra fields, changing its name and hash code
    entry.setExtraField(new ExtraField(new UnicodeExtraField("modified")));
    entries = zipFile.getEntries();
    assertNotEquals(entryName, entries[0].getName());

    // Now the HashMap lookup should fail
    assertThrows(IndexOutOfBoundsException.class, () -> zipFile.getInputStream(entries[0]));
}