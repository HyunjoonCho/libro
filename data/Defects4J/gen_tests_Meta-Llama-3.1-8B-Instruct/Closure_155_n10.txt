javascript
describe('d3_call', () => {
  it('should not overwrite the first argument', () => {
    const callback = jest.fn();
    const originalArguments = Array.from(arguments);
    const d3Call = function() {
      arguments[0] = this;
      callback.apply(this, arguments);
      return this;
    };
    d3Call.call({ foo: 'bar' }, 1, 2, 3);
    expect(callback).toHaveBeenCalledTimes(1);
    expect(callback).toHaveBeenCalledWith({ foo: 'bar' }, 1, 2, 3);
    expect(originalArguments).toEqual([expect.any(Function), expect.any(Object)]);
  });
});
