java
public void testElementHtmlWhitespaceHandling() {
    // Test with prettyPrint enabled
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    factory.setPrettyPrint(true);
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse(new InputSource(new StringReader("<root>   <child>   text   </child>   </root>")));
    Element element = doc.getDocumentElement();
    String expectedHtml = "<root>\n  <child>\n    text\n  </child>\n</root>";
    assertEquals(expectedHtml, element.html());

    // Test with prettyPrint disabled
    factory.setPrettyPrint(false);
    builder = factory.newDocumentBuilder();
    doc = builder.parse(new InputSource(new StringReader("<root>   <child>   text   </child>   </root>")));
    element = doc.getDocumentElement();
    String actualHtml = element.html();
    // assert that the whitespace is not trimmed
    assertEquals("<root>   <child>   text   </child>   </root>", actualHtml);
}
