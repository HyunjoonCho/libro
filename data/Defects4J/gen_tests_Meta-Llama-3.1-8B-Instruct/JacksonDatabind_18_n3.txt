public void testReadValuesErrorRecovery() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    JsonFactory jsonFactory = new JsonFactory();
    JsonParser jp = jsonFactory.createParser(new StringReader("{\"a\": {\"b\": [1, 2, 3]"));
    MappingIterator<Number, Number> iterator = mapper.readerForListOf(Number.class).readValues(jp);
    try {
        iterator.next();
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        // expected
    }
    assertEquals(1, iterator.getCurrentIndex());
    jp.close();
}