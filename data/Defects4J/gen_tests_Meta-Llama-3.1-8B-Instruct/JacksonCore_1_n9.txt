java
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonToken;
import com.fasterxml.jackson.core.base.ParserBase;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;

import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.IOException;

import static org.junit.Assert.assertThrows;

public class JacksonTest {

    @Test
    public void testNaNAsBigDecimal() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);

        JsonParser parser = mapper.createParser(new ByteArrayInputStream("NaN".getBytes()));
        parser.nextToken();

        assertThrows(JsonMappingException.class, () -> parser.getDecimalNumber());
    }

    @Test
    public void testNaNAsBigInteger() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);

        JsonParser parser = mapper.createParser(new ByteArrayInputStream("NaN".getBytes()));
        parser.nextToken();

        assertThrows(JsonMappingException.class, () -> parser.getNumberValue());
    }
}
