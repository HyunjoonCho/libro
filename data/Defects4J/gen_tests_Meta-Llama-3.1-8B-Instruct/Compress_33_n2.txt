public void testCompressorStreamFactoryWithZlibHeader() throws Exception {
    // Create a zlib compressed file with a header
    byte[] data = new byte[] { 0x78, 0x9c, 0x00, 0x01, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
    ByteArrayInputStream bais = new ByteArrayInputStream(data);

    // Attempt to create a CompressorInputStream
    try {
        CompressorInputStream cis = CompressorStreamFactory.createCompressorInputStream(bais);
        fail("Expected CompressorException");
    } catch (Compressor