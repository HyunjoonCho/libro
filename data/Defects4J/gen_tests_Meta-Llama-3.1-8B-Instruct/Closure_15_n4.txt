public void testSwitchedOrderOfDeleteAndInStatements() {
    Map<String, String> customData = new HashMap<>();
    customData.put("key", "value");

    String retval = testRemoveKey(customData, "key");
    System.out.println(retval); // should print "value"

    System.out.println("key".equals(customData.keySet())); // should print false

}

public String testRemoveKey(Map<String, String> data, String key) {
    Map<String, String> dataSlot = data;
    String retval = dataSlot.get(key);
    boolean hadKey = dataSlot.containsKey(key);

    if (dataSlot!= null) {
        dataSlot.remove(key);
    }

    return hadKey? retval : null;
}