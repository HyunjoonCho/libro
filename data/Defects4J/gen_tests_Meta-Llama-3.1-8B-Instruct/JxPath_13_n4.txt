public void testIncompleteNamespaceHandling() {
    NamespaceContext context = new NamespaceContext();
    context.registerNamespace("A", "http://example.com/A");
    context.registerNamespace("B", "http://example.com/B");
    context.registerNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance");
    Element root = new Element("ElementA");
    root.setAttribute("A:myAttr", "Mytype");
    Element child = new Element("B:ElementB");
    child.setText("MY VALUE");
    root.addChild(child);
    try {
        DOMNodePointer.createAttribute(root, "A:myAttr");
        fail("Expected exception");
    } catch (UnknownNamespaceException e) {
        assertEquals("A", e.getNamespacePrefix());
    }
}