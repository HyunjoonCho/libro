java
public void testClassifyNonRightmostExpressions() {
    // Test case 1: foo((1, 2, 42))
    Expression expression = new Expression("(1, 2, 42)");
    Expression result = ExpressionTransformer.transform(expression);
    assertEquals("(1, 3)", result.toString());
    assertTrue(result.getWarnings().contains("Warning: '1' has side effects"));

    // Test case 2: foo((bar(), 2, 42))
    expression = new Expression("(bar(), 2, 42)");
    result = ExpressionTransformer.transform(expression);
    assertEquals("(bar(), 3)", result.toString());
    // No warnings expected

    // Test case 3: foo(((1, 2, 3), (4, 5, 42)))
    expression = new Expression("((1, 2, 3), (4, 5, 42))");
    result = ExpressionTransformer.transform(expression);
    assertEquals("(1, 4, 42)", result.toString());
    assertTrue(result.getWarnings().contains("Warning: '1' has side effects"));
}
