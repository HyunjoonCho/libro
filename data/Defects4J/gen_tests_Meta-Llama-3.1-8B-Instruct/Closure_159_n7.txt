public void testClosureCompiler() {
    String source = "goog.provide('test');\n" +
            "goog.require('goog.string');\n" +
            "\n" +
            "test.preload_check_all = function() {\n" +
            "    goog.string.forEach(test.preload_check_all, function() {\n" +
            "        alert('Hello World');\n" +
            "    });\n" +
            "};\n" +
            "\n" +
            "test.preload_check_all();";
    ClosureCompiler compiler = new ClosureCompiler();
    String compiled = compiler.compile(source);
    assertTrue(compiled.contains("function preload_check_all"));
    assertTrue(compiled.contains("goog.string.forEach(test.preload_check_all"));
}