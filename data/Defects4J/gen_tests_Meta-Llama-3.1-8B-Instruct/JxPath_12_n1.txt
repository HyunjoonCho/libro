public void testIncompleteNamespaceHandling() {
    // Create a namespace declaration
    NamespaceRegistry registry = new NamespaceRegistry();
    registry.registerNamespace("A", "http://example.com/A");
    registry.registerNamespace("B", "http://example.com/B");

    // Create a document with namespace declarations
    Document document = new Document();
    document.setNamespaceRegistry(registry);

    Element elementA = new Element("ElementA");
    Attr attributeA = new Attr("myAttr", "MyType");
    elementA.addAttribute(attributeA);

    Element elementB = new Element("B", "ElementB");
    elementB.setText("MY VALUE");

    elementA.appendChild(elementB);

    // Try to create the attribute without registering the namespace
    try {
        registry.registerNamespace("A", "http://example.com/A");
        registry.registerNamespace("B", "http://example.com/B");
        Attr attributeWithNamespace = new Attr("A:myAttr", "MyType");
        elementA.addAttribute(attributeWithNamespace);
        fail("Expected DOMException");
    } catch (DOMException e) {
        assertEquals("unknown namespace prefix: A", e.getMessage());
    }
}