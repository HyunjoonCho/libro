java
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

public class TreeTraversingParserTest {

    private static final ObjectMapper mapper = new ObjectMapper();

    @Test
    public void testIntOverflow() {
        JsonNode tree = mapper.readTree("{\"x\": 2147483648}");
        try {
            mapper.readerFor(IntClass.class).readValue(tree);
            fail("Expected JsonMappingException");
        } catch (Exception e) {
            assertEquals(JsonMappingException.class, e.getClass());
        }

        assertEquals(JsonMappingException.class, mapper.readerFor(IntClass.class).readValue(tree).getClass());
    }

    @Test
    public void testIntUnderflow() {
        JsonNode tree = mapper.readTree("{\"x\": -2147483649}");
        try {
            mapper.readerFor(IntClass.class).readValue(tree);
            fail("Expected JsonMappingException");
        } catch (Exception e) {
            assertEquals(JsonMappingException.class, e.getClass());
        }

        assertEquals(JsonMappingException.class, mapper.readerFor(IntClass.class).readValue(tree).getClass());
