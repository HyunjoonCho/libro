public void testEnumSerialization() {
    TestEnum valueOne = new TestEnum("value1");
    String json = mapper.writeValueAsString(valueOne);
    assertEquals("{\"valueInJson\":\"value1\"}", json);

    TestEnum deserialized = mapper.readValue("{\"valueInJson\":\"value1\"}", TestEnum.class);
    assertEquals(TestEnum.VALUE_ONE, deserialized);

    String jsonWithSerializedName = "{\"value1\":\"value1\"}";
    mapper.configure(DeserializationFeature.READ_ENUMS_USING_TO_STRING, true);
    deserialized = mapper.readValue(jsonWithSerializedName, TestEnum.class);
    assertEquals(TestEnum.VALUE_ONE, deserialized);
}