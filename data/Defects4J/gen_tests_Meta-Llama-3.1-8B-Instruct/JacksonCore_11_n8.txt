public void testArrayIndexOutOfBoundsException() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ServerIndexPair sip = new ServerIndexPair(new byte[2080]);
    byte[] bytes = mapper.writeValueAsBytes(sip);
    byte[] largeBytes = new byte[bytes.length * 2];
    System.arraycopy(bytes, 0, largeBytes, 0, bytes.length);
    try {
        mapper.readValue(largeBytes, new TypeReference<ServerIndexPair>() {});
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (JsonParseException e) {
        assertTrue(e.getCause() instanceof ArrayIndexOutOfBoundsException);
    }
}