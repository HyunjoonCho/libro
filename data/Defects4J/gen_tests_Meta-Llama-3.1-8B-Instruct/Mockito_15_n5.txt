public void testArgumentCaptorVarargs() {
    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    try {
        methodThatTakesVarargs(captor.capture(), captor.capture());
    } catch (Exception e) {
        fail("ArgumentCaptor should not throw exception for varargs");
    }
    assertEquals(2, captor.getAllValues().size());
}