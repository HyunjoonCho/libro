public void testJsonStreamContextsDiffer() {
    ObjectMapper mapper = new ObjectMapper();
    JsonGenerator gen = mapper.getFactory().createGenerator(System.out);
    JsonParser parser = mapper.getFactory().createParser(new StringReader("{\"key\":\"value\"}"));
    JsonStreamContext writeContext = gen.getOutputContext();
    JsonStreamContext readContext = parser.getCodec().getParser().getInputContext();

    assertEquals(writeContext.getType(), readContext.getType());
    assertEquals(writeContext.getStructProperties().size(), readContext.getStructProperties().size());
    assertEquals(writeContext.getStructProperties().getKeys(), readContext.getStructProperties().getKeys());
}