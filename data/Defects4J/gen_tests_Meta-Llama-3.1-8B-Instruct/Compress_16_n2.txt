public void testTarDetection() throws IOException {
    // Test tar file that should be detected
    byte[] tarFile = "tar file contents".getBytes();
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    ArchiveEntry entry = factory.createArchiveEntry(tarFile);
    assertTrue(entry instanceof TarArchiveEntry);

    // Test AIFF file that should not be detected as tar
    byte[] aiffFile = "aiff file contents".getBytes();
    try {
        factory.createArchiveEntry(aiffFile);
        fail("AIFF file was incorrectly detected as tar");
    } catch (ArchiveException e) {
        // expected
    }
}