java
public void testProcessCommonJSModules() {
    String echoJs = "define(function() { return { echo: function(val) { console.log(val); } }; });";
    String echoMainJs = "var echo = require('echo'); echo.echo('hello world');";

    // Test with common_js_entry_module set to an empty string
    Map<String, String> options = new HashMap<>();
    options.put("js", echoJs);
    options.put("js", echoMainJs);
    options.put("common_js_entry_module", "");
    options.put("checkTypes", "true");
    options.put("compilation_level", "SIMPLE_OPTIMIZATIONS");
    options.put("transform_amd_modules", "true");
    options.put("process_common_js_modules", "true");

    // Verify that we get a failure due to module$exports being undefined
    // (Note: This test is written in Java, not JavaScript, as it's a JUnit test)
    // We'll use a mock compiler to simulate the compiler output
    String expectedError = "echo-main.js:1: ERROR - Property module$exports never defined on module$echo_main";
    // Run the test and verify the error message
    // (