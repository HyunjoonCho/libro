public void testTrueFalseReplacement() {
    Object externalRef = new Object();
    Function<Object> a = null;
    if (true) {
        a = () -> externalRef;
    }
    Object result = new Object() {
        public void method1() {
            a!= null && a.apply();
            System.out.println(true);
        }
        public void method2() {
            System.out.println(false);
        }
    };
    result.getClass().getMethod("method1").invoke(result);
    result.getClass().getMethod("method2").invoke(result);
}