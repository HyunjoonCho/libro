java
public void testDateTimeSerializerBaseContextual() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ObjectWriter writer = mapper.writer();
    // Test with custom format specified
    writer = writer.withDateFormat(new SimpleDateFormat("yyyy-MM-dd"));
    // Create a POJO with a field annotated with @JsonFormat
    MyPojo pojo = new MyPojo("2022-01-01");
    String json = writer.writeValueAsString(pojo);
    // Check that the custom format is used
    assertEquals("2022-01-01", json);

    // Test without custom format specified
    writer = mapper.writer();
    pojo = new MyPojo("2022-01-01");
    json = writer.writeValueAsString(pojo);
    // Check that the default format is used
    assertEquals("2022-01-01T00:00:00.000Z", json);
}

class MyPojo {
    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd")
    private String date;

    public MyPojo(String date) {
        this.date = date;
    }
}
