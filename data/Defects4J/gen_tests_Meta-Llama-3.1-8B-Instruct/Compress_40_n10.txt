java
public void testBitInputStreamOverflow() throws IOException {
    ByteArrayInputStream in = new ByteArrayInputStream(new byte[]{0x57, 0x2D, 0x42, 0xF, 0x5A, 0x1D, 0x58, 0x3D, 0x21, 0x4A});
    BitInputStream bin = new BitInputStream(in, ByteOrder.LITTLE_ENDIAN);

    // This should not overflow
    assertEquals(0x57, bin.readBits(8));

    // This should overflow and return the remaining bits
    long ret = bin.readBits(64);
    assertEquals(0x21, ret);

    // This should return the remaining bits
    ret = bin.readBits(64);
    assertEquals(0, ret);
}
