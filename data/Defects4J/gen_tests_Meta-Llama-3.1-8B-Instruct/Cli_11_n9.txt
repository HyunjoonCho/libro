java
import org.apache.commons.cli.ParseException;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.OptionGroup;
import org.apache.commons.cli.PosixParser;

public class TestPosixParser {

    public static void main(String[] args) {
        Option targetOpt = new Option("t", "target", true, "Generate files for the specified target machine");
        OptionGroup targetGroup = new OptionGroup();
        targetGroup.addOption(targetOpt);
        Option targetLongOpt = new Option("target", true, "Generate files for the specified target machine");
        targetGroup.addOption(targetLongOpt);
        PosixParser parser = new PosixParser();
        try {
            parser.parse(targetGroup, new String[] {"-t"});
            fail("Expected ParseException");
        } catch (ParseException e) {
            // expected
        }
        try {
            parser.parse(targetGroup, new String[] {"-target"});
            fail("Expected ParseException");
        } catch (ParseException e) {
            // expected
        }
        try {
            parser.parse(targetGroup, new String[] {"-t", "foobar.com"});
            assertEquals("foobar.com", parser.getParsedOptions().getOptionValue("t"));
        } catch (ParseException e) {
            fail("Unexpected ParseException