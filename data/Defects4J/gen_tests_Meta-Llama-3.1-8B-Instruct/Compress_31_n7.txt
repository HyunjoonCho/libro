public void testTarArchiveInputStream() throws IOException {
    File tempFile = File.createTempFile("test", ".tgz");
    try {
        GZIPOutputStream gzipOut = new GZIPOutputStream(new FileOutputStream(tempFile));
        TarArchiveOutputStream tarOut = new TarArchiveOutputStream(gzipOut);
        TarArchiveEntry entry = new TarArchiveEntry("05412{NUL}11");
        entry.setSize(8);
        tarOut.putArchiveEntry(entry);
        tarOut.closeEntry();
        tarOut.close();
        gzipOut.close();
        TarArchiveInputStream tarIn = new TarArchiveInputStream(new GZIPInputStream(new BufferedInputStream(new FileInputStream(tempFile))));
        try {
            tarIn.getNextTarEntry();
            fail("Expected java.lang.IllegalArgumentException");
        } catch (IllegalArgumentException e) {
            assertEquals("Invalid byte 0 at offset 5 in '05412{NUL}11' len=8", e.getMessage());
        }
    } finally {
        tempFile.delete();
    }
}