java
public void testEscapeModeXhtmlFallsBackToNumericEscapes() throws Exception {
    String input = "<html><body>before&nbsp;after</body></html>";
    Document doc = Jsoup.parse(input);
    doc.outputSettings().escapeMode(EscapeMode.xhtml);
    
    // In JSoup 1.7.2, the output would be "beforeÂ after" (with a non-breaking space)
    // In JSoup 1.8.1, the output is "before?after" (with a question mark)
    // We want to test that it falls back to numeric escape in this case
    String output = doc.html();
    Assert.assertTrue("Expected a numeric escape in the output", output.contains("&#160;"));
}
