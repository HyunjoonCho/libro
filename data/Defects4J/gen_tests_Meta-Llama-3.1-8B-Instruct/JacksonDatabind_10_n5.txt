java
public class Test {
    @JsonSerialize(using = MySerializer.class)
    @JsonAnyGetter
    public Map<String, String> getParameters() {
        return new HashMap<>();
    }

    @JsonSerialize(keyUsing = MyKeySerializer.class)
    public Map<String, String> getParametersWithKeySerializer() {
        return new HashMap<>();
    }

    @Test
    public void testJsonAnyGetterWithSerializer() throws JsonProcessingException {
        ObjectMapper mapper = new ObjectMapper();
        String json1 = mapper.writeValueAsString(new Test());
        String json2 = mapper.writeValueAsString(new TestWithKeySerializer());

        // Verify that the first JSON string does not contain the serialized parameters
        // and the second one does.
        assertTrue(json1.contains("getParameters"));
        assertFalse(json1.contains("parameters"));
        assertTrue(json2.contains("parameters"));
    }
}

class TestWithKeySerializer {
    @JsonAnyGetter
    public Map<String, String> getParameters() {
        return new HashMap<>();
    }
}
