public class TestObject {
    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "id")
    public static class A {
        @JsonProperty("id")
        public int id;

        public A() {}
    }

    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "id")
    public static class B {
        @JsonProperty("id")
        public int id;

        @JsonProperty("a")
        public A a;

        public B() {}
    }

    public static class C {
        @JsonProperty("list")
        public List<B> list = new ArrayList<>();

        public C() {}
    }

    @Test
    public void testJsonIdentityInfo() {
        // Test with forward reference in a field
        B b = new B();
        b.id = 1;
        b.a = new A();
        b.a.id = 2;

        // Test with forward reference in a collection
        C c = new C();
        B b2 = new B();
        b2.id = 3;