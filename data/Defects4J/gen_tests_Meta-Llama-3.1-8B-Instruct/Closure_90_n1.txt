javascript
public void testTypedefWarning() {
    // Define a typedef
    goog.provide('bug');
    goog.require('goog.typedef');
    
    // Define a function with a typedef annotation
    /**
     * @this {bug.Thing}
     */
    bug.sharedMethod = function() {};

    // Verify that a warning is emitted
    var warning = console.log;
    console.log = function(msg) {
        if (msg.indexOf("WARNING - @this type of a function must be an object")!= -1) {
            return true;
        }
        warning.apply(console, arguments);
        return false;
    };
    goog.require('goog.typedef');
    var result = goog.typedef;
    console.log = warning;
    assertTrue(result);

    // Verify that a warning is not emitted with a non-function type
    /**
     * @this {bug.A|bug.B}
     */
    bug.sharedMethod2 = function() {};

    // Verify that a warning is not emitted with a function type
    /**
     * @this {bug.A|bug.B}
     */
    bug.sharedMethod3 = function() {};

    // Verify that a warning is not emitted with a boxed type
    /**
     * @this {goog