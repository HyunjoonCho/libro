public void testArchiveStreamFactoryEncoding() {
    String encoding = "UTF-8";
    String fileName = "test.txt";
    String content = "test content";
    try {
        File file = File.createTempFile(fileName, ".txt");
        file.deleteOnExit();
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(content.getBytes(encoding));
        fos.close();

        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        // Test ArjArchiveInputStream
        ArjArchiveInputStream ais = (ArjArchiveInputStream) factory.createArchiveInputStream(file);
        try {
            byte[] buf = new byte[10];
            int bytesRead = ais.read(buf);
            String readContent = new String(buf, 0, bytesRead, encoding);
            assertEquals(content, readContent);
        } finally {
            ais.close();
        }

        // Test CpioArchiveInputStream
        CpioArchiveInputStream cis = (CpioArchiveInputStream) factory.createArchiveInputStream(file);
        try {
            byte[] buf = new byte[10];
            int bytesRead = cis.read(buf);
            String readContent = new String(buf, 0, bytesRead, encoding);
            assertEquals(content, readContent);
        } finally {
            cis.close();
        }

        // Test DumpArchive