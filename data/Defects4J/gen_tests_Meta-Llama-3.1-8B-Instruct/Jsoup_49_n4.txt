public void testInsertChildrenFailure() {
    Document doc = new Document("");
    Element body = doc.appendElement("body");
    Element div1 = body.appendElement("div1");
    Element div2 = body.appendElement("div2");
    Element div3 = body.appendElement("div3");
    Element div4 = body.appendElement("div4");

    ArrayList<Element> toMove = new ArrayList<>();
    toMove.add(div3);
    toMove.add(div4);

    body.insertChildren(0, toMove);

    // Move div3 and div4 to index 1
    toMove.clear();
    toMove.add(div3);
    toMove.add(div4);
    body.insertChildren(1, toMove);

    // Verify that div3 and div4 are at index 1 and div1 is at index 2
    assertEquals(2, body.child(1).child(0).siblingIndex());
    assertEquals(2, body.child(1).child(1).siblingIndex());

    // Move div3 and div4 to index 0
    toMove.clear();
    toMove.add(div3);
    toMove.add(div4);
    body.insertChildren(0, toMove);

    // Verify