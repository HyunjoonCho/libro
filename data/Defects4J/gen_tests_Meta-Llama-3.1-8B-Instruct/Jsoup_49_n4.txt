java
@Test
public void mustCorrectlyMoveChildrenInsideOneParentElement() {

    Document doc = new Document( "" );
    Element body = doc.appendElement( "body" );
    Element div1 = body.appendElement( "div1" );
    Element div2 = body.appendElement( "div2" );
    Element div3 = body.appendElement( "div3" );
    Element div4 = body.appendElement( "div4" );

    // Move two children to the beginning of the parent
    ArrayList<Element> toMove = new ArrayList<Element>() {
        {
            add( div3 );
            add( div4 );
        }
    };
    body.insertChildren( 0, toMove );

    // Now move div1 to the end of the parent
    ArrayList<Element> toMoveAgain = new ArrayList<Element>() {
        {
            add( div1 );
        }
    };
    body.insertChildren( 1, toMoveAgain );

    String result = doc.toString().replaceAll( "\\s+", "" );
    assertEquals( "<body><div3></div3><div4></div4><div1></div1><div2></div2></body>", result