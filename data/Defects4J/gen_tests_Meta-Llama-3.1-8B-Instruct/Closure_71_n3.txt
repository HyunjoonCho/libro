javascript
import { compileCode } from 'google-closure-compiler';

describe('visibility', () => {
  it('should raise an error when a private property is redeclared on a subclass', () => {
    const code = `
      /**
       * @constructor
       */
      function Foo() {
        /**
         * @private
         */
        this.x_ = 3;
      }

      /**
       * @constructor
       * @extends {Foo}
       */
      function SubFoo() {
        /**
         * @private
         */
        this.x_ = 3;
      }
    `;

    const compilationResult = compileCode(code, {
      jscomp_error: 'visibility',
    });

    expect(compilationResult.errors).toHaveLength(1);
  });
});
