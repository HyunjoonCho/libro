public void testBooleanReplacer() {
    boolean anyExpression = true;
    Function fn1 = null;
    Function fn2 = null;
    
    if (anyExpression) {
        fn2 = new Function() {
            public Object invoke(Object... args) {
                return null;
            }
        };
        fn1 = new Function() {
            public Object invoke(Object... args) {
                return fn2.invoke();
            }
        };
    }
    
    Object result = new Object() {
        public boolean method1() {
            if (fn1!= null) {
                fn1.invoke();
            }
            return true;
        }
        
        public boolean method2() {
            return false;
        }
    };
    
    assertNotNull(result);
    assertTrue(((Method) result.getClass().getMethod("method1")).invoke(result));
    assertFalse(((Method) result.getClass().getMethod("method2")).invoke(result));
}