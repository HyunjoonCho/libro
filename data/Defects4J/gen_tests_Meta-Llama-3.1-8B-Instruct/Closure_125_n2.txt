public void testIssue107() {
    JavaScriptCompiler compiler = new JavaScriptCompiler();
    try {
        compiler.compile("var test = {};\n" +
                "test.T = function() {};\n" +
                "/** @interface */\n" +
                "test.T = function() {};\n" +
                "/** @constructor\n" +
                " * @implements {test.T}\n" +
                " */\n" +
                "test.A = function() {};\n" +
                "/** @constructor\n" +
                " * @implements {test.T}\n" +
                " */\n" +
                "test.B = function() {};\n" +
                "/** @constructor\n" +
                " */\n" +
                "test.X = function() {\n" +
                "  this.type = test.A;\n" +
                "  this.t = this.f();\n" +
                "};\n" +
                "/** @return {test.T} */\n" +
                "test.X.prototype.f = function() {\n" +
                "  if (this.type === test.A) {\n" +
                "    return new test.A();\n