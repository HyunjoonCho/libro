javascript
describe('Issue test', () => {
    it('should report record type invalid property on function with @this annotation', () => {
        class Person {
            /**
             * @constructor
             * @param {{name: string, height: number}} options
             */
            constructor(options) {
                this.initialize.apply(this, arguments);
            }

            /**
             * @this {Person}
             * @param {{name: string, height: number}} options
             */
            initialize(options) {
                /** @type {string} */
                this.name_ = options.thisPropDoesNotExist;
            }

            /**
             * @param {string} message
             * @this {Person}
             */
            say(message) {
                window.console.log(this.name_ +'says:'+ message);
            }
        }

        const joe = new Person({name: 'joe', height: 300});
        joe.say('hi');

        expect(() => {
            joe.initialize({thisPropDoesNotExist: 'value'});
        }).toThrow();
    });
});
