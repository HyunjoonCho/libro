import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.rhino.jstype.FunctionType;
import com.google.javascript.rhino.jstype.Type;
import org.junit.Test;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class TestIssue107 {
    @Test(expected = RuntimeException.class)
    public void testIssue107() throws IOException {
        String jsCode = "var test = {}; " +
                "test.T = function() {}; " +
                "test.A = function() {}; " +
                "test.B = function() {}; " +
                "test.X = function() {" +
                "  this.type = test.A; " +
                "  this.t = this.f();" +
                "};" +
                "test.X.prototype.f = function() {" +
                "  if (this.type === test.A) {" +
                "    return new test.A();" +
                "  } else if (this.type === test.B) {" +
                "    return new test.B();" +
                "  }" +
                "};";

        File tempFile = File