public void testTruncatedWarningOrError() {
    // Create a test file
    String script = "alert(foo);\nalert(bar);";
    File tempFile = File.createTempFile("test", ".js");
    try (PrintWriter writer = new PrintWriter(tempFile)) {
        writer.println(script);
    }
    File tempFile2 = new File(tempFile.getParent(), "output.txt");
    try (PrintWriter writer = new PrintWriter(tempFile2)) {
        // Compile the JavaScript file
        Process process = Runtime.getRuntime().exec(new String[] {"java", "-jar", "compiler.jar", "--warning_level", "VERBOSE", "--js", tempFile.getAbsolutePath()});
        try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
            String line;
            while ((line = reader.readLine())!= null) {
                writer.println(line);
            }
        }
    } catch (IOException e) {
        fail("Failed to compile JavaScript");
    }
    // Read the output file
    String[] lines = tempFile2.list();
    assertEquals(3, lines.length);
    assertEquals("test.js:1: ERROR - variable foo is undefined", lines[0]);
    assertEquals("alert(foo);", lines[1]);
    assertEquals("