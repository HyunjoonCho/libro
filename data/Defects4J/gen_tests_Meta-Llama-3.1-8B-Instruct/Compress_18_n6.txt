public void testLongDirectoryNames() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    TarArchiveOutputStream tas = new TarArchiveOutputStream(bos);
    TarArchiveEntry entry = new TarArchiveEntry("very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/very/long/directory");
    entry.setSize(0);
    tas.putArchiveEntry(entry);
    tas.close();
    assertNotEquals(0, bos.toByteArray().length);
}