java
public void testTypeHierarchyAdapterRuntimeCheck() {
    // Create a class hierarchy
    public class Vehicle {}
    public class Car extends Vehicle {}
    public class Truck extends Vehicle {}

    // Create a type hierarchy adapter
    TypeHierarchyAdapter<Vehicle> vehicleAdapter = new TypeHierarchyAdapter<Vehicle>() {
        @Override
        public Vehicle create(String name, String json) {
            if (json.contains("car")) {
                return new Car();
            } else if (json.contains("truck")) {
                return new Truck();
            }
            return null;
        }
    };

    // Attempt to decode a JSON string as a Car
    try {
        vehicleAdapter.decode("truck");
        fail("Expected ClassCastException");
    } catch (ClassCastException e) {
        // Expected
    }
}
