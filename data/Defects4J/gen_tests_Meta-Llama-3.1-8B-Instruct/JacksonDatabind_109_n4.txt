public void testWriteBigDecimalAsPlainIgnoredWithJsonFormat() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(Feature.WRITE_BIGDECIMAL_AS_PLAIN, true);
    JsonFormat jsonFormat = new JsonFormat();
    jsonFormat.setShape(JsonFormat.Shape.STRING);
    mapper.enable(SerializationFeature.WRITE_BIGDECIMAL_AS_PLAIN);
    mapper.registerModule(new SimpleModule().addSerializer(BigDecimal.class, new JsonSerializer<BigDecimal>() {
        @Override
        public void serialize(BigDecimal value, JsonGenerator gen, SerializerProvider provider) throws IOException {
            gen.writeString(value.toString());
        }
    }));
    assertEquals("0.0000000005", mapper.writeValueAsString(new BigDecimal("0.0000000005")));
}