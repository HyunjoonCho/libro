java
public void testSerializationToTree() throws JsonProcessingException {
    X<String> x = new X<>();
    x.s = "test";
    x.items = new ArrayList<>();
    x.items.add("item1");
    x.items.add("item2");

    ObjectMapper mapper = new ObjectMapper();
    ObjectNode tree = mapper.valueToTree(x);

    JsonNode itemsNode = tree.get("items");
    assertTrue(itemsNode.getNodeType() == JsonNodeType.POJO);
    JsonNode itemTypeNode = tree.get("itemType");
    assertEquals("String", itemTypeNode.asText());

    // The expected JSON tree should be:
    // {
    //     "s": "test",
    //     "items": {
    //         "itemType": "String",
    //         "items": [
    //             "item1",
    //             "item2"
    //         ]
    //     }
    // }
}
