public void testExternalPropertyPolymorphicDeserialization() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    KindEnum type = KindEnum.CONTACT;
    JsonNode json = mapper.valueToTree(new Contact("Foo", type));
    KindEnum deserializedType = mapper.treeToValue(json.get("to"), KindEnum.class);
    assertEquals(type, deserializedType);
}

enum KindEnum {
    CONTACT, INVITE
}

class Contact {
    private String name;
    private KindEnum type;

    public Contact(String name, KindEnum type) {
        this.name = name;
        this.type = type;
    }

    // getters and setters
}