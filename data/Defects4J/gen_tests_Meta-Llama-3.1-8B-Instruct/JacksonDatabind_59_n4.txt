public void testIssue107() throws JsonParseException, JsonMappingException, IOException {
    ObjectMapper mapper = new ObjectMapper().enableDefaultTyping(DefaultTyping.NON_FINAL);
    String serialized = mapper.writeValueAsString(new TestClass(new HashMap<CompoundKey, String>() {{
        put(new CompoundKey("CompoundKey", "Value"), "");
    }}));
    ObjectMapper mapperWithModule = new ObjectMapper().enableDefaultTyping(DefaultTyping.NON_FINAL).registerModule(new SimpleModule() {
        private static final long serialVersionUID = 1L;
        @Override
        public void setupModule(SetupContext context) {
            context.addKeyDeserializers(new SimpleKeyDeserializers().addDeserializer(CompoundKey.class, new CompoundKeyDeserializer()));
        }
    });
    String serializedWithModule = mapperWithModule.writeValueAsString(new TestClass(new HashMap<CompoundKey, String>() {{
        put(new CompoundKey("CompoundKey", "Value"), "");
    }}));
    assertEquals(serialized, serializedWithModule);
}