public void testSmartNameRemoval() {
    Map<String, Object> goog = new HashMap<>();
    goog.put("inherits", new Object() {
        public void apply(Object x, Object y) {}
    });
    Map<String, Object> ns = new HashMap<>();
    ns.put("PageSelectionModel", new Object() {
        public Object FooEvent() {}
        public Object SelectEvent() {}
    });
    ns.get("PageSelectionModel").getClass().getMethod("FooEvent").invoke(ns.get("PageSelectionModel"));
    try {
        ((Method) goog.get("inherits")).invoke(null, ns.get("PageSelectionModel").getClass(), ns.get("PageSelectionModel").getClass().getMethod("FooEvent").invoke(ns.get("PageSelectionModel")));
        fail("Expected compiler crash");
    } catch (Exception e) {
        // Expected exception
    }
}