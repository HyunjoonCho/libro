public void testNodeSetReturnedByExtensionFunction() {
    JXPathContext context = JXPathContext.newInstance(new HashMap<String, Object>());
    NodeSet nodeSet = new BasicNodeSet();
    nodeSet.add(new NodePointer("test"));
    nodeSet.add(new NodePointer("test2"));
    context.setContextItem(nodeSet);
    List<Node> result = context.selectNodes("ems:observations()");
    assertEquals(2, result.size());
    assertEquals("test", result.get(0).getNodeName());
    assertEquals("test2", result.get(1).getNodeName());
}