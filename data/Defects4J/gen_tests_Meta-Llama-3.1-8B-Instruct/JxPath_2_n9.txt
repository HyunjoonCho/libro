java
public void testNodeSet() throws Exception {
    JXPathContext context = JXPathContext.newInstance(new DocumentBuilderFactoryImpl());
    NodeSet nodeSet = new BasicNodeSet();
    Node node = context.getFactory().createNode("ems:observations");
    nodeSet.add(new NodePointer(node));
    context.getExpressionContext().setContextNodePointer(new NodePointer(node));
    NodePointer ptr = context.getExpressionContext().getContextNodePointer();
    Expression expression = context.getExpression("ems:observations()");
    Object result = expression.evaluate();
    assertTrue(result instanceof NodeSet);
    NodeSet resultNodeSet = (NodeSet) result;
    assertEquals(1, resultNodeSet.size());
    assertTrue(resultNodeSet.contains(ptr));
}
