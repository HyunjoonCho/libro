public void testNullTypeAdapterFactory() {
    Gson gson = new GsonBuilder().create();
    TypeAdapterFactory typeAdapterFactory = null;
    gson.setFieldNamingStrategy(new FieldNamingStrategy() {
        @Override
        public String translateName(String name) {
            return name;
        }
    });
    gson.registerTypeAdapterFactory(typeAdapterFactory);
    try {
        gson.fromJson("{\"field\":\"value\"}", Object.class);
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}