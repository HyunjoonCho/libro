public void testJsonIdentityInfoDeserializationWithForwardReferencesAndJsonCreator() {
    // assuming that there are classes A, B and C in the package
    A a = new A();
    a.id = new B(a);
    a.list.add(new B(a));
    
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(DeserializationFeature.USE_GETTERS_AS_SETTERS);
    mapper.setVisibility(mapper.getVisibilityChecker()
           .withFieldVisibility(JsonAutoDetect.Visibility.ANY)
           .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
           .withIsGetterVisibility(JsonAutoDetect.Visibility.NONE));
    
    try {
        mapper.writeValueAsString(a);
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        // expected
    }
}