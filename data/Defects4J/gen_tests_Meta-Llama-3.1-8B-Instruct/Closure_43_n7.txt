javascript
describe('Issue with @lends annotation', function() {
    var Person = function() {};
    var makeClass = function(name) {
        Person.prototype[name] = {};
        return Person.prototype[name];
    };

    it('should work with @lends annotation', function() {
        makeClass('foo');
        try {
            require('jsdoc').lends(Person.prototype.foo);
            throw new Error('Expected error');
        } catch (e) {
            expect(e.message).toBe('Variable foo.prototype not declared before @lends annotation.');
        }
    });
});
