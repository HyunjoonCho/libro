java
public void testIssue983() {
    // Arrange
    Plot plot = new CategoryPlot(); // Create a plot with no datasets
    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer();
    renderer.plot = plot;

    // Act
    LegendItemCollection result = renderer.getLegendItems();

    // Assert
    // Since the plot is empty, result should be a valid LegendItemCollection
    assertNotNull(result);

    // But the bug would be triggered if the condition was "if (dataset!= null)" instead of "if (dataset == null)"
    // So, we should not get a NPE here
    assertEquals(0, result.getItemCount());
}
