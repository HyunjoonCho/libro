java
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class ExternExportTest {

    @Test
    public void testExternExportWithTypedef() {
        // Create a simple typedef
        String typedefCode = "typedef String MyType = String;";
        
        // Create code referencing the typedef above and below the typedef declaration
        String codeAbove = "function foo(MyType x) { return x; }";
        String codeBelow = "function bar(MyType x) { return x; }" + typedefCode + " function baz(MyType x) { return x; }";
        
        // Compile the code
        String externExport = compileCode(codeAbove + codeBelow);
        
        // Check that the extern export above the typedef references the aliased name correctly
        assertEquals("function foo(String x)", extractExternExport(externExport, "foo"));
        
        // Check that the extern export below the typedef embeds the body of the typedef correctly
        assertEquals("function bar(String x) { return x; } function baz(String x) { return x; }", extractExternExport(externExport, "baz"));
    }

    private String compileCode(String code) {
        // Simulate compilation using plovr
       