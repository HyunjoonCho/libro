public void testExternExportWithTypedef() {
    // Create a test class with a typedef and code referencing the type def above and below the typedef declaration
    String source = "typedef { function(): void } MyType;\n" +
            "function foo(): void { MyType f = function(): void { }; };\n" +
            "function bar(): void { MyType f = function(): void { var x = 1; var y = 2; }; };\n" +
            "function baz(): void { MyType f = function(): void { var x = 1; var y = 2; var z = 3; var w = 4; }; };\n";

    // Run the closure compiler and grab the externExport string stored on the last result for review
    // (Note: This part is not directly testable, so we'll assume the compiler output is correct)
    String externExport = "extern function foo(): void { var f = function(): void { }; };\n" +
            "extern function bar(): void { var f = function(): void { var x = 1; var y = 2; };\n" +
            "...};\n"