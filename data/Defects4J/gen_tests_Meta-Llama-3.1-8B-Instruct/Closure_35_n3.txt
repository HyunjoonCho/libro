public void testTypeMismatch() {
    Object result = new Object();
    if (true) {
        result = new Object();
        ((Map)result).put("prop1", new Object[]{3});
    }
    if (true) {
        result = (Map) result == null? new HashMap<>() : (Map)result;
        ((Map)result).put("prop2", "prop2");
    } else {
        result = (Map) result == null? new HashMap<>() : (Map)result;
        ((Map)result).put("prop3", "prop3");
    }
    // This will not throw an exception because result is not typed
    System.out.println(result);
}