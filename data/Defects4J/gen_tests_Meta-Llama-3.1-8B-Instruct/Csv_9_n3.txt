java
public void testToMapWithNoHeaders() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader("Name", "Age");
    CSVFormat noHeaderFormat = CSVFormat.DEFAULT.withIgnoreHeaderOnEmptyLines(true);

    String[] data = {"John,25", "Alice,30"};
    CSVReader reader = new CSVReader(data, noHeaderFormat);

    CSVRecord record = reader.readNext();
    Map<String, String> map = record.toMap();

    // This should not throw a NullPointerException
    assertNotNull(map);

    // Test that the map is empty, as expected
    assertTrue(map.isEmpty());
}
