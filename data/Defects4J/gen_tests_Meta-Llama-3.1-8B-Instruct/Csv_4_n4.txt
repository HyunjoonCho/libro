java
public void testCSVParserHeaderMap() {
    CSVFormat csvFormat = CSVFormat.DEFAULT;
    CSVParser parser = new CSVParser(new StringReader(""), csvFormat);
    try {
        parser.getHeaderMap();
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }

    csvFormat.withHeader("column1", "column2");
    parser = new CSVParser(new StringReader("column1,column2"), csvFormat);
    Map<String, Integer> header = parser.getHeaderMap();
    assertNotNull(header);
    assertEquals(2, header.size());
}
