java
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.junit.Test;

import java.io.IOException;
import java.io.Writer;
import java.nio.file.Files;
import java.nio.file.Paths;

import static org.junit.Assert.fail;

public class CSVFormatWithHeaderTest {

    @Test
    public void testWithHeader() throws IOException {
        try (CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(Files.newBufferedWriter(Paths.get("data.csv"))) {
            csvPrinter.printRecord(42);
            csvPrinter.close();
            fail("Expected IOException because CSVPrinter does not support withHeader method");
        } catch (IOException e) {
            // Expected
        }
    }
}
