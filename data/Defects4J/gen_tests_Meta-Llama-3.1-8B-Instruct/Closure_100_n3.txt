public void testDangerousUseOfGlobalThisObject() {
    ClosureCompiler compiler = new ClosureCompiler();
    String source = 
        "function writeMethodWithAnnotation() {" +
        "  this._bar = 123;" +
        "}" +
        "function readMethodWithAnnotation() {" +
        "  return this._bar;" +
        "}" +
        "function writeMethodWithoutAnnotation() {" +
        "  this._bar = 123;" +
        "}" +
        "function readMethodWithoutAnnotation() {" +
        "  return this._bar;" +
        "}";
    String expectedOutput = 
        "function writeMethodWithAnnotation() {" +
        "  this._bar = 123;" +
        "}" +
        "function readMethodWithAnnotation() {" +
        "  return this._bar;" +
        "}" +
        "function writeMethodWithoutAnnotation() {" +
        "  this._bar = 123;" +
        "}" +
        "function readMethodWithoutAnnotation() {" +
        "  return this._bar;" +
        "}";
    String actualOutput = compiler.compile(source);
    assertEquals(expectedOutput, actualOutput);
}