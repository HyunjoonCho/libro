public void testTextBufferInconsistentBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    assertNull(buffer.getTextBuffer());
    assertEquals("", buffer.contentsAsString());
    assertNotNull(buffer.getTextBuffer());
    assertTrue(buffer.getTextBuffer().length == 0);
}