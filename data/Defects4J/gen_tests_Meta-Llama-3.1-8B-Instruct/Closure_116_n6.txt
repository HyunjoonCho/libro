public void testAdvancedOptimizationsIssue() throws Exception {
    // Create a temporary directory
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "test-issue");
    tempDir.mkdir();

    // Create input.js
    File inputJs = new File(tempDir, "input.js");
    PrintWriter writer = new PrintWriter(inputJs);
    writer.println("window['anchor'] = function (obj, modifiesProp) {");
    writer.println("  return (function (saved) {");
    writer.println("    return modifiesProp(obj) + saved;");
    writer.println("  })(obj['prop']);");
    writer.close();

    // Compile with Advanced Optimizations
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar",
            "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--warning_level", "VERBOSE",
            "--externs", "window.js",
            "--js", inputJs.getAbsolutePath(),
            "--js_output_file", new File(tempDir, "output.js").getAbsolutePath());
    Process process = processBuilder.start();
    process.waitFor();

    // Load the compiled JavaScript code
    ScriptEngineManager manager = ScriptEngineManager.getManager();
    ScriptEngine engine = manager