java
public void testSelectorParsingCommas() {
    try {
        new QueryParser().parse("div, li:matches([0-9,]+)");
        fail("Expected java.util.regex.PatternSyntaxException");
    } catch (Exception e) {
        // expected exception
    }

    try {
        new QueryParser().parse("div, li:matches([0-9])");
        fail("Expected no exception");
    } catch (Exception e) {
        fail("Unexpected exception: " + e.getMessage());
    }

    try {
        new QueryParser().parse("[attr=a,b]");
        fail("Expected java.util.regex.PatternSyntaxException");
    } catch (Exception e) {
        // expected exception
    }

    try {
        new QueryParser().parse("[attr=a]");
        // no exception expected
    } catch (Exception e) {
        fail("Unexpected exception: " + e.getMessage());
    }
}
