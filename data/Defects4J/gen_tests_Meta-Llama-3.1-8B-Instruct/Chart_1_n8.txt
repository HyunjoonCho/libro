java
public void testAbstractCategoryItemRenderGetLegendItems() {
    // Create a plot with a null dataset
    CategoryPlot plot = new CategoryPlot();
    plot.setDataset(null);

    AbstractCategoryItemRenderer renderer = new AbstractCategoryItemRenderer();
    renderer.setPlot(plot);

    LegendItemCollection result = renderer.getLegendItems();
    assertNotNull(result);

    // Check that we don't get a NullPointerException
    int seriesCount = result.getSeriesCount();
    assertTrue(seriesCount == 0);
}
