java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerTestCase;
import com.google.javascript.jscomp.SourceFile;

public class DojoToolkitBugTest extends CompilerTestCase {
    @Override
    protected Compiler compile(String... sources) {
        return super.compile(sources);
    }

    public void testCompilerCrash() {
        String code = "/* @constructor\n" +
                " * @param {...Object} params\n" +
                "*/\n" +
                "dojox.gfx.shape.Shape = function(params) {};\n" +
                "dojox.gfx.shape.Shape = dojo.declare(\"dojox.gfx.shape.Shape\", null, /* @lends dojox.gfx.shape.Shape.prototype */ {"
                + "\n" +
                "});";

        SourceFile source = SourceFile.fromCode("dojox.js", code);
        try {
            Compiler compiler = compile(source);
            compiler.compile();
        } catch (Exception e) {
            System.out.println(e.getMessage());
            fail("Expected compiler crash");
        }
    }
}
