java
public void testJsonFormatOnEnumField() throws JsonProcessingException {
    // Test with field annotation (should work)
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.USE_EQUALITY_CHECKS, false);
    mapper.addMixIn(Color.class, ColorMixin.class);
    Foo foo = new Foo(Color.GREEN);
    String expected = "{\"color\":0}";
    String actual = mapper.writeValueAsString(foo);
    assertEquals(expected, actual);

    // Test with class annotation (should not work, should serialize as string)
    mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.USE_EQUALITY_CHECKS, false);
    foo = new Foo(Color.GREEN);
    expected = "{\"color\":\"GREEN\"}";
    actual = mapper.writeValueAsString(foo);
    assertEquals(expected, actual);
}

private static class ColorMixin {
    @JsonFormat(shape = JsonFormat.Shape.NUMBER_INT)
    public abstract Color value();
}
