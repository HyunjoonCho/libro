java
public void testUTF16BOMHandling() throws Exception {
    byte[] utf16Bom = new byte[] {(byte)0xFF, (byte)0xFE, (byte)0xFF};
    byte[] utf8Bom = new byte[] {(byte)0xEF, (byte)0xBB, (byte)0xBF};
    byte[] utf16WithoutBom = new byte[] {(byte)0x68, (byte)0x65, (byte)0x6c, (byte)0x6c, (byte)0x6f};

    byte[] data = new byte[] {utf16Bom, utf16Bom, utf16WithoutBom};
    byte[] expectedUTF16Data = new byte[] {(byte)0xFF, (byte)0xFE, (byte)0xFF, (byte)0xFF, (byte)0xFE, (byte)0xFF, (byte)0x68, (byte)0x65, (byte)0x6c, (byte)0x6c, (byte)0x6f};
    byte[] expectedUTF8Data = new byte[] {(byte)0xEF, (byte)0xBB,