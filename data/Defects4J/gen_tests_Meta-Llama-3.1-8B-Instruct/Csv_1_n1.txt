public void testEOLConsistency() {
    ExtendedBufferReader reader = new ExtendedBufferReader("abc\rdef\r\nghi");
    assertEquals(1, reader.readLine());
    assertEquals("def\r", reader.readLine());
    assertEquals("ghi", reader.readLine());
    assertEquals(3, reader.getLineCount());
}