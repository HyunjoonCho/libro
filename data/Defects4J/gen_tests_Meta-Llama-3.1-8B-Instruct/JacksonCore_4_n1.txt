public void testLongKey() {
    ObjectMapper mapper = new ObjectMapper();
    byte[] json = new byte[262145];
    Arrays.fill(json, (byte) 'a');
    String key = new String(json);
    try {
        mapper.readerForUpdating(new Object()).readValue(key);
        fail("Expected exception for long key");
    } catch (Exception e) {
        // expected exception
    }
}