public void testCompressorStreamFactoryZlibHeader() throws IOException {
    // Create a test file with a zlib header
    byte[] header = {0x78, 0x9c};
    byte[] data = new byte[] {'t', 'e','s', 't'};
    byte[] testFile = new byte[header.length + data.length];
    System.arraycopy(header, 0, testFile, 0, header.length);
    System.arraycopy(data, 0, testFile, header.length, data.length);

    try (ByteArrayInputStream bais = new ByteArrayInputStream(testFile);
         CompressorStreamFactory csf = new CompressorStreamFactory();
         CompressorInputStream cis = csf.createCompressorInputStream(bais)) {
        fail("Expected CompressorException");
    } catch (CompressorException e) {
        // expected
    }
}