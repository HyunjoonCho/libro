java
public void testOptionalSerialization() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_ABSENT);
    mapper.registerModule(new Jdk8Module());

    JsonResult result = new JsonResult();
    result.setA(Optional.empty());
    result.setB(Optional.empty());

    // Test that both fields are excluded
    JsonNode json = mapper.writeValueAsString(result);
    assertEquals("{\"a\":null,\"b\":null}", json.toString());

    // Test that non-empty Optional is included
    result.setA(Optional.of("value"));
    result.setB(Optional.of("value"));
    json = mapper.writeValueAsString(result);
    assertEquals("{\"a\":\"value\",\"b\":\"value\"}", json.toString());

    // Test that empty Optional is included
    result.setA(Optional.empty());
    result.setB(Optional.of("value"));
    json = mapper.writeValueAsString(result);
    assertEquals("{\"a\":null,\"b\":\"value\"}", json.toString());
}
