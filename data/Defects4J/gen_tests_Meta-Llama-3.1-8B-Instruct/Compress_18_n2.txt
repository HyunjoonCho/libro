public void testTarArchiveLongDirectoryName() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    TarArchiveOutputStream tarOs = new TarArchiveOutputStream(bos);
    try {
        tarOs.putArchiveEntry(new TarArchiveEntry("veryverylongdirectoryname/"));
        tarOs.closeEntry();
    } catch (IOException e) {
        fail("Expected no exception, but got " + e.getMessage());
    } finally {
        tarOs.close();
    }
    assertTrue(bos.size() > 0);
}