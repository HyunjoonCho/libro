public void testInvalidPropertyError() {
    String code = "function temp1(opt_data) { return opt_data.text; }\n" +
            "function temp2(opt_data) { /* @notypecheck */ function _inner() { return temp1(opt_data.activity); } return _inner(); }\n" +
            "function temp3(opt_data) { return 'n:'+ opt_data.n + ', t:'+ opt_data.text + '.'; }\n" +
            "function callee() { var output = temp3({ n: 0, text: 'a string', b: true }); alert(output); }";
    try {
        new Compiler().compile(code);
        fail("Expected an error");
    } catch (CompilationException e) {
        assertTrue(e.getMessage().contains("actual parameter 1 of temp3 does not match formal parameter"));
    }
}