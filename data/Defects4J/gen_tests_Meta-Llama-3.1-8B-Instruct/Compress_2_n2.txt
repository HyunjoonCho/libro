public void testArDeletion() throws IOException {
    // Create an archive with two files
    ZipArchive zip = new ZipArchive();
    zip.addEntry("test1.xml", "content1");
    zip.addEntry("test2.xml", "content2");
    zip.close();

    // Delete a file from the archive
    zip.deleteEntry("test2.xml");

    // Check that getNextEntry returns null
    ZipArchiveEntry entry = zip.getNextEntry();
    assertNull(entry);

    // Check that the archive still contains the deleted file
    try (InputStream is = new FileInputStream(zip.getFile())) {
        ZipInputStream zis = new ZipInputStream(is);
        ZipEntry zipEntry = zis.getNextEntry();
        assertEquals("test2.xml", zipEntry.getName());
    }

    // Try to add a new file to the archive
    zip.addEntry("test.txt", "content3");

    // Check that the archive is now corrupted
    try {
        ZipArchive corruptedZip = new ZipArchive();
        corruptedZip.open(zip.getFile());
        fail("Expected ZipException");
    } catch (ZipException e) {
        // Expected
    }
}