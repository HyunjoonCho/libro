javascript
function reset() {
    var uid = Math.random();
}

function doStuff() {
    reset();
    var _uid = uid;
    
    if (uid < 0.5) {
        doStuff();
    }
    
    if (_uid!== uid) {
        throw'reset() was called';
    }
}

try {
    doStuff();
} catch (e) {
    fail("Expected reset() to be called");
}

// This test should fail if the optimization is not fixed
