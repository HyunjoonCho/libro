public void testClosureCompiler() {
    String input = "var foreignObject = gfx.parentNode.parentNode;\n" +
                  "var parentContainer = foreignObject.parentNode.parentNode;";
    String webUiOutput = "if(b){if(a=b.parentNode.parentNode,b=a.parentNode.parentNode,null!==b)";
    String cliOutput = "var b=a=a.parentNode.parentNode;";
    
    // Test Web UI output
    ClosureCompiler compiler = new ClosureCompiler();
    compiler.setWarningLevel(WarningLevel.DEFAULT);
    compiler.setOutputMode(OutputMode.SIMPLE_COMPRESSED);
    compiler.compile(input);
    String webUiResult = compiler.getCompilationResult();
    assertEquals(webUiOutput, webUiResult);
    
    // Test CLI output
    compiler = new ClosureCompiler();
    compiler.setWarningLevel(WarningLevel.DEFAULT);
    compiler.setOutputMode(OutputMode.SIMPLE_COMPRESSED);
    compiler.compile(input, new FileInputStream("test.js"));
    String cliResult = compiler.getCompilationResult();
    assertEquals(cliOutput, cliResult);
}