java
public void testZipArchive() throws Exception {
    // Create a ZIP file with a truncated file
    File zipFile = File.createTempFile("test.zip", ".zip");
    try (ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(zipFile))) {
        zos.putNextEntry(new ZipEntry("test.txt"));
        byte[] data = new byte[1024];
        for (int i = 0; i < 1024; i++) {
            data[i] = (byte) i;
        }
        zos.write(data);
        // Truncate the file
        zos.closeEntry();
        zos.close();
        // Truncate the file to 512 bytes
        Files.write(Paths.get(zipFile.getAbsolutePath()), new byte[512]);
    }

    // Attempt to read the truncated ZIP file
    try (ZipInputStream zis = new ZipInputStream(new FileInputStream(zipFile))) {
        zis.getNextEntry();
        try {
            // This should throw an EOFException
            byte[] buffer = new byte[1024];
            z