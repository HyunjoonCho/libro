java
public void testOptionalEmptySerialization() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_ABSENT);
    mapper.registerModule(new Jdk8Module());

    JsonResult result = new JsonResult();
    result.setA(Optional.empty());
    result.setB(Optional.empty());
    result.setC(Optional.of(0)); // add a field to test non-empty collection
    result.setD(new int[0]); // add a field to test empty array

    String json = mapper.writeValueAsString(result);

    // check that empty optional is not serialized as null
    assertTrue(json.contains("\"b\":null"));
    assertTrue(json.contains("\"c\":0"));
    assertTrue(json.contains("\"d\":[]"));
}
