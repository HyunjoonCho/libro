java
public void testValuedEnumNotTypesafe() {
    ValuedEnum enum1 = new ValuedEnumImpl1(10);
    ValuedEnum enum2 = new ValuedEnumImpl2(10);

    try {
        enum1.compareTo(enum2);
        fail("Expected ClassCastException");
    } catch (ClassCastException e) {
        // expected
    }
}

class ValuedEnumImpl1 extends ValuedEnum {
    public ValuedEnumImpl1(int value) {
        super(value);
    }
}

class ValuedEnumImpl2 extends ValuedEnum {
    public ValuedEnumImpl2(int value) {
        super(value);
    }
}

class ValuedEnum {
    private int value;

    public ValuedEnum(int value) {
        this.value = value;
    }

    public int getValue() {
        return value;
    }

    public int compareTo(Object other) {
        return value - ((ValuedEnum) other).getValue();
    }
}
