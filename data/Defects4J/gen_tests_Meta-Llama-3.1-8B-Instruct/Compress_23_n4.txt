public void testSevenZDictionarySize() throws Exception {
    File tempFile = File.createTempFile("test", ".7z");
    tempFile.deleteOnExit();

    SevenZArchiveOutputStream out = new SevenZArchiveOutputStream(tempFile);
    out.putArchiveEntry(new ArchiveEntry("test"));
    out.closeArchiveEntry();
    out.close();

    SevenZFile sevenZFile = new SevenZFile(tempFile);
    try {
        sevenZFile.readHeaders();
        fail("Expected UnsupportedOptionsException");
    } catch (UnsupportedOptionsException e) {
        assertEquals("LZMA dictionary is too big for this implementation", e.getMessage());
    }
}