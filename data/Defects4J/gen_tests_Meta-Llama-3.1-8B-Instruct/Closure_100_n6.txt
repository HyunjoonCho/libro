public void testDangerousUseOfGlobalThis() {
    ClosureCompiler compiler = new ClosureCompiler();
    compiler.compile(
        "function Foo() { this._bar = null; }" +
        "function writeMethodWithAnnotation() { this._bar = 123; }" +
        "function readMethodWithAnnotation() { return this._bar; }" +
        "function writeMethodWithoutAnnotation() { this._bar = 123; }" +
        "function readMethodWithoutAnnotation() { return this._bar; }");
    String[] warnings = compiler.getWarnings();
    assertEquals(2, warnings.length);
    assertTrue(warnings[0].contains("dangerous use of the global this object"));
    assertTrue(warnings[1].contains("dangerous use of the global this object"));
}