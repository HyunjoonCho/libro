public void testArchiveStreamFactoryEncoding() throws IOException {
    String encoding = "UTF-8";
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    JarArchiveOutputStream jos = (JarArchiveOutputStream) ArchiveStreamFactory.newArchiveOutputStream("test.jar", bos, encoding);
    jos.close();
    byte[] bytes = bos.toByteArray();
    assertArrayEquals(encoding.getBytes(), bytes);
    
    bos = new ByteArrayOutputStream();
    CpioArchiveInputStream cis = (CpioArchiveInputStream) ArchiveStreamFactory.newArchiveInputStream("test.cpio", bos, encoding);
    cis.close();
    bytes = bos.toByteArray();
    assertArrayEquals(encoding.getBytes(), bytes);
    
    bos = new ByteArrayOutputStream();
    DumpArchiveInputStream das = (DumpArchiveInputStream) ArchiveStreamFactory.newArchiveInputStream("test.dump", bos, encoding);
    das.close();
    bytes = bos.toByteArray();
    assertArrayEquals(encoding.getBytes(), bytes);
    
    bos = new ByteArrayOutputStream();
    JarArchiveInputStream jas = (JarArchiveInputStream) ArchiveStreamFactory.newArchiveInputStream("test.jar", bos, encoding);
    jas.close();
    bytes = bos.toByteArray();
    assertArrayEquals(encoding.getBytes(), bytes);
    
    bos = new ByteArrayOutputStream();
    ArjArchiveInputStream aas = (ArjArchiveInputStream) ArchiveStreamFactory