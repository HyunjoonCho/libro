java
public void testNumberShapeWithLocale() {
    // Test that the shape has precedence over locale
    Shape shape = Shape.NUMBER;
    DateTimeFormatter dtf = DateTimeFormat.getFormat("yyyy-MM-dd").withShape(shape);
    DateTimeFormatter dtfWithLocale = dtf.withLocale(Locale.US);
    try {
        dtfWithLocale.parseDateTime("2022-01-01");
        fail("Expected parsing to fail with locale and explicit shape");
    } catch (DateTimeParseException e) {
        // Expected
    }

    // Test that the shape is correctly applied when locale is not specified
    dtf = DateTimeFormat.getFormat("yyyy-MM-dd").withShape(shape);
    assertEquals(shape, dtf.getShape());
}
