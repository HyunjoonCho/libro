java
public void testReturnsDeepStubsSerializableIssue() {
    // Arrange
    NotSerializableReturnValue notSerializableReturnValue = new NotSerializableReturnValue("");

    // Act and Assert
    try {
        ToBeMocked mock = mock(ToBeMocked.class, withSettings().serializable());
        when(mock.getSomething()).thenReturn(notSerializableReturnValue);
        when(notSerializableReturnValue.getSomething2()).thenReturn("test");

        // This should fail because NotSerializableReturnValue does not implement Serializable
        // and does not have a no-arg constructor
    } catch (MockitoException e) {
        assertEquals("You are using the setting 'withSettings().serializable()' however the type you are trying to mock 'NotSerializableReturnValue' do not implement Serializable AND do not have a no-arg constructor.", e.getMessage());
    }
}

public static class ToBeMocked {

    NotSerializableReturnValue field1;

    public ToBeMocked(NotSerializableReturnValue field1) {
        this.field1 = field1;
    }

    public NotSerializableReturnValue getSomething() {
        return field1;
    }
}

public static class NotSerializableReturnValue {

    String field1 = "";

    public NotSerializableReturnValue(String field1) {
        this.field1 = field1;
