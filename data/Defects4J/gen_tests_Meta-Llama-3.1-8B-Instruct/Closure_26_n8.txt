javascript
// echo.js
define(function() {
  return {
    echo: function(val) {
      window.console.log(val);
    }
  };
});

// echo-main.js
var echo = require('echo');
echo.echo('hello world');

// test.js
var jscomp = require('jscomp');
var fs = require('fs');
var code = fs.readFileSync('echo.js', 'utf8') + '\n' + fs.readFileSync('echo-main.js', 'utf8');
var result = jscomp.compile(
  code,
  {
    formatting: 'PRETTY_PRINT',
    error: 'checkTypes',
    compilation_level: 'SIMPLE_OPTIMIZATIONS',
    transformAMDModules: true,
    processCommonJSModules: true,
    js: ['echo.js', 'echo-main.js'],
    commonJSEntryModule: 'echo-main.js'
  }
);

console.log(result);
