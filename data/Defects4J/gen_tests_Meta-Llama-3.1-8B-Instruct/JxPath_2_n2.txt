java
import org.w3c.dom.Node;
import org.w3c.dom.NodeSet;
import org.w3c.dom.NodeList;

import junit.framework.TestCase;

public class NodeSetTest extends TestCase {

    public void testNodeSet() throws Exception {
        // Create a NodeSet
        Node node = createNode();
        NodeSet nodeSet = new BasicNodeSet();
        nodeSet.add(node);

        // Test that NodeSet is recognized as iterable
        Expression expression = new Expression("ems:nodeSet()");
        NodeList nodeList = expression.iterate(node);
        assertEquals(1, nodeList.getLength());

        // Test that Expression.iteratePointers() handles NodeSet correctly
        Expression pointerExpression = new Expression("ems:nodeSet()");
        NodePointer[] pointers = pointerExpression.iteratePointers(node);
        assertNotNull(pointers);
        assertEquals(1, pointers.length);

        // Test that NodeSet is correctly returned by a function
        JXPathContext context = JXPathContext.newInstance();
        Object result = context.selectNodes("ems:nodeSet()");
        assertNotNull(result);
        assertEquals(1, ((NodeSet) result).size());
    }

    private Node createNode() {
        // Create a simple Node for testing
        Document document = DocumentBuilderFactory