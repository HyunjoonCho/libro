public void testMockingPackagePrivateClass() {
    // Create a package-private class
    class PackagePrivateClass {
        public PackagePrivateClass() {}
    }

    // Create a public class that extends the package-private class
    class PublicClass extends PackagePrivateClass {}

    // Trying to create a mock of PublicClass should throw an exception
    try {
        when(new MockitoJUnitRunner().run(new Object() {
            @Test
            public void test() {
                Mockito.mock(PublicClass.class);
            }
        })).getTestResult().failures().get(0).getTest().getTest();
        fail("Expected Mockito exception");
    } catch (Exception e) {
        // Verify that the exception message mentions the package-private class
        assertTrue(e.getMessage().contains("cannot be mocked because Mockito cannot mock final classes/interfaces"));
    }
}