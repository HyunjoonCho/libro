public void testExternalTypeIdBeforePojo() {
    // Create a simple POJO with an external type id
    SimplePOJO pojo = new SimplePOJO();
    pojo.setId(1);

    // Write the POJO to a JSON string
    ObjectMapper mapper = new ObjectMapper();
    String json = mapper.writeValueAsString(pojo);

    // Deserialize the JSON string back to a new POJO
    try {
        SimplePOJO deserializedPojo = mapper.readValue(json, SimplePOJO.class);
        fail("Expected DeserializationException");
    } catch (JsonMappingException e) {
        // Expected exception
    }
}

class SimplePOJO {
    @JsonTypeInfo(use = JsonTypeInfo.As.EXTERNAL_PROPERTY)
    public static class Type {
        public int id;
    }

    @JsonTypeInfo(use = JsonTypeInfo.As.EXTERNAL_PROPERTY)
    public int id;
}