java
import org.junit.Test;
import static org.junit.Assert.*;

public class IssueTest {

    public static class Thing {
        public Thing subthing = new Thing() {
            public int prop = 3;
        };
    }

    public static class MyClass {
        public Thing thing_;

        public MyClass(Thing thing) {
            thing_ = thing;
        }

        public void doIt() {
            Thing subthing = thing_.subthing;
            // This should error
            // System.out.println(subthing.noprop);

            // This does not error
            for (int i = 0; i < subthing.prop; i++) {
                System.out.println(i);
            }
        }
    }

    @Test(expected = RuntimeException.class)
    public void testIssue() {
        Thing thing = new Thing();
        MyClass c = new MyClass(thing);
        c.doIt();
    }
}
