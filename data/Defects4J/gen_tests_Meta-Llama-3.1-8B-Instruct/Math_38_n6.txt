java
public void testBOBYQAOptimizer() {
    int dim = 2;
    BOBYQAOptimizer optim = new BOBYQAOptimizer(2 * dim + 1);
    // Test that it works with 2*dim+1 interpolation points
    RealPointValuePair result = optim.optimize(100000, new TestFunction(dim), GoalType.MINIMIZE, new double[dim]);
    assertEquals(0, result.getPoint()[0], 1e-10);
    assertEquals(0, result.getPoint()[1], 1e-10);

    // Test that it fails with 2*dim+2 interpolation points
    try {
        BOBYQAOptimizer optim2 = new BOBYQAOptimizer(2 * dim + 2);
        optim2.optimize(100000, new TestFunction(dim), GoalType.MINIMIZE, new double[dim]);
        fail("Expected BOBYQAOptimizer to throw an exception");
    } catch (Exception e) {
        // Expected exception
    }
}

private class TestFunction implements MultivariateFunction {
    private int dim;

    public TestFunction(int dim) {
        this.dim = dim;
    }

    @Override
    public double value