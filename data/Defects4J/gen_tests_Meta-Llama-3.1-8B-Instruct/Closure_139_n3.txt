javascript
function assert(b) {
    if (!b) throw "error";
}

assert(f() === 1)
var f = function() {return 2;}
assert(f() === 2)

function f() {return 1;}

// Test that the first definition of f has been changed from an assignment to a declaration
var compiledCode = "function f(){return 1;}";
try {
    eval(compiledCode);
    assert(false, "Expected an error to be thrown");
} catch (e) {
    assert(e.message.indexOf("redeclaration of function f")!== -1);
}
