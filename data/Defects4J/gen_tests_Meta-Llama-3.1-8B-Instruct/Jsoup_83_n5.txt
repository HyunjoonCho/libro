java
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;

public class JsoupTest {

    @Test(expected = org.jsoup.parser.Parser.ParseError.class)
    public void testMissingTagEnd() {
        String html = "<td class=\"my-cell\"<div class=\"great-formatting\">100</div></td>";
        Document doc = Jsoup.parse(html);
        doc.select("div.great-formatting");
    }

    @Test
    public void testMissingTagEndWithPreprocessor() {
        String html = "<td class=\"my-cell\"<div class=\"great-formatting\">100</div></td>";
        Document doc = Jsoup.parse(html);
        doc.outputSettings().format(Format.NoEscape);
        doc = doc.normalise();
        Element element = doc.selectFirst("div.great-formatting");
        assertNotNull(element);
    }
}
