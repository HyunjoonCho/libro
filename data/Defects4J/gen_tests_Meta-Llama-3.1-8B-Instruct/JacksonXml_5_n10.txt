public void testJacksonXmlRootElementMalfunction() {
    @JacksonXmlRootElement(localName = "myname")
    class TestClass {
    }

    final ObjectMapper xmlMapper = new XmlMapper();
    final ObjectMapper noAnnotationsXmlMapper = xmlMapper.copy()
           .configure(MapperFeature.USE_ANNOTATIONS, false)
           .configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);

    String noAnnotationsResult = noAnnotationsXmlMapper.writeValueAsString(new TestClass());
    String annotationsResult = xmlMapper.writeValueAsString(new TestClass());

    assertEquals("myname", getLocalName(noAnnotationsResult));
    assertEquals("TestClass", getLocalName(annotationsResult));
}

private String getLocalName(String xml) {
    int start = xml.indexOf('<');
    int end = xml.indexOf('>');
    return xml.substring(start + 1, end).split(" ")[0];
}