public void testVersionNeededToExtract() throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zos = new ZipArchiveOutputStream(new BufferedOutputStream(bos));
    ZipEntry entry = new ZipEntry("test.txt");
    zos.putArchiveEntry(entry);
    zos.closeEntry();

    zos.setUseDataDescriptor(true);
    zos.putArchiveEntry(entry);
    zos.closeEntry();

    zos.close();

    ZipArchiveInputStream zis = new ZipArchiveInputStream(new BufferedInputStream(new ByteArrayInputStream(bos.toByteArray())));
    ZipEntry localHeader = zis.getNextEntry();
    int expectedVersionNeededToExtract = ZIP64_MIN_VERSION;
    int actualVersionNeededToExtract = localHeader.getVersionNeededToExtract();

    assertEquals(expectedVersionNeededToExtract, actualVersionNeededToExtract);
}