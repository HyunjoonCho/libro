public void testWriteBigDecimalAsPlainOOM() {
    ObjectMapper mapper = new ObjectMapper().enable(Feature.WRITE_BIGDECIMAL_AS_PLAIN);
    try {
        mapper.writeValueAsString(new BigDecimal("9.223372E+1010671858"));
        fail("Expected OutOfMemoryError");
    } catch (JsonProcessingException e) {
        assertTrue(e.getCause() instanceof OutOfMemoryError);
    }
}