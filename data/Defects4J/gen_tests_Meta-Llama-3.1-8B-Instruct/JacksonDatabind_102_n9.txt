java
public void testSqlDateSerializerCustomFormat() {
    ObjectMapper mapper = new ObjectMapper();
    // Expected behavior: custom format should be applied
    mapper.registerModule(new SimpleModule() {
        {
            addSerializer(
                    java.sql.Date.class,
                    new SqlDateSerializer().withFormat(false, new SimpleDateFormat("yyyy-MM-dd"))
            );
        }
    });
    java.sql.Date date = new java.sql.Date(0);
    String json = mapper.writeValueAsString(date);
    assertEquals("0000-01-01", json);

    // Test that custom format is not applied when not registered
    mapper = new ObjectMapper();
    mapper.configOverride(java.sql.Date.class).setFormat(JsonFormat.Value.forPattern("yyyy-MM-dd"));
    date = new java.sql.Date(0);
    json = mapper.writeValueAsString(date);
    // Json should be numeric by default
    assertTrue(json.matches("^\\d+$"));
}
