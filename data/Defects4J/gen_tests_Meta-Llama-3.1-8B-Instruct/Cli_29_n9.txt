java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import org.apache.commons.cli.ParseException;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.Options;
import org.apache.commons.cli.Parser;
import org.apache.commons.cli.UnrecognizedOptionException;

import static org.junit.Assert.assertEquals;

@RunWith(JUnit4.class)
public class CliTest {

    @Test
    public void testStripLeadingAndTrailingQuotes() throws ParseException, UnrecognizedOptionException {
        Options options = new Options();
        options.addOption("b", "balloo", true, "value of balloo");

        Parser parser = new Parser();
        parser.parse(args("java", "-cp", "target/clitest.jar", "Clitest", "--balloo", "\"this is a \\\"test\""));

        Option ballooOption = parser.getOption("balloo");
        assertEquals("this is a \"test\"", ballooOption.getValue());
    }

    private String[] args(String... args) {
        return args.clone();
    }
}
