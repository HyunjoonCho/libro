public void testBase64InputStreamRead() throws IOException {
    byte[] input = new byte[3];
    for (int i = 0; i < 3; i++) {
        input[i] = (byte) i;
    }
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bos.write(input);
    bos.close();
    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    Base64InputStream base64InputStream = new Base64InputStream(bis, true);
    byte[] readBytes = new byte[input.length];
    int bytesRead = base64InputStream.read(readBytes);
    assertEquals(input.length, bytesRead);
}