java
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class PrototypePropertyInferenceTest {
    @Test
    public void testPrototypePropertyInference() throws ScriptException {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("nashorn");
        engine.eval("function f(a) { a.prototype = '_proto'; }");
        engine.eval("function g(a) { a.prototype = function(){}; }");

        engine.eval("var a = {};");
        f.a();
        assertSame("string", engine.get("a.prototype").getClass().getSimpleName());

        engine.eval("var b = {};");
        g.b();
        try {
            assertSame("function", engine.get("b.prototype").getClass().getSimpleName());
            fail("Expected error");
        } catch (ScriptException e) {
            assertTrue(e.getMessage().contains("WARNING - assignment to property prototype of Object found"));
        }
