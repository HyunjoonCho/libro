java
@Test
public void testCommandLineArgumentDefaults() {
    CommandLine cmd = new CommandLine(new MyCommand());
    cmd.addOption("myOption", false, "My option with default value");
    cmd.addOptionValue("myOption", "default");

    try {
        cmd.parseArgs("myOption", "override");
        fail("Expected CommandLineArgumentException");
    } catch (CommandLineArgumentException e) {
        // expected
    }

    // Test the patched behavior
    WritableCommandLine patchedCmd = new WritableCommandLine(cmd);
    Option myOption = patchedCmd.getOptions().get("myOption");
    assertEquals(1, patchedCmd.getUndefaultedValueCount(myOption));
    assertEquals("override", patchedCmd.getUndefaultedValue(myOption, 0));
}
