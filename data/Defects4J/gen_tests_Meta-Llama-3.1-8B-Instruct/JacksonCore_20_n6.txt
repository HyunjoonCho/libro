java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.node.ObjectNode;
import org.junit.Test;

import java.io.IOException;

public class TestWriteEmbeddedObject {

    @Test(expected = UnsupportedOperationException.class)
    public void testWriteEmbeddedObject() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        ObjectNode node = mapper.createObjectNode();
        mapper.writerWithDefaultPrettyPrinter().writeValue(node);
        JsonNode value = JsonNodeFactory.instance.numberNode(10);
        node.set("byteArray", value);
        mapper.writerWithDefaultPrettyPrinter().writeValue(node);
        mapper.writerWithDefaultPrettyPrinter().writeValueAsBytes(node);
    }

    @Test
    public void testWriteEmbeddedObjectFixed() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        ObjectNode node = mapper.createObjectNode();
        JsonNode value = JsonNodeFactory.instance.arrayNode().arrayElement(10);
        node.set("byteArray", value);
        byte[] bytes = mapper.writeValueAsBytes(node);
        // test the bytes array was correctly serialized
    }
}
