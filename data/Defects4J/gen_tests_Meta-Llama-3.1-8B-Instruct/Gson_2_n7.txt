java
public void testTypeHierarchyAdapters() {
    // Create a type hierarchy adapter for Vehicle
    TypeHierarchyAdapter vehicleAdapter = new TypeHierarchyAdapter(Vehicle.class);
    vehicleAdapter.addAdapter(Car.class);
    vehicleAdapter.addAdapter(Truck.class);

    // Create a JSON string that represents a Truck
    String jsonString = "{\"type\":\"Truck\"}";
    try {
        // Attempt to decode the JSON string as a Car
        Car car = vehicleAdapter.decode(jsonString, Car.class);
        fail("Expected ClassCastException");
    } catch (ClassCastException e) {
        // Expected exception
    }
}

// Define the classes
class Vehicle {}
class Car extends Vehicle {}
class Truck extends Vehicle {}
