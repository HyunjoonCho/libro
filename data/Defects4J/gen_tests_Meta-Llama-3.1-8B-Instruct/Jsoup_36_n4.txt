public void testRobustCharsetDetection() {
    String html = "<html lang=\"en-US\">" +
                  "<head>" +
                  "<meta charset=\"UTF-8\">" +
                  "<meta http-equiv=\"Content-Type\" content=\"text/html; \">" +
                  "</head>";
    Document doc = Jsoup.parse(html);
    Document doc2 = Jsoup.connect("http://9kuhkep.net").get();
    Document doc3 = Jsoup.connect("http://www.a-bright.org").get();
    try {
        doc.charset();
        doc2.charset();
        doc3.charset();
    } catch (UnsupportedCharsetException e) {
        fail("Jsoup failed to detect charset");
    }
}