java
public void testRobustCharsetDetection() throws Exception {
    // Test case for issue with charset detection
    Document document = Jsoup.connect("http://example.com").execute().parse();

    // Test case for HTML with invalid charset specified in meta tag
    String html = "<html lang=\"en-US\">" +
            "<head>" +
            "<meta charset=\"UTF-8\">" +
            "<meta http-equiv=\"Content-Type\" content=\"text/html; \" />" +
            "</head>" +
            "<body></body></html>";
    Document documentWithInvalidMeta = Jsoup.parse(html);
    try {
        // This should throw an exception
        documentWithInvalidMeta.charset();
        fail("Expected IllegalCharsetNameException");
    } catch (IllegalArgumentException e) {
        // Expected
    }

    // Test case for HTML with missing charset
    html = "<html lang=\"en-US\">" +
            "<head>" +
            "<meta http-equiv=\"Content-Type\" content=\"text/html; \" />" +
            "</head>" +
            "<body></body></html>";
    Document documentWithMissingCharset = Jsoup.parse(html);
    try {
        // This should throw an exception
        documentWithMissingCharset.charset();
        fail("