java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.ErrorManager;

import static org.junit.Assert.assertTrue;

@RunWith(JUnit4.class)
public class TestClosureCompiler {

    @Test
    public void testCompilerRemovesFunctionProperties() throws Exception {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setLanguageIn(CompilationLevel.ADVANCED_OPTIMIZATIONS);
        options.setLanguageOut(CompilationLevel.ADVANCED_OPTIMIZATIONS);
        ErrorManager errorManager = new ErrorManager();
        String source = "var lastMsg;\n" +
                "var map = {};\n" +
                "var addToMap = function(key, func) {\n" +
                "  map[key] = func;\n" +
                "};\n" +
                "var f1 = function() { alert('f1'); }; f1.alwaysCall = true;\n" +
                "var f