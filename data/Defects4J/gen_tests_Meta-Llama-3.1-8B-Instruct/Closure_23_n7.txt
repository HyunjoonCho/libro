java
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertSame;

public class PeepholeFoldConstantsTest {

    @Test
    public void testTryFoldArrayAccess() {
        // Define a class with a method that has a side effect
        class SideEffect {
            private int count = 0;

            public int foo() {
                System.out.println("Hello, ");
                count++;
                return 0;
            }
        }

        // Compile the program with a peephole optimizer
        SideEffect sideEffect = new SideEffect();
        Object[] result = new Object[] { sideEffect.foo(), "world!" };

        // Check that the peephole optimizer did not remove the side effect
        assertSame(result, result);
        assertEquals(1, sideEffect.count);
    }
}
