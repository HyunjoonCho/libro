public void testDateTimeSerializerBaseContextual() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(LocalDate.class, new DateTimeSerializerBase(LocalDate.class));
    mapper.registerModule(module);
    
    JsonFormat format = JsonFormat.shapeAsTree(false)
           .withPattern("yyyy-MM-dd")
           .build();
    mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
    mapper.setDateFormat(format.getDateFormat());
    
    String json = mapper.writeValueAsString(LocalDate.of(2022, 1, 1));
    assertEquals("2022-01-01", json);
    
    // Test that the serializer uses the configured format
    DateTimeSerializerBase serializer = (DateTimeSerializerBase) mapper.getSerializerProvider()
           .findValueSerializer(LocalDate.class);
    assertEquals(format.getDateFormat(), serializer.getDateFormat());
}