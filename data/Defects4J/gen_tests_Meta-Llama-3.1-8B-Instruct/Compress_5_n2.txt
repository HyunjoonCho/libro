public void testZipArchiveInputStreamTruncated() throws IOException {
    // Create a truncated zip archive
    File tempFile = File.createTempFile("truncated.zip", ".tmp");
    try (ZipArchiveOutputStream zos = new ZipArchiveOutputStream(tempFile)) {
        zos.putArchiveEntry(new ZipArchiveEntry("test"));
    }
    tempFile.deleteOnExit();

    try (ZipArchiveInputStream zis = new ZipArchiveInputStream(new FileInputStream(tempFile))) {
        // Check that read() returns 0 but does not throw an exception
        int read = zis.read();
        assertTrue(read == 0);
        assertFalse(zis.available() == 0); // Check that there is still data to read

        // Check that read() returns 0 again and throws an exception
        try {
            zis.read();
            fail("Expected IOException");
        } catch (IOException e) {
            // Expected
        }
    }
}