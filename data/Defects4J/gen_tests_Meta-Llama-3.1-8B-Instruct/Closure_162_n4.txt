javascript
describe('Test type aliases in type annotations', function() {
    it('should allow type aliases in type annotations after their definitions', function() {
        goog.provide('foo.Foo');
        goog.provide('foo.Foo.Bar');

        goog.scope(function() {
            /** @param {foo.Foo.Bar} bar
             * @constructor
             */
            foo.Foo = function(bar) {
                this.bar = bar;
            };
            var Foo = foo.Foo;

            /** @type {foo.Foo.Bar} */
            Foo.prototype.bar = null;

            /** @constructor */
            Foo.Bar = function() {};
        });

        var foo = goog.require('foo');
        var fooFoo = new foo.Foo(new foo.Foo.Bar());
        expect(fooFoo.bar instanceof foo.Foo.Bar).toBe(true);
    });
});
