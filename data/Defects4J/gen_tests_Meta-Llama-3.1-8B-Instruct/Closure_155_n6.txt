javascript
function d3_call(callback) {
  var f = callback;
  arguments[0] = this;
  f.apply(this, arguments);
  return this;
}

function testCallback(a, b, c) {
  return [a, b, c];
}

var obj = { foo: 'bar' };

var result = d3_call(testCallback, obj, 1, 2, 3);
console.assert(result === obj); // expected: obj
console.assert(result.foo === 'bar'); // expected: true

var result2 = d3_call(testCallback, 1, 2, 3);
console.assert(result2[0] === obj); // expected: false
console.assert(result2[0] === 1); // expected: true
console.assert(result2[1] === 2); // expected: true
console.assert(result2[2] === 3); // expected: true
