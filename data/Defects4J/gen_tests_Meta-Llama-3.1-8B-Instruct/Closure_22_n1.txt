public void testClassifyNonRightmostExpressions() {
    Expression expression1 = new Expression("foo((1, 2, 42)");
    Expression result1 = new Expression("foo((1, 3)");
    assertEquals(result1, expression1.optimize());
    assertTrue(expression1.getWarnings().contains("Problematic expression: (1, 2, 42)"));
    
    Expression expression2 = new Expression("foo((bar(), 2, 42)");
    Expression result2 = new Expression("foo((bar(), 3)");
    assertEquals(result2, expression2.optimize());
    assertFalse(expression2.getWarnings().contains("Problematic expression: (bar(), 2, 42)"));
    
    Expression expression3 = new Expression("foo(((1, 2, 3), (4, 5, 42))");
    Expression result3 = new Expression("foo((1, 4, 42))");
    assertEquals(result3, expression3.optimize());
    assertTrue(expression3.getWarnings().contains("Problematic expression: (1, 2, 3)"));
    assertFalse(expression3.getWarnings().contains("Problematic expression: (4, 5, 42)"));
}