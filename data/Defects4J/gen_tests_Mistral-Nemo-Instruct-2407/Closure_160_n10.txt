public void testCheckVarsUndefinedVarsDiagnostics() {
    String[] args = {"--js", "test.js", "--jscomp_warning", "checkVars,undefinedVars"};
    assertEquals(1, runCompiler(args).getErrorCount());
}

private int runCompiler(String[] args) {
    // Assume that a method runCompiler is already defined in your class
    // which runs the compiler with the given arguments and returns a compilation result object
}