public void testZipCorruptionWithHashCollision() {
    ZipOutputStream out = new ZipOutputStream(new ByteArrayOutputStream());
    for (int i = 0; i < 10000; i++) {
        ZipArchiveEntry entry = new ZipArchiveEntry("file" + i + ".txt");
        out.putNextEntry(entry);
        out.closeEntry();
    }
    out.close();
}