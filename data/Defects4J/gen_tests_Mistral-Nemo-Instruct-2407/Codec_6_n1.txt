public void testBase64ReadAtEndOfStream() throws Exception {
    byte[] data = new byte[]{'T', 'h', 'i','s', 'i','s','', 'a','', 't', 'e','s', 't'};
    ByteArrayInputStream in = new ByteArrayInputStream(data);
    Base64InputStream bis = new Base64InputStream(in, true);
    byte[] buffer = new byte[1];
    for (int i = 0; i < 12; i++) {
        bis.read(buffer);
    }
    assertEquals(-1, bis.read(buffer)); // should return -1 at end of stream
}