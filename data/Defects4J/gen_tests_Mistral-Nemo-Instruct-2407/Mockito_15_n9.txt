public void testArgumentCaptorVarargsFail() {
    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    someMethodThatTakesVarargs("foo", "bar");
    verify(someMock, times(1)).someMethodThatTakesVarargs(captor.capture());
    assertEquals("foo", captor.getAllValues().get(0));
    assertEquals("bar", captor.getAllValues().get(1));
}