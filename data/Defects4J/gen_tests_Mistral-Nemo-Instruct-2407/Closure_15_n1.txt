public void testSwitchedOrder() {
    var customData = { key: 'value' };
    assertEquals('value', testRemoveKey('key'));
    assertFalse('key' in customData);
}

private String testRemoveKey(String key) {
    var dataSlot = customData, retval = dataSlot && dataSlot[key], hadKey = dataSlot && (key in dataSlot);
    if (dataSlot) delete dataSlot[key];
    return hadKey? retval : null;
}