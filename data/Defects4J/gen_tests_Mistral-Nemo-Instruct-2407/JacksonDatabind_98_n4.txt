public void testEnumDeserialization() throws Exception {
    String json = "{\"kind\": \"CONTACT\", \"to\": {\"name\": \"Foo\"}}";
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);
    mapper.readValue(json, Object.class);
}