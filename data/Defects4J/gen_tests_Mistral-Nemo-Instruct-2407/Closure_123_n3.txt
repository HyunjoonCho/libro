public void testInvalidForInAssignment() {
    String code = "window.Foo = function(A, B, C, D) { if ( A ) { if ( B ) { C = 0; } else { C = 0 in D; } while ( C-- ) {} } }";
    try {
        assertEquals("Something that doesn't have a syntax error, maybe\n" +
                "window.Foo=function(b,c,a,d){if(b)for(a=c?0:(0 in d);a--;);};",
                "", CompilerUtils.compile(code));
        fail("Expected a syntax error but got none");
    } catch (CompilerException e) {
        assertTrue(e.getMessage(), e.getMessage().contains("SyntaxError") || e.getMessage().contains("invalid for/in left-hand side"));
    }
}