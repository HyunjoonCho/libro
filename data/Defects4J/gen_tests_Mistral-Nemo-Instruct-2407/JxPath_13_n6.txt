public void testUndefinedNamespaceAttribute() {
    DOMNodePointer pointer = new DOMNodePointer();
    pointer.registerNamespace("A", "http://www.example.com");
    pointer.registerNamespace("B", "http://www.example.com");

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.parse(new InputSource(new StringReader("<ElementA A:myAttr=\"Mytype\"><B:ElementB>MY VALUE</B:ElementB></ElementA>")));

    try {
        pointer.createAttribute(document, "ElementA", "A:myAttr", "http://www.example.com", "Mytype");
        fail("Expected UnknownNamespaceException");
    } catch (UnknownNamespaceException e) {
        // expected
    }
}