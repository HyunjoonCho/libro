public void testBase64InputStreamReadLoop() {
    ByteArrayInputStream bais = new ByteArrayInputStream(new byte[]{1});
    Base64InputStream b64stream = new Base64InputStream(bais, true, 0, null);
    int n = 0;
    try {
        while (b64stream.read()!= -1) {
            n++;
            if (n == 10920) {
                // Read one more time to trigger the ArrayIndexOutOfBoundsException
                b64stream.read();
            }
        }
    } catch (IOException e) {
        // Do nothing, we expect an exception
    }
}