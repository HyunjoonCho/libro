public void testJsonProcessingExceptionRecovery() {
    String json = "{\"foo\": 1, \"bar\": 2, \"baz\": 3}}";
    MappingIterator<String> iterator = new MappingIterator<>(new ObjectReader<>(new StringReader(json)));
    try {
        while (iterator.hasNext()) {
            iterator.next();
        }
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        assertTrue(iterator.hasNext());
        assertEquals("}", iterator.next());
    }
}