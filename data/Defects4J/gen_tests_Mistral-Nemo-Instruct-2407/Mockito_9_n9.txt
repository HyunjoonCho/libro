public void testSpyAbstractClass() {
    abstract class AbstractClass {
        protected abstract void doSomething();

        public void realMethod() {
            doSomething();
            // Do something else with the result of doSomething()
        }
    }

    AbstractClass spy = spy(new AbstractClass() {
        @Override
        protected void doSomething() {
            // Do something specific
        }
    });

    doNothing().when(spy).doSomething();

    spy.realMethod(); // Throws an exception here
}