public void testObjectReaderSerializationFailure() {
    ObjectReader reader = Json.createReader(new StringReader("{\"key\":\"value\"}"));
    CompactStringObjectMap<String> compactMap = new CompactStringObjectMap<>();
    compactMap.put("compactKey", "compactValue");
    reader.setProperty("compactMap", compactMap);

    ObjectMapper mapper = new ObjectMapper();
    try {
        mapper.writeValueAsBytes(reader); // This line should cause an exception
        fail("Expected serialization exception");
    } catch (JsonMappingException e) {
        // Expected
    }
}