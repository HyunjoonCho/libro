public void testArDelete() throws Exception {
    // create a test archive with two files
    try ( JarOutputStream out = new JarOutputStream(new FileOutputStream("bla.ar")) ) {
        out.putNextEntry(new JarEntry("test1.xml"));
        out.putNextEntry(new JarEntry("test2.xml"));
    }

    // delete the second file using the Ar class
    try ( Ar ar = new Ar("bla.ar") ) {
        ar.delete("test2.xml");
    }

    // check that the second file is still in the archive
    try ( JarInputStream in = new JarInputStream(new FileInputStream("bla.ar")) ) {
        assertNotNull(in.getNextEntry());
        assertEquals("test1.xml", in.getNextEntry().getName());
        assertNotNull(in.getNextEntry());
        assertEquals("test2.xml", in.getNextEntry().getName());
        assertNull(in.getNextEntry());
    }

    // try to add a new file and check that the archive is corrupted
    try ( JarOutputStream out = new JarOutputStream(new FileOutputStream("bla.ar")) ) {
        out.putNextEntry(new JarEntry("test.txt"));
        fail("Should throw an exception