public void testJsonWriterNaN() {
    JsonWriter writer = new JsonWriter(new OutputStreamWriter(new ByteArrayOutputStream()));
    writer.beginObject();
    writer.name("number");
    writer.value(Double.NaN);
    writer.endObject();
    try {
        writer.close();
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }
}

public void testJsonWriterNaNWithBoxing() {
    JsonWriter writer = new JsonWriter(new OutputStreamWriter(new ByteArrayOutputStream()));
    writer.beginObject();
    writer.name("number");
    writer.value((Number) Double.valueOf(Double.NaN));
    writer.endObject();
    writer.close();
}