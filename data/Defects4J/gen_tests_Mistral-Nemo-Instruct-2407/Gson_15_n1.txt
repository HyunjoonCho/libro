public void testJsonWriterLenientMode() {
    try {
        JsonWriter jsonWriter = new JsonWriter(new StringWriter());
        jsonWriter.setLenient(true);
        jsonWriter.value((Number) Double.NaN);
        fail("Expected IllegalArgumentException for NaN in lenient mode");
    } catch (IllegalArgumentException e) {
        // Expected
    }
}