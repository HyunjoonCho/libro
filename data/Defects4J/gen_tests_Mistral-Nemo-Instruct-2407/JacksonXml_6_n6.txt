public void testWriteBinaryWithInputStream() throws Exception {
    ToXMLGenerator generator = new ToXMLGenerator(new StringWriter());
    InputStream inputStream = new ByteArrayInputStream(new byte[]{1, 2, 3, 4, 5});
    generator.writeBinary(Base64Variants.getDefaultVariant(), inputStream, 5);
    String xml = generator.getOutputTarget().toString();
    assertTrue(xml.contains("<binary>"));
    assertTrue(xml.contains("AQIDBAU="));
}