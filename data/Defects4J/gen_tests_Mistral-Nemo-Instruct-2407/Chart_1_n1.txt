public void testNullDataset() {
  CategoryPlot plot = mock(CategoryPlot.class);
  when(plot.getIndexOf(any())).thenReturn(0);
  when(plot.getDataset(0)).thenReturn(null);

  CategoryItemRenderer renderer = mock(CategoryItemRenderer.class);
  when(renderer.getPlot()).thenReturn(plot);

  LegendItemCollection result = renderer.getLegendItems();
  assertNotNull(result);
  verifyZeroInteractions(result);
}