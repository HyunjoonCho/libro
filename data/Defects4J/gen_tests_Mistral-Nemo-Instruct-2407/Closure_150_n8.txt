public void testTypeCheckerIgnoresAnnotationsInFunctionsDefinedWithinFunctions() {
    String code1 =
        "var ns = {};\n" +
        "/** @param {string=} b */\n" +
        "ns.a = function(b) {}\n" +
        "function d() {\n" +
        "  ns.a();\n" +
        "  ns.a(123);\n" +
        "}";

    String code2 =
        "var ns = {};\n" +
        "(function() {\n" +
        "  /** @param {string=} b */\n" +
        "  ns.a = function(b) {}\n" +
        "})();\n" +
        "function d() {\n" +
        "  ns.a();\n" +
        "  ns.a(123);\n" +
        "}";

    // Test case 1: Type checker correctly emits warning
    assertTrue(typeChecker.getWarnings(code1).size() == 1);

    // Test case 2: Type checker ignores annotation
    assertTrue(typeChecker.getWarnings(code2).size() == 1);
}