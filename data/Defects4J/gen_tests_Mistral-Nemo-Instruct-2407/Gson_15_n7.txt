public void testLenientModeNaN() {
    try (JsonWriter writer = new JsonWriter(true)) {
        writer.value(Double.NaN);
    } catch (IllegalArgumentException e) {
        fail("Lenient mode should allow NaN");
    }
}

public void testNonLenientModeNaN() {
    try (JsonWriter writer = new JsonWriter(false)) {
        writer.value(Double.NaN);
    } catch (IllegalArgumentException e) {
        // Expected, as non-lenient mode should not allow NaN
    }
}