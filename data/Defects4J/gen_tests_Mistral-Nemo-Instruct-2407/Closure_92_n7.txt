public void testImplicitNamespaceAcrossModules() {
  // setup modules
  String moduleA = "goog.provide('apps');";
  String moduleB = "goog.provide('apps.foo.bar.B');";
  String moduleC = "goog.provide('apps.foo.bar.C');";

  // simulate compilation in SIMPLE_OPTIMIZATIONS mode
  String compiledA = "var apps={};apps.foo.bar={};apps.foo={};";
  String compiledB = "apps.foo.bar.B={};";
  String compiledC = "apps.foo.bar.C={};";

  // execute compiled code
  new Function<String, Object>() {
    public Object apply(String input) {
      return eval(input);
    }
  }.apply(compiledA);
  new Function<String, Object>() {
    public Object apply(String input) {
      return eval(input);
    }
  }.apply(compiledB); // should not throw an error
  new Function<String, Object>() {
    public Object apply(String input) {
      return eval(input);
    }
  }.apply(compiledC); // should throw a runtime error

  // check if runtime error was thrown
  fail