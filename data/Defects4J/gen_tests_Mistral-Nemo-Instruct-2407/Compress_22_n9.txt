public void testReadTruncatedFile() {
    try (InputStream is = new BZip2CompressorInputStream(new ByteArrayInputStream(new byte[]{...})) {
        assertEquals(770, is.read(new byte[8192]));
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
}