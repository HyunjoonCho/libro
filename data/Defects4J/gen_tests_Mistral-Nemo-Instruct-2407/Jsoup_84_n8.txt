public void testW3CDomNamespace() {
    Document document = Jsoup.parse("<fb:like href=\"http://www.facebook.com/foobar\" send=\"false\" width=\"450\" show_faces=\"false\" font=\"lucida grande\"></fb:like>");
    try {
        Transformer transformer = TransformerFactory.newInstance().newTransformer();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
        transformer.setOutputProperty(OutputKeys.METHOD, "html");
        transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
        transformer.transform(new DOMSource(W3CDomHelper.fromJsoup(document)), new StreamResult(new StringWriter()));
        fail("Expected NAMESPACE_ERR exception");
    } catch (TransformerException e) {
        assertEquals("NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces.", e.getMessage());
    }
}