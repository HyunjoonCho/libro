public void testEventStateReset() {
    // Arrange
    double[] y = new double[]{-0.5, 0.5, -0.5, 0.5};
    EventHandler eventHandler1 = new EventHandler() {
        @Override
        public void eventOccurred(double t, double[] y) {
            if (t == 1.0) {
                throw new RuntimeException("RESET_STATE");
            }
        }
    };
    EventHandler eventHandler2 = new EventHandler() {
        @Override
        public void eventOccurred(double t, double[] y) {
            if (t == 2.0) {
                assertEquals(-0.5, y[0], 1e-6);
                assertEquals(0.5, y[1], 1e-6);
            }
        }
    };
    ODESolver solver = new ODESolver();
    solver.addEventHandler(eventHandler1);
    solver.addEventHandler(eventHandler2);

    // Act
    solver.integrate(0, 3, y);

    // Assert (should not reach this line)
    fail("EventHandler2 should have failed due to incorrect y values");
}