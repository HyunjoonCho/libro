public void testExternalTypeIdSerializationFailure() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    ObjectWriter writer = mapper.writerWithDefaultPrettyPrinter();
    writer.writeValue(System.out, new MyPojo("MyType", "name", "value"));

    String serializedData = "{\n" +
            "  \"@type\": \"MyPojo\",\n" +
            "  \"name\": \"name\",\n" +
            "  \"value\": \"value\"\n" +
            "}";

    assertEquals(serializedData, writer.writeValueAsString(new MyPojo("MyType", "name", "value")));
}