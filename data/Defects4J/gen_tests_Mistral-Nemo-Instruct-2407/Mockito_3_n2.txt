public void testArgumentCaptorVarargs() {
    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    when(mock.someVarargsMethod("foo", "bar")).thenReturn("expected");
    mock.someVarargsMethod("foo", "bar");
    verify(mock).someVarargsMethod(captor.capture());
    assertEquals("foo", captor.getAllValues().get(0));
    assertEquals("bar", captor.getAllValues().get(1));
}