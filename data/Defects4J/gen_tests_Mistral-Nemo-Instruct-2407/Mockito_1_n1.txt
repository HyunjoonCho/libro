public void testArgumentCaptorVarargs() {
    MyClass mock = mock(MyClass.class);
    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    mock.someMethod("foo", "bar");
    verify(mock).someMethod(captor.capture(), eq("bar"));
    assertEquals("foo", captor.getAllValues().get(0));
}