public void testToXMLGeneratorWriteBinaryInputStream() throws Exception {
    ToXMLGenerator generator = new ToXMLGenerator(new StringWriter());
    InputStream input = new ByteArrayInputStream(new byte[]{0x01, 0x02, 0x03});
    generator.writeBinary(Base64Variants.getDefaultVariant(), input, 3);
    String output = generator.getOutputTarget().toString();
    assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<root>AGQ=\n</root>", output);
}