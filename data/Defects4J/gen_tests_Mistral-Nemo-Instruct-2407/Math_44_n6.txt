public void testEventHandlingBug() {
    // Given
    EventHandler eventHandler = new EventHandler();
    eventHandler.registerObserver(new Observer() {
        @Override
        public void update(Event event) {
            if (event.getType() == EventType.TYPE_ONE) {
                eventHandler.resetState();
            }
        }
    });
    eventHandler.registerObserver(new Observer() {
        @Override
        public void update(Event event) {
            if (event.getType() == EventType.TYPE_TWO) {
                // This should fail because the state was not reinitialized properly
                assertTrue(eventHandler.isInExpectedState());
            }
        }
    });

    // When
    eventHandler.handleEvent(new Event(EventType.TYPE_ONE));
    eventHandler.handleEvent(new Event(EventType.TYPE_TWO));

    // Then
    // The test should fail because the second event should not find its way
}