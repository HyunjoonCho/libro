public void testArDeleteFailure() throws Exception {
    try ( JarOutputStream out = new JarOutputStream(new FileOutputStream("bla.ar")) ) {
        out.putNextEntry(new JarEntry("test1.xml"));
        out.putNextEntry(new JarEntry("test2.xml"));
    }
    try ( JarFile jar = new JarFile("bla.ar")) {
        jar.getEntry("test2.xml").getName();
    }
    try ( JarOutputStream out = new JarOutputStream(new FileOutputStream("bla.ar", true)) ) {
        out.deleteEntry("test2.xml");
    }
    try ( JarFile jar = new JarFile("bla.ar")) {
        assertEquals(null, jar.getEntry("test2.xml"));
    }
}