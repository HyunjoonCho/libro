public void testUnderlyingInputStreamReturnsZeroBytes() {
    Connection conn = mock(Connection.class);
    Response mockResponse = mock(Response.class);
    when(conn.execute()).thenReturn(mockResponse);
    when(mockResponse.parse()).thenThrow(IOException.class);
    when(mockResponse.inputStream()).thenReturn(new ByteArrayInputStream(new byte[0]));

    try {
        conn.get();
        fail("Expected IOException");
    } catch (IOException e) {
        // expected
    }
}