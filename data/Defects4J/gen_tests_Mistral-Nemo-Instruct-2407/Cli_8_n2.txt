public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    StringBuilder sb = new StringBuilder();
    sb.append("This is a very long option description that should wrap correctly after the first line.");
    String[] options = {"-l", sb.toString()};
    StringBuffer buffer = new StringBuffer();
    formatter.printOptions(new Options(), options, 80, buffer);
    String output = buffer.toString();
    assertEquals("First line should be correct", 80, output.indexOf('\n'));
    assertTrue("Subsequent lines should be too long", output.indexOf("This is a very long option description that should wrap correctly after the first line.", 81)!= -1);
}