public void testNonBlockingParserOffset() throws Exception {
  JsonFactory jsonFactory = new JsonFactory();
  JsonParser parser = jsonFactory.createNonBlockingByteArrayParser();
  ByteArrayFeeder feeder = (ByteArrayFeeder) parser.getNonBlockingInputFeeder();

  byte[] input = "[[[".getBytes(UTF_8);

  feeder.feedInput(input, 7, 3);
  assertEquals(JsonToken.START_ARRAY, parser.nextToken());
  assertEquals(4, parser.getCurrentLocation().getByteOffset()); // ACTUAL = 11
  assertEquals(4, parser.getTokenLocation().getByteOffset());   // ACTUAL = 11

  feeder.feedInput(input, 0, 1);
  assertEquals(JsonToken.START_ARRAY, parser.nextToken());
  assertEquals(5, parser.getCurrentLocation().getByteOffset());
  assertEquals(5, parser.getTokenLocation().getByteOffset());
}