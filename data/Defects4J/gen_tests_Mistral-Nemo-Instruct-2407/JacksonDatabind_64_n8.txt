public void testJsonIncludeWithNonDefaultForString() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_DEFAULT);

    String s = null;

    try {
        mapper.writeValueAsString(s);
        fail("Expected JsonMappingException: Non default value not found for field (class java.lang.String, no setters/field) which has type (class java.lang.String)");
    } catch (JsonMappingException e) {
        // expected
    } catch (Exception e) {
        fail("Unexpected exception: " + e.getMessage());
    }
}