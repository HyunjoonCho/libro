public void testJsonDeserializeTypeSpecialization() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new SimpleModule().addDeserializer(Map.class, new JsonDeserializer<Map<UUID, Foo>>() {
        @Override
        public Map<UUID, Foo> deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {
            return new MyHashMap<>(mapper.readValue(jp, Map.class));
        }
    }));
    String json = "{\"something\": [{\"id\": \"a uuid\", \"property\": \"value\"}]}";
    Map<UUID, Foo> map = mapper.readValue(json, new TypeReference<Map<UUID, Foo>>() {});
    assertEquals(1, map.size());
}