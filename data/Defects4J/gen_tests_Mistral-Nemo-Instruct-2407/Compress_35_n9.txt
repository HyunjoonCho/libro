public void testTarChecksumRightAlignment() {
    TarArchiveEntry entry = new TarArchiveEntry("test");
    entry.setSize(0);
    entry.setMode((short) 0);
    entry.setType(TarArchiveEntry.REGULAR_FILE);
    entry.setName("test");
    entry.setSize(5);

    TarArchiveOutputStream tarOut = new TarArchiveOutputStream(new ByteArrayOutputStream());
    tarOut.putArchiveEntry(entry);
    tarOut.closeArchiveEntry();
    tarOut.close();

    TarArchiveInputStream tarIn = new TarArchiveInputStream(new ByteArrayInputStream(((ByteArrayOutputStream) tarOut.getBaseOutputStream()).toByteArray()));

    TarArchiveEntry readEntry = tarIn.getNextTarEntry();
    assertEquals("test", readEntry.getName());
    assertEquals(5, readEntry.getSize());
    assertEquals(TarArchiveEntry.REGULAR_FILE, readEntry.getType());
}