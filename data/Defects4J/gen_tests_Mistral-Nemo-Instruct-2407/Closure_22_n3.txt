public void testCommaOperatorWarning() {
    String code1 = "foo((1, 2, 42))";
    String code2 = "foo((bar(), 2, 42))";
    String code3 = "foo(((1, 2, 3), (4, 5, 42)))";

    assertTrue(code1 + " should have been transformed to foo((1, 3)) and have a warning",
               code1.equals("foo((1, 3))"));
    assertTrue(code2 + " should have been transformed to foo((bar(), 3)) and have no warning",
               code2.equals("foo((bar(), 3))"));
    assertTrue(code3 + " should have been transformed to foo((1, 4, 42)) and have warnings for inner sequences",
               code3.equals("foo((1, 4, 42))"));
}