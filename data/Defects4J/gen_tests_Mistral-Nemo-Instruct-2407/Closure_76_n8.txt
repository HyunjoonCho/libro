public void testAssignmentsInConditions() {
  boolean original = reductionOriginal();
  boolean compiled = reductionCompiled();
  assertEquals(true, original);
  assertEquals(true, compiled);
}

boolean reductionOriginal() {
  boolean a, b;
  if (echo(b = true) || echo(b = false))
    a = b;
  else
    a = null;
  return a;
}

boolean reductionCompiled() {
  boolean a;
  return echo(true) || echo(a = false)? a : null;
}

boolean echo(boolean b) {
  return b;
}