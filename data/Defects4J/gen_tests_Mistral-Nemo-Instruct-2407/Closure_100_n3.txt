public void testThisAssignmentWarning() {
    try {
        Compilation compilation = Compiler.javac().withWarnings(WarningLevel.ALL).compile("" +
                "class Foo {\n" +
                "    int _bar;\n" +
                "\n" +
                "    @SuppressWarnings(\"this\")\n" +
                "    void writeMethodWithAnnotation() {\n" +
                "        this._bar = 123;\n" +
                "    }\n" +
                "\n" +
                "    @SuppressWarnings(\"this\")\n" +
                "    int readMethodWithAnnotation() {\n" +
                "        return this._bar;\n" +
                "    }\n" +
                "\n" +
                "    void writeMethodWithoutAnnotation() {\n" +
                "        this._bar = 123;\n" +
                "    }\n" +
                "\n" +
                "    int readMethodWithoutAnnotation() {\n" +
                "        return this._bar;\n" +
                "    }\n" +
                "}");
        fail("Expected warning for readMethodWithAnnotation and writeMethodWithoutAnnotation");
    } catch (