public void testReadValuesErrorRecovery() throws Exception {
    ObjectReader reader = new ObjectReader(new JsonFactory());
    MappingIterator<String> iterator = reader.readValues("{\"a\": 1, \"b\": 2");

    assertTrue(iterator.hasNext());

    try {
        iterator.next();
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        // expected
    }

    assertFalse(iterator.hasNext());
}