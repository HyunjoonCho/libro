public void testJsonGeneratorInvalidWrite() {
    JsonFactory jsonFactory = new JsonFactory();
    JsonGenerator jsonGenerator = jsonFactory.createJsonGenerator(new ByteArrayOutputStream());
    jsonGenerator.useDefaultPrettyPrinter();

    try {
        jsonGenerator.writeStartObject();
        jsonGenerator.writeFieldName("field");
        jsonGenerator.writeString("value");
        jsonGenerator.close();
        fail("Expected exception not thrown");
    } catch (JsonGenerationException e) {
        // expected
    }
}