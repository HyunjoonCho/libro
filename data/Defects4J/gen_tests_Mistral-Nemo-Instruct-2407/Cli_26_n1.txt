public void testOptionBuilderNotResetOnIAE() {
    try {
        OptionBuilder.hasArg();
        OptionBuilder.isRequired(false);
        OptionBuilder.create('x'); // This will fail with IAE

        OptionBuilder.hasArg(true);
        OptionBuilder.create('y'); // This should fail due to previous unwanted settings
        fail("Expected IllegalArgumentException was not thrown");
    } catch (IllegalArgumentException e) {
        // Expected
    }
}