public void testNullIdHandling() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(Object.class, new NullIdSerializer());
    mapper.registerModule(module);

    Object obj = null;
    try {
        mapper.readValue(mapper.writeValueAsString(obj), Object.class);
        fail("Expected IllegalArgumentException for null id");
    } catch (IllegalArgumentException e) {
        // expected
    }
}