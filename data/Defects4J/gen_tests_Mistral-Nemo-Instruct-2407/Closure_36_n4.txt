public void testGoogAddSingletonGetter() {
    String code = "goog.provide('foo');\n" +
                  "var foo = function() { this.values = []; };\n" +
                  "goog.addSingletonGetter(foo);\n" +
                  "foo.prototype.add = function(value) {this.values.push(value)};\n";
    String output = ClosureCompiler.compile(code, ClosureCompiler.CompilationLevel.ADVANCED_OPTIMIZATIONS);
    assertTrue("Code was not removed", output.isEmpty());
}