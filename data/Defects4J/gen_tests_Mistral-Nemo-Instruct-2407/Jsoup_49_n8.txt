public void testBugInElementInsertChildren() {
    Document doc = new Document("");
    Element parent = doc.appendElement("parent");
    for (int i = 1; i <= 5; i++) {
        parent.appendElement("child" + i);
    }
    List<Element> toMove = new ArrayList<>();
    toMove.add(parent.child(1));
    toMove.add(parent.child(2));
    parent.insertChildren(3, toMove);
    String result = doc.toString().replaceAll("\\s+", "");
    assertEquals("<parent><child3></child3><child4></child4><child1></child1><child2></child2><child5></child5></parent>", result);
}