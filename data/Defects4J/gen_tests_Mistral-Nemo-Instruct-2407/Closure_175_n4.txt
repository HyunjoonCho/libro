public void testAdvancedOptimizationsBug() {
    String input = "window['anchor'] = function (obj, modifiesProp) {\n"
        + "  return (function (saved) {\n"
        + "    return modifiesProp(obj) + saved;\n"
        + "  })(obj['prop']);\n"
        + "};\n";
    String externs = "var window;\n";
    String expectedOutput = "window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};";
    assertEquals(expectedOutput, Compiler.compile(input, externs, CompilationLevel.ADVANCED_OPTIMIZATIONS).output);
}