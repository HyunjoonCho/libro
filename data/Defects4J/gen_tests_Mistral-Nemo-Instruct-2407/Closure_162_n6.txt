public void testTypeAliasesInTypeAnnotations() {
    try {
        // Given
        String code = "goog.provide('foo.Foo');\n" +
                      "goog.provide('foo.Foo.Bar');\n" +
                      "\n" +
                      "goog.scope(function() {\n" +
                      "  /**\n" +
                      "   * @param {Foo.Bar} bar\n" +
                      "   * @constructor\n" +
                      "   */\n" +
                      "  foo.Foo = function(bar) {\n" +
                      "    this.bar = bar;\n" +
                      "  };\n" +
                      "  var Foo = foo.Foo;\n" +
                      "\n" +
                      "  /** @type {Foo.Bar} */\n" +
                      "  Foo.prototype.bar = null;\n" +
                      "\n" +
                      "  /** @constructor */\n" +
                      "  Foo.Bar = function() {};\n" +
                      "});";

        // When
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null