public void testJsonValuePolymorphicTypeLoss() {
    CommandAPDU command = new CommandAPDU(new byte[]{0x01, 0x02, 0x03});
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping();
    try {
        String json = mapper.writeValueAsString(command);
        Object deserialized = mapper.readValue(json, Object.class);
        assertTrue(deserialized instanceof CommandAPDU);
    } catch (IOException e) {
        fail("IOException should not have been thrown");
    }
}