public void testBoundParametersCrash() {
    // given
    LeastSquaresBuilder builder = new LeastSquaresBuilder();
    builder.addParameter(1.0);
    builder.addParameter(2.0, true); // bound parameter
    LeastSquaresProblem problem = builder.build();

    // when
    AbstractEstimator estimator = new AbstractEstimator(problem) {
        @Override
        protected Matrix calculateJacobian() {
            return Matrix.ZEROS(1, 2);
        }
    };

    // then
    try {
        estimator.getCovariances();
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // expected
    }
}