public void testExtendedBufferReaderEOLConsistency() {
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader("a\rb\nc\r\nd\r\n"));
    assertEquals(1, reader.readLine().length());
    assertEquals(2, reader.getLineNumber());
    assertEquals(1, reader.readLine().length());
    assertEquals(3, reader.getLineNumber());
    assertEquals(1, reader.readLine().length());
    assertEquals(4, reader.getLineNumber());
    assertEquals(1, reader.readLine().length());
    assertEquals(5, reader.getLineNumber());
}