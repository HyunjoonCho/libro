public void testCustomSerializerNotUsedWithJsonValue() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new SimpleModule().addSerializer(MyPojo.class, new MyPojoSerializer()));
    MyPojo pojo = new MyPojo("test");
    try {
        assertEquals("custom serialization", mapper.writeValueAsString(pojo));
    } catch (JsonProcessingException e) {
        fail("Failed to serialize MyPojo");
    }
    assertEquals("custom deserialization", mapper.readValue("custom serialization", MyPojo.class).getValue());
}