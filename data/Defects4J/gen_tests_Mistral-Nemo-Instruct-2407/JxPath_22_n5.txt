public void testResetDefaultNamespaceLoop() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.parse(new InputSource(new StringReader(
        "<foo xmlns='test111'><bar xmlns='bla'>a</bar><test xmlns=''/></foo>")));
    XPath xpath = XPathFactory.newInstance().newXPath();
    Node testNode = (Node) xpath.evaluate("//test", document, XPathConstants.NODE);
    assertEquals("//test", xpath.evaluate(testNode.asPath(), document));
}