public void testRequireCallProcessing() {
    GivenProcessClosurePrimitives p = new GivenProcessClosurePrimitives();
    p.setRequiresLevel(RequiresLevel.ON);
    SymbolTable symbolTable = new SymbolTable();
    symbolTable.addSymbol("validRequire", SymbolKind.CLASS);
    ProcessClosurePrimitives.processRequireCall(p, symbolTable, "goog.require('validRequire');");
    assertTrue(p.getInvalidRequires().isEmpty());

    p.setRequiresLevel(RequiresLevel.OFF);
    ProcessClosurePrimitives.processRequireCall(p, symbolTable, "goog.require('invalidRequire');");
    assertEquals("invalidRequire", p.getInvalidRequires().get(0).getName());
}