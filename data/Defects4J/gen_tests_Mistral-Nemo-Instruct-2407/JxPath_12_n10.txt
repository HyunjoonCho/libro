public void testUndefinedNamespaceAttribute() {
    String xml = "<ElementA xmlns:A=\"http://www.example.com\" A:myAttr=\"Mytype\">\n" +
                 "  <B:ElementB xmlns:B=\"http://www.example.com\" />\n" +
                 "</ElementA>";
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    DocumentBuilder builder = factory.newDocumentBuilder();
    try {
        Document doc = builder.parse(new InputSource(new StringReader(xml)));
        fail("Expected DOMException: unknown namespace prefix");
    } catch (DOMException e) {
        assertEquals("NAMESPACE_ERR", e.getCode());
    }
}