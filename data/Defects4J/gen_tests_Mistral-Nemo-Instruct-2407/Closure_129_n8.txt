public void testCastingFunctionBeforeCallingIt() {
    String codeWithCast = "console.log( /** @type {function(!string):!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'])( '$version' ) )";
    String codeWithoutCast = "console.log( /** @type {!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable']( '$version' )) )";
    assertNotEquals(compileWithAdvancedOptimizations(codeWithCast), compileWithAdvancedOptimizations(codeWithoutCast));
}

private String compileWithAdvancedOptimizations(String code) {
    // implementation to compile code with ADVANCED_OPTIMIZATIONS
    // and return the produced code
}