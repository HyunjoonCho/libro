public void testNonEmptyExclusion() {
    ObjectMapper mapper = newObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);
    assertEquals("{}", mapper.writeValueAsString(new HashMap<>()));
    assertEquals("{\"a\":1}", mapper.writeValueAsString(new HashMap<String, Integer>() {{ put("a", 1); }}));
    assertEquals("{\"a\":\"\"}", mapper.writeValueAsString(new HashMap<String, String>() {{ put("a", ""); }}));
}