public void testArDelete() throws Exception {
    String archivePath = "/tmp/dir26673/bla.ar";
    try (RandomAccessFile raf = new RandomAccessFile(archivePath, "rw")) {
        ArchiveEntry entry = raf.getNextArchiveEntry();
        assertEquals("test1.xml", entry.getName());
        entry = raf.getNextArchiveEntry();
        assertEquals("test2.xml", entry.getName());

        // delete test2.xml
        raf.setLength(raf.length() - entry.getSize() - Archive.HEADER_SIZE);

        // verify deletion
        entry = raf.getNextArchiveEntry();
        assertNull(entry);
    }

    // verify test2.xml is still in the archive
    Process process = Runtime.getRuntime().exec("ar -t " + archivePath);
    assertEquals("test1.xml\ntest2.xml\n", process.getInputStream().toString());
}