public void testDefaultImplPropertyLoss() {
    Base base = new Base();
    base.name = "Base";
    Sub sub = new Sub();
    sub.name = "Sub";
    sub.id = 1;

    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping();

    try {
        assertEquals("{\"name\":\"Sub\",\"id\":1,\"@type\":\"com.example.Sub\"}",
                mapper.writeValueAsString(sub));
    } catch (JsonProcessingException e) {
        fail(e.getMessage());
    }

    try {
        sub = mapper.readValue("{\"name\":\"Sub\",\"id\":1,\"@type\":\"com.example.Sub\"}",
                Sub.class);
        assertEquals("Sub", sub.name);
        assertEquals(1, sub.id);
    } catch (IOException e) {
        fail(e.getMessage());
    }
}

class Base {
    String name;
}

class Sub extends Base {
    int id;
}