public void testEscapeXmlWithSupplementaryCharacters() throws IOException {
    String str = "ğŒ†"; // A supplementary character in UTF-16
    StringWriter writer = new StringWriter();
    StringEscapeUtils.escapeXml(writer, str);
    assertEquals("&#119072;", writer.toString());
}