public void testCastFunctionBeforeCalling() {
    // Given
    String getVariableCode = "((new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash')).GetVariable)";
    String castCode = "(0," + getVariableCode + ")";
    String callCode = castCode + "('$version')";

    // When
    String result = compileCodeWithAdvancedOptimizations(callCode);

    // Then
    assertTrue(result.contains("(0," + getVariableCode + ")"));
    assertTrue(result.contains("console.log(" + castCode));
}