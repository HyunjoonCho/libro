public void testUndefinedNameWarning() {
    String code = "// ==ClosureCompiler==\n" +
                  "// @compilation_level ADVANCED_OPTIMIZATIONS\n" +
                  "// @output_file_name default.js\n" +
                  "// ==/ClosureCompiler==\n" +
                  "\n" +
                  "try {\n" +
                  "  var x = 5;\n" +
                  "}\n" +
                  "catch(e) {\n" +
                  "  var s = \"FAIL\" + e.name +\": \"+ e.message;\n" +
                  "}\n";

    // Compile with advanced optimizations
    String[] args = {"-O", code};
    ClosureCompiler compiler = new ClosureCompiler();
    compiler.compile(args);

    // Check for undefined name warning
    assertTrue(compiler.getErrors().toString().contains("JSC_UNDEFINED_NAME"));
}