public void testJsonIdentityInfoDeserializationFailure() {
    String json = "{\"@class\":\"com.example.Entity\",\"id\":1,\"name\":\"Entity 1\",\"child\":{\"@class\":\"com.example.Child\",\"parent\":{\"@class\":\"com.example.Entity\",\"id\":1,\"name\":\"Entity 1\"}}}";
    try {
        ObjectMapper mapper = new ObjectMapper();
        mapper.reader().forType(Entity.class).readValue(json);
        fail("Expected deserialization to fail");
    } catch (IOException e) {
        // expected
    }
}