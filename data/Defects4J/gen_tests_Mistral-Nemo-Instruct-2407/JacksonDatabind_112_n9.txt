public void testStringCollectionDeserializerFailsWithCustomCollection() {
    // Arrange
    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.registerSubtypes(ImmutableCustomStringCollection.class);

    String json = "{\"property\": [\"value1\", \"value2\"]}";
    TestClass testClass = new TestClass();

    // Act & Assert
    assertThrows(InvalidDefinitionException.class, () -> objectMapper.readValue(json, TestClass.class));
}

class TestClass {
    List<String> property;
}

class CustomStringCollection extends ArrayList<String> {
    // Custom implementation
}

class ImmutableCustomStringCollection extends CustomStringCollection {
    // Immutable implementation
}