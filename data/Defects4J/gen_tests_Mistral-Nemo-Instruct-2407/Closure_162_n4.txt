public void testTypeAliasesInTypeAnnotations() {
    try {
        compile("goog.provide('foo.Foo');\ngoog.provide('foo.Foo.Bar');\n\ngoog.scope(function() {\n /\*\* @param {Foo.Bar} bar *\/ foo.Foo = function(bar) { this.bar = bar; };\n var Foo = foo.Foo;\n /\*\* @type {Foo.Bar} \*/\n Foo.prototype.bar = null;\n /\*\* @constructor \*/\n Foo.Bar = function() {};\n});");
        fail("Expected a compilation error but got none");
    } catch (CompilationFailedException e) {
        assertTrue(e.getMessage(), e.getMessage().contains("Bad type annotation. Unknown type Foo.Bar"));
    }
}