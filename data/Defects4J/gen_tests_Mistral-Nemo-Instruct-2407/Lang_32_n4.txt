public void testThreadLocalLeak() {
    // Arrange
    System.gc(); // Force GC to clear any previous ThreadLocals
    ToStringStyle style = ToStringStyle.SHORT_PREFIX_STYLE;

    // Act
    style.toString();
    System.gc(); // Force GC to collect any new ThreadLocals

    // Assert
    assertEquals(0, ((ReferenceQueue<ToStringStyle>) ToStringStyle.class.getDeclaredField("styleQueue").get(null)).poll(), "ThreadLocal was not removed");
}