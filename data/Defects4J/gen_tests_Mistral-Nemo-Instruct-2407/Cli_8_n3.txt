public void testHelpFormatterWrapping() {
    HelpFormatter formatter = new HelpFormatter();
    String longOption = "optionWithALongDescriptionThatShouldBeWrapped";
    List<String> options = Arrays.asList(longOption);
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    PrintStream printStream = new PrintStream(output);
    formatter.printHelp("program", options, printStream);
    String result = output.toString();
    assertTrue(result.length() > 0);
    int firstLineLength = result.indexOf('\n');
    int secondLineLength = result.substring(firstLineLength + 1).indexOf('\n');
    assertEquals(longOption.length(), firstLineLength);
    assertTrue(secondLineLength > longOption.length());
}