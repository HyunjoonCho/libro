public void testObjectReaderReadValuesErrorRecovery() throws Exception {
    ObjectReader reader = new ObjectReader(new JsonFactory().enable(JsonParser.Feature.ALLOW_SINGLE_QUOTES));
    MappingIterator<JsonNode> iterator = reader.readValues(new StringReader("{'foo': 1"));
    assertTrue(iterator.hasNext());
    iterator.next();
    assertFalse(iterator.hasNext());
    try {
        iterator.next();
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        // expected
    }
    assertFalse(iterator.hasNext());
}