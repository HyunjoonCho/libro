public void testClosureCompilerLendsSupport() {
    String js = "/** @lends MyClass.prototype */ var MyClass = function() {};";
    js += "MyClass.prototype.foo = function() { return this; };";
    js += "MyClass.prototype.bar = function() { return this; };";
    try {
        CompilationUnit compilationUnit = JavaScriptCompilationUnit.fromCode(js);
        compilationUnit.compile(ClosureCompilerOptions.defaultOptions());
        fail("Expected CompilationUnitException due to missing @this annotations");
    } catch (CompilationUnitException e) {
        // Expected exception
    }
}