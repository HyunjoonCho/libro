public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    compiler.getOptions().setClosurePass(false);
    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    compiler.compile("/*#dependency=dep1.js dep2.js dep3.js*/\n//# sourceURL=main.js\nconsole.log('Test');");
    assertTrue(compiler.getErrorMessages().isEmpty());
    String output = compiler.getOutput();
    assertTrue(output.contains("dep1.js"));
    assertTrue(output.contains("dep2.js"));
    assertTrue(output.contains("dep3.js"));
    assertTrue(output.indexOf("dep1.js") < output.indexOf("dep2.js"));
    assertTrue(output.indexOf("dep2.js") < output.indexOf("dep3.js"));
}