public void testZipCorruptionWithHashCollision() throws Exception {
    ZipArchiveOutputStream zaos = new ZipArchiveOutputStream(new FileOutputStream("test.zip"));
    for (int i = 0; i < 10000; i++) {
        ZipArchiveEntry ze = new ZipArchiveEntry("file" + i + ".txt");
        zaos.putArchiveEntry(ze);
        zaos.write(new byte[0]);
        zaos.closeArchiveEntry();
    }
    zaos.close();
    // Check if the zip file is corrupted
    try (ZipFile zipFile = new ZipFile("test.zip")) {
        fail("Expected an exception to be thrown due to corrupted zip file");
    } catch (ZipException e) {
        // Expected
    }
}