public void testBlockUnsafeTypes() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setVisibilityChecker(mapper.getSerializationConfig().getDefaultVisibilityChecker()
       .withFieldVisibility(JsonAutoDetect.Visibility.ANY)
       .withGetterVisibility(JsonAutoDetect.Visibility.NONE)
       .withSetterVisibility(JsonAutoDetect.Visibility.NONE)
       .withIsGetterVisibility(JsonAutoDetect.Visibility.NONE));
    mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);
    mapper.addMixIn(Object.class, UnsafeDeserializationMixIn.class);
    try {
        mapper.readValue("{\"@type\":\"java.lang.ProcessBuilder\"}", Object.class);
        fail("Expected IllegalArgumentException");
    } catch (JsonMappingException e) {
        // expected
    }
}