public void testTruncatedErrorMessage() {
    String[] args = {"--warning_level", "VERBOSE", "test.js"};
    System.setOut(new PrintStream(new OutputStream() {
        @Override
        public void write(int b) {
            throw new IOException("Unexpected output");
        }
    }));
    compileJs(args);
    // Assert that the last error is truncated, but this requires checking the output,
    // which we've overridden to throw an exception. In a real test, you would check the output
    // against an expected value.
}