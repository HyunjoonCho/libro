public void testCheckVarsUndefinedVarsDiagnostics() {
    String[] args = {"--js", "test.js", "--jscomp_warning", "checkVars,undefinedVars"};
    compilerWithArgs(args);
    assertTrue(output.toString().contains("test.js:1: ERROR - variable foo is undefined"));
}

private void compilerWithArgs(String[] args) {
    // Assuming output is a StringBuilder that captures the console output
    // Assuming the compiler is a method that takes args and sets output
    compiler(args);
}