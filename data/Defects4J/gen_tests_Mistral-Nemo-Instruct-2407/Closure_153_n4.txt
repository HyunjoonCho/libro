public void testNamespaceDefinitionInPrototype() {
    String input = "if (!Node) var Node = { };";
    String expected = "Node||(Node={});";
    assertEquals(expected, input.replaceAll("if\\s*\\(\\s*!", "").replaceAll("\\s+\\(", "\\|\\|\\("));
}