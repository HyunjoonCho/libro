public void testFuncReturnType() {
    assertEquals(ImmutableMap.of("prop1", ImmutableMap.of("a", 3)), func(true, false));
    assertEquals(ImmutableMap.of("prop1", ImmutableMap.of("a", 3), "prop3", "prop3"), func(true, null));
    assertEquals(ImmutableMap.of("prop2", "prop2"), func(false, true));
}