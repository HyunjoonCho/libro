public void testSwitchStatementBug() throws Exception {
    String code = "public void testSwitch(String b) {\n" +
                  "  switch (b) {\n" +
                  "    case \"SWITCH\":\n" +
                  "      if (b.length() >= 0) {\n" +
                  "        return b;\n" +
                  "      } else {\n" +
                  "        return null;\n" +
                  "      }\n" +
                  "      break;\n" +
                  "  }\n" +
                  "}\n";
    try (Compiler compiler = ToolProvider.getSystemJavaCompiler()) {
      compiler.getTask(null, null, null, null, null, code).call();
      fail("Expected RuntimeException to be thrown");
    } catch ( compilationException e ) {
      assertTrue(e.getMessage(), e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}