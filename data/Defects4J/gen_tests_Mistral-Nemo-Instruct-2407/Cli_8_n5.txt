public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    String opt = "myoption";
    String desc = "This is a very long description that should wrap correctly but does not due to a bug in findWrapPos. It should wrap at the specified width, but instead it wraps at the wrong position for every line beyond the first.";
    List<String> options = Arrays.asList(opt);
    List<String> descs = Arrays.asList(desc);
    StringBuffer sb = new StringBuffer();
    formatter.printOptions(sb, 80, options, descs);
    String output = sb.toString();
    String[] lines = output.split("\\r?\\n");
    for (int i = 1; i < lines.length; i++) {
        assertTrue("Line " + i + " is too long", lines[i].length() <= 80);
    }
}