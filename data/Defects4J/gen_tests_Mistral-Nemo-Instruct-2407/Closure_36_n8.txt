public void testGoogAddSingletonGetterPreventsUnusedClassRemoval() {
    String input = "goog.provide('foo');\n" +
                   "var foo = function() { this.values = []; };\n" +
                   "goog.addSingletonGetter(foo);\n" +
                   "foo.prototype.add = function(value) {this.values.push(value)};";
    String expected = "";
    String actual = ClosureCompiler.compile(input, CompilerOptions.ADVANCED_OPTIMIZATIONS).output;
    assertEquals(expected, actual);
}