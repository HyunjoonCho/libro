public void testTypeCheckingError() {
    Object obj = new Object() {
        {
            void fn(boolean success) {}
            void test() {
                fn();
                fn = () -> {};
            }
        }
    };
    assertThrows(StackOverflowError.class, obj::test);
}