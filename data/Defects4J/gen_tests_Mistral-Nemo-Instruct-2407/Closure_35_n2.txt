public void testBugReport() {
    Object result = func(true, true);
    assertTrue(result instanceof Object);
    assertTrue(result.getClass().isArray());
    assertEquals(3, ((Object[]) result)[0].get("a"));
    assertEquals("prop2", ((Object[]) result)[1]);

    result = func(true, false);
    assertTrue(result instanceof Object);
    assertTrue(result.getClass().isArray());
    assertEquals(3, ((Object[]) result)[0].get("a"));
    assertEquals("prop3", ((Object[]) result)[1]);
}