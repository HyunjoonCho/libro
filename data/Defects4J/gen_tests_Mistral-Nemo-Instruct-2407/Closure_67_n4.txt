public void testAdvancedCompilationBug(){
    // Arrange
    class A {
        _x = 1;
        func1() {
            this._x = 2;
            this.func2(); // should throw error
        }
        func2() {
            this._x = 3;
            this.func3(); // should throw error
        }
        func3() {
            // empty
        }
    }
    window['A'] = A;

    // Act
    // This line causes the issue
    A.prototype['func1'] = A.prototype.func1;

    // Assert
    try {
        new A().func1();
        fail("Expected an error, but no error was thrown");
    } catch (e) {
        // expected
    }
}