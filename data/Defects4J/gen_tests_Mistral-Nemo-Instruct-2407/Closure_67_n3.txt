public void testAdvancedCompilationBug() {
    function A() {
        this._x = 1;
    }
    A.prototype['func1'] = function() {
        this._x = 2;
        this.func2();
    }
    A.prototype.func2 = function() {
        this._x = 3;
        this.func3();
    }
    window['A'] = A;
    var a = new A();
    a.func1();
    assertEquals(3, a._x); // This will throw an exception due to the missing func2 function
}