public void testThreadLocalLeak() {
    // Arrange
    ToStringStyle style = new ToStringStyle();

    // Act
    Runtime.getRuntime().gc();
    long usedMemoryBefore = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();

    // Use ToStringStyle to trigger creation of ThreadLocal
    String s = "test".toString();

    // Assert
    Runtime.getRuntime().gc();
    long usedMemoryAfter = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();
    assertTrue(usedMemoryAfter > usedMemoryBefore);
}