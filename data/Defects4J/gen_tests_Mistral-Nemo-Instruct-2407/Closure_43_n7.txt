public void testLendsWithoutClassDefinition() {
    String code = "class Person { }\n" +
                  "@lends Person.prototype\n" +
                  "function makeClass(proto) {\n" +
                  "  function C() {}\n" +
                  "  C.prototype = proto;\n" +
                  "  return C;\n" +
                  "}\n" +
                  "makeClass({ name: 'John' });";
    assertThrows(CompileErrorException.class, () -> compiler.compile(code));
}