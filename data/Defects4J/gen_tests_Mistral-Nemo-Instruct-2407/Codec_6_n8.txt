public void testBase64InputStreamRead() throws IOException {
    InputStream in = new ByteArrayInputStream(new byte[]{0xDE, 0xAD, 0xBE, 0xEF});
    Base64InputStream bis = new Base64InputStream(in, true);
    byte[] buffer = new byte[1];
    int len = bis.read(buffer);
    assertEquals(1, len);
    len = bis.read(buffer);
    assertEquals(1, len);
    len = bis.read(buffer);
    assertEquals(1, len);
    len = bis.read(buffer);
    assertEquals(-1, len);
}