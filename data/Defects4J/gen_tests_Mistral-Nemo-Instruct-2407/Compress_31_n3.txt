public void testInvalidTGZFile() throws Exception {
    String fileName = "invalid.tgz";
    File tempDir = createTempDir();
    File file = new File(tempDir, fileName);
    Files.write(file.toPath(), "05412{NUL}11".getBytes());

    TarArchiveInputStream tarIn = new TarArchiveInputStream(
            new GZIPInputStream(
                    new BufferedInputStream(
                            new FileInputStream(file))));

    try {
        tarIn.getNextTarEntry();
        fail("Expected IllegalArgumentException was not thrown");
    } catch (IllegalArgumentException e) {
        // expected
    } finally {
        tarIn.close();
    }
}