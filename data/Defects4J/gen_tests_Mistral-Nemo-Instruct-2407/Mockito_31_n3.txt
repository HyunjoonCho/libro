public void testFailingTestsOnWindows() {
    try {
        System.setProperty("org.mockito.configuration.requiresJUnit", "false");
        try {
            Bar bar = mock(Bar.class, withSettings().extraInterfaces(List.class, Observer.class));
            fail("Expected AssertionError");
        } catch (AssertionError e) {
            // Expected
        }
        try {
            checkDependency("org.mockito.configuration.MockitoConfiguration");
            fail("Expected NoClassDefFoundError");
        } catch (NoClassDefFoundError e) {
            // Expected
        }
        try {
            checkDependency("junit.framework.Assert");
            fail("Expected NoClassDefFoundError");
        } catch (NoClassDefFoundError e) {
            // Expected
        }
    } finally {
        System.clearProperty("org.mockito.configuration.requiresJUnit");
    }
}