public void testEventHandlingBug() {
    MyClass obj = new MyClass();
    obj.addListener(event -> obj.handleEvent(event));
    obj.addListener(event -> obj.handleEvent(event)); // second listener

    Event e1 = new Event("First Event");
    Event e2 = new Event("Second Event");
    obj.handleEvent(e1); // first event

    assertTrue(obj.isInInitialState()); // reinitialization not complete
    obj.handleEvent(e2); // second event fails
}