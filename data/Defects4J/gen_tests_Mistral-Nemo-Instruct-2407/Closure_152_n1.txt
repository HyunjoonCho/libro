public void testUnionTypeCastException() {
    String src = "var f = function() {}; var g = f;";
    try {
        compiler.compile(src);
        fail("Expected ClassCastException");
    } catch (RuntimeException e) {
        assertTrue(e.getCause() instanceof ClassCastException);
        assertTrue(e.getCause().getMessage().contains("UnionType cannot be cast to ObjectType"));
    }
}