public void testNullDataset() {
    JFreeChart chart = new JFreeChart();
    CategoryPlot plot = new CategoryPlot();
    chart.setPlot(plot);
    CategoryItemRenderer renderer = new AbstractCategoryItemRenderer() {
        @Override
        public LegendItemCollection getLegendItems() {
            return super.getLegendItems();
        }
    };
    plot.setRenderer(renderer);
    renderer.setPlot(plot);
    assertNull(renderer.getLegendItems());
}