public void testBoundParametersCrash() {
    AbstractEstimator estimator = mock(AbstractEstimator.class);
    LeastSquaresProblem problem = mock(LeastSquaresProblem.class);
    when(problem.getAllParameters()).thenReturn(new double[]{1,2,3,4,5});
    when(problem.getUnboundParameters()).thenReturn(new double[]{1,2,3});

    estimator.setProblem(problem);
    try {
        estimator.getCovariances();
        fail("Expected ArrayOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // expected
    }
}