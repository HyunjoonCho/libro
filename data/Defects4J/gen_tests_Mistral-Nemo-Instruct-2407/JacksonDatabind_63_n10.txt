public void testIncorrectReferenceChain() throws IOException {
    expectThrows(JsonMappingException.class, () -> {
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.readValue(objectMapper.writeValueAsBytes(new Outer2()), Outer2.class);
    });
    JsonMappingException.Reference reference = expectThrows(JsonMappingException.class, () -> {
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.readValue(objectMapper.writeValueAsBytes(new Outer2()), Outer2.class);
    }).getPath().get(0);
    assertThat(reference.toString()).isEqualTo("ReferenceChainTest$Outer2$Inner2[\"x\"]");
}

static class Outer2 {
    public Inner2 inner2 = new Inner2();
}

static class Inner2 {
    public int x;

    @JsonCreator
    public static Inner2 create(@JsonProperty("x") int x) {
        throw new RuntimeException("test-exception");
    }
}