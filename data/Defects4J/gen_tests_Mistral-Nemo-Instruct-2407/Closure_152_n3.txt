public void testResolveTypesUnionTypeCastException() {
    String code = "function f() { return {}; }";
    try {
        compiler.compile(code);
        fail("Expected ClassCastException");
    } catch (RuntimeException e) {
        assertTrue("Expected ClassCastException", e.getCause() instanceof ClassCastException);
        assertTrue("Expected UnionType to ObjectType cast exception",
                e.getCause().getMessage().contains("UnionType cannot be cast to ObjectType"));
    }
}