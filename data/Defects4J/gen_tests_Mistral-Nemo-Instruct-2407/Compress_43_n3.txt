public void testZipVersionMismatch() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try (ZipArchiveOutputStream zaos = new ZipArchiveOutputStream(new BufferedOutputStream(baos))) {
        zaos.setUseZip64(Zip64Mode.AS_NEEDED);
        zaos.putArchiveEntry(new ZipArchiveEntry("test.txt"));
        zaos.closeArchiveEntry();
    }
    ZipArchiveInputStream zais = new ZipArchiveInputStream(new BufferedInputStream(new ByteArrayInputStream(baos.toByteArray())));
    ZipArchiveEntry entry = zais.getNextZipEntry();
    assertEquals(20, entry.getVersionNeededToExtract()); // should match central directory version
}