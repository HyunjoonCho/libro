public void testGroupConstraintsIgnoringChildren() {
    OptionGroup groupA = new OptionGroup();
    groupA.addOption(OptionBuilder.withLongOpt("a").create());
    OptionGroup groupB = new OptionGroup();
    groupB.addOption(OptionBuilder.withLongOpt("b").create());
    groupB.addOption(groupA);
    groupB.setRequired(true);
    groupB.setOptional(false);
    WriteableCommandLine cmd = new DefaultParser().parse(new String[]{"-b"});
    assertFalse(cmd.hasOption("a"));
    assertTrue(groupB.isRequired());
    assertFalse(groupB.isOptional());
    try {
        cmd.getOptionValue("b");
        fail("Expected exception due to missing required option 'a'");
    } catch (MissingOptionException e) {
    }
}