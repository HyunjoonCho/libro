public void testArgumentCaptorVarargsFailure() {
    ArgumentCaptor<int[]> captor = ArgumentCaptor.forClass(int[].class);
    mockMethodThatTakesVarargs(1, 2, 3);
    verify(mock, times(1)).mockMethodThatTakesVarargs(captor.capture());
    assertEquals(new int[]{1, 2, 3}, captor.getValue());
}