public void testCorruptedBzip2() throws IOException {
    String archivePath = "path/to/test.tar.bz2";
    TarArchiveInputStream input = new TarArchiveInputStream(new BZip2CompressorInputStream(
        new FileInputStream(archivePath), true));
    ArchiveEntry nextMatchedEntry = input.getNextEntry();
    while (nextMatchedEntry!= null) {
        try {
            String outputPath = "/tmp/" + nextMatchedEntry.getName();
            OutputStream out = new FileOutputStream(outputPath);
            ByteStreams.copy(input, out);
            out.close();
        } catch (EOFException e) {
            // expected exception for a truncated archive
        }
        nextMatchedEntry = input.getNextEntry();
    }
}