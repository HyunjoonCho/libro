public void testGoogScopeDeclaration() {
    try {
        new Object() {
            void test() {
                goog.scope(function() {
                    var x = function() {};
                });
            }
        }.test();
    } catch (Exception e) {
        // expected
    }
    try {
        new Object() {
            void test() {
                goog.scope(function() {
                    function x() {}
                });
            }
        }.test();
    } catch (Exception e) {
        fail("Expected a compiler error");
    }
}