public void testArDeleteFailure() throws IOException {
    try (RandomAccessFile raf = new RandomAccessFile("bla.ar", "rw")) {
        raf.seek(raf.length());
        raf.writeBytes("test1.xml\n");
        raf.writeBytes("test2.xml\n");
        raf.seek(0);
        assertEquals("test1.xml", raf.readLine());
        assertEquals("test2.xml", raf.readLine());

        raf.seek(raf.length());
        raf.writeBytes("test2.xml\n");
        raf.seek(0);

        assertEquals("test1.xml", raf.readLine());
        assertNull(raf.readLine());
    }
}