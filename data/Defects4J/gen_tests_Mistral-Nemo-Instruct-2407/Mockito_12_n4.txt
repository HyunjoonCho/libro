public void testArgumentCaptorVarargsFailure() {
    ArgumentCaptor<int[]> captor = ArgumentCaptor.forClass(int[].class);
    when(mock.someVarargsMethod(anyInt(), captor.capture())).thenReturn(null);
    mock.someVarargsMethod(1, new int[]{2, 3});
    assertEquals(1, captor.getAllValues().size());
    assertArrayEquals(new int[]{2, 3}, captor.getValue());
}