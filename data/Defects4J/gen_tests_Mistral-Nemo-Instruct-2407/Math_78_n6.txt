public void testCloseEventsNotDetected() {
    // set up initial conditions, function, and solver
    double[] y0 = {0.0};
    Function f = new Function() {
        public double eval(double t, double[] y) {
            if (t < 90.0) {
                return 0.0;
            } else if (t < 135.0) {
                return (t - 90.0) / 45.0;
            } else {
                return 1.0 - (t - 135.0) / 15.0;
            }
        }
    };
    EventHandler eventHandler = new EventHandler() {
        public boolean handleEvent(double t, double[] y) {
            return y[0] == 0.0;
        }
    };
    OdeSolver solver = new RungeKutta45();
    solver.addEventHandler(eventHandler);

    // set up initial step and expected behavior
    double t0 = 67.5, tf = 153.0, dt = 25.0;
    double[] y = y0.clone();
    solver.init(t0, y);