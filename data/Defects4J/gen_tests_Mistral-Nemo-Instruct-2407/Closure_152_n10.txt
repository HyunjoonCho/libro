public void testUnionTypeCastException() {
    // Arrange
    String jsCode = "function test() {\n" +
            "  var x = {};\n" +
            "  var y = function() {};\n" +
            "  x[y] = 1;\n" +
            "}\n" +
            "test();";

    // Act
    Compiler compiler = new Compiler();
    compiler.compileWithCaching(jsCode, new String[]{"--compilation_level", "ADVANCED_OPTIMIZATIONS"});

    // Assert (expecting an exception)
}