public void testAdvancedCompilationBug() {
    function A() {
        this._x = 1;
    }

    A.prototype['func1'] = null;
    A.prototype.func1 = function() {
        this._x = 2;
        this.func2();
    }

    A.prototype.func2 = function() {
        this._x = 3;
        this.func3();
    }

    window['A'] = A;

    A.prototype['func1'](); // Throws an error because 'func2' is not defined
}