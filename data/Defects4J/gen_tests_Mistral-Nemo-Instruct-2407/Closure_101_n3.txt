public void testProcessClosurePrimitivesFlag() {
    // Arrange
    String fileContent = "goog.provide('foo.Bar');";
    File tempFile = createTempFile(fileContent);

    // Act
    ProcessBuilder pbFalse = new ProcessBuilder("javac", "-cp", "path/to/compiler.jar", "--process_closure_primitives", "false", tempFile.getAbsolutePath());
    Process falseProcess = pbFalse.start();
    ProcessBuilder pbTrue = new ProcessBuilder("javac", "-cp", "path/to/compiler.jar", "--process_closure_primitives", "true", tempFile.getAbsolutePath());
    Process trueProcess = pbTrue.start();

    // Assert
    assertEquals(0, falseProcess.waitFor());
    assertEquals(0, trueProcess.waitFor());
    assertTrue Files.readAllLines(Paths.get(tempFile.getAbsolutePath())).contains("goog.provide('foo.Bar');");
}