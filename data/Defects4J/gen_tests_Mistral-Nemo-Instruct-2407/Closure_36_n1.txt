public void testGoogAddSingletonGetter() {
    String input = "goog.provide('foo');\n" +
                   "var foo = function() { this.values = []; };\n" +
                   "goog.addSingletonGetter(foo);\n" +
                   "foo.prototype.add = function(value) {this.values.push(value)};\n";
    try {
        String result = ClosureCompiler.compile(input, ClosureCompiler.OptimizationLevel.ADVANCED_OPTIMIZATIONS);
        assertTrue(result.isEmpty()); // Expect: The code is completely removed.
    } catch (Exception e) {
        fail("Compilation should not throw an exception");
    }
}