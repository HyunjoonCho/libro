public void testSerializeToTree() {
    X<String> x = new X<>();
    x.s = "test";
    x.items = Arrays.asList("item1", "item2");

    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new JavaTimeModule());
    mapper.registerSerializer(X.class, new ListAttributeSerializer());

    JsonNode tree = mapper.valueToTree(x);
    assertTrue(tree.has("items"));
    assertTrue(tree.get("items").isContainerNode());
    assertFalse(tree.get("items").isEmbeddedObject());
}