public void testHelpFormatterWrapIssue() {
    HelpFormatter formatter = new HelpFormatter();
    String option = "option-with-a-very-long-description-that-should-wrap-correctly";
    String[] args = {"-h", option};
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(bos);
    formatter.setWidth(80);
    formatter.printHelp("test", args, true, "", true, ps);
    String output = bos.toString();
    String[] lines = output.split("\n");
    for (int i = 1; i < lines.length; i++) {
        assertTrue("Line " + i + " is too long", lines[i].length() <= 80);
    }
}