public void testEventHandlingBug() {
    EventHandler handler = new EventHandler();
    handler.addEventListener(EventType.FIRST, () -> {
        handler.resetState(); // incomplete reinitialization
    });
    handler.addEventListener(EventType.SECOND, () -> {
        // this should fail as state is not reinitialized properly
        assertTrue(handler.isReadyForSecondEvent());
    });
    handler.handleEvent(new Event(EventType.FIRST));
    handler.handleEvent(new Event(EventType.SECOND));
}