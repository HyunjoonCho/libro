public void testSmartNameRemovalCrash() {
    String code = "var goog = {}; goog.inherits = function(x, y) {}; var ns = {}; /** @constructor */ ns.PageSelectionModel = function(){}; /** @constructor */ ns.PageSelectionModel.FooEvent = function() {}; /** @constructor */ ns.PageSelectionModel.SelectEvent = function() {}; goog.inherits(ns.PageSelectionModel.ChangeEvent, ns.PageSelectionModel.FooEvent);";
    assertThrows(IllegalStateException.class, () -> compile(code));
}