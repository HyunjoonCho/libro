public void testExternExportTypedef() {
    String source = "@typedef {string=} MyLongTypeDef;\n"
        + "var x = MyLongTypeDef; // This works as expected\n"
        + "var y = MyLongTypeDef; // This should not embed the type definition\n";
    CompileResult result = compiler.compile(source, CompileOptions.jsExtern());
    assertTrue(result.success);
    assertFalse(result.jsExtern().contains("MyLongTypeDef"));
}