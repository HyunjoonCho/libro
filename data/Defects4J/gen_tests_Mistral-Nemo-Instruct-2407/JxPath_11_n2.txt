public void testUndefinedNamespaceAttribute() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    try {
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new InputSource(new StringReader(
            "<ElementA xmlns:A='http://example.com/A'><A:myAttr>Mytype</A:myAttr></ElementA>"
        )));
        fail("Expected NamespaceError not thrown");
    } catch (NamespaceError e) {
        assertEquals("unknown namespace prefix: A", e.getMessage());
    } catch (Exception e) {
        fail("Unexpected exception: " + e.getMessage());
    }
}