public void testReadTruncatedFile() throws Exception {
    byte[] data = new byte[770];
    // populate data here...
    try (OutputStream out = new FileOutputStream("test.bz2")) {
        out.write(data);
    }
    try (InputStream jython = new BZip2CompressorInputStream(new FileInputStream("test.bz2"));
         InputStream python = new BZip2CompressorInputStream(new FileInputStream("test.bz2"))) {
        int jythonBytesRead = jython.read(data);
        int pythonBytesRead = python.read(data);
        assertEquals(770, pythonBytesRead);
        assertEquals(769, jythonBytesRead);
    }
}