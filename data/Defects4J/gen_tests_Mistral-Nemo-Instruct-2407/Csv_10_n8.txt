public void testCSVPrinterWithHeader() throws IOException {
    try (CSVPrinter csvPrinter = CSVFormat.TDF
       .withHeader("x")
       .print(new BufferedWriter(new FileWriter("data.csv")))) {
        csvPrinter.printRecord(42);
    }
    String content = new String(Files.readAllBytes(Paths.get("data.csv")));
    assertEquals("x\n42\n", content);
}