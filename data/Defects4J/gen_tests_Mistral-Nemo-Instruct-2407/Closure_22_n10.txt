public void testNonRightmostExpressions() {
    // Arrange
    String input = "foo((1, 2, 42))";
    // Act
    String output = processExpression(input);
    // Assert
    assertEquals("foo((1, 3))", output);
    assertTrue(warnings.contains("First element of sequence has side effects"));
}

private String processExpression(String input) {
    // Mock the functionality that causes the issue
    //...
    return output;
}