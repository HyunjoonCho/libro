public void testAMDModuleInSubdirectory() {
    // Given
    String barJs = "define(['require', 'exports', './lib/Foo'], function (require, exports, Foo) { });";
    String fooJs = "define(function () { });";
    // When
    Runtime runtime = Runtime.getRuntime();
    Process process = runtime.exec(new String[]{"java", "-jar", "compiler.jar",
        "--transform_amd_modules", "--process_common_js_modules",
        "--common_js_entry_module=Bar.js", "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js", "--js=Bar.js", "--js=lib/Foo.js"});
    // Then
    assertEquals(1, process.waitFor());
    assertEquals("ERROR - required entry point \"module$lib$Foo\" never provided\n", captureOutput(process));
}