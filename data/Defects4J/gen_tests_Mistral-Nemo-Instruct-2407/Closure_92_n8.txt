public void testImplicitNamespaces() {
    // Module A
    String moduleA = "var apps={};apps.foo.bar={};apps.foo={};";
    // Module B
    String moduleB = "apps.foo.bar.B={};";
    // Module C
    String moduleC = "apps.foo.bar.C={};";

    // Compile in SIMPLE_OPTIMIZATIONS mode
    String compiledCode = moduleA + moduleB + moduleC;

    // Should throw a runtime error due to the order of assignments
    assertThrows(RuntimeException.class, () -> {
        new ScriptEngineManager().getEngineByName("Java").eval(compiledCode);
    });
}