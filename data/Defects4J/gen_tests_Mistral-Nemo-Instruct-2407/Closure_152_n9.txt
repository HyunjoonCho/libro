public void testResolveTypesIssue() {
    String jsCode = "var x = function() {}; var y = {__type: 'foo'}";
    try {
        Compiler compiler = new Compiler();
        compiler.compile(jsCode);
        fail("Expected CompilerException due to resolveTypes issue");
    } catch (CompilerException e) {
        assertTrue(e.getMessage(), e.getMessage().contains("resolveTypes"));
        assertTrue(e.getMessage(), e.getMessage().contains("ClassCastException"));
    }
}