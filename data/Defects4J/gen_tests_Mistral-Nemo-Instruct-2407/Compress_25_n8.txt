public void testZipReadFailure() {
    byte[] zip =...; // the same byte array as in the bug report
    ByteArrayInputStream bin = new ByteArrayInputStream(zip);
    try (ZipArchiveInputStream in = new ZipArchiveInputStream(bin)) {
        ZipArchiveEntry entry = in.getNextZipEntry();
        byte[] buf = new byte[(int) entry.getSize()];
        in.read(buf);
        assertArrayEquals(new byte[] { 'd', 'a', 't', 'a' }, buf);
    } catch (IOException e) {
        fail("IOException should not have been thrown");
    }
}