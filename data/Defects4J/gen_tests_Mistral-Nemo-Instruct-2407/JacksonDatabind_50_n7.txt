public void testJsonIdentityInfoForwardReferencesJsonCreator() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(Include.NON_DEFAULT);

    Parent parent = new Parent();
    Child child = new Child();
    parent.setChild(child);
    child.setParent(parent);

    try {
        mapper.writeValueAsString(parent);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        //Expected
    }
}