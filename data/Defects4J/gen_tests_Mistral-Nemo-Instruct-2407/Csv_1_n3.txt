public void testEOLHandling() throws Exception {
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader("hello\r\nworld\rworld2\nworld3\r"));
    assertEquals("hello", reader.readLine());
    assertEquals("world", reader.readLine());
    assertEquals("world2", reader.readLine());
    assertEquals("world3", reader.readLine());
    assertEquals(-1, reader.read());
    assertEquals(4, reader.getLineCount());
}