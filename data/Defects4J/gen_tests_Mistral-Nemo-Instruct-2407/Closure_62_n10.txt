public void testCaretNotShowing() {
    String js1 = "alert(1;";
    String js2 = "alert(1;\n";
    assertCaretShows(js1, 1, 8);
    assertCaretShows(js2, 2, 8);
}

private void assertCaretShows(String js, int line, int column) {
    Process process = null;
    try {
        process = Runtime.getRuntime().exec("java -jar compiler.jar --js " + js);
        Scanner scanner = new Scanner(process.getInputStream());
        String lineWithCaret = "";
        while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            System.out.println(line);
            if (line.contains("^")) {
                lineWithCaret = line;
                break;
            }
        }
        assertEquals("Expected caret on line " + line + " column " + column, line, lineWithCaret);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (process!= null) {
            process.destroy();
        }
    }
}