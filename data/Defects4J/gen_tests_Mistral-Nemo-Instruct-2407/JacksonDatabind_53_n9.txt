public void testJsonDeserializeWithMap() {
    String json = "{\"something\": [{\"id\": \"a uuid\", \"property\": \"value\"}]}";
    MyCustomIdInterface foo = new Foo("a uuid", "value");
    Map<UUID, MyCustomIdInterface> map = new MyHashMap<>();
    map.put(UUID.fromString("a uuid"), foo);
    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.registerModule(new SimpleModule().addDeserializer(
            Map.class, new CustomMapDeserializer()
    ));
    try {
        objectMapper.readValue(json, new TypeReference<Map<String, Map<UUID, MyCustomIdInterface>>>() {});
        fail("Expected a deserialization exception");
    } catch (Exception e) {
        // Expected exception
    }
}