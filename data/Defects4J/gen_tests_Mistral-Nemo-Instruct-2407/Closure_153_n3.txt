public void testNamespaceDefinitionInPrototype() {
  String jsCode = "if (!Node) var Node = {};";
  String expected = "if (!Node) var Node={};";
  String actual = jsCode.replaceAll("if\\s*!\\[\\s*Node\\s*\\]\\s*var\\s+Node=\\{\\};", "Node||(Node={});");
  assertEquals(expected, actual);
}