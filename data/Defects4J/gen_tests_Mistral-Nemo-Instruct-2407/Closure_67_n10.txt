public void testAdvancedCompilationRenameAndDelete() {
    class A {
        func1() {
            _x = 2;
            func2();
        }
        func2() {
            _x = 3;
            func3();
        }
    }
    A.prototype['func1'] = A.prototype.func1;
    A.prototype.func1 = function() {
        this._x = 2;
        this.func2();
    };
    window['A'] = A;
    A a = new A();
    a.func1();
    // This should throw an error as func2 is not defined
}