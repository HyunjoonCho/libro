public void testCharSequenceKeyDeserializer() {
    Map<CharSequence, String> map = new HashMap<>();
    map.put("key", "value");

    ObjectMapper mapper = new ObjectMapper();
    try {
        String json = mapper.writeValueAsString(map);
        Map<?,?> deserialized = mapper.readValue(json, Map.class);
        fail("Expected a JsonMappingException due to missing CharSequence KeyDeserializer");
    } catch (JsonMappingException e) {
        // expected
    } catch (Exception e) {
        fail("Expected a JsonMappingException, but got " + e.getClass().getName());
    }
}