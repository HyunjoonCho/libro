public void testNonEmptyExclusionWithIntsAndStrings() {
    ObjectMapper mapper = newObjectMapper();
    mapper.setSerializationInclusion(Include.NON_EMPTY);
    IntStream.range(0, 2).mapToObj(i -> new Object[] {i, ""}).forEach(arr -> {
        try {
            assertNull(mapper.writeValueAsString(arr));
        } catch (JsonProcessingException e) {
            fail("Should not throw exception for empty string");
        }
    });
}