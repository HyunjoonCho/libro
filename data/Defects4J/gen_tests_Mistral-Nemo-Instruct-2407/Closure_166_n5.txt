public void testBug_123() {
    var func = (record: {prop: string, prop2: (string | undefined)}) => {
        console.log(record.prop);
    };
    var func2 = (record: ({prop: string, prop2: (string | undefined)} | string)) => {
        if (typeof record ==='string') {
            console.log(record);
        } else {
            console.log(record.prop);
        }
    };
    func({prop: 'a'});
    func2({prop: 'a'}); // This line should cause an error
}