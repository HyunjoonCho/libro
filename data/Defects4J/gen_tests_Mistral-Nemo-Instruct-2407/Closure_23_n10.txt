public void testTryFoldArrayAccessSideEffects() {
  String code = "console.log([console.log('hello, '), 'world!'][1]);";
  try (JavaFileObject fo = new StringSource(code)) {
    CompilationUnit cu = JavaParser.parse(fo);
    com.google.javascript.jscomp.PeepholeFoldConstants foldConstants = new com.google.javascript.jscomp.PeepholeFoldConstants();
    foldConstants.tryFoldArrayAccess(cu);
    assertEquals("console.log('world!');", code);
  }
}