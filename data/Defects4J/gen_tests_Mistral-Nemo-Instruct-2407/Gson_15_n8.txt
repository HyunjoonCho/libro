public void testJsonWriterNaN() {
    JsonWriter writer = new JsonWriter(new PrintWriter(new StringWriter()));
    writer.setLenient(false);
    writer.beginObject();
    writer.name("nan");
    writer.value((Number) Double.valueOf(Double.NaN));
    writer.endObject();
    try {
        writer.close();
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }
}