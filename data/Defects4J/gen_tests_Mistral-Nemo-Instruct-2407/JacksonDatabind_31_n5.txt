public void testJsonStreamContextMismatch() {
    ObjectMapper mapper = new ObjectMapper();
    JsonProcessingException e = null;
    try {
        mapper.writeValue(new OutputStreamWriter(System.out), "test");
    } catch (JsonProcessingException ex) {
        e = ex;
    }
    assertNotNull(e);

    ObjectMapper mapper2 = new ObjectMapper();
    try {
        mapper2.convertValue("test", Object.class);
    } catch (Exception ex) {
        fail("Convert should not throw an exception");
    }
}