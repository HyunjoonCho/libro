public void testExternPrototypeBug() {
    String[] args = {"--compilation_level=ADVANCED_OPTIMIZATIONS", "--externs=prototype.js", "--js=bootloader.js"};
    try {
        Compiler.main(args);
        fail("Expected RuntimeException was not thrown");
    } catch (RuntimeException e) {
        assertTrue("INTERNAL COMPILER ERROR" + "Please report this problem." + "Node(FUNCTION): prototype.js:213:11" + "function Str(key, holder, stack) {" + "Parent(BLOCK): prototype.js:160:12" + "(function() {",
                e.getMessage().contains("INTERNAL COMPILER ERROR") &&
                        e.getMessage().contains("prototype.js:213:11") &&
                        e.getMessage().contains("function Str(key, holder, stack) {") &&
                        e.getMessage().contains("(function() {"));
    }
}