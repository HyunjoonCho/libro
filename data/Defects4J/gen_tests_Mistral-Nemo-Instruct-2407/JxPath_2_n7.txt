public void testNodeSetReturningFunction() {
  // Arrange
  JXPathContext context = new JXPathContext(new DocumentBuilderFactory().newDocumentBuilder().newDocument());
  context.registerFunction("observations", this::observations);

  // Act
  NodeSet result = (NodeSet) context.selectNodes("observations()");

  // Assert
  assertFalse(result.isEmpty());
  assertEquals(1, result.size());
  assertTrue(result.getNodes().iterator().next() instanceof BasicNodeSet);
}