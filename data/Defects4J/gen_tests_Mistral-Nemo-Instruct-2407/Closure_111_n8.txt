public void testGoogIsArrayTypeHinting() {
    String code = "/**\n"
        + " * @param {*} object\n"
        + " * @return {*}\n"
        + " */\n"
        + "var test = function(object) {\n"
        + "  if (goog.isArray(object)) {\n"
        + "    /** @type {Array} */ var x = object;\n"
        + "    return x;\n"
        + "  }\n"
        + "};\n";
    try {
        CompilerOptions options = new CompilerOptions();
        options.setLanguageIn(LanguageMode.ECMASCRIPT5);
        options.setLanguageOut(LanguageMode.ECMASCRIPT5);
        options.setWarningLevel(DiagnosticGroup.DEPRECATION, Diagnostic.WARN);
        options.setWarningLevel(DiagnosticGroup.NON_STRICT_TYPE_CHECKING, Diagnostic.ERROR);
        Compiler compiler = new Compiler();
        compiler.compile(code, options);
        fail("Expected compilation error");
    } catch (CompilationError error) {
        assertTrue(error.getMessage().contains("required: (Array|null)"));
    }
}