public void testGenericsSelfReferenceStackOverflow() {
    interface GenericsSelfReference<T extends GenericsSelfReference<T>> {
        T self();
    }
    GenericsSelfReference selfReference = new GenericsSelfReference() {
        @Override
        public GenericsSelfReference self() {
            return this;
        }
    };
    assertThat(inferFrom(GenericsSelfReference.class).resolveGenericReturnType(selfReference::self).rawType()).isEqualTo(GenericsSelfReference.class);
}