public void testDeflateWithZlibHeader() {
    byte[] zlibHeader = {(byte) 0x78, (byte) 0x9c}; // zlib header
    byte[] testData = {0x00, 0x01, 0x02, 0x03}; // some test data
    InputStream inputStream = new ByteArrayInputStream(Arrays.concat(zlibHeader, testData));

    try {
        CompressorStreamFactory.createCompressorInputStream(inputStream);
        fail("Expected CompressorException for zlib header");
    } catch (CompressorException e) {
        // expected
    }
}