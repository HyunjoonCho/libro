public void testThreadLocalLeak() {
    // Arrange
    ToStringStyle style = ToStringStyle.SHORT_PREFIX_STYLE;

    // Act
    Runtime.getRuntime().gc();
    long initialMem = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();

    // Simulate webapp reload by triggering loading of ToStringStyle
    String s = style.toString();

    // Assert
    Runtime.getRuntime().gc();
    long finalMem = ManagementFactory.getMemoryMXBean().getHeapMemoryUsage().getUsed();
    assertTrue("ThreadLocal in ToStringStyle is not cleaned up properly, causing memory leak", finalMem > initialMem);
}