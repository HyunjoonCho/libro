public void testArbitraryRemoteCodeExecution() throws Exception {
    Collection invokerTransformer = new InvokerTransformer(new Runnable() {
        @Override
        public void run() {
            System.out.println("Hello, arbitrary remote code execution!");
        }
    });
    ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("invoker.ser"));
    out.writeObject(invokerTransformer);
    out.close();
    ObjectInputStream in = new ObjectInputStream(new FileInputStream("invoker.ser"));
    Collection transformed = (Collection) in.readObject();
    in.close();
    transformed.iterator().next(); // Trigger remote code execution
}