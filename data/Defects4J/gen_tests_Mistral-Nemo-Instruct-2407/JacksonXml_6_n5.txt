public void testToXmlGeneratorWriteBinaryInputStream() throws Exception {
    ToXMLGenerator gen = new ToXMLGenerator(new StringWriter());
    gen.writeStartObject();
    gen.writeFieldName("binary");
    InputStream is = new ByteArrayInputStream(new byte[]{1, 2, 3});
    gen.writeBinary(Base64Variants.getDefaultVariant(), is, 3);
    gen.writeEndObject();
    gen.close();
    assertTrue(gen.getOutputTarget().toString().contains("binary":"dQ==\""));
}