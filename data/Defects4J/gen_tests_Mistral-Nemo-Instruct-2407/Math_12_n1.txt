public void testGammaDistributionCloning() throws Exception {
    GammaDistribution original = new GammaDistribution(1.0, 1.0);
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bos);
    oos.writeObject(original);
    oos.close();

    ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bos.toByteArray()));
    GammaDistribution cloned = (GammaDistribution) ois.readObject();

    assertEquals(original.getShape(), cloned.getShape(), 0.001);
    assertEquals(original.getScale(), cloned.getScale(), 0.001);

    for (int i = 0; i < 1000; i++) {
        assertEquals(original.nextValue(), cloned.nextValue(), 0.001);
    }
}