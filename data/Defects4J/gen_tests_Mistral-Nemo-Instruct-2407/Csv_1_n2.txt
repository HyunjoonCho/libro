public void testEOLHandling() throws IOException {
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader("abc\r\ndef\n"));
    assertEquals("abc", reader.readLine());
    assertEquals("def", reader.readLine());
    assertEquals("", reader.readLine());
    assertEquals(3, reader.getLineCount());
}