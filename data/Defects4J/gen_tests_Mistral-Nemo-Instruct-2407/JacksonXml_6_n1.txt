public void testWriteBinaryInputStream() throws Exception {
    InputStream inputStream = new ByteArrayInputStream(new byte[]{1, 2, 3, 4, 5});
    ToXMLGenerator gen = new ToXMLGenerator(new StringWriter(), XmlMapper.getBinaryType(), null);
    gen.writeBinary(Base64Variants.getDefaultVariant(), inputStream, 5);
    String expected = "<binary>EQ==</binary>";
    assertEquals(expected, gen.getOutputTarget().toString());
}