public void testWriteEmbeddedObjectByteArray() throws Exception {
    JsonGenerator gen = mock(JsonGenerator.class);
    when(gen.writeEmbeddedObject(any())).thenThrow(new UnsupportedOperationException());
    ObjectCodec codec = mock(ObjectCodec.class);
    when(codec.getNodeFactory()).thenReturn(mock(NodeFactory.class));
    gen.setObjectCodec(codec);
    assertThrows(UnsupportedOperationException.class, () -> gen.writeEmbeddedObject(new byte[0]));
}