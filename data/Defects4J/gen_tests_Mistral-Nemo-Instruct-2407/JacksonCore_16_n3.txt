public void testJsonParserSequenceSkipsToken() {
    JsonFactory factory = new JsonFactory();
    JsonParser parser1 = factory.createParser("{\"foo\":1}");
    JsonParser parser2 = factory.createParser("{\"bar\":2}");
    JsonParserSequence sequence = JsonParserSequence.createFlattened(parser1, parser2);

    assertEquals(JsonToken.START_OBJECT, sequence.nextToken());
    assertEquals("foo", sequence.nextFieldName());
    assertEquals(JsonToken.VALUE_NUMBER_INT, sequence.nextToken());
    assertEquals(1, sequence.getIntValue());

    // second parser should start here, but token is skipped
    assertEquals(JsonToken.START_OBJECT, sequence.nextToken());
    assertEquals("bar", sequence.nextFieldName());
    assertEquals(JsonToken.VALUE_NUMBER_INT, sequence.nextToken());
    assertEquals(2, sequence.getIntValue());
}