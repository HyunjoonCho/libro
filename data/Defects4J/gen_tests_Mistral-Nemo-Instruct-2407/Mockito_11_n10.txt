public void testCustomVerificationModeEquals() {
    ArgumentCaptor<Object> captor = ArgumentCaptor.forClass(Object.class);
    when(mock.doSomething(captor.capture())).thenReturn("test");
    mock.doSomething(new Object());
    verify(mock).doSomething(captor.getValue());
    assertEquals(new Object(), captor.getValue()); // This should fail
}