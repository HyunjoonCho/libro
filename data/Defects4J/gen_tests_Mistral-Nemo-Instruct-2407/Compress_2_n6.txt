public void testArDelete() throws Exception {
    try (RandomAccessFile raf = new RandomAccessFile("bla.ar", "rw")) {
        ArchiveEntry entry1 = new ArchiveEntry("test1.xml");
        ArchiveEntry entry2 = new ArchiveEntry("test2.xml");
        raf.writeEntry(entry1, new byte[0]);
        raf.writeEntry(entry2, new byte[0]);

        raf.deleteEntry(entry2);

        ArchiveEntry entry = raf.getNextEntry();
        assertEquals("test1.xml", entry.getName());
        entry = raf.getNextEntry();
        assertNull(entry);

        raf.close();

        // check file with external command
        Process process = Runtime.getRuntime().exec("ar -t bla.ar");
        Scanner scanner = new Scanner(process.getInputStream());
        assertTrue(scanner.hasNext());
        assertEquals("test1.xml", scanner.nextLine());
        assertFalse(scanner.hasNext());
    }
}