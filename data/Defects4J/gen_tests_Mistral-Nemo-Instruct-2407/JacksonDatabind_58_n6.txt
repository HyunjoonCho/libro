public void testJsonIgnoreProperties() {
    MyException ex = new MyException("test");
    ex.initCause(new RuntimeException("cause"));
    ObjectMapper mapper = new ObjectMapper();
    mapper.setVisibility(mapper.getDeserializationConfig().getDefaultVisibilityChecker().withFieldVisibility(JsonAutoDetect.Visibility.ANY));
    try {
        mapper.writeValueAsString(ex);
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }
}