public void testMsgVarError() {
    String code = "var MSG_foo='bar'";
    try {
        // Compile code with advanced optimizations
        assertTrue("Compilation should not fail", closureTool.compile(code, "ADVANCED_OPTIMIZATIONS"));
        fail("Compilation should have failed");
    } catch (AssertionError e) {
        // Expected failure with message "message not initialized using goog.getMsg"
        assertTrue("Error message should contain'message not initialized using goog.getMsg'", e.getMessage().contains("message not initialized using goog.getMsg"));
    }
}