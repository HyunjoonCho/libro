public void testInheritanceNotDetected() {
    try {
        // Given
        String js = "function SuperClass () {}\n" +
                "SuperClass.prototype.CustomMethod = function() {}\n" +
                "function SubClass () {}\n" +
                "SubClass.prototype = new SuperClass();\n" +
                "SubClass.prototype.CustomMethod = function() { this.myProperty = \"value\"; }\n" +
                "window['SubClassInstance'] = new SubClass();";

        // When
        compiler.compile(js, true, true);

        // Then, an exception should be thrown
        fail("Expected compilation to fail due to undetected inheritance");
    } catch (CompilationException e) {
        // Expected behavior
    }
}