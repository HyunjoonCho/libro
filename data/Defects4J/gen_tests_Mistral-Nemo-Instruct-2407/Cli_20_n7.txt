public void testUnrecognizedLongOptionWithStopAtNonOption() {
    Options opts = new Options();
    opts.addRequiredOption("a", "argA", false, "argA");
    opts.addOption("b", "argB", true, "argB");

    CommandLineParser parser = new PosixParser();
    parser.setOptionStopsAtNonOption(true);

    String[] args = {"--zop", "-abfoo"};
    CommandLine cmd = parser.parse(opts, args);

    assertEquals(2, cmd.getParsedOptions().size());
    assertEquals("foo", cmd.getArgs()[0]);
}