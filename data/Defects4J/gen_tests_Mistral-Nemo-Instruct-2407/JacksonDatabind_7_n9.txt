public void testTokenBufferDelegateDeserialization() {
    String json = "{\"a\":1, \"b\":null}";
    TokenBuffer buffer = new TokenBuffer(new JsonFactory());
    buffer.writeFieldName("a");
    buffer.writeNumber(1);
    buffer.writeFieldName("b");
    buffer.writeNull();
    buffer.writeEndObject();

    TokenBuffer delegate = buffer.copyCurrentStructure();
    assertEquals(START_OBJECT, delegate.nextToken());
    assertEquals(FIELD_NAME, delegate.nextToken());
    assertEquals(VALUE_NUMBER_INT, delegate.nextToken());
    assertEquals(FIELD_NAME, delegate.nextToken());
    assertEquals(VALUE_NULL, delegate.nextToken());
    assertEquals(END_OBJECT, delegate.nextToken());
}