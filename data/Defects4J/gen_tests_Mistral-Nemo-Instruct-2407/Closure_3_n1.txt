public void testOptimizationFailsWithVariableInCatchClause() {
    String stackTrace = (String) (new Object() {
        public String getStack() {
            try {
                throw new Error("");
            } catch (Error e) {
                return e.getStackTrace()[0].toString();
            }
        }
    }.getStack());
    assertTrue(stackTrace.contains("testOptimizationFailsWithVariableInCatchClause"));
}