public void testBufferReuse() {
    IOContext ctx = new IOContext(null);
    byte[] buffer1 = new byte[1024];
    byte[] buffer2 = new byte[1024];
    ctx.buffer = buffer1;
    ctx.writeLong(42);
    ctx.buffer = buffer2; // should not throw exception
    ctx.writeLong(42);
}