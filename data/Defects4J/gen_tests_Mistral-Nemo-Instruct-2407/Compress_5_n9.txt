public void testTruncatedZipArchive() throws IOException {
    // create a truncated zip archive
    byte[] truncatedZip = new byte[31];
    // write a valid entry to create a partially valid header
    truncatedZip[0] = 'P';
    truncatedZip[1] = 'K';
    truncatedZip[2] = '\1';
    truncatedZip[3] = '\0';
    // fill the rest of the buffer with zeros to simulate a truncated archive
    System.arraycopy(new byte[28], 0, truncatedZip, 4, 28);

    try (ByteArrayInputStream bis = new ByteArrayInputStream(truncatedZip);
         ZipArchiveInputStream zis = new ZipArchiveInputStream(bis)) {
        // read should throw an IOException for a truncated archive
        assertThrows(IOException.class, () -> zis.read());
    }
}