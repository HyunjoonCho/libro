public void testCrashJS_IllegalStateException() {
    String crashJS = "var test = {};\n" +
            "/**\n" +
            "* @interface\n" +
            "*/\n" +
            "test.T = function() {};\n" +
            "/**\n" +
            "* @constructor\n" +
            "* @implements {test.T}\n" +
            "*/\n" +
            "test.A = function() {};\n" +
            "/**\n" +
            "* @constructor\n" +
            "* @implements {test.T}\n" +
            "*/\n" +
            "test.B = function() {};\n" +
            "/**\n" +
            "* @constructor\n" +
            "*/\n" +
            "test.X = function() { this.type = test.A; this.t = this.f(); };\n" +
            "/**\n" +
            "* @return {test.T}\n" +
            "*/\n" +
            "test.X.prototype.f = function() { if (this.type === test.A) { return new test.A(); } else if (this.type === test.B) { return