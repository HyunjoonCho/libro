public void testCompileDifference() throws Exception {
    String jsCode = "var gfx = document.getElementById('foo');\n"
            + "var b = gfx.parentNode.parentNode;\n"
            + "var c = b.parentNode.parentNode;\n";

    byte[] cmdLineOutput = compile(jsCode, "--js", "test.js");
    byte[] restApiOutput = compile(jsCode, "// ==ClosureCompiler==\n"
            + "// @compilation_level SIMPLE_OPTIMIZATIONS\n"
            + "// @output_file_name default.js\n"
            + "// ==/ClosureCompiler==\n");

    assertNotEquals(new String(cmdLineOutput), new String(restApiOutput));
    assertTrue(new String(restApiOutput).contains("if(b){if(a=b.parentNode.parentNode,b=a.parentNode.parentNode,null!==b)"));
    assertTrue(new String(cmdLineOutput).contains("var b=a=a.parentNode.parentNode;"));
}