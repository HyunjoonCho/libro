public void testVersionNeededToExtractMismatch() {
    ZipArchiveOutputStream zaos = new ZipArchiveOutputStream(new BufferedOutputStream(new ByteArrayOutputStream()));
    zaos.setLevel(Deflater.BEST_SPEED);
    zaos.putArchiveEntry(new ZipArchiveEntry("test.txt"));
    zaos.write( new byte[]{'t', 'e','s', 't'});
    zaos.closeArchiveEntry();
    zaos.close();

    byte[] bytes = ((ByteArrayOutputStream) zaos.getBAOS()).toByteArray();
    int localVersion = bytes[10] & 0xFF | ((bytes[11] & 0xFF) << 8);
    int centralDirectoryVersion = bytes[42] & 0xFF | ((bytes[43] & 0xFF) << 8);

    assertEquals(centralDirectoryVersion, localVersion);
}