public void testJsonParserSequenceSkipsToken() {
    JsonParser parser1 = mock(JsonParser.class);
    JsonParser parser2 = mock(JsonParser.class);

    when(parser1.nextToken()).thenReturn(Token.END_ARRAY);
    when(parser2.nextToken()).thenReturn(Token.START_OBJECT).thenReturn(Token.END_OBJECT);

    JsonParserSequence sequence = JsonParserSequence.createFlattened(parser1, parser2);

    assertEquals(Token.END_ARRAY, sequence.nextToken());
    assertEquals(Token.START_OBJECT, sequence.nextToken());
    assertEquals(Token.END_OBJECT, sequence.nextToken());
}