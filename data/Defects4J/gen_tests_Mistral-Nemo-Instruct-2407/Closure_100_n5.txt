public void testThisAnnotationWarning() {
    String code = "/*@constructor*/function Foo(){this._bar = null;}/*@this {Foo}*/function writeMethodWithAnnotation(){this._bar = 123;}/*@this {Foo}*/function readMethodWithAnnotation(){return this._bar;}function writeMethodWithoutAnnotation(){this._bar = 123;}function readMethodWithoutAnnotation(){return this._bar;}";
    assertEquals(1, compiler.getWarnings(code).size());
    assertTrue(compiler.getWarnings(code).get(0).getMessage().contains("dangerous use of the global this object"));
}