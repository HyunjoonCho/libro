public void testFastDateFormatSerialization() throws Exception {
    FastDateFormat fmt = FastDateFormat.getInstance("yyyy-MM-dd");
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream out = new ObjectOutputStream(bos);
    out.writeObject(fmt);
    out.close();

    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    ObjectInputStream in = new ObjectInputStream(bis);
    FastDateFormat fmt2 = (FastDateFormat) in.readObject();
    in.close();

    assertNotSame(fmt, fmt2);
    assertEquals(fmt.getPattern(), fmt2.getPattern());
}