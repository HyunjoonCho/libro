public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    compiler.getOptions().setClosurePass(false);
    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    compiler.compile("/*#sourceURL=test.js*/goog.require('dependency');");
    compiler.compile("/*#sourceURL=dependency.js*/goog.provide('dependency');");
    String output = compiler.toString();
    assertTrue(output.contains("dependency.js"), "Dependent files are not sorted and concatenated in their dependent order.");
}