public void testCompilerCrashOnGoogScopeLocals() {
    try {
        String code = "goog.provide(\"main\");\n" +
                "goog.scope(function (){\n" +
                "  var a = foo, b, c = 1;\n" +
                "});";
        assertEquals("", compiler.compile(code));
        fail("Expected compiler to crash");
    } catch (Throwable t) {
        // expected
    }
}