public void testToXMLGeneratorWriteBinaryInputStream() throws Exception {
    ToXMLGenerator gen = new ToXMLGenerator(new OutputStreamWriter(System.out), JSONFactory.createJsonFactory());
    gen.writeStartObject();
    ByteArrayInputStream is = new ByteArrayInputStream("hello, world".getBytes());
    gen.writeBinary(Base64Variants.getDefaultVariant(), is, 13);
    gen.writeEndObject();
    gen.close();
    String output = System.out.toString().trim();
    assertTrue(output.contains("<binary>"));
    assertTrue(output.contains("aGVsbG8sIHdvcmxk"));
}