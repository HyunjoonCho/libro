public void testEOLHandling() throws IOException {
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader("test\r\nnext\rtest\r"));
    assertEquals("test", reader.readLine());
    assertEquals("next", reader.readLine());
    assertEquals(2, reader.getLineCount());
    assertEquals("test", reader.readLine());
    assertEquals(3, reader.getLineCount());
}