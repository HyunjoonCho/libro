public void testEbeMultiplyWithNanInfinity() {
    RealVector v = new OpenMapRealVector(new double[] { Double.NaN, 2.0, Double.POSITIVE_INFINITY, 4.0 });
    RealVector w = new OpenMapRealVector(new double[] { 5.0, 6.0, 7.0, 8.0 });
    RealVector result = v.ebeMultiply(w);
    assertTrue(Double.isNaN(result.getEntry(0)));
    assertEquals(120.0, result.getEntry(1), 0.0);
    assertTrue(Double.isNaN(result.getEntry(2)));
    assertEquals(320.0, result.getEntry(3), 0.0);
}