public void testJsonIdentityInfoForwardReferences() throws JsonProcessingException {
    String json = "{\"@type\":\"com.example.Person\",\"name\":\"John\",\"pets\":[{\"@type\":\"com.example.Pet\",\"name\":\"Fluffy\"}]}";
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);
    mapper.addMixIn(Pet.class, PetMixIn.class);
    Person person = mapper.readValue(json, Person.class);
    assertEquals("John", person.getName());
    assertEquals(1, person.getPets().size());
    assertEquals("Fluffy", person.getPets().get(0).getName());
}