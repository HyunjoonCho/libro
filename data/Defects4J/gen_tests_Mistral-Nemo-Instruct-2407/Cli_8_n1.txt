public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    List<String> options = new ArrayList<>();
    options.add("long-option");
    options.add("A very long description that should wrap correctly but does not");
    String[] args = {"-h"};
    PrintWriter writer = new PrintWriter(new OutputStreamWriter(new ByteArrayOutputStream()));
    formatter.printHelp("program", options.toArray(new String[0]), args, null, true, writer);
    writer.flush();
    String output = ((ByteArrayOutputStream) writer.getOutputStream()).toString();
    assertTrue(output.contains("long-option"));
    assertFalse(output.contains("A very long description that should wrap correctly but does not"));
}