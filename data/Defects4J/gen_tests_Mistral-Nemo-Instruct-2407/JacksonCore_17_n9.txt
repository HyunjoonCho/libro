public void testJsonGenerationExceptionWithSurrogate() {
    String json = "{\"msg\": \"xxxxxxxxxxxxxxxxxxxxxxxxx\"}";
    try (JsonFactory jsonFactory = new JsonFactory()) {
        JsonGenerator jsonGenerator = jsonFactory.createJsonGenerator(new ByteArrayOutputStream());
        jsonGenerator.writeStartObject();
        jsonGenerator.writeStringField("msg", json);
        jsonGenerator.writeEndObject();
        jsonGenerator.close();
    } catch (IOException e) {
        // expected exception
    }
}