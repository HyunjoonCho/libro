public void testMultiKeySubclassDeserialization() throws IOException, ClassNotFoundException {
    class MultiKey2<A, B> extends MultiKey<A, B> {
        private static final long serialVersionUID = 1L;

        public MultiKey2(A key1, B key2) {
            super(key1, key2);
        }
    }

    MultiKey2<String, String> original = new MultiKey2<>("key1", "key2");
    try (ByteArrayOutputStream bos = new ByteArrayOutputStream();
         ObjectOutputStream out = new ObjectOutputStream(bos)) {
        out.writeObject(original);
    }

    try (ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
         ObjectInputStream in = new ObjectInputStream(bis)) {
        MultiKey2<String, String> deserialized = (MultiKey2<String, String>) in.readObject();
        assertEquals(original.hashCode(), deserialized.hashCode());
    }
}