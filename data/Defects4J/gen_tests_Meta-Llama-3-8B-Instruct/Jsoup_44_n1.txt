java
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

import java.io.File;
import java.io.IOException;
import java.net.URL;

import static org.junit.Assert.assertTrue;

@RunWith(Parameterized.class)
public class JsoupTableTest {

    @Parameters
    public static Iterable<Object[]> data() {
        return Arrays.asList(new Object[][]{
                {"/htmltests/table-invalid-elements-before.html", "/htmltests/table-invalid-elements-after.html"}
        });
    }

    private String beforeFile;
    private String afterFile;

    public JsoupTableTest(String beforeFile, String afterFile) {
        this.beforeFile = beforeFile;
        this.afterFile = afterFile;
    }

    @Test
    public void testInvalidTableContents() throws IOException {
        File beforeFile = new File(beforeFile);
        File afterFile = new File(afterFile);
        Document beforeDoc = Jsoup.parse(beforeFile, "UTF-8");
        Document afterDoc = Jsoup.parse(afterFile, "UTF-8");

        String beforeRendered = beforeDoc.toString();
        String afterRendered = afterDoc.toString();

        int endOfEmail = beforeRendered.indexOf("Comment");
        int guarantee = afterRendered.indexOf("Why am I here?");
        assertTrue("Comment not found", endOfEmail > -1);
        assertTrue("Search text not found", guarantee > -1);
        assertTrue("Search text did not come after comment", guarantee > endOfEmail);
    }
}
