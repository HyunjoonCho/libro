
public void testDeserializeExternalTypeIdBeforePojo() throws IOException, JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    ObjectWriter writer = mapper.writer();
    String json = "{\"@type\":\"com.example.ExternalTypeId\",\"foo\":\"bar\"}";
    String jsonWithPojo = "{\"foo\":\"bar\",\"@type\":\"com.example.ExternalTypeId\"}";
    
    String pojoJson = writer.writeValueAsString(new Pojo());
    json += "," + pojoJson;
    
    String expectedJson = "{\"@type\":\"com.example.ExternalTypeId\",\"foo\":\"bar\",\"@class\":\"com.example.Pojo\"}";
    assertEquals(expectedJson, jsonWithPojo);
}
