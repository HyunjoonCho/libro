public void testBase64InputStreamNullPointerException() {
    byte[] input = new byte[1024];
    Base64InputStream base64InputStream = new Base64InputStream(new ByteArrayInputStream(input));
    base64InputStream.read(input);
    base64InputStream.close();
    byte[] buffer = new byte[1024];
    base64InputStream = new Base64InputStream(new ByteArrayInputStream(input));
    buffer[0] = -1; // simulate EOF
    try {
        base64InputStream.read(buffer);
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}