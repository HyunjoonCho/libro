
import org.junit.Test;
import java.util.ArrayList;
import java.util.List;

public class NestedNonWrappedListDeserializationTest {
    @Test
    public void testDeserializationOfNestedNonWrappedLists() {
        // Create a POJO with an unwrapped list of Records
        Record record1 = new Record();
        record1.setFields(new ArrayList<>());

        Record record2 = new Record();
        record2.setFields(new ArrayList<>());

        List<Record> records = new ArrayList<>();
        records.add(record1);
        records.add(record2);

        // Create a POJO with an unwrapped list of Records
        Definition definition = new Definition();
        definition.setRecords(records);

        // Expected result
        List<Record> expectedRecords = new ArrayList<>();
        expectedRecords.add(record1);
        expectedRecords.add(record2);

        // Act
        // Your deserialization logic here
        // For example, using Jackson:
        String json = "{\"definition\":{\"records\":[{\"fields\":[]},{\"fields\":[]}]}}";
        Definition deserializedDefinition = new ObjectMapper().readValue(json, Definition.class);

        // Assert
        assertEquals(expectedRecords, deserializedDefinition.getRecords());
    }
}
