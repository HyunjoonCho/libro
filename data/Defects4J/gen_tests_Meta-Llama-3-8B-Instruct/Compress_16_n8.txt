public void testTarDetection() {
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    InputStream stream = new ByteArrayInputStream(new byte[] {(byte) 0x74, (byte) 0x68, (byte) 0x65, (byte) 0x61, (byte) 0x72});
    Metadata metadata = factory.detect(stream);
    assertEquals("application/x-tar", metadata.get("Content-Type"));
}