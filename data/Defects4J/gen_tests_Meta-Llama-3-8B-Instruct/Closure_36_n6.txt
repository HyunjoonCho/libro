public void testAddSingletonGetter() {
    // Arrange
    String code = "goog.provide('foo');\n" +
            "var foo = function() { this.values = []; };\n" +
            "goog.addSingletonGetter(foo);\n" +
            "foo.prototype.add = function(value) {this.values.push(value)};\n";

    // Act
    ClosureCompiler compiler = new ClosureCompiler();
    compiler.compile(code);

    // Assert
    String compiledCode = compiler.getCompiledCode();
    assertNotEquals("The code is completely removed.", compiledCode);
}