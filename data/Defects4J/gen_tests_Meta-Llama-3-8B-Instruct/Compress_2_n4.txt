public void testArDeletion() throws Exception {
    // Create an archive and add two files
    File archive = new File("bla.ar");
    ArchiveArchive ar = new ArchiveArchive(archive);
    ar.create();
    ar.addFile("test1.xml");
    ar.addFile("test2.xml");

    // Delete the second file
    ar.delete("test2.xml");

    // Check that getNextEntry returns the first file
    ArchiveEntry entry = ar.getNextEntry();
    assertEquals("test1.xml", entry.getName());

    // Check that the second file is still present
    entry = ar.getNextEntry();
    assertNotNull(entry);
    assertEquals("test2.xml", entry.getName());

    // Check that the delete operation failed
    // (ar -t should still show the second file)
    // (vi should still show the second file)
}