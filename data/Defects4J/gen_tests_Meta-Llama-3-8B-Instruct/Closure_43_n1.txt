
public class LendsTest {
    public void testLendsDoesNotWorkUnlessClassIsDefinedBeforehand() {
        // Enable advanced optimizations and type checking
        JSDocCompiler compiler = new JSDocCompiler("--jscomp_error=checkTypes");

        // Define a class
        compiler.addFile("myClass.js", "function MyClass() {}");

        // Try to use @lends without defining the class beforehand
        String code = "@lends MyClass\n" +
                       "function makeClass() {\n" +
                       "    return this;\n" +
                       "};";
        try {
            compiler.compile(code);
            fail("Expected compile error");
        } catch (JSDocCompilationError e) {
            assertEquals("Variable MyClass.prototype not declared before @lends annotation.", e.getMessage());
        }
    }
}
