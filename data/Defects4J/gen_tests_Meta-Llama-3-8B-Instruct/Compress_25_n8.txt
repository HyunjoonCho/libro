public void testZipReadFailure() throws Exception {
    ByteArrayInputStream bin = new ByteArrayInputStream(zip);
    ZipArchiveInputStream in = new ZipArchiveInputStream(bin);
    ZipArchiveEntry entry = in.getNextZipEntry();
    assertEquals("test.txt", entry.getName());
    byte[] buf = new byte[(int) entry.getSize()];
    in.read(buf);
    String expected = "data";
    String actual = new String(buf, 0, buf.length);
    assertEquals(expected, actual);
}