java
import org.junit.Test;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;

public class TestEcmascript5Strict {
    @Test
    public void testEcmascript5Strict() throws Exception {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setLanguageIn("ECMASCRIPT5_STRICT");
        options.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
        options.setWarningLevel(CompilerOptions.WarningLevel.VERBOSE);

        String source = "var getNum = function() { return 5; };\n" +
                "alert(getNum());";
        String[] sources = new String[] {"get_num.js", source};

        Result result = compiler.compile(sources, options);
        String compiledCode = result.getOutput();

        // Expect the compiled code to include 'use strict'
        // But the actual output will contain 'use strict' for each file
        // So the test will fail
        //...
    }
}
