java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.PrintStream;

import static org.junit.Assert.assertEquals;

@RunWith(JUnit4.class)
public class CompilerTest {
    @Test
    public void testClosureCompiler() throws IOException {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setOutputFile("default.js");

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        System.setOut(new PrintStream(out));

        SourceFile sourceFile = SourceFile.fromSource("var foreignObject = gfx.parentNode.parentNode;" +
                "var parentContainer = foreignObject.parentNode.parentNode;");
        compiler.compile(sourceFile, options);

        String output = out.toString();
        assertEquals("if (b) { if (a = b.parentNode.parentNode, b = a.parentNode.parentNode, null!== b) ", output.trim());
    }
}
