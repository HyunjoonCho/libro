java
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

public class FilteringParserDelegateTest {

    @Test
    public void testFilteringParserDelegateMissingLastClosingEndElement() throws IOException {
        String json = "{\"a\":123,\"array\":[1,2],\"ob\":{\"value0\":2,\"value\":3,\"value2\":4},\"b\":true}";
        ObjectMapper mapper = new ObjectMapper();
        JsonParser p = mapper.getFactory().createParser(json);
        JsonParser filteringParser = new FilteringParserDelegate(p, new NameMatchFilter("value"), true, false);
        ObjectNode result = (ObjectNode) mapper.readTree(filteringParser);
        assertNotNull(result);
        assertEquals("{\"ob\":{\"value\":3}}", result.toString());
    }
}
