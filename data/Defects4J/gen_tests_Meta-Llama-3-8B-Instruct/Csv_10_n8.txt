public void testCSVFormatWithHeader() {
    String expected = "x\n42";
    try (Writer writer = new StringWriter()) {
        CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(writer);
        csvPrinter.printRecord(42);
        csvPrinter.close();
        assertEquals(expected, writer.toString());
    }
}