
public void testCSVFormatWithHeader() throws IOException {
    String expectedOutput = "x\n42";
    File file = File.createTempFile("data", ".csv");
    CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(Files.newBufferedWriter(file.toPath()));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    String actualOutput = Files.readString(file.toPath());
    assertEquals(expectedOutput, actualOutput);
}
