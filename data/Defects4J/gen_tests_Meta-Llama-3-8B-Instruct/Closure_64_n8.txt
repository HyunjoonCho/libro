java
import org.junit.Test;
import org.junit.runner.RunWith;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerInput;
import com.google.javascript.jscomp.OutputOptions;
import com.google.javascript.jscomp.ProcessingUnit;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.PrintStream;

import static org.junit.Assert.assertEquals;

@RunWith(org.junit.runners.JUnit4.class)
public class CompilerTest {
    @Test
    public void testEcmascript5StrictMode() throws IOException {
        Compiler compiler = new Compiler();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        PrintStream originalOut = System.out;
        System.setOut(new PrintStream(out));

        CompilerInput input = compiler.createCompilerInput();
        input.addSource("get_num.js", "var getNum = function() { return 5; };");
        input.addSource("alert.js", "alert(getNum());");

        OutputOptions options = new OutputOptions();
        options.setLanguageIn("ECMASCRIPT5_STRICT");
        options.setCompilationLevel("ADVANCED_OPTIMIZATIONS");
        options.setWarningLevel("VERBOSE");

        ProcessingUnit pu = compiler.compile(input, options);
        String output = out.toString();

        String expectedOutput = "'use strict';alert(5);";
        assertEquals(expectedOutput, output);

        System.setOut(originalOut);
    }
}
