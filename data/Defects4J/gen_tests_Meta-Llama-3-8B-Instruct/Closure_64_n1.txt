
public void testIssueLanguageInECMAScript5Strict() throws IOException {
    String getNumJs = "var getNum = function() { return 5; };";
    String alertJs = "alert(getNum());";
    File getNumFile = new File("get_num.js");
    File alertFile = new File("alert.js");
    try (PrintWriter writer = new PrintWriter(getNumFile)) {
        writer.println(getNumJs);
    }
    try (PrintWriter writer = new PrintWriter(alertFile)) {
        writer.println(alertJs);
    }
    Process process = new ProcessBuilder("java", "-jar", "compiler.jar", "--language_in=ECMASCRIPT5_STRICT", "--compilation_level=ADVANCED_OPTIMIZATIONS", "--warning_level=VERBOSE", "--js", getNumFile.getAbsolutePath(), "--js", alertFile.getAbsolutePath())
           .redirectOutput(new File("output.js"))
           .start();
    process.waitFor();
    String output = new String(Files.readAllBytes(Paths.get("output.js")));
    assertEquals("use strict';alert(5);", output);
}
