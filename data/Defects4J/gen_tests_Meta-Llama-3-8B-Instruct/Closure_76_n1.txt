public void testAssignmentsWithinConditions() {
    final Compiler compiler = new Compiler();
    CompilerOptions options = CompilerOptions.create();
    options.setWarningAsError(false);
    Compilation compilation = compiler.compile("function reduction() {\n" +
            "  var a, b;\n" +
            "  if (echo(b = true) || echo(b = false))\n" +
            "    a = b;\n" +
            "  else\n" +
            "    a = null;\n" +
            "  return a;\n" +
            "}", options);
    String compiledCode = compilation.getCode();
    System.out.println(compiledCode);
    Assert.assertFalse(compiledCode.contains("var b;"));
}