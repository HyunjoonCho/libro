java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import au.com.bytecode.opencsv.CSVParser;
import au.com.bytecode.opencsv.CSVFormat;
import au.com.bytecode.opencsv.CSVRecord;

@RunWith(JUnit4.class)
public class CSVRecordTest {

    @Test(expected = ArrayIndexOutOfBoundsException.class)
    public void testInvalidHeaderTooLong() throws Exception {
        final CSVParser parser = new CSVParser("a,b", CSVFormat.newBuilder().withHeader("A", "B", "C", "D").build());
        final CSVRecord record = parser.iterator().next();
        record.get("C");
    }
}
