
public void testJsonWriterValue() throws Exception {
    JsonWriter jsonWriter = new JsonWriter(new StringWriter());
    jsonWriter.setLenient(true);
    jsonWriter.value(Double.valueOf(Double.NaN));
    jsonWriter.close();

    String json = new String(jsonWriter.getBuffer().toString());
    // Verify that the JSON string contains "NaN" and not "null" or "Infinity"
    assertTrue(json.contains("NaN"));
}
