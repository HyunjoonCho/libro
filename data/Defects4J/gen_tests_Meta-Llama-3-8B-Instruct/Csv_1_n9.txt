public void testExtendedBufferReader() {
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader("abc\r\ndef\r"));
    int line1 = reader.readLine();
    assertEquals("abc", new String(line1, 0, line1.length));
    assertEquals(1, reader.getLineCount());
    int line2 = reader.readLine();
    assertEquals("def", new String(line2, 0, line2.length));
    assertEquals(2, reader.getLineCount());
}