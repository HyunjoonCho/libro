public void testDangerousUseOfThis() {
    String output = new Compiler().compile("/** @constructor */ function Foo() { this._bar = null; }; " +
            "function writeMethodWithAnnotation() { this._bar = 123; } " +
            "function readMethodWithAnnotation() { return this._bar; } " +
            "function writeMethodWithoutAnnotation() { this._bar = 123; } " +
            "function readMethodWithoutAnnotation() { return this._bar; }");
    assert output.contains("warning: dangerous use of the global this object");
    assert!output.contains("dangerous use of the global this object: readMethodWithAnnotation");
}