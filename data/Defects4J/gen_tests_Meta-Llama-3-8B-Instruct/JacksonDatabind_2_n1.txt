
public void testSerializationToTree() throws IOException {
    X<String> x = new X<>();
    x.s = "test";
    x.items = Arrays.asList("item1", "item2");

    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializerProvider(new SimpleSerializers(new ListAttributeSerializer()));
    ObjectWriter writer = mapper.writer().withRootName("root");
    String json = writer.writeValueAsString(x);

    JsonNode tree = mapper.readTree(json);
    assertEquals("test", tree.get("s").asText());
    assertEquals(2, tree.get("items").size());
    assertEquals("item1", tree.get("items").get(0).asText());
    assertEquals("item2", tree.get("items").get(1).asText());
}
