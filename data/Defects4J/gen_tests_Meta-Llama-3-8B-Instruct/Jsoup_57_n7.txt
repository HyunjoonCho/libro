
public void testRemoveIgnoreCaseConcurrentModificationException() {
    Element element = new Element("abc");
    element.setAttribute("attr1", "value1");
    element.setAttribute("attr2", "value2");
    element.select("abc");
    List<Attribute> attributes = element.attributes();
    Iterator<Attribute> iterator = attributes.iterator();
    while (iterator.hasNext()) {
        Attribute attribute = iterator.next();
        if (attribute.getKey().equalsIgnoreCase("attr1") || attribute.getKey().equalsIgnoreCase("attr2")) {
            iterator.remove();
        }
    }
    // Check that the expected attributes are removed
    assertFalse(attributes.contains(new Attribute("attr1", "value1")));
    assertFalse(attributes.contains(new Attribute("attr2", "value2")));
}
