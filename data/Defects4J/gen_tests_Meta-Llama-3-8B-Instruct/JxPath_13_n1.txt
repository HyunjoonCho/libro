public void testIncompleteHandlingOfUndefinedNamespaces() {
    NamespaceContext namespaceContext = new NamespaceContext();
    namespaceContext.registerNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance");
    namespaceContext.registerNamespace("A", "http://example.com/A");
    namespaceContext.registerNamespace("B", "http://example.com/B");

    Document document = new Document();
    Element elementA = document.createElement("ElementA");
    elementA.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance", "xsi:type", "Mytype");
    elementA.setAttributeNS("http://example.com/A", "A:myAttr", "MyValue");
    Element elementB = document.createElement("B:ElementB");
    elementB.setTextContent("MY VALUE");
    elementA.appendChild(elementB);

    try {
        DOMNodePointer.createAttribute(elementA, "A:myAttr");
    } catch (DOMException e) {
        fail("Expected no exception, but got: " + e.getMessage());
    }
}