java
import org.junit.Test;
import com.google.gwt.core.client.GWT;

public class TestSingletonGetter {
    @Test
    public void testSingletonGetter() {
        final class Foo {
            private static Foo instance;
            public static Foo getInstance() {
                if (instance == null) {
                    instance = new Foo();
                }
                return instance;
            }
            public void add(int value) {
                // do nothing
            }
        }
        GWT.addSingletonGetter(Foo.class);
        // expected: Foo should be removed by compiler
        // instead: Foo is preserved
    }
}
