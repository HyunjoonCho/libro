java
@Test
public void testDateTimeSerializerBaseContextualFormat() throws Exception {
    // Given
    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
    ObjectMapper mapper = new ObjectMapper();
    mapper.setDateFormat(format);

    // When
    DateTimeSerializerBase serializer = mapper.getSerializerProvider().serializerInstance(
        Date.class, TypeFactory.defaultInstance(mapper).constructType(Date.class));
    DateTimeSerializerBase contextualSerializer = serializer.createContextual(mapper, null);

    // Then
    assertEquals(StdDateFormat.DATE_FORMAT_STR_ISO8601, contextualSerializer.getDateFormat().toPattern());
}
