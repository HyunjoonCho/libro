public void testResettingDefaultNamespaceCausesEndlessLoop() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.newDocument();
    Element foo = doc.createElementNS("bla", "b:foo");
    foo.setAttribute("xmlns:b", "bla");
    foo.setAttribute("xmlns", "test111");
    Element bar = doc.createElementNS("bla", "b:bar");
    bar.setTextContent("a");
    foo.appendChild(bar);
    Element test = doc.createElement("test");
    foo.appendChild(test);
    doc.appendChild(foo);
    NodePointer nodePointer = new DOMNodePointer(doc, foo, test);
    String actual = nodePointer.asPath();
    // The actual output will be an endless loop, this test will fail
}