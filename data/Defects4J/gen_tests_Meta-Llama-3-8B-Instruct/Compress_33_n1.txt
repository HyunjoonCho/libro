
public void testCompressorStreamFactory() throws IOException {
    // Create a test file with a zlib header
    byte[] header = new byte[] {(byte) 0x78, (byte) 0x01, (byte) 0x00, (byte) 0x00};
    byte[] data =...; // add your test data here
    byte[] compressedData = new byte[header.length + data.length];
    System.arraycopy(header, 0, compressedData, 0, header.length);
    System.arraycopy(data, 0, compressedData, header.length, data.length);

    // Try to create a compressor input stream
    CompressorStreamFactory factory = new CompressorStreamFactory();
    try {
        CompressorInputStream cis = factory.createCompressorInputStream(new ByteArrayInputStream(compressedData));
        fail("Expected CompressorException");
    } catch (CompressorException e) {
        // expected
    }
}
