java
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.IOException;

import static org.junit.Assert.assertThrows;

public class TarArchiveTest {

    @Test
    public void testLongDirectoryName() throws IOException {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        TarArchiveOutputStream tarArchiveOutputStream = new TarArchiveOutputStream(bos);
        tarArchiveOutputStream.putArchiveEntry(new TarArchiveEntry("PaxHeaders.X/layers/openstreetmap__osm.disy.net/.tiles/1.0.0/openstreetmap__osm.disy.net/default/"));
        tarArchiveOutputStream.close();
        // assert the exception is thrown
        assertThrows(IOException.class, () -> {
            tarArchiveOutputStream.write();
        });
    }
}
