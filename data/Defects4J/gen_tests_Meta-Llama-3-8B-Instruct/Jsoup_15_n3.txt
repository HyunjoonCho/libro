
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.parser.Parser;

public void testJsoupParsingIssue() {
    String html = "<HTML>\n" +
            "  <body>\n" +
            "   <div class=vsc sig=Uga>\n" +
            "    <div class=before></div>\n" +
            "    <script type=\"text/javascript\">\n" +
            "     header = jQuery('#header_features');\n" +
            "     if(header.length){\n" +
            "      header\n" +
            "      .prepend('<a class=\"prevPage browse left \" />')\n" +
            "      .append('<a class=\"nextPage browse right\" />');\n" +
            "      items\n" +
            "      .wrapAll('<div class=\"scrollable\"/>')\n" +
            "      .wrapAll('<ul class=\"items\"/>')\n" +
            "      .wrap('<li/>');\n" +
            "     }\n" +
            "     </script>\n" +
            "     <div class=after></div>\n" +
            "    </div>\n" +
            "   </div>\n" +
            "  </body>\n" +
            "</HTML>";

    Document doc = Jsoup.parse(html, "", Parser.htmlParser());
    Element script = doc.select("script").first();
    assertEquals("text/javascript", script.attr("type"));
    String scriptText = script.text();
    // assert the script content is as expected
}
