public void testAssignmentsWithinConditions() {
    final Compiler compiler = new Compiler();
    String originalCode = "function reduction() { var a, b; if (echo(b = true) || echo(b = false)) a = b; else a = null; return a; }";
    String compiledCode = compiler.compile(originalCode);
    assertEquals("var a, b; if (echo(b = true) || echo(b = false)) a = b; else a = null; return a;", originalCode);
    assertEquals("function reduction() { var a; return echo(true) || echo(a = false)? a: null }", compiledCode);
}