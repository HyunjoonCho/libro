
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.powermock.core.classloader.annotations.PowerMockIgnore;
import org.powermock.core.classloader.annotations.PowerMockRunner;
import org.powermock.modules.junit4.PowerMockRunnerDelegate;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import java.lang.reflect.Modifier;

import static org.junit.Assert.assertEquals;

@RunWith(PowerMockRunner.class)
@PowerMockRunnerDelegate(JUnit4.class)
@PowerMockIgnore("privateClass")
public class MockitoPackagePrivateClassTest {

    @Test
    public void testMockingPackagePrivateClass() throws Exception {
        // Given
        Class<?> packagePrivateClass = Class.forName("com.example.PackagePrivateClass");
        Class<?> publicClass = packagePrivateClass.getSuperclass();

        // When
        Mockito.mock(packagePrivateClass);

        // Then
        assertEquals(Modifier.PUBLIC, publicClass.getModifiers());
    }
}
