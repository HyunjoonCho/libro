
public void testTreeTraversingParserBase64Variant() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    TreeTraversingParser parser = new TreeTraversingParser(mapper);
    TreeNode node = mapper.createObjectNode();
    node.put("binary", "AQIDBA=="); // base64 encoded byte array
    Base64Variant base64Variant = Base64Variants.UTF8;
    String expectedBinaryValue = "Hello, World!";
    byte[] expectedBytes = expectedBinaryValue.getBytes("UTF-8");
    String binaryValue = new String(parser.getBinaryValue(node, base64Variant));
    assertEquals(expectedBytes, binaryValue.getBytes("UTF-8"));
}
