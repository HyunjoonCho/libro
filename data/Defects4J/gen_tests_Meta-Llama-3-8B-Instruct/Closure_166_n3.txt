public void testAnonymousObjectTypeInference() {
    String[] expected = {"a"};
    func(new Record("a"));
    func2("a");
    try {
        func2(new Record("a"));
        fail("Expected TypeError");
    } catch (TypeError e) {
        // expected
    }
}

class Record {
    public final String prop;

    public Record(String prop) {
        this.prop = prop;
    }
}