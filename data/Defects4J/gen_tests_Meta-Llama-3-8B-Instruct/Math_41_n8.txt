
public void testVarianceEvaluate() {
    double[] values = {1, 2, 3, 4, 5};
    double[] weights = {1, 2, 3, 4, 5};
    double mean = 3;
    
    // Test with full array
    double[] fullArray = new double[values.length];
    System.arraycopy(values, 0, fullArray, 0, values.length);
    Variance variance = new Variance();
    double fullResult = variance.evaluate(fullArray, weights, mean, 0, values.length);
    double expectedFullResult = 0.6666666666666666; // calculate manually
    assertEquals(expectedFullResult, fullResult, 0.0001);
    
    // Test with subset of array
    double[] subsetArray = new double[2];
    System.arraycopy(values, 0, subsetArray, 0, 2);
    double subsetResult = variance.evaluate(subsetArray, weights, mean, 0, 2);
    double expectedSubsetResult = 0.5; // calculate manually
    assertEquals(expectedSubsetResult, subsetResult, 0.0001);
}
