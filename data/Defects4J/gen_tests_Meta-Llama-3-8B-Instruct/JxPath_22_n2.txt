public void testResettingDefaultNamespace() {
    // Create a sample XML document
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.newDocument();
    Element root = document.createElementNS("test111", "b:foo");
    root.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:b", "bla");
    root.setAttribute("xmlns", "");
    Element bar = document.createElementNS("bla", "b:bar");
    bar.setTextContent("a");
    root.appendChild(bar);
    Element test = document.createElement("test");
    root.appendChild(test);

    // Set the default namespace to a non-empty value
    root.setNamespaceURI("bla");

    // Get the 'test' node and call asPath()
    NodePointer nodePointer = new DOMNodePointer(root, test);
    String path = nodePointer.asPath();

    // The test should not enter an infinite loop
    // and the path should be correct
    // e.g., "//test"
}