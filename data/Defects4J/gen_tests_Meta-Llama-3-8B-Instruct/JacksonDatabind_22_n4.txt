public void testCustomSerializerNotUsedWithJsonValue() {
    JsonSerializer serializer = new JsonSerializer() {
        @Override
        public void serialize(JsonGenerator jsonGenerator, Object src) throws IOException {
            jsonGenerator.writeString("Custom serialization");
        }
    };
    JacksonModule module = new JacksonModule();
    module.addSerializer(MyObject.class, serializer);
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(module);
    MyObject obj = new MyObject();
    String json = mapper.writeValueAsString(obj);
    assertEquals("Wrong serialization", json);
}