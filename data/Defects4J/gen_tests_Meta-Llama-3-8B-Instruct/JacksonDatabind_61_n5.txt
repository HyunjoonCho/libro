public void testSerializationIssue() throws IOException {
    Map<String, Object> mapData = new HashMap<>();
    mapData.put("longInMap", 2L);
    Data data = new Data();
    data.key = 1;
    mapData.put("longAsField", data);

    JsonFactory factory = new JsonFactory();
    ObjectMapper mapper = new ObjectMapper(factory);
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    String json = mapper.writeValueAsString(mapData);

    assertEquals("{\"longInMap\":2,\"longAsField\":{\"key\":1}}", json);

    Map<String, Object> deserializedData = mapper.readValue(json, Map.class);

    assertEquals(2L, deserializedData.get("longInMap"));
    assertEquals(1, ((Data) deserializedData.get("longAsField")).key);
}