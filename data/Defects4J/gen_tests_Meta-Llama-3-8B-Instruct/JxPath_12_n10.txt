public void testIncompleteNamespaceHandling() {
    NamespaceContext namespaceContext = new NamespaceContext();
    namespaceContext.declareNamespace("A", "http://some.url/A");
    namespaceContext.declareNamespace("B", "http://some.url/B");

    Element elementA = new Element("ElementA");
    elementA.setAttribute("myAttr", "Mytype", "A");

    Element elementB = new Element("ElementB");
    elementB.setText("MY VALUE");

    elementA.addContent(elementB);

    // This should not throw an exception
    elementA.createAttribute("myAttr", "A");
}