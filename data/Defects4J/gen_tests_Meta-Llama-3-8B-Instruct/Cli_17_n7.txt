
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;
import org.junit.Assert;
import org.apache.commons.cli.Option;
import org.apache.commons.cli.PosixParser;

import java.util.List;

@RunWith(JUnit4.class)
public class PosixParserTest {

    @Test
    public void testStopAtNonOption() throws Exception {
        Option a = new Option("a", "optA", true, "Option A");
        Option b = new Option("b", "optB", true, "Option B");

        PosixParser parser = new PosixParser();
        parser.getOptions().addOption(a);
        parser.getOptions().addOption(b);

        String[] args = new String[] {"-azb"};
        List<String[]> options = parser.parse(args);

        Assert.assertEquals(1, options.size());
        String[] option = options.get(0);
        Assert.assertEquals("-a", option[0]);
        Assert.assertEquals("zb", option[1]);
    }
}
