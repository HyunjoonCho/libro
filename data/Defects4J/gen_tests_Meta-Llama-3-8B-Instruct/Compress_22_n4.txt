public void testReadTruncated() {
    // Create a byte array of 770 bytes
    byte[] data = new byte[770];
    // Initialize the stream
    BZip2CompressorInputStream stream = new BZip2CompressorInputStream(new ByteArrayInputStream(data));
    // Set the stream to a position just before the end of the data
    stream.skip(stream.available());
    // Try to read the remaining bytes
    int bytesRead = 0;
    while ((bytesRead = stream.read())!= -1) {
        // Check if the number of bytes read is correct
        assertEquals(1, bytesRead);
    }
    assertEquals(1, bytesRead); // Check that we've read all bytes
}