java
public class TestDeserializationProblemHandler {
    public void testDeserializationWithDeserializationProblemHandler() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        mapper.setDeserializationConfig(mapper.getDeserializationConfig().withDeserializationProblemHandler(new DeserializationProblemHandler() {
            @Override
            public Object handleUnknownTypeId(DeserializationContext ctxt, JavaType type, String typeId, TypeIdResolver typeIdResolver, String errorMessage) throws JsonMappingException {
                return Void.class;
            }
        }));

        String json = "{\"id\": 1, \"type\": \"unknown\"}";
        Object o = mapper.readValue(json, Object.class);

        // This line should not throw NPE
        o.toString();
    }
}
