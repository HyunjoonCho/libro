public void testBase64EncodeFailure() {
    byte[] binaryData = new byte[] {(byte)0, (byte)1, (byte)2, (byte)3, (byte)4, (byte)5, (byte)6, (byte)7, (byte)8, (byte)9};
    try {
        Base64.encodeBase64(binaryData, false, true, 5);
        fail("Expected IAE");
    } catch (IllegalStateException e) {
        // expected
    }
}