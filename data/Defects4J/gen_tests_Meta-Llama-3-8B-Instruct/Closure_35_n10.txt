public void testAssignmentToRecordInConditional() {
    Function function = new Function(
        "function func(a, b) {" +
        "var results;" +
        "if (a) {" +
        "results = {};" +
        "results.prop1 = {a: 3};" +
        "}" +
        "if (b) {" +
        "results = results || {};" +
        "results.prop2 = 'prop2';" +
        "} else {" +
        "results = results || {};" +
        "results.prop3 = 'prop3';" +
        "}" +
        "return results;" +
        "}"
    );
    assertEquals(
        "{\"prop1\":{\"a\":3},\"prop2\":\"prop2\"}",
        function.call(new Object(), true, true).toString()
    );
    assertEquals(
        "{\"prop1\":{\"a\":3},\"prop3\":\"prop3\"}",
        function.call(new Object(), true, false).toString()
    );
    assertEquals(
        "{\"prop2\":\"prop2\"}",
        function.call(new Object(), false, true).toString()
    );
    assertEquals(
        "{\"prop3\":\"prop3\"}",
        function.call(new Object(), false, false).toString()
    );
}