
public void testObjectIdReferenceNotUsedWhenSetupOnClassOnly() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping();

    ReallyAlwaysAsId a = new ReallyAlwaysAsId(13);
    ReallyAlwaysContainer container = new ReallyAlwaysContainer();
    container.a = a;
    container.b = a;

    String json = mapper.writeValueAsString(container);
    assertEquals("{\"a\":{\"$ref\":\"#/.a\"},\"b\":{\"$ref\":\"#/.a\"}}", json);
}
