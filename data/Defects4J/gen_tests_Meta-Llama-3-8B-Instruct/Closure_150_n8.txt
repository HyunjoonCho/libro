java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retargetable;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.reflect.Method;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.fail;

@RunWith(JUnit4.class)
public class TypeCheckerTest {
    @Test
    public void testTypeCheckerMissesAnnotationsOnFunctionsDefinedWithinFunctions() {
        // Define the function
        var ns = new Object();
        ((Object) ((Object) (Object) (() -> {
            ns.a = (b -> {
            }) /* @param {string=} b */;
        }))()).a;

        // Call the function
        ns.a();
        ns.a(123);

        // Check for warnings
        Method method = ns.getClass().getMethod("a");
        assertEquals(1, method.getAnnotation(TypeAnnotation.class).count());
    }
}
