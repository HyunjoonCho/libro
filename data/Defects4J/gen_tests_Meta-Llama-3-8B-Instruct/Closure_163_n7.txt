public void testVarCheckCrashWhenUsingModules() {
    String[] args = new String[] {
        "--compilation_level", "ADVANCED_OPTIMIZATIONS",
        "--formatting", "PRETTY_PRINT",
        "--debug", "--module", "jquery:1", "--module", "core:1:jquery",
        "--module_output_path_prefix", "mod",
        "--js", "src/test/resources/jquery.js", "--js", "src/test/resources/core.js",
        "--externs", "src/test/resources/qunit_externs.js"
    };
    assertEquals("INTERNAL COMPILER ERROR.", runCompiler(args));
}

private String runCompiler(String[] args) {
    // implement the logic to run the compiler with the given args
    // and return the output
}