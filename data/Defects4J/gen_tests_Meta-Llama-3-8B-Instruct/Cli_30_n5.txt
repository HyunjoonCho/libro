public void testOptionGroupStateNotUpdated() {
    Options options = new Options();
    Option a = new Option("a", true);
    Option b = new Option("b", true);
    a.setGroup("group");
    b.setGroup("group");
    a.setRequired(false);
    b.setRequired(false);
    options.addOption(a);
    options.addOption(b);
    CommandLineParser parser = new PosixParser();
    CommandLine cmd = parser.parse(options, new String[] {"-a"}, new Properties());
    assertTrue(cmd.hasOption("a"));
    assertTrue(cmd.hasOption("b"));
}