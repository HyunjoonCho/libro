public void testTarDetection() {
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    InputStream stream = new ByteArrayInputStream("some non-tar content".getBytes());
    ArchiveEntry entry = factory.createArchiveEntry(stream);
    assertNotInstanceOf(TarArchiveEntry.class, entry);
}