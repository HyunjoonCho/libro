public void testCSVFormatWithHeader() {
    CSVFormat tdf = CSVFormat.TDF.withHeader("x");
    CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(Files.newBufferedWriter(Paths.get("data.csv")));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    assertEquals("x\n42", Files.readAllLines(Paths.get("data.csv")).get(0));
}