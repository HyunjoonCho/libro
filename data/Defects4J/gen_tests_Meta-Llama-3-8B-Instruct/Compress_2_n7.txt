
public void testArDeleteIssue() throws IOException {
    // Create an archive with two entries
    Archive archive = new Archive();
    archive.create("bla.ar");
    archive.add("test1.xml");
    archive.add("test2.xml");

    // Delete the second entry
    archive.delete("test2.xml");

    // Check that getNextEntry returns the first entry
    ArchiveEntry entry = archive.getNextEntry();
    assertEquals("test1.xml", entry.getName());

    // Check that the deleted entry is still present in the archive
    assertEquals("test2.xml", archive.getEntry("test2.xml));

    // Try to add a new entry to the archive
    archive.add("test.txt");

    // Check that the archive is now corrupted
    try {
        archive.getNextEntry();
        fail("Expected IOException when getNextEntry is called on a corrupted archive");
    } catch (IOException e) {
        assertEquals("ar: bla.ar: Inappropriate file type or format", e.getMessage());
    }
}
