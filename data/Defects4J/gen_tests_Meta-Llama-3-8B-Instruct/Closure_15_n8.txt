public void testSwitchedOrder() {
    Map<String, String> customData = new HashMap<>();
    customData.put("key", "value");
    String retval = null;
    boolean hadKey = false;

    customData.put("key", "value");
    hadKey = "key" in customData;
    if (customData) {
        delete customData["key"];
    }
    retval = hadKey? customData.get("key") : null;

    assertEquals("value", retval);
    assertFalse("key" in customData);
}