
public void testDateTimeZoneGetOffsetFromLocalDSTTransition() {
    DateTimeZone zone = DateTimeZone.forID("America/Los_Angeles");
    DateTime when1 = new DateTime(2009, 11, 1, 0, 30, 0, 0, zone);
    DateTime when2 = new DateTime(2009, 11, 1, 1, 30, 0, 0, zone);
    DateTime when3 = new DateTime(2009, 11, 1, 2, 30, 0, 0, zone);

    assertEquals(7 * 60 * 60 * 1000, when1.getMillis() - when1.getZone().getRawOffset());
    assertEquals(7 * 60 * 60 * 1000, when2.getMillis() - when2.getZone().getRawOffset()); // Expected -08:00, but got -07:00
    assertEquals(8 * 60 * 60 * 1000, when3.getMillis() - when3.getZone().getRawOffset());
}
