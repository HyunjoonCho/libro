public void testDeserializeExternalTypeIdBeforePojo() {
    // Create a custom class with an external type id
    Class<?> customClass = new Class<?>() {
        @JsonTypeInfo(use = JsonTypeInfo.Id.EXTERNAL_PROPERTY, 
                      include = JsonTypeInfo.As.EXTERNAL_PROPERTY, 
                      property = "type")
        public static class MyPojo {
            private String type;
            // getters and setters
        }
    };

    // Create an instance of the custom class
    MyPojo myPojo = new MyPojo();
    myPojo.setType("myCustomType");

    // Serialize the instance
    String json = mapper.writeValueAsString(myPojo);

    // Deserialize the instance
    MyPojo deserialized = mapper.readValue(json, MyPojo.class);

    // Verify that the type id is correctly deserialized
    assertEquals("myCustomType", deserialized.getType());
}