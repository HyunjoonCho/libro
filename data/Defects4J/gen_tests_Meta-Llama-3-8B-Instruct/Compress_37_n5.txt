java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.util.zip.TarArchiveInputStream;

import static org.junit.Assert.assertThrows;
import static org.junit.Assert.fail;

@RunWith(JUnit4.class)
public class TarArchiveInputStreamTest {

    @Test
    public void testParsePaxHeadersWithEmptyLineAtEnd() {
        String headers = "...headers...\n";
        ByteArrayInputStream bais = new ByteArrayInputStream(headers.getBytes());
        TarArchiveInputStream tarIn = new TarArchiveInputStream(bais);

        // This should throw a NegativeArraySizeException
        assertThrows(NegativeArraySizeException.class, tarIn::parsePaxHeaders);
    }
}
