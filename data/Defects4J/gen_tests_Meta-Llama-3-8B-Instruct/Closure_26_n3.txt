java
import org.junit.Test;
import static org.junit.Assert.fail;

public class TestProcessCommonJSModules {
    @Test
    public void testModuleExportsFailuresWhenCheckTypesEnabled() {
        // Define a module (echo.js)
        String echoJs = "define(function() { return { echo: function(val) { window.console.log(val); } });";

        // Define an entry point (echo-main.js) that does not define any new modules
        String echoMainJs = "var echo = require('echo'); echo.echo('hello world');";

        // Compile the code with checkTypes enabled
        // This should fail with the error "Property module$exports never defined on module$echo_main"
        try {
            // Your compilation and execution code here
            fail("Expected error");
        } catch (Exception e) {
            // Verify the error message
            if (!e.getMessage().contains("Property module$exports never defined on module$echo_main")) {
                fail("Incorrect error message");
            }
        }
    }
}
