java
public void testNullPointerExceptionWhenReadingNaNAsBigDecimal() throws Exception {
    JsonParser jsonParser = new JsonFactory().createJsonParser("{\"a\": NaN}");
    jsonParser.enable(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS);
    JsonToken token = jsonParser.nextToken();
    assertEquals(JsonToken.VALUE_NUMBER_FLOAT, token.getId());
    token = jsonParser.nextToken();
    assertEquals(JsonToken.END_ARRAY, token.getId());
    try {
        jsonParser.getDecimalValue();
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}
