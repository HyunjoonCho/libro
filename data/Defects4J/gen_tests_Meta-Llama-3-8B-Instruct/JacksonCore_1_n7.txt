public void testJsonParserNaN() {
    JsonFactory factory = new JsonFactory();
    JsonParser parser = factory.createJsonParser("{\"NaN\" : 1}");
    parser.enable(Feature.ALLOW_NON_NUMERIC_NUMBERS);
    parser.nextToken();
    parser.nextToken();
    try {
        parser.getDecimalValue();
        fail("Expected NumberFormatException");
    } catch (NullPointerException e) {
        // expected
    } catch (NumberFormatException e) {
        fail("Expected NullPointerException instead of " + e.getMessage());
    }
}