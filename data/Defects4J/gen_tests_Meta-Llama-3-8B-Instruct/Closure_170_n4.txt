public void testOverlyAggressiveCommaRemoval() {
    Function f = new Function("n", "var i = 0; return typeof n!== 'undefined'? (i = n.length) : (n = 'foo'), i");
    assertEquals("6", f.call("6chars"));
}