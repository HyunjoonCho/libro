public void testCSVFormatWithHeader() throws IOException {
    String expected = "x\n42";
    CSVFormat tdf = CSVFormat.TDF.withHeader("x");
    CSVPrinter csvPrinter = tdf.print(Files.newBufferedWriter(Paths.get("data.csv")));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    String actual = Files.readString(Paths.get("data.csv"));
    assertEquals(expected, actual);
}