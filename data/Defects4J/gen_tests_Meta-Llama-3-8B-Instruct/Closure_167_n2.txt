public void testInvalidPropertyInPrototypeFunction() {
    String code = "var thing = {subthing: {prop: 3}};\n" +
                 "var c = new ns.MyClass(thing);\n" +
                 "c.doIt();";
    try {
        Compiler.compile(code);
        fail("Expected compilation error");
    } catch (CompilationError e) {
        // expected
    }
}