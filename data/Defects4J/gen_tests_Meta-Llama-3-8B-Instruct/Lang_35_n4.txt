public void testArrayUtilsAdd() {
    String[] stringArray = new String[] {"a", "b"};
    String aString = "c";
    String[] result = ArrayUtils.add(stringArray, aString);
    assertSame(String.class, result.getClass());
    
    result = ArrayUtils.add(null, aString);
    assertSame(Object.class, result.getClass());
    
    result = ArrayUtils.add(stringArray, null);
    assertSame(String.class, result.getClass());
    
    try {
        ArrayUtils.add(null, null);
        fail("Expected IllegalParameterException");
    } catch (IllegalStateException e) {
        // expected
    }
}