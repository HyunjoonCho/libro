java
public class TestAnonymousObjectTypeInference {

    public interface Record {
        String getProp();
    }

    public interface RecordWithProp2 extends Record {
        String getProp2();
    }

    public void testAnonymousObjectTypeInference() {
        Record record = new Record() {
            @Override
            public String getProp() {
                return "a";
            }
        };
        // This should pass
        func(record);

        RecordWithProp2 record2 = new RecordWithProp2() {
            @Override
            public String getProp() {
                return "a";
            }
            @Override
            public String getProp2() {
                return null;
            }
        };
        // This should also pass
        func(record2);

        // This should fail
        func((RecordWithProp2) record);
    }

    public void func(Record record) {
        System.out.println(record.getProp());
    }
}
