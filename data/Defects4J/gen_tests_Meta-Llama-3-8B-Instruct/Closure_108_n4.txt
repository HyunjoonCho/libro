
import org.junit.Test;
import com.google.javascript.jscomp.CompilerTest;
import com.google.javascript.jscomp.Result;

public class TestScopedAliases {
    @Test
    public void testPreconditionCrash() throws Exception {
        CompilerTest compiler = new CompilerTest();
        compiler.setSourceCode("var goog = {};goog.scope;\n" +
                "var ns = {};ns.sub = {};/** @constructor */\n" +
                "ns.sub.C = function() {};\n" +
                "goog.scope(function() {\n" +
                " var sub = ns.sub;\n" +
                " /** @type {sub.C} */\n" +
                " var x = null;\n" +
                "});");
        Result result = compiler.compile();
        assert(result.hasErrors());
    }
}
