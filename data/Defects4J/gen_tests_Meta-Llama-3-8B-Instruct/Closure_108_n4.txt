public void testPreconditionCrash() {
    Class<?> clazz = new TestClass();
    try {
        clazz.getDeclaredMethod("main");
    } catch (Exception e) {
        assertEquals(IllegalStateException.class, e.getClass());
        return;
    }
    fail("Expected IllegalStateExcpetion");
}

class TestClass {
    public static void main() {
        var goog = {};
        goog.scope;

        var ns = {};
        ns.sub = {};
        /* @constructor */
        ns.sub.C = function() {};

        goog.scope(function() {
            var sub = ns.sub;
            /* @type {sub.C} */
            var x = null;
        });
    }
}