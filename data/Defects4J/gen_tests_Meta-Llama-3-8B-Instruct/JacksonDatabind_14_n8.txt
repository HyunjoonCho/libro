public void testDeserializationWithParentUpdate() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addDeserializer(DataA.class, new DataADeserializer());
    mapper.registerModule(module);

    DataB db = new DataB();
    db.da.i = 11;
    db.k = 13;
    String jsonBString = mapper.writeValueAsString(db);
    JsonNode jsonBNode = mapper.valueToTree(db);

    DataB dbUpdViaNode = mapper.treeToValue(jsonBNode, DataB.class);
    mapper.readerForUpdating(dbUpdViaNode).readValue(jsonBString);

    try {
        mapper.readerForUpdating(dbUpdViaNode).readValue(jsonBNode);
        Assert.fail("Expected UnrecognizedPropertyException");
    } catch (UnrecognizedPropertyException e) {
        // expected
    }
}