public void testAdvancedCompilation() {
    Function A = new Function("A", "function A() {this._x = 1;}", "A.prototype['func1'] = A.prototype.func1; A.prototype.func1 = function() {this._x = 2; this.func2();}; A.prototype.func2 = function() {this._x = 3; this.func3();}; window['A'] = A;");

    assertEquals(1, ((A).prototype).x);
    ((A).prototype).func1();
    assertEquals(2, ((A).prototype).x);
}