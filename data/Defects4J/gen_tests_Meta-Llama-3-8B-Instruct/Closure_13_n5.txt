public void testTrueFalseReplacement() {
    Function f = new Function() {
        boolean b;
        boolean a;

        if (true) {
            b = true;
            a = new Function() {
                public boolean call() {
                    return b;
                }
            };
        }

        public Object method1() {
            a && a.call();
            return true;
        }

        public boolean method2() {
            return false;
        }
    };

    Object result = f.method1();
    assertEquals(true, result);
}