
public void testOptionBuilderResetOnException() {
    OptionBuilder ob = new OptionBuilder();
    ob.withOption("a", "aDesc");
    try {
        ob.create("invalid option");
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }
    assertEquals(0, ob.getOptions().size());
    ob.withOption("b", "bDesc");
    assertEquals("bDesc", ob.getOptions().get(0).getDescription());
}
