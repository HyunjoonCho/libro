public void testImplicitNamespaces() {
    // Create a new JavaScript engine to test the issue
    ScriptEngine engine = new ScriptEngineManager().getEngineByName("js");
    try {
        engine.eval("goog.provide('apps');");
        engine.eval("goog.provide('apps.foo.bar.B');");
        engine.eval("goog.provide('apps.foo.bar.C');");

        // This should throw a runtime error
        engine.eval("apps.foo.bar = {}");
    } catch (ScriptException e) {
        // Expected exception
    }
}