public void testOverzealousOptimization() {
    double uid = 0.5;
    boolean didCallReset = false;
    int originalUid = 0;

    reset();
    double _uid = uid;

    if (uid < 0.5) {
        doStuff();
    }

    if (_uid!= uid) {
        assertEquals("reset() was called", "reset() was called");
        didCallReset = true;
    }

    assertEquals(false, didCallReset);
}

private void reset() {
    uid = Math.random();
}

private void doStuff() {
    reset();
    uid = Math.random();
}