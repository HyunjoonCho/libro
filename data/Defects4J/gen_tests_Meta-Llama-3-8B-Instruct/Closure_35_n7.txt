java
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class BugTest {
    @Test
    public void testAssignmentToObjectInConditional() {
        class MyRecord {
            public Object prop1;
            public String prop2;
            public String prop3;
        }

        MyRecord func(boolean a, boolean b) {
            MyRecord results = null;
            if (a) {
                results = new MyRecord();
                results.prop1 = new MyRecord();
            }
            if (b) {
                results = results == null? new MyRecord() : results;
                results.prop2 = "prop2";
            } else {
                results = results == null? new MyRecord() : results;
                results.prop3 = "prop3";
            }
            return results;
        }

        MyRecord result = func(true, true);
        assertEquals(result.prop1.getClass(), Object.class);
        assertEquals(result.prop2, "prop2");
        assertEquals(result.prop3, null);
    }
}
