java
import org.apache.logging.log4j.core.LogEvent;
import org.apache.logging.log4j.core.parser.LogEventParser;
import org.apache.logging.log4j.core.parser.JsonLogEventParser;
import org.junit.Test;
import java.nio.charset.StandardCharsets;

public class LogEventParserTest {

    @Test
    public void testJsonLogEventParserRegression() {
        String inputString = "{\"timeMillis\" : 1493121664118,\"thread\" : \"main\",\"threadId\" : 1,\"threadPriority\" : 5,\"level\" : \"INFO\",\"loggerName\" : \"HelloWorld\",\"marker\" : {\"name\" : \"child\",\"parents\" : [ {\"name\" : \"parent\",\"parents\" : [ {\"name\" : \"grandparent\"} ]} ]},\"message\" : \"Hello, world!\",\"thrown\" : {\"commonElementCount\" : 0,\"message\" : \"error message\",\"name\" : \"java.lang.RuntimeException\",\"extendedStackTrace\" : [ {\"class\" : \"logtest.Main\",\"method\" : \"main\",\"file\" : \"Main.java\",\"line\" : 29,\"exact\" : true,\"location\" : \"classes/\",\"version\" : \"?\"} ]},\"contextStack\" : [ \"one\", \"two\" ],\"loggerFqcn\" : \"org.apache.logging.log4j.spi.AbstractLogger\",\"endOfBatch\" : false,\"contextMap\" : {\"bar\" : \"BAR\",\"foo\" : \"FOO\" },\"source\" : {\"class\" : \"logtest.Main\",\"method\" : \"main\",\"file\" : \"Main.java\",\"line\" : 29}}";
        byte[] inputBytes = inputString.getBytes(StandardCharsets.UTF_8);
        LogEventParser parser = new JsonLogEventParser();
        LogEvent result = parser.parseFrom(inputBytes);
        assert result!= null;
    }
}
