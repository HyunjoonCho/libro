
public void testFastDateFormatSerialization() throws IOException, ClassNotFoundException {
    FastDateFormat format = new FastDateFormat("yyyy-MM-dd");
    String serialized = serialize(format);
    FastDateFormat deserialized = (FastDateFormat) deserialize(serialized);
    assertEquals(format.toPattern(), deserialized.toPattern());
}

private String serialize(Object obj) throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bos);
    oos.writeObject(obj);
    oos.close();
    return bos.toString();
}

private Object deserialize(String str) throws IOException, ClassNotFoundException {
    ByteArrayInputStream bis = new ByteArrayInputStream(str.getBytes());
    ObjectInputStream ois = new ObjectInputStream(bis);
    return ois.readObject();
}
