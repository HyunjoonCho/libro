java
public void testJsonWriterValueNumber() {
    JsonWriter jsonWriter = new JsonWriter();
    jsonWriter.setLenient(true);

    // This should not throw an exception
    jsonWriter.value((Number) Double.valueOf(Double.NaN));
    jsonWriter.value((Number) Double.valueOf(Double.POSITIVE_INFINITY));
    jsonWriter.value((Number) Double.valueOf(Double.NEGATIVE_INFINITY));

    // This should throw an exception
    try {
        jsonWriter.value(Double.NaN);
        fail("Expected IllegalArgumentException");
    } catch (JsonWriter.IllegalArgumentException e) {
        // Expected
    }

    try {
        jsonWriter.value(Double.POSITIVE_INFINITY);
        fail("Expected IllegalArgumentException");
    } catch (JsonWriter.IllegalArgumentException e) {
        // Expected
    }

    try {
        jsonWriter.value(Double.NEGATIVE_INFINITY);
        fail("Expected IllegalArgumentException");
    } catch (JsonWriter.IllegalArgumentException e) {
        // Expected
    }
}
