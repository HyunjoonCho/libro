
public void testBadTypeInferenceForUndefined() {
    String expectedMessage = "JSC_TYPE_MISMATCH: actual parameter 1 of g does not match formal parameter\n" +
            "found : undefined\nrequired: string";
    try {
        new ClosureCompiler().compile("/** @param {string} x */\n" +
                "function g(x) {}\n" +
                "/** @param {undefined} x */\n" +
                "function f(x) {\n if (x!= undefined) { g(x); }\n}\n");
    } catch (CompilationException e) {
        assertEquals(expectedMessage, e.getMessage());
    }
}
