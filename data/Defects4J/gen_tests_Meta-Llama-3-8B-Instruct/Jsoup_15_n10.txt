
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class JsoupTest {

    @Test
    public void testScriptTagHandling() {
        String html = "<HTML>\n" +
                "  <body>\n" +
                "   <div class=vsc sig=Uga>\n" +
                "    <div class=before></div>\n" +
                "    <script type=\"text/javascript\">\n" +
                "     header = jQuery('#header_features');\n" +
                "     if(header.length){\n" +
                "      header\n" +
                "      .prepend('<a class=\"prevPage browse left \" />')\n" +
                "      .append('<a class=\"nextPage browse right\" />');\n" +
                "      items\n" +
                "      .wrapAll('<div class=\"scrollable\"/>')\n" +
                "      .wrapAll('<ul class=\"items\"/>')\n" +
                "      .wrap('<li/>');\n" +
                "     }\n" +
                "    </script>\n" +
                "    <div class=after></div>\n" +
                "   </div>\n" +
                "  </body>\n" +
                "</HTML>";

        Document doc = Jsoup.parse(html);
        assertEquals("vsc sig=Uga", doc.body().child(0).attr("class"));
        assertEquals("before", doc.body().child(1).tagName());
        assertEquals("script", doc.body().child(2).tagName());
        assertEquals("after", doc.body().child(3).tagName());
    }
}
