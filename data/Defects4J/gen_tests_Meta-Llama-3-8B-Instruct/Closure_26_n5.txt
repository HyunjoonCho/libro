public void testProcessCommonJSModules() {
    // Define a module (echo.js) as described in the bug report
    String echoJs = "define(function() { return { echo: function(val) { window.console.log(val); } }); }";

    // Define an entry point (echo-main.js) that does not define any new modules
    String echoMainJs = "var echo = require('echo'); echo.echo('hello world');";

    // Compile with the specified options
    // (This is a simulated compilation, as it's not possible to run the actual compilation process in a JUnit test)
    String compilationOutput = compile(echoJs, echoMainJs);

    // Assert that the compilation output contains the expected error message
    assertTrue(compilationOutput.contains("ERROR - Property module$exports never defined on module$echo_main"));
}