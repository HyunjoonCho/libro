public void testMockitoPackagePrivateClass() {
    MyPublicClass myPublicClass = new MyPublicClass();
    MyPackagePrivateClass myPackagePrivateClass = myPublicClass.new MyPackagePrivateClass();
    MyPackagePrivateClass mock = Mockito.mock(MyPackagePrivateClass.class);
    Mockito.when(mock.doSomething()).thenReturn("mocked");
    assertEquals("mocked", myPackagePrivateClass.doSomething()); // fails, real method is called
}