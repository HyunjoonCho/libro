public void testArgumentCaptorNoLongerWorkingForVarargs() {
    ArgumentCaptor<Integer[]> captor = ArgumentCaptor.capture();
    int[] expected = {1, 2, 3};
    mock.methodThatTakesVarargs(expected);
    captor.getValue(); // this should throw an exception
}