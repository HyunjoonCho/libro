
import org.junit.Test;

public class TestClosureCompilerBug {
    @Test
    public void testSwitchedOrderOfDeleteKeyAndKeyInStatementsChangesSemantic() {
        Map<String, String> customData = new HashMap<>();
        customData.put("key", "value");

        String originalValue = customData.get("key");
        boolean hadKey = "key" in customData;
        if (customData!= null) {
            customData.remove("key");
        }

        if (hadKey) {
            assertEquals(originalValue, customData.get("key"));
        } else {
            assertNull(customData.get("key"));
        }

        assertFalse("key" in customData);
    }
}
