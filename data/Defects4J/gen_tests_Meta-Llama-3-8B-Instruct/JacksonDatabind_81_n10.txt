public void testTypeRefinement() {
    ObjectMapper mapper = new ObjectMapper();
    TestBean bean = new TestBean();
    bean.setIntValue(10);

    String json = mapper.writeValueAsString(bean);
    assertEquals("{\"intValue\":10}", json);

    bean.setIntValue((int) 10L);
    json = mapper.writeValueAsString(bean);
    assertEquals("{\"intValue\":10}", json);
}