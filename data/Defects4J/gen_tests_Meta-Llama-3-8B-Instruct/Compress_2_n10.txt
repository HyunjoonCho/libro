public void testArDeleteFailure() {
    // Set up the test archive
    Ar ar = new Ar();
    ar.create("/tmp/dir26673/bla.ar");
    ar.add("test1.xml");
    ar.add("test2.xml");

    // Delete test2.xml
    ar.delete("test2.xml");

    // Check that getNextEntry still returns test1.xml
    ArEntry entry = ar.getNextEntry();
    assertEquals("test1.xml", entry.getName());

    // Check that the result file still contains test2.xml
    assertEquals("test2.xml", ar.getEntry("test2.xml).getName());
}