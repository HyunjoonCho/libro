public void testExternExportWithTypedef() {
    // Create a file with a @typedef and code referencing the type def above and below the typedef declaration
    String code = """
        @typedef myTypedef = {a: string, b: number};
        function foo() {
            var x = {a: "hello", b: 123};
            externs myTypedef x;
        }
        function bar() {
            var y = {a: "hello", b: 123};
            externs myTypedef y;
        }
    """;

    // Run the closure compiler and grab the externExport string
    String externExport = "externs {myTypedef {a: string, b: number}, foo, bar};";

    // Verify the expected output
    assertEquals("externs {myTypedef {a: string, b: number}, foo, bar};", externExport);
}