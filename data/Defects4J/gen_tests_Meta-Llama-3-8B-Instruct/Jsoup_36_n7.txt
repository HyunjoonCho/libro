public void testCharsetDetection() {
    String html = "<html lang=\"en-US\">\r\n" +
            "<head>\r\n" +
            "    <meta charset=\"UTF-8\">\r\n" +
            "    <meta http-equiv=\"Content-Type\" content=\"text/html; \">" +
            "</head>";
    Document doc = Jsoup.parse(html);
    assertEquals("UTF-8", doc.charset().name());
}