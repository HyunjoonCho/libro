
public void testBooleanReplacement() {
    String code = "var a, b; anyExpression && (b = externalRef, a = function() { return b() });" +
            "return { method1: function() { a && a(); return true }, method2: function() { return false } }";
    Compiler compiler = new Compiler(); // assume this is a compiler class
    String compiledCode = compiler.compile(code);
    assertEquals("return { method1: function() { a && a(); return!0 }, method2: function() { return!1 } }", compiledCode);
}
