
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.junit.Test;

public class JsoupTest {
    
    @Test
    public void testScriptTagsInJsString() {
        String html = "<HTML><body><div class=vsc sig=Uga><div class=before></div><script type=\"text/javascript\">header = jQuery('#header_features');if(header.length){header.prepend('<a class=\"prevPage browse left \" />').append('<a class=\"nextPage browse right\" />');items.wrapAll('<div class=\"scrollable\"/>').wrapAll('<ul class=\"items\"/>').wrap('<li/>');}</script><div class=after></div></div></body></HTML>";
        Document doc = Jsoup.parse(html);
        Element body = doc.body();
        Element div = body.selectFirst("div.vsc");
        String expected = "<div class=\"vsc\" sig=\"Uga\"><div class=\"before\"></div><script type=\"text/javascript\">header = jQuery('#header_features');if(header.length){header.prepend('<a class=\"prevPage browse left \" />').append('<a class=\"nextPage browse right\" />');items.wrapAll('<div class=\"scrollable\"/>').wrapAll('<ul class=\"items\"/>').wrap('<li/>');}</script><div class=\"after\"></div></div>";
        String actual = div.html();
        assertEquals(expected, actual);
    }
}
