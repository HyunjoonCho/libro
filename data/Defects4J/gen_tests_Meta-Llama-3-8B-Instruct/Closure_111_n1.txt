
import org.junit.Test;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.JSError;
import com.google.javascript.jscomp.JSType;
import com.google.javascript.jscomp.SourceFile;

public class TestGoogIsArray {
    @Test
    public void testGoogIsArray() {
        Compiler compiler = new Compiler();
        compiler.setSourceFiles(SourceFile.create("test", "var test = function(object) {\n" +
                "  if (goog.isArray(object)) {\n" +
                "    /* @type {Array} */ var x = object;\n" +
                "    return x;\n" +
                "  }\n" +
                "};"));
        compiler.compile();
        assert compiler.getErrorCount() > 0;
        for (JSError error : compiler.getErrors()) {
            if (error.getMessage().contains("found: * required: (Array|null)")) {
                return;
            }
        }
        assert false; // should not reach this point
    }
}
