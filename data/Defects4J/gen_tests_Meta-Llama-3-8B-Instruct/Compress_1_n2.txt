java
import org.junit.Test;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import org.apache.commons.compress.archivers.cpio.CpioArchiveEntry;
import org.apache.commons.compress.archivers.cpio.CpioArchiveInputStream;

import static org.junit.Assert.fail;

public class CpioArchiveInputStreamTest {

    @Test
    public void testCpioUnpack() {
        try {
            final File input = new File("cmdcreated.cpio");
            final InputStream in = new FileInputStream(input);
            CpioArchiveInputStream cin = new CpioArchiveInputStream(in);
            CpioArchiveEntry entry = null;
            while ((entry = (CpioArchiveEntry) cin.getNextCPIOEntry())!= null) {
                // Do nothing with the entry, just consume it
            }
            cin.close();
        } catch (IOException e) {
            if (e instanceof EOFException) {
                fail("Expected no EOFException");
            } else {
                throw e;
            }
        }
    }
}
