public void testJsonIdentityInfoForwardReference() {
    ObjectIdTest.Foo foo = new ObjectIdTest.Foo();
    foo.bar1 = new ObjectIdTest.Bar();
    foo.bar2 = foo.bar1;
    String json = new ObjectMapper().writeValueAsString(foo);
    assertEquals("{\"bar1\":1,\"bar2\":{\"@id\":2}}", json);
}