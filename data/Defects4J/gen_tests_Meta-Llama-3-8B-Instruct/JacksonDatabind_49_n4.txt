
public void testJsonIdentityInfoSerialization() throws Exception {
    ObjectIdTest.Foo foo = new ObjectIdTest.Foo();
    foo.bar1 = new ObjectIdTest.Bar();
    foo.bar2 = foo.bar1;

    ObjectMapper mapper = new ObjectMapper();
    String serialized = mapper.writeValueAsString(foo);

    assertEquals("{\"bar1\":{\"@id\":1},\"bar2\":{\"@id\":1}}", serialized);
}
