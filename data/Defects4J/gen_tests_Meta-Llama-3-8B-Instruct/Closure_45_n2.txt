
import org.junit.Test;
import com.google.javascript.jscomp.CompilationUnit;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.Result;

public class AssignmentRemovedTest {
    @Test
    public void testAssignmentRemoved() {
        Compiler compiler = new Compiler();
        CompilationUnit cu = new CompilationUnit();
        cu.addSource("function f() { var a = [], b; a.push(b = []); b[0] = 1; return a; }");
        Result result = compiler.compile(cu);
        String output = result.toSource();
        assertEquals("function f(){var a=[];a.push([]);return a};", output);
    }
}
