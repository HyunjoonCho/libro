java
public class BugReportTest {
    @org.junit.Test
    public void testAssignmentToRecordInConditional() {
        record MyRecord(String prop1, String prop2, String prop3) {}
        MyRecord func(boolean a, boolean b) {
            MyRecord results;
            if (a) {
                results = new MyRecord("prop1", null, null);
                results.prop1 = new MyRecord("a", 3);
            }
            if (b) {
                results = results == null? new MyRecord(null, "prop2", null) : results;
                results.prop2 = "prop2";
            } else {
                results = results == null? new MyRecord(null, null, "prop3") : results;
                results.prop3 = "prop3";
            }
            return results;
        }
        // expected to throw an exception
        func(true, true);
    }
}
