
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.SerializationConfig;
import com.fasterxml.jackson.module.java8.Java8Module;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class PropertyNamingStrategyTest {

    @Test
    public void testImplicitConstructorPropertyNamesNotRenamedProperly() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new Java8Module());
        mapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);

        SerializationConfig config = mapper.getSerializationConfig();
        config.setSerializationInclusion(SerializationFeature.Include.ALWAYS);

        MyPojo pojo = new MyPojo("foo", 42);
        String json = mapper.writeValueAsString(pojo);

        assertEquals("{\"foo\":\"foo\",\"bar\":42}", json);
    }

    public static class MyPojo {
        @JsonCreator
        public MyPojo(@JsonProperty("foo") String foo, @JsonProperty("bar") int bar) {
            //...
        }
    }
}
