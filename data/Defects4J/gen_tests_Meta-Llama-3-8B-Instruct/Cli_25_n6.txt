java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

import static org.junit.Assert.assertThrows;
import static org.junit.Assert.assertTrue;

import org.junit.BeforeClass;
import org.junit.runner.RunWith;

@RunWith(JUnit4.class)
public class HelpFormatterTest {
    @BeforeClass
    public static void setUp() {
        System.setOut(new PrintStream(new ByteArrayOutputStream()));
    }

    @Test
    public void testHelpFormatterLoop() {
        Options options = new Options();
        options.addOption("h", "help", false, "This is a looooong description");

        HelpFormatter formatter = new HelpFormatter();
        formatter.setWidth(20);

        // Expecting an exception
        assertThrows(IndexOutOfBoundsException.class, () -> formatter.printHelp("app", options));
    }
}
