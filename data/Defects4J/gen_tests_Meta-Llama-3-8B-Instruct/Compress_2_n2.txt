public void testArDelete() throws Exception {
    // Create an Ar archive
    ArArchive archive = new ArArchive();
    archive.create("bla.ar");

    // Add some files to the archive
    archive.append("test1.xml");
    archive.append("test2.xml");

    // Check the archive contents
    ArIterator iterator = archive.getArchiveIterator();
    assertTrue(iterator.hasNext());
    assertEquals("test1.xml", iterator.next().getName());
    assertEquals("test2.xml", iterator.next().getName());
    assertFalse(iterator.hasNext());

    // Delete a file from the archive
    archive.delete("test2.xml");

    // Check the archive contents again
    iterator = archive.getArchiveIterator();
    assertEquals("test1.xml", iterator.next().getName());
    assertFalse(iterator.hasNext());
}