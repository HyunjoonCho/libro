public void testTypeCheckerMissesAnnotationsOnFunctionsDefinedWithinFunctions() {
    // Step 1
    var ns = {};
    ns.a = function(b) {};

    function d() {
        ns.a();
        ns.a(123);
    }

    // Step 2
    // No need to run this part, as we're focusing on the failing test case

    // Step 3
    var ns = {};
    (function() {
        ns.a = function(b) {};
    })();

    function d() {
        ns.a();
        ns.a(123);
    }

    // Step 4
    try {
        d();
        fail("Expected a warning for incorrect parameter type");
    } catch (e) {
        // Expected warning for calling ns.a with 0 parameters
        // But not for the type error
    }
}