public void testArgumentCaptorIssue() {
    ArgumentCaptor<Integer[]> captor = ArgumentCaptor.forClass(Integer[].class);
    when(mock.method("arg1", (Integer[])captor.capture())).thenReturn("result");
    mock.method("arg1", new Integer[]{1, 2, 3});
    verify(mock).method("arg1", captor.capture());
    Integer[] actual = captor.getValue();
    assertEquals(3, actual.length);
}