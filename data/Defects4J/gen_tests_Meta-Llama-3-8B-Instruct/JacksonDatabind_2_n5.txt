
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import org.junit.Test;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.jsonFormatVisitors.JsonFormatVisitor;
import com.fasterxml.jackson.databind.jsonFormatVisitors.ObjectWriter;
import com.fasterxml.jackson.databind.jsonFormatVisitors.SimpleBeanPropertyWriter;

public class ListAttributeSerializerTest {

    @Test
    public void testSerializationToTree() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(SerializationFeature.INDENT_OUTPUT);

        ListAttribute listAttribute = new ListAttribute();
        listAttribute.setItems(new ArrayList<>());

        ObjectWriter ow = mapper.writer();
        String json = ow.writeValueAsString(listAttribute);
        JsonNode tree = mapper.readTree(mapper.writeValueAsBytes(json.getBytes()));

        assertNotNull(tree);
        assertEquals("object", tree.getNodeType().toString());
        assertEquals("items", tree.get("items").getNodeType().toString());
        assertEquals("array", tree.get("items").getNodeType().toString());
    }
}
