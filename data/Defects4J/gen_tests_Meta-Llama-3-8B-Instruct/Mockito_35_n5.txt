
import org.junit.Test;
import org.powermock.core.classloader.annotations.PowerMockIgnore;
import org.powermock.core.classloader.annotations.SuppressStaticInitializationFor;
import org.powermock.modules.junit4.PowerMockRunner;
import org.powermock.modules.junit4.PowerMockRunnerDelegate;
import org.powermock.reflect.internal.WhiteboxImpl;

import java.lang.reflect.Constructor;

import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertNull;

@PowerMockRunner
public class JCicsOsgiTestCase {

    @Test
    @PowerMockIgnore("sun.reflect.*")
    @SuppressStaticInitializationFor("com.seagullsw.appinterface.server.osgi.JCicsOsgiTestCase")
    public void testJcicsOsgiRoundtrip() throws Exception {
        // Arrange
        Class<?> cls = JCicsOsgiTestCase.class;
        Constructor<?> constructor = cls.getDeclaredConstructor();
        constructor.setAccessible(true);

        // Act and Assert
        assertNull(WhiteboxImpl.invokeConstructor(cls, new Class<?>[]{}, null));
        assertNotNull(WhiteboxImpl.getPrivateField(cls, "proxyInstance"));
    }
}
