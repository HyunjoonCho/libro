java
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonToken;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import static org.junit.Assert.assertThrows;
import static org.junit.Assert.assertNotNull;

public class JacksonTest {

    @Test
    public void testNanAsBigDecimal() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        JsonParser jsonParser = mapper.getFactory().createParser("NaN");
        jsonParser.setFeature(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS, true);

        jsonParser.nextToken();

        assertThrows(NullPointerException.class, jsonParser::getDecimalValue);

        assertNotNull(jsonParser.nextToken());
    }
}
