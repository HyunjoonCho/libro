
public void testCSVRecordToMapThrowsNPE() {
    String csv = "1,2,3\n4,5,6";
    CSVFormat format = CSVFormat.DEFAULT.withHeader();
    CSVParser parser = new CSVParser();
    CSVRecord record = parser.parseRecord(csv, format);
    try {
        record.toMap();
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}
