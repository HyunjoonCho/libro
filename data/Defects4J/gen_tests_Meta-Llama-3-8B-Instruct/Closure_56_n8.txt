public void testLastWarningOrErrorTruncated() {
    ByteArrayOutputStream outContent = new ByteArrayOutputStream();
    System.setOut(new PrintStream(outContent));
    try {
        // Run the command here
        Process p = Runtime.getRuntime().exec("java -jar compiler.jar --warning_level VERBOSE --js test.js");
        p.waitFor();
        String output = outContent.toString();
        // Verify that the last error is truncated
        assertTrue(output.contains("2 error(s), 0 warning(s)"));
        // Verify that the last error does not include the line and column information
        assertFalse(output.contains("test.js:"));
        assertFalse(output.contains("^"));
    } finally {
        System.setOut(System.out);
    }
}