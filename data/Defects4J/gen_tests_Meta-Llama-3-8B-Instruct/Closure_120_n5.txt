public void testOverzealousOptimization() {
    final int initialUid = 0;
    int uid = initialUid;
    boolean didReset = false;
    boolean didDoStuff = false;
    int _uid = uid;
    
    function reset() {
        uid = Math.random();
        didReset = true;
    }
    
    function doStuff() {
        reset();
        _uid = uid;
        didDoStuff = true;
        if (uid < 0.5) {
            doStuff();
        }
    }
    
    doStuff();
    
    if (_uid!= uid) {
        fail("reset() was called");
    }
    if (!didReset) {
        fail("reset() was not called");
    }
    if (!didDoStuff) {
        fail("doStuff() was not called");
    }
}