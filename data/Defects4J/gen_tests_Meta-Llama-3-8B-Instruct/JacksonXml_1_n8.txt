java
import org.junit.Test;

import java.util.ArrayList;
import java.util.List;

import static org.junit.Assert.assertThrows;

public class TestSerialization {

    @Test
    public void testNestedNonWrappedLists() {
        // Create POJO with nested non-wrapped lists
        Outer outer = new Outer();
        outer.setRecords(new ArrayList<>());
        outer.getRecords().add(new Record());
        Record record = outer.getRecords().get(0);
        record.setFields(new ArrayList<>());

        // Serialize and deserialize the object
        String json = JacksonUtil.toJson(outer);
        Outer deserialized = JacksonUtil.fromJson(json, Outer.class);

        // Verify that the deserialized object is incorrect
        assertThrows(IndexOutOfBoundsException.class, () -> deserialized.getRecords().get(0).getFields().get(0));
    }
}
