
public void testInvalidFormatExceptionIndex() throws Exception {
    String json = "{\"items\":[\"a\",\"b\",\"c\"]}";
    ObjectMapper mapper = new ObjectMapper();
    ObjectReader reader = mapper.reader();
    JsonNode node = reader.readTree(json);
    ObjectNode objNode = (ObjectNode) node;
    ArrayNode arrayNode = (ArrayNode) objNode.get("items");
    String[] array = arrayNode.textValue().split(",");
    String[] expected = new String[]{"a", "b", "c"};

    // Simulate deserialization error
    try {
        mapper.readValue(json, Map.class);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        assertEquals(0, e.getOriginalPath().size()); // -1 should be set
        assertEquals(1, e.getPath().size()); // index should be set
        assertEquals(0, e.getPath().get(0).getIntValue()); // index should be 0
    }
}
