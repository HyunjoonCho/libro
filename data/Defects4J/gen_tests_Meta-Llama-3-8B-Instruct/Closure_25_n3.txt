public void testAnonymousObjectInference() {
    Class<?> callzClass = new Object() {
        public static void callz(Object parry) {
            if (parry instanceof Map) {
                Map<?,?> map = (Map<?,?>) parry;
                if (map.containsKey("prop2") && map.get("prop2") instanceof Number && ((Number) map.get("prop2")).intValue() < 5) {
                    System.out.println("alright!");
                }
                System.out.println(map.get("prop1"));
            }
        }
    }.new callz(new HashMap<String, Object>() {{
        put("prop1", "hi");
    }});
}