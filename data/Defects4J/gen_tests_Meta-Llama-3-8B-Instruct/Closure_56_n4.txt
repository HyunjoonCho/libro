public void testLastWarningOrErrorTruncated() {
    // Create a temporary file for the test
    File tempFile = new File("test.js");
    try {
        // Write the test code to the file
        Files.write(Paths.get(tempFile.getAbsolutePath()), "alert(foo);\nalert(bar);".getBytes());

        // Compile the file and capture the output
        Process process = new ProcessBuilder("java", "-jar", "compiler.jar", "--warning_level", "VERBOSE", "--js", tempFile.getAbsolutePath()).start();
        StringBuilder output = new StringBuilder();
        String line;
        while ((line = process.readLine())!= null) {
            output.append(line).append("\n");
        }
        process.waitFor();

        // Verify the output
        String actualOutput = output.toString();
        String expectedOutput = "test.js:1: ERROR - variable foo is undefined\nalert(foo);\n ^\n" +
                "test.js:2: ERROR - variable bar is undefined\n";
        assertEquals(expectedOutput, actualOutput);
    } finally {
        // Clean up the temporary file
        tempFile.delete();
    }
}