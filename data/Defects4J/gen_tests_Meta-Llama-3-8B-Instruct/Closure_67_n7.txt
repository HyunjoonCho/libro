public void testAdvancedCompilationIssue() {
    Function a = new Function("a", "this.a = 1;", "a.prototype.func1 = a.prototype.b = function() { this.a = 2; this.c(); }; a.prototype.func2 = function() { this.a = 3; this.d(); }; window['A'] = a;");
    a.call(new a());
    try {
        a.prototype.func1();
        fail("Expected a function not found exception");
    } catch (Exception e) {
        assertEquals("TypeError: a.prototype.c is not a function", e.getMessage());
    }
}