
public void testNamespacedAttributeNotSelectedWithWildcard() {
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader("<xml xmlns:x='foo' x:pop='a'/>")));
    Node node = doc.getDocumentElement();
    NodeList attrs = node.getChildNodes();
    for (int i = 0; i < attrs.getLength(); i++) {
        Node attr = attrs.item(i);
        if (attr.getNodeType() == Node.ATTRIBUTE_NODE) {
            String attributeName = attr.getNodeName();
            if (attributeName.equals("*")) {
                assertNotNull("Attribute '*' should not be null", attr);
            } else if (attributeName.startsWith("x:")) {
                assertNotNull("Attribute 'x:*' should not be null", attr);
            } else {
                assertNull("Attribute '" + attributeName + "' should be null", attr);
            }
        }
    }
}
