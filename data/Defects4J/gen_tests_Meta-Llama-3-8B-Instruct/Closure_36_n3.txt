public void testSingletonGetter() {
    String code = "goog.provide('foo');\n" +
            "var foo = function() { this.values = []; };\n" +
            "goog.addSingletonGetter(foo);\n" +
            "foo.prototype.add = function(value) {this.values.push(value)};\n";

    Compilation compilation = Compilation.compile(code);
    String compiledCode = compilation.compile();

    // Check that the code is not removed as expected
    assertNotEquals("(", compiledCode);
    assertNotEquals(")", compiledCode);
}