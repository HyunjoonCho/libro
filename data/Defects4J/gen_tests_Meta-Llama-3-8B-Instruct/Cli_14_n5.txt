java
import org.junit.Test;
import org.apache.commons.cli2.CommandLine;
import org.apache.commons.cli2.Group;
import org.apache.commons.cli2.Option;
import org.apache.commons.cli2.OptionException;
import org.apache.commons.cli2.builder.ArgumentBuilder;
import org.apache.commons.cli2.builder.DefaultOptionBuilder;
import org.apache.commons.cli2.builder.GroupBuilder;
import org.apache.commons.cli2.commandline.Parser;
import org.apache.commons.cli2.option.DefaultOption;
import org.apache.commons.cli2.validation.FileValidator;

import java.io.File;

public class CLI2SampleTest {

    @Test
    public void testClassCastException() {
        DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
        ArgumentBuilder abuilder = new ArgumentBuilder();
        GroupBuilder gbuilder = new GroupBuilder();
        DefaultOption fileNameOption = obuilder
               .withShortName("f")
               .withLongName("file-name")
               .withRequired(true)
               .withDescription("name of an existing file")
               .withArgument(abuilder
                       .withName("file-name")
                       .withValidator(FileValidator.getExistingFileInstance())
                       .create())
               .create();
        Group options = gbuilder
               .withName("options")
               .withOption(fileNameOption)
               .create();
        Parser parser = new Parser();
        parser.setHelpTrigger("--help");
        parser.setGroup(options);

        try {
            CommandLine cl = parser.parseAndHelp(new String[]{"-f", "path-to-an-existing-file"});
        } catch (OptionException e) {
            // Expected exception, so just swallow it
        }
    }
}
