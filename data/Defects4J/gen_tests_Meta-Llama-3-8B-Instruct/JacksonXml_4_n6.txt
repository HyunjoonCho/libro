
import com.fasterxml.jackson.dataformat.xml.XmlMapper;
import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

public class XmlSerializerProviderTest {
    @Test
    public void testRootNameForNull() throws Exception {
        XmlMapper mapper = new XmlMapper();
        mapper.enable(SerializationFeature.INDENT_OUTPUT);

        XmlSerializerProvider provider = mapper.getProvider();

        String xml = mapper.writeValueAsString(new Object());
        assertEquals("<?xml version=\"1.0\"?><root xmlns:jaxb=\"http://jaxb.javaee-spec.java.net/\"/>", xml);

        provider.setRootName("custom-root");
        xml = mapper.writeValueAsString(new Object());
        assertEquals("<?xml version=\"1.0\"?><custom-root xmlns:jaxb=\"http://jaxb.javaee-spec.java.net/\"/>", xml);
    }

    @JacksonXmlRootElement(localName = "my-root")
    public static class MyObject {
    }
}
