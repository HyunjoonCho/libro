java
import org.junit.Test;

public class TestBug {
    @Test
    public void testRemoveKey() {
        Object customData = new Object();
        customData.put("key", "value");

        boolean hadKey = "key" in customData;
        String retval = (String) customData.get("key");
        if (customData instanceof Map) {
            Map<String, String> dataSlot = (Map<String, String>) customData;
            dataSlot.remove("key");
        }

        if (hadKey) {
            assertSame(retval, "value");
        } else {
            assertNull(retval);
        }

        assertFalse("key" in customData);
    }
}
