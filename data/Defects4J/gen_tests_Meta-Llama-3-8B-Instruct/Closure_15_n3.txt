public void testSwitchedOrder() {
    Map<String, String> customData = new HashMap<>();
    customData.put("key", "value");
    boolean hadKey = "key" in customData;
    Object retval = testRemoveKey("key");
    assertEquals("value", retval);
    assertFalse(hadKey);
}

private Object testRemoveKey(String key) {
    Map<String, String> dataSlot = (Map<String, String>) customData;
    Object retval = dataSlot.get(key);
    boolean hadKey = key in dataSlot;
    if (dataSlot!= null) {
        dataSlot.remove(key);
    }
    return hadKey? retval : null;
}