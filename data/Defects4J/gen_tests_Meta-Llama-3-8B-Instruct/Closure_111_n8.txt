java
import org.junit.Test;
import com.google.javascript.jscomp.CompilationUnitOptions;
import com.google.javascript.jscomp.JsAstPrinter;
import com.google.javascript.jscomp.JsSyntaxError;
import com.google.javascript.jscomp.SourceFile;

import static org.junit.Assert.fail;

public class GoogIsArrayBugTest {

    @Test
    public void testGoogIsArray() {
        CompilationUnitOptions options = new CompilationUnitOptions();
        options.setAdvancedOptimizations(true);

        SourceFile file = new SourceFile("test.js", "var test = function(object) {\n" +
                "  if (goog.isArray(object)) {\n" +
                "    /* @type {Array} */ var x = object;\n" +
                "    return x;\n" +
                "  };\n};");
        try {
            options.compile(file);
        } catch (JsSyntaxError e) {
            fail("Expected no error, but got: " + e.getMessage());
        }
    }
}
