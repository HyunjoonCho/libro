public void testJSCUsedGlobalThisWarning() {
    JSObject NS = new JSObject();
    JSObject.read = new Function("return this.foo;");
    JSObject.write = new Function("this.foo = 123;");
    JSObject.write2 = new Function("this.foo = 123;");
    try {
        JSObject.read();
    } catch (JSCWarningException e) {
        fail("Expected JSC_USED_GLOBAL_THIS warning");
    }
    try {
        JSObject.write();
        fail("Expected JSC_USED_GLOBAL_THIS warning");
    } catch (JSCWarningException e) {
    }
    try {
        JSObject.write2();
    } catch (JSCWarningException e) {
        assertEquals("JSC_USED_GLOBAL_THIS: dangerous use of the global this object", e.getMessage());
    }
}