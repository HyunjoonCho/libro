public void testCompilerCrashOnGoogScopeLocals() {
    String code = "goog.provide(\"main\");\ngoog.scope(function (){\n var a = foo, b, c = 1;\n});";
    try {
        // This should throw an exception
        compiler.compile(code);
        fail("Expected compiler to throw an exception");
    } catch (Exception e) {
        // Expected exception
    }
}