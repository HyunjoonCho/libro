
public void testVersionOption() {
    // Download and build the latest version of the Closure Compiler
    // Run the compiler with the --version option
    String[] args = {"--version"};
    try {
        Process process = Runtime.getRuntime().exec("java -jar compiler.jar " + String.join(" ", args));
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line;
        StringBuilder output = new StringBuilder();
        while ((line = reader.readLine())!= null) {
            output.append(line).append("\n");
        }
        assertEquals("Closure Compiler (http://code.google.com/closure/compiler)\nVersion: 698\nBuilt on: 2011/01/17 12:16", output.toString());
    } catch (IOException e) {
        fail("Failed to execute command: " + e.getMessage());
    }
}
