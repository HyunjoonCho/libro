java
import org.junit.Test;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.util.zip.TarArchiveInputStream;

import static org.junit.Assert.assertThrows;

public class TarArchiveInputStreamTest {
    @Test
    public void testParsingPaxHeadersWithEmptyLineAtTheEnd() throws IOException {
        String headers = "entry1\n" +
                "Content-Type: text/plain\n" +
                "Size: 123\n" +
                "\n"; // empty line at the end

        TarArchiveInputStream tarArchiveInputStream = new TarArchiveInputStream(new ByteArrayInputStream(headers.getBytes()));
        assertThrows(NegativeArraySizeException.class, () -> tarArchiveInputStream.parsePaxHeaders());
    }
}
