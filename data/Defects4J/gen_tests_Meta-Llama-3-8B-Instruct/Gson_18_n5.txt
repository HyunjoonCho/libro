java
import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonPrimitive;
import org.junit.Test;

import java.util.Map;

import static org.junit.Assert.*;

public class GsonWildCardIssueTest {

    @Test(expected = ClassCastException.class)
    public void testGsonDeserializesWildcardsToLinkedHashMap() {
        Gson gson = new Gson();
        String json = "{\"inBig\": {\"key\": [{\"inSmall\": \"hello\"}]}";
        Map<String,? extends List<SmallClass>> inBig = gson.fromJson(json, BigClass.class).inBig;
        List<SmallClass> list = inBig.get("key");
        SmallClass small = list.get(0);
        // This line will throw a ClassCastException
        small.getInSmall();
    }

    static class BigClass {
        Map<String,? extends List<SmallClass>> inBig;
    }

    static class SmallClass {
        String inSmall;
    }
}
