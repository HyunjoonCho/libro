java
import org.junit.Test;
import static org.junit.Assert.assertThrows;

public class OverzealousOptimizationTest {

    @Test
    public void testOverzealousOptimization() {
        int uid = 0;
        int _uid;

        void reset() {
            uid = Math.random() < 0.5? Math.random() : uid;
        }

        void doStuff() {
            reset();
            _uid = uid;

            if (uid < 0.5) {
                doStuff();
            }

            if (_uid!= uid) {
                throw new AssertionError("reset() was called");
            }
        }

        doStuff();
    }
}
