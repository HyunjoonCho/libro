
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class TestClosureCompiler {
    @Test
    public void testVarArgsTypeCheck() {
        // Define a function with var args
        Object foo = new Object() {
            public int invoke(Object... var_args) {
                return var_args.length;
            }
        };

        // Check that no warning is raised for a single string argument
        assertEquals(1, ((Object[]) foo).invoke("hello").length);

        // Check that a warning is raised for an integer argument
        try {
            ((Object[]) foo).invoke(123);
            assertTrue(false); // should not reach here
        } catch (Exception e) {
            // expected exception
        }

        // Check that no warning is raised for multiple arguments, but it should
        try {
            ((Object[]) foo).invoke("hello", 123);
            assertTrue(false); // should not reach here
        } catch (Exception e) {
            // expected exception
        }
    }
}
