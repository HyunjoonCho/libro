
public void testDeserializationLocaleSeparator() {
    String localeString = "en-US-";
    try {
        Locale locale = Locale.parse(localeString);
        fail("Expected ParseException for locale with dash separator");
    } catch (ParseException e) {
        // Expected
    }
    localeString = "en-US_" + new String(new char[10]); // add a long underscore
    Locale locale = Locale.parse(localeString);
    assertEquals("en", locale.getLanguage());
    assertEquals("US", locale.getCountry());
}
