public void testInvalidFormatException() {
    String jsonString = "[{\"field\":\"value\"}]";
    JsonFactory factory = new JsonFactory();
    JsonParser parser = factory.createParser(jsonString);
    JsonNode node = parser.readValueAsTree();
    StringCollectionDeserializer deserializer = new StringCollectionDeserializer();
    try {
        deserializer.deserialize(node);
    } catch (JsonMappingException e) {
        assertEquals(-1, e.getWrappedCause().getWrappedCause().getWrappedCause().getParser().getCurrentIndex());
    }
}