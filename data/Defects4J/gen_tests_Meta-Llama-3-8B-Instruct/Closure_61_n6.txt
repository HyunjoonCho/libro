
import org.junit.Test;
import com.google.javascript.jscomp.CompilationUnit;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.JSError;

public class ClosureBugTest {
    @Test
    public void testClosureRemovesNeededCode() {
        Compiler compiler = new Compiler();
        CompilationUnit cu = compiler.compile("var Math = {}; Math.blah = function(test) { test.a = 5; }; var test = new Object(); Math.blah(test);");
        assertEquals(0, cu.getErrors().size()); // expected output
        assertEquals("var Math = {}; Math.blah = function(test) { test.a = 5; }; var test = new Object(); Math.blah(test);", cu.getCode()); // expected output
    }
}
