java
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.IOException;

import static org.junit.Assert.assertThrows;

public class TarArchiveOutputStreamTest {

    @Test
    public void testLongDirectoryName() throws IOException {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        TarArchiveOutputStream tar = new TarArchiveOutputStream(bos);

        String directoryName = new String(new char[101]).replace('\0', 'a');
        tar.putArchiveEntry(new TarArchiveEntry(directoryName));

        assertThrows(IOException.class, tar::finish);
    }
}
