java
import org.apache.commons.compress.archivers.ArchiveStreamFactory;
import org.junit.Test;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import static org.junit.Assert.fail;

public class ArchiveStreamFactoryTest {
    @Test
    public void testEncoding() throws IOException {
        String data = "test data";
        byte[] bytes = data.getBytes("UTF-8");
        ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
        InputStream baisWithEncoding = new java.util.zip.GZIPInputStream(bais);
        
        ArchiveStreamFactory factory = new ArchiveStreamFactory();
        ArjArchiveInputStream ais = factory.createArchiveInputStream("arj", baisWithEncoding);
        if (ais!= null) {
            fail("Expected ArjArchiveInputStream to throw an exception");
        }
        
        bais = new ByteArrayInputStream(bytes);
        baisWithEncoding = new java.util.zip.GZIPInputStream(bais);
        ais = factory.createArchiveInputStream("cpio", baisWithEncoding);
        if (ais!= null) {
            fail("Expected CpioArchiveInputStream to throw an exception");
        }
        
        bais = new ByteArrayInputStream(bytes);
        baisWithEncoding = new java.util.zip.GZIPInputStream(bais);
        ais = factory.createArchiveInputStream("dump", baisWithEncoding);
        if (ais!= null) {
            fail("Expected DumpArchiveInputStream to throw an exception");
        }
        
        bais = new ByteArrayInputStream(bytes);
        baisWithEncoding = new java.util.zip.GZIPInputStream(bais);
        ais = factory.createArchiveInputStream("jar", baisWithEncoding);
        if (ais!= null) {
            fail("Expected JarArchiveInputStream to throw an exception");
        }
        
        bais = new ByteArrayInputStream(bytes);
        baisWithEncoding = new java.util.zip.GZIPInputStream(bais);
        ais = factory.createArchiveInputStream("jar", baisWithEncoding);
        if (ais == null) {
            fail("Expected JarArchiveInputStream to not throw an exception");
        }
    }
}
