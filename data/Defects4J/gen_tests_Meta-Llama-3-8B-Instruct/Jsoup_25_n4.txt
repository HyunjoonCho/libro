
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.TextNode;
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class JsoupPreserveWhitespaceTest {

    @Test
    public void testJsoupPreserveWhitespaceForTextAreaTag() {
        String html = "<textarea>   <p>test</p>   </textarea>";
        Document doc = Jsoup.parse(html);
        TextNode textNode = doc.select("textarea").first().textNode(0);
        assertEquals("   <p>test</p>   ", textNode.outerHtml());
        assertTrue(textNode.getWholeText().trim().isEmpty());
    }
}
