java
import org.junit.Test;

public class BugTest {
    @Test
    public void testRemoveKey() {
        Map<String, String> customData = new HashMap<>();
        customData.put("key", "value");

        String testRemoveKey = "key";
        String retval = testRemoveKey(customData, testRemoveKey);
        boolean hadKey = testRemoveKey in customData;

        if (customData!= null) {
            customData.remove(testRemoveKey);
        }

        assert (hadKey? retval : null) == "value";
        assert!("key" in customData);
    }

    public String testRemoveKey(Map<String, String> data, String key) {
        String dataSlot = data;
        String retval = dataSlot.get(key);
        boolean hadKey = dataSlot.containsKey(key);

        if (dataSlot!= null) {
            dataSlot.remove(key);
        }

        return hadKey? retval : null;
    }
}
