
public void testOptionBuilderReset() {
    OptionBuilder optionBuilder = new OptionBuilder();
    optionBuilder.withOption("a", "test");

    try {
        optionBuilder.create();
        fail("Expected IAE");
    } catch (IllegalArgumentException e) {
        // expected
    }

    optionBuilder.withOption("b", "test2");

    OptionSet options = optionBuilder.create();
    assertEquals("test2", options.get("b"));
    // The test should fail if the OptionBuilder is not resetted
    assertNotEquals("test", options.get("a"));
}
