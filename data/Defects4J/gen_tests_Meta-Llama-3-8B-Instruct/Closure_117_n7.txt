public void testWrongTypeReported() {
    C3 c3 = new C3(new C2());
    try {
        JSDocReader reader = new JSDocReader();
        reader.read(new StringReader("/*\*\n" +
                " * @constructor\n" +
                " */\n" +
                "function C2() {}\n" +
                "\n" +
                "/*\*\n" +
                " * @constructor\n" +
                " */\n" +
                "function C3(c2) {\n" +
                " /*\*\n" +
                "  * @type {C2} \n" +
                "  * @private\n" +
                "  */\n" +
                "  this.c2_; \n" +
                "  use(this.c2_.prop);\n" +
                "}\n"), new HashMap<>());
        String message = reader.getError();
        fail("Expected error message to be 'Property prop never defined on C2', but was " + message);
    } catch (JSDocException e) {
        assertEquals("Property prop never defined on C2", e.getMessage());
    }
}