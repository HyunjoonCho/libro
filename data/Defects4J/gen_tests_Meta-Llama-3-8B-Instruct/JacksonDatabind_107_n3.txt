
public void testDeserializationWithDeserializationProblemHandler() throws JsonMappingException {
    DeserializationConfig config = new DeserializationConfig();
    config.enableDefaultTyping();
    DeserializationProblemHandler problemHandler = new DeserializationProblemHandler() {
        @Override
        public Object handleUnknownTypeId(DeserializationContext ctxt, JavaType type, String typeId, TypeIdResolver typeIdResolver, String typeDescription) {
            return Void.TYPE;
        }
    };
    JsonFactory factory = new JsonFactory();
    factory.enableDefaultTyping();
    JsonParser parser = factory.createParser("{\"@type\":\"unknown\"}");
    DeserializationContext context = new DeserializationContext(parser, config);
    context.setHandler(problemHandler);
    Object value = parser.readValueAsObject();
    // assert that value is null or something else expected, as returning Void.class causes NPE
}
