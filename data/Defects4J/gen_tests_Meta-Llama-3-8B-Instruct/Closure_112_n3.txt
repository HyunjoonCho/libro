public void testTemplateInference() {
    Class<?> clazz = new Class() {
        @Constructor
        @Template(Class.class)
        public Class() {}

        @Template
        public String foo(@Template Class<?> a) {
            return "string";
        }
    };

    Method method = clazz.getMethod("foo", int.class);
    try {
        clazz.newInstance().foo(1);
        fail("Expected compilation error");
    } catch (Error e) {
        // expected
    }
}