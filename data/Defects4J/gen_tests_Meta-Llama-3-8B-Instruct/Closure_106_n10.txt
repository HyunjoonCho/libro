java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerException;
import com.google.javascript.jscomp.SourceFile;
import com.google.javascript.jscomp.SourceMap;
import com.google.javascript.jscomp.CompilerOptions;
import org.junit.Test;

public class Bug107Test {

    @Test(expected = CompilerException.class)
    public void testCollapseProperties() {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setCompilationLevel(CompilerOptions ADVANCED_OPTIMIZATIONS);
        SourceFile file = compiler.compile(SourceMap.EMPTY, "test.js", "test.js", "goog.module('test');\n" +
                "goog.exportSymbol('test', function() {});");
        compiler.compile(options, SourceMap.EMPTY, file);
    }
}
