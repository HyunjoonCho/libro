public void testCpioUnpack() {
    final File input = getFile("cmdcreated.cpio");
    final InputStream in = new FileInputStream(input);
    CpioArchiveInputStream cin = new CpioArchiveInputStream(in);
    CpioArchiveEntry entry = null;
    while ((entry = (CpioArchiveEntry) cin.getNextCPIOEntry())!= null) {
        try {
            File target = new File(dir, entry.getName());
            final OutputStream out = new FileOutputStream(target);
            IOUtils.copy(in, out);
            out.close();
        } catch (EOFException e) {
            fail("Expected to read entire archive without EOFException");
        }
    }
    cin.close();
}