public void testStringCollectionDeserializer() {
    // setup custom collection implementation and its immutable version
    CustomStringCollection collection = new CustomStringCollection();
    ImmutableCustomStringCollection immutableCollection = new ImmutableCustomStringCollection(collection);

    // serialize the collection
    String json = mapper.writeValueAsString(immutableCollection);

    // deserialize the collection
    CustomStringCollection deserializedCollection = mapper.readValue(json, CustomStringCollection.class);

    // verify the deserialization fails
    assertThrows(JsonMappingException.class, () -> mapper.readValue(json, CustomStringCollection.class));
}