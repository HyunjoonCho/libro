public void testUTF16StreamWithBOM() {
    byte[] bytes = new byte[] {0xFE, 0xFF, 'h'.getBytes()[0]};
    ByteArrayInputStream in = new ByteArrayInputStream(bytes);
    try {
        String result = DataUtil.readFrom(in, "UTF-16BE");
        fail("Expected UTF-16BE encoding to be detected");
    } catch (UnsupportedEncodingException e) {
        // expected
    }
}