
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.TextNode;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import com.fasterxml.jackson.module.jsonSchema.JsonSchema;
import org.junit.Test;

import java.io.IOException;

public class TreeTraversingParserTest {

    @Test
    public void testBase64VariantIgnored() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        mapper.registerModule(new JsonSchema());

        String json = "{\"text\":\"iVBORw0KGgo=\",\"base64\":true}";
        TreeTraversingParser parser = new TreeTraversingParser(json);

        byte[] actual = parser.getBinaryValue();
        byte[] expected = Base64.getDecoder().decode("iVBORw0KGgo=");

        assertArrayEquals(expected, actual);
    }
}
