public void testClassifyNonRightmostExpressions() {
    Expression expression = new Expression("foo((1, 2, 42))");
    assertEquals("foo((1, 3))", expression.optimize());
    assertEquals(1, expression.getProblematicElements().size());

    expression = new Expression("foo((bar(), 2, 42))");
    assertEquals("foo((bar(), 3))", expression.optimize());
    assertEquals(0, expression.getProblematicElements().size());

    expression = new Expression("foo(((1, 2, 3), (4, 5, 42)))");
    assertEquals("foo((1, 4, 42))", expression.optimize());
    assertEquals(1, expression.getProblematicElements().size());
}