
public void testJsonIncludeWithNonDefaultForString() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_DEFAULT);

    MyObject obj = new MyObject("default value");

    String json = mapper.writeValueAsString(obj);

    // Expected: the json output should not contain the "value" field
    // because it is the default value
    String expectedJson = "{\"foo\":\"bar\"}";
    assertEquals(expectedJson, json);
}

class MyObject {
    String value = "default value";
    String foo = "bar";

    public MyObject() {}
}
