
public void testCSVFormatWithHeader() throws IOException {
    String expectedOutput = "x\n42";
    try (FileWriter writer = new FileWriter("test.csv")) {
        CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(writer);
        csvPrinter.printRecord(42);
        csvPrinter.close();
    }
    String actualOutput = Files.readString(Paths.get("test.csv"));
    assertEquals(expectedOutput, actualOutput);
}
