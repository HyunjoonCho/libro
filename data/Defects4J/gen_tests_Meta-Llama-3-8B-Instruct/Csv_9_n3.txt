
public void testCSVRecordToMapThrowsNPEWhenNoHeaders() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader(null);
    CSVRecord record = new CSVParser().parseLine("1,2,3", format).get(0);
    Map<String, String> map = record.toMap();
    // This test will pass if the NPE is thrown
    // assertThrows(NullPointerException.class, () -> record.toMap());
}
