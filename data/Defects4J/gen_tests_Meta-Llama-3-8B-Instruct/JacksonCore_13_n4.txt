java
import org.junit.Test;
import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.core.JsonToken;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

import java.io.IOException;
import java.io.StringWriter;

public class Utf8JsonGeneratorTest {

    @Test
    public void testToggleQuoteFieldNames() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        StringWriter writer = new StringWriter();
        JsonGenerator gen = mapper.getFactory().createGenerator(writer);
        gen.setQuoteFieldNames(true);
        gen.writeStartObject();
        gen.writeStringField("field", "value");
        gen.writeEndObject();
        gen.close();

        writer.close();
        String json = writer.getBuffer().toString();

        // assert that field name is quoted
        assertTrue(json.contains("\"field\" : \"value\""));

        // toggle quote field names
        gen = mapper.getFactory().createGenerator(writer);
        gen.setQuoteFieldNames(false);
        gen.writeStartObject();
        gen.writeStringField("field", "value");
        gen.writeEndObject();
        gen.close();

        writer.close();
        json = writer.getBuffer().toString();

        // assert that field name is not quoted
        assertFalse(json.contains("\"field\" : \"value\""));
    }
}
