public void testHelpFormatterWrap() {
    HelpFormatter formatter = new HelpFormatter();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    PrintStream ps = new PrintStream(out);
    formatter.printHelp("test", 80, "test", "test", "test", "test");
    String output = out.toString();
    int expectedWidth = 80;
    for (int i = 1; i <= 3; i++) {
        if (i == 1) {
            assertEquals(expectedWidth, output.indexOf("\n", expectedWidth));
        } else {
            assertTrue(output.indexOf("\n", expectedWidth) < expectedWidth);
        }
        expectedWidth = output.indexOf("\n", expectedWidth) + 1;
    }
}