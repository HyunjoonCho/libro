public void testCompilerFailsToFindAMDModuleInSubdirectory() {
    String[] args = new String[] {
        "--transform_amd_modules",
        "--process_common_js_modules",
        "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js",
        "--js=Bar.js",
        "--js=lib/Foo.js"
    };
    try {
        Compiler compiler = new Compiler();
        compiler.run(args);
        fail("Expected a compilation error");
    } catch (CompilationException e) {
        assertEquals("required entry point'module$lib$Foo' never provided", e.getMessage());
    }
}