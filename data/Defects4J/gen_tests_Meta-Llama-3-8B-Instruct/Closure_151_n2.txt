public void testVersionOption() {
    try {
        ProcessBuilder builder = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
        Process process = builder.start();
        assertEquals("A version statement", new BufferedReader(new InputStreamReader(process.getInputStream())).lines().findFirst().get());
    } catch (IOException e) {
        fail("Failed to execute command");
    }
}