public void testDangerousUseOfGlobalThis() {
    ClosureCompiler compiler = new ClosureCompiler();
    String code = "function writeMethodWithoutAnnotation() {\n" +
            "  this._bar = 123;\n" +
            "}\n" +
            "function readMethodWithoutAnnotation() {\n" +
            "  return this._bar;\n" +
            "}\n";
    List<String> warnings = compiler.compile(code);
    assertEquals(1, warnings.size());
    code = "function writeMethodWithAnnotation() {\n" +
            "  this._bar = 123;\n" +
            "}\n" +
            "function readMethodWithAnnotation() {\n" +
            "  return this._bar;\n" +
            "}\n";
    warnings = compiler.compile(code);
    assertEquals(0, warnings.size());
}