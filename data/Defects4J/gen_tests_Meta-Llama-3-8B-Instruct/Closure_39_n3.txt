java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.JsAstPrinter;
import com.google.javascript.jscomp.JsException;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import java.io.IOException;
import java.io.StringWriter;

import static org.junit.Assert.fail;

@RunWith(JUnit4.class)
public class ExternExportTypedefTest {
    @Test
    public void testExternExportTypedef() {
        Compiler compiler = new Compiler();
        compiler.addSource("typedef myType = {a: number, b: string};");
        compiler.addSource("function foo(myType x) { return x.a; }");
        compiler.addSource("function bar() { return {a: 1, b: 'hello'}; }");

        compiler.compile();
        compiler.setExportOptions(Compiler.EXPORT_TYPEDEFS);
        String externExport = compiler.getExterns();

        // Assert that the externExport is correct
        //...
    }
}
