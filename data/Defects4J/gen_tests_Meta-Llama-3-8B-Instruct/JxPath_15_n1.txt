
public void testCoreUnionOperationSorting() throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse(new InputSource(new StringReader("<MAIN><A>avalue</A><B>bvalue</B></MAIN>")));

    Node nodeA = doc.getFirstChild().getFirstChild().getFirstChild();
    Node nodeB = doc.getFirstChild().getFirstChild().getLastChild();

    NodeSetIterator iter = new NodeSetIterator(new NodeSetImpl(new Node[]{nodeA, nodeB}));
    String result = XPath.execute("/MAIN/B | /MAIN/A", iter).stringValue();

    assertEquals("avalue", result);
}
