java
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonPrimitive;
import org.junit.Test;

import java.lang.reflect.Type;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import static org.junit.Assert.assertThrows;
import static org.junit.Assert.assertTrue;

public class GsonWildcardIssueTest {

    @Test
    public void testWildcardDeserialization() {
        Gson gson = new GsonBuilder().create();
        String json = "{\"inBig\": {\"key\": [{\"inSmall\": \"hello\"}]}";
        BigClass bigClass = gson.fromJson(json, BigClass.class);

        assertThrows(ClassCastException.class, () -> bigClass.getInBig().get("key").get(0));
    }

    public static class BigClass {
        Map<String, List<SmallClass>> inBig;

        public Map<String, List<SmallClass>> getInBig() {
            return inBig;
        }
    }

    public static class SmallClass {
        String inSmall;

        public String getInSmall() {
            return inSmall;
        }
    }
}
