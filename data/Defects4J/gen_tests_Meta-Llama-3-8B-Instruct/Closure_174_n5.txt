public void testCompilerCrashOnGoogScopeLocals() {
    String code = "goog.provide(\"main\");goog.scope(function (){var a = foo, b, c = 1;});";
    try {
        // This should throw a CompilerError
        Compiler.compile(code);
        fail("Compiler should have crashed");
    } catch (CompilerError e) {
        // The error should be caught and the test should not fail
    }
}