public void testOverlyAggressiveCommaRemoval() {
    String originalCode = "function Test(n) {\n" +
            " var i = 0;\n" +
            " return typeof n!== \"undefined\"? (i = n.length) : (n = \"foo\"), i\n" +
            "}";

    String compiledCode = "function Test(a) {\n" +
            " return 0\n" +
            "}";

    assertNotEquals(originalCode, compiledCode);
}