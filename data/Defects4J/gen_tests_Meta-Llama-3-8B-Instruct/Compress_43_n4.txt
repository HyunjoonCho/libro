public void testZipVersionNeededToExtract() {
    ZipArchiveOutputStream zip = new ZipArchiveOutputStream(new ByteArrayOutputStream());
    zip.setZip64Mode(Zip64Mode.AsNeeded);
    ZipEntry entry = new ZipEntry("test");
    zip.putNextEntry(entry);
    zip.setMethod(ZipMethod.Deflate);
    zip.closeEntry();
    
    byte[] buf = ((ByteArrayOutputStream) zip.getOutputStream()).toByteArray();
    
    int localVersion = zip.getEntryLocalHeader().getVersionNeeded();
    int centralVersion = zip.getEntryCentralDirectory().getVersionNeeded();
    
    assertEquals(Zip64.MIN_VERSION, centralVersion);
    assertNotEquals(Zip64.MIN_VERSION, localVersion);
}