public void testNamespaceException() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.newDocument();
    Element root = doc.createElementNS("http://example.com", "ElementA");
    root.setAttributeNS("http://example.com", "myAttr", "Mytype");
    Element child = doc.createElementNS("http://example.com", "B");
    child.setTextContent("MY VALUE");
    root.appendChild(child);
    doc.appendChild(root);
    String xml = "<root>" + root.toString() + "</root>";
    Document doc2 = builder.parse(new InputSource(new StringReader(xml)));
    Element root2 = doc2.getDocumentElement();
    assertEquals("ElementA", root2.getLocalName());
    assertEquals("http://example.com", root2.getNamespaceURI());
    assertEquals("myAttr", root2.getAttribute("myAttr").getLocalName());
    assertEquals("Mytype", root2.getAttribute("myAttr").getTextContent());
}