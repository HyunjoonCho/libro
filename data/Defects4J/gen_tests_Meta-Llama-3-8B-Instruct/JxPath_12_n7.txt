public void testIncompleteNamespaceHandling() {
    DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();
    DocumentImpl document = (DocumentImpl) registry.getDOMImplementation("LS").createDocument(null, "root", null);
    Element elementA = document.createElement("ElementA");
    elementA.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:A", "http://example.com/A");
    elementA.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:B", "http://example.com/B");
    elementA.setAttribute("A:myAttr", "Mytype");
    elementA.appendChild(document.createElement("B:ElementB"));
    elementA.setTextContent("MY VALUE");
    elementA.appendChild(document.createElement("C:ElementC"));
    elementA.setTextContent("MY VALUE");
    try {
        elementA.getAttributes();
    } catch (Exception e) {
        fail("Expected no exception, but got: " + e.getMessage());
    }
}