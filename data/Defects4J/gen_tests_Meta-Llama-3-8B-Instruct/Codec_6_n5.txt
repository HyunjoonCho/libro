
public void testBase64InputStreamRead() throws IOException {
    // Create a Base64-encoded stream
    String base64Data = "AQIDBAQ=";
    byte[] data = Base64.getDecoder().decode(base64Data);
    ByteArrayInputStream in = new ByteArrayInputStream(data);

    // Wrap the input stream with a Base64InputStream
    Base64InputStream base64In = new Base64InputStream(in, true);

    // Try to read from the stream
    byte[] buffer = new byte[3];
    int bytesRead = base64In.read(buffer);

    // The bug report says that read() returns 0 at the end of a stream that is a multiple of 3 bytes long
    assertEquals(0, bytesRead);
}
