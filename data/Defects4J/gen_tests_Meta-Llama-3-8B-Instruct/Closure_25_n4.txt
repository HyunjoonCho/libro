java
public void testAnonymousObjectTypeInference() {
    // This compiles fine
    Object parry = new Object() {
        String prop1 = "hi";
        Integer prop2;
    };
    callz(parry);

    // This does not compile
    try {
        callz(new Object() {
            String prop1 = "hi";
        });
        fail("Expected compilation error");
    } catch (Exception e) {
        // expected exception
    }
}

// Method callz is the same as in the bug report
void callz(Object parry) {
    if (parry instanceof Object && ((Object) parry).getClass().getDeclaredField("prop2")!= null) {
        if (((Object) parry).getClass().getDeclaredField("prop2").get((Object) parry)!= null && ((int) ((Object) parry).getClass().getDeclaredField("prop2").get((Object) parry)) < 5) {
            System.out.println("alright!");
        }
    }
    System.out.println(((Object) parry).getClass().getDeclaredField("prop1").get((Object) parry));
}
