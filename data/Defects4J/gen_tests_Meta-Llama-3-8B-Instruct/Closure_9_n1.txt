java
import org.junit.Test;
import static org.junit.Assert.fail;

public class CompilerBugTest {
    @Test
    public void testAMDModuleInSubdirectory() {
        // Create a test directory
        String directory = "test";
        String fooJs = "lib/Foo.js";
        String barJs = "Bar.js";
        String outJs = "out.js";

        // Create the necessary files
        String fooContent = "define('module$lib/Foo', [], function() { return { foo: 'bar' });";
        String barContent = "define('module$Bar', ['module$lib/Foo'], function(Foo) { return { baz: Foo.foo });";

        // Compile the files
        try {
            // Call the compiler with the necessary options
            // This will throw an exception if the compilation fails
            // You can also add assertions to check the output
            // For example:
            // assertEquals("expected output", actual output);
        } catch (Exception e) {
            fail("Compilation failed: " + e.getMessage());
        }
    }
}
