
public void testPrototypeMethodRemoved() {
    Object foo = new Object();
    foo.put("bar", new Object() {
        public void bar1() {
            System.out.println("bar1");
        }
    });

    Object foobar = new Object();
    foobar.getClass().getDeclaredField("bar").set(foobar, foo.get("bar"));

    Object fooBar = new foobar();
    try {
        ((foobar) fooBar).bar1();
        fail("Expected 'bar1' to be removed");
    } catch (Exception e) {
        // Expected exception
    }
}
