public void testTypeHierarchyAdapter() {
    JsonConfig jsonConfig = new JsonConfig();
    jsonConfig.setClassMap(new HashMap<Class, Class>() {
        {
            put(Vehicle.class, Car.class);
        }
    });
    JSONSerializer serializer = new JSONSerializer(jsonConfig);
    String json = "{\"make\":\"Toyota\"}";
    try {
        Car car = (Car) serializer.fromJSON(json, Car.class);
        fail("Expected a JSONException");
    } catch (JSONException e) {
        // expected
    }
}