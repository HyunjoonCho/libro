java
import org.jsoup.helper.DataUtil;
import org.junit.Test;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.charset.CodingErrorAction;
import java.nio.charset.StandardCharsets;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

public class Utf16StreamTest {

    @Test
    public void testUtf16StreamWithBom() throws IOException {
        // Create a UTF-16LE stream with BOM
        byte[] bytes = new byte[] {(byte)0xFF, (byte)0xFE};
        bytes = DataUtil.appendByteArray(bytes, "Hello".getBytes(StandardCharsets.UTF_16LE));
        ByteArrayInputStream bais = new ByteArrayInputStream(bytes);

        // Parse the stream
        String result = DataUtil.parseByteData(bais, "UTF-16LE");

        // Check that the result is not UTF-8
        try {
            result.getBytes("UTF-8");
            fail("Expected UTF-16LE, got UTF-8");
        } catch (UnsupportedEncodingException e) {
            // Expected
        }

        // Check that the result is not UTF-16BE
        try {
            result.getBytes("UTF-16BE");
            fail("Expected UTF-16LE, got UTF-16BE");
        } catch (UnsupportedEncodingException e) {
            // Expected
        }
    }
}
