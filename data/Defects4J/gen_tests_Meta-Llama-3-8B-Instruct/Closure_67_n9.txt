public void testAdvancedCompilation() {
    A a = new A();
    a.prototype.func1 = a.prototype.func1;
    a.prototype.func1 = function() {
        this._x = 2;
        this.func2();
    }
    assertEquals(3, a._x);
}