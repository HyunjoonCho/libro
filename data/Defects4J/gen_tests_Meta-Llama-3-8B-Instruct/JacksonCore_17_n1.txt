public void testJsonGenerationException() {
    String json = "{\"a\":{\"b\":{\"c\":\"\\ud83d\\udc32\"}}";
    try {
        ObjectMapper mapper = new ObjectMapper();
        JsonFactory jsonFactory = mapper.getFactory();
        JsonGenerator gen = jsonFactory.createGenerator(new ByteArrayOutputStream());
        gen.writeStartObject();
        gen.writeFieldName("a");
        gen.writeStartObject();
        gen.writeFieldName("b");
        gen.writeStartObject();
        gen.writeRaw(json.substring(11, 23));
        gen.writeEndObject();
        gen.writeEndObject();
        gen.writeEndObject();
        gen.close();
    } catch (JsonGenerationException e) {
        assertEquals("Split surrogate on writeRaw() input", e.getMessage());
    }
}