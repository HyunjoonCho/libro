java
public void testNegativeValueWithRestrictNonNegative() {
    RealFunction function = new AbstractRealMultivariateFunction() {
        @Override
        public double value(double[] point) {
            return point[0] + point[1];
        }
    };
    RealConstraint constraint = new AbstractLinearConstraint() {
        @Override
        public double evaluate(double[] point) {
            return point[0] - 1;
        }
    };
    SimplexSolver solver = new SimplexSolver();
    solver.optimize(function, new RealConstraint[]{constraint}, GoalType.MINIMIZE, true);
    double[] result = solver.getOptimum();
    assertEquals(1, result[0], 0.0001);
    // This should be 0 or a very small value due to the restrictNonNegative flag
    assertEquals(0, result[1], 0.0001);
}
