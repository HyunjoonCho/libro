public void testSuperReplacement() {
    // Create a JavaScript function with a prototype method
    String code = "function Foo() { }; Foo.prototype.bar = function() { return $super(); };";
    // Compile the code with advanced optimizations
    Compiler compiler = new Compiler();
    compiler.setOptimizationLevel(OptimizationLevel ADVANCED);
    CompiledScript script = compiler.compile(code);
    // Verify that $super is replaced
    assertEquals("$super$$1", script.getBytecode().getMethodName("Foo.prototype.bar"));
}