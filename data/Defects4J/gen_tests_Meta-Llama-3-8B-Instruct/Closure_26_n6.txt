public void testProcessCommonJSModules() {
    String echoJs = "define(function() { return { echo: function(val) { window.console.log(val); } }); }";
    String echoMainJs = "var echo = require('echo'); echo.echo('hello world');";
    String compilationOutput = compileJs(echoJs, echoMainJs);
    assertTrue(compilationOutput.contains("ERROR - Property module$exports never defined on module$echo_main"));
}

// helper method to simulate compilation
private String compileJs(String... jsFiles) {
    // implement the logic to compile the JavaScript files and return the compilation output
}