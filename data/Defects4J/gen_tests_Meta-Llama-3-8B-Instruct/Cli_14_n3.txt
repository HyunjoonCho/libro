java
import org.junit.Test;
import static org.junit.Assert.assertThrows;
import org.apache.commons.cli2.CommandLine;
import org.apache.commons.cli2.Group;
import org.apache.commons.cli2.Option;
import org.apache.commons.cli2.Parser;
import org.apache.commons.cli2.option.DefaultOption;
import org.apache.commons.cli2.option.Argument;
import org.apache.commons.cli2.validation.FileValidator;

import java.io.File;

public class CLI2SampleTest {

    @Test
    public void testFileValidator() {
        DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
        ArgumentBuilder abuilder = new ArgumentBuilder();
        GroupBuilder gbuilder = new GroupBuilder();
        DefaultOption fileNameOption = obuilder
           .withShortName("f")
           .withLongName("file-name")
           .withRequired(true)
           .withDescription("name of an existing file")
           .withArgument(abuilder
               .withName("file-name")
               .withValidator(FileValidator.getExistingFileInstance())
               .create())
           .create();
        Group options = gbuilder
           .withName("options")
           .withOption(fileNameOption)
           .create();
        Parser parser = new Parser();
        parser.setHelpTrigger("--help");
        parser.setGroup(options);

        // This should throw a ClassCastException
        assertThrows(ClassCastException.class, () -> parser.parseAndHelp(new String[] {"-f", new File("path-to-an-existing-file").toString()}));
    }
}
