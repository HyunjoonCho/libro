public void testLastWarningOrErrorTruncated() throws Exception {
    Process process = Runtime.getRuntime().exec("java -jar compiler.jar --warning_level VERBOSE --js test.js");
    String output = new BufferedReader(new InputStreamReader(process.getInputStream())).lines().collect(Collectors.join());
    System.out.println(output);
    assert output.contains("test.js:1: ERROR - variable foo is undefined");
    assert output.contains("test.js:2: ERROR - variable bar is undefined");
    assert!output.contains(" ^");
}