java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.module.kotlin.KotlinModule;
import org.junit.Test;

import static org.junit.Assert.fail;

public class JacksonEnumPolymorphismTest {

    @Test
    public void testEnumPolymorphism() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new KotlinModule());

        String json = "{\"kind\": \"CONTACT\", \"to\": {\"name\": \"Foo\"}}";
        Invite invite = mapper.readValue(json, Invite.class);

        fail("Expected an exception but it didn't throw");
    }
}
