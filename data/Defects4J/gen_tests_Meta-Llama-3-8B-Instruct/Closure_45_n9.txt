java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.JsException;

import static org.junit.Assert.assertEquals;

@RunWith(JUnit4.class)
public class ClosureCompilerTest {

    @Test
    public void testAssignmentRemovedWhenUsedAsAnExpressionResultToArrayPush() throws JsException {
        Compiler compiler = new Compiler();
        compiler.setCompilationLevel(CompilationLevel.SIMPLE_OPTIMIZATIONS);
        String input = "function f() {\n" +
                "  var a = [], b;\n" +
                "  a.push(b = []);\n" +
                "  b[0] = 1;\n" +
                "  return a;\n" +
                "}\n";
        String expectedOutput = "function f(){var a=[];a.push([]);return a};";
        String actualOutput = compiler.compile(input).getCode();
        assertEquals(expectedOutput, actualOutput);
    }
}
