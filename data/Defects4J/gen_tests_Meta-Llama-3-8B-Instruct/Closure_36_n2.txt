public void testSingletonGetter() {
    ClosureCompiler compiler = new ClosureCompiler();
    String code = "goog.provide('foo');\n" +
            "var foo = function() { this.values = []; };";
    compiler.compile(code, "foo");
    String compiledCode = compiler.getCompiledCode();
    assertNotEquals("function($ctor$$) { $ctor$$.$getInstance$ = function $$ctor$$$$getInstance$$() { return $ctor$$.$instance_$ || ($ctor$$.$instance_$ = new $ctor$$ } })(function() { }), compiledCode);
}