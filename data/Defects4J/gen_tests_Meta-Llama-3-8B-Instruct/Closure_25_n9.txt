java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JsException;

@RunWith(JUnit4.class)
public class AnonymousObjectInferenceTest {
    @Test
    public void testAnonymousObjectInference() throws JsException {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
        options.setCheckTypes(true);
        options.setCheckVars(true);

        String source = "/**\n" +
                " * @param {{prop1: string, prop2: (number|undefined)}} parry\n" +
                " */\n" +
                "function callz(parry) {\n" +
                "  if (parry.prop2 && parry.prop2 < 5) alert('alright!');\n" +
                "  alert(parry.prop1);\n" +
                "}\n" +
                "\n" +
                "new callz({prop1: 'hi'});";

        compiler.compile(source, options);
    }
}
