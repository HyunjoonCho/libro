java
public void testNumberShapeExplicitlyDefined() {
    // Before fix, this test should fail
    NumberFormat numberFormat = NumberFormat.getNumberInstance(Locale.US);
    numberFormat.setShape(NumberFormat.Shape.TEXT);
    assertEquals("123", numberFormat.format(123)); // expected to throw an exception

    // After fix, this test should pass
    // Add code to test that explicit shape value has precedence
}
