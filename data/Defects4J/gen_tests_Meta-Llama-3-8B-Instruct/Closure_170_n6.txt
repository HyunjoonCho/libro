public void testOverlyAggressiveCommaRemoval() {
    Function functionTest = new Function("n", "var i = 0; return typeof n!== 'undefined'? (i = n.length) : (n = 'foo'), i");
    Object dummy = new Object();
    dummy.toString = new String("6chars");
    assertEquals("6", functionTest.call(dummy));
}