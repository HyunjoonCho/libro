public void testEmbeddedRungeKuttaStepSize() {
    // Create an instance of the integrator
    RungeKuttaIntegrator integrator = new RungeKuttaIntegrator();
    
    // Set the initial conditions and the integration range
    double[] y0 = new double[] {1.0};
    double[] dy = new double[] {0.0};
    double t0 = 0.0;
    double t1 = 1.0e-12;
    
    // Set the integrator's step size to a large value
    integrator.setInitialStepSize(1.0e6);
    
    // Attempt to integrate the system
    integrator.integrate(y0, dy, t0, t1);
    
    // Assert that the step size was not truncated to stay within the integration range
    assertEquals(1.0e6, integrator.getStepSize(), 1e-6);
}