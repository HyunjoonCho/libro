
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;
import picocli.CommandLine;
import picocli.tools.HelpFormatter;

import java.util.Arrays;
import java.util.List;

import static org.junit.Assert.assertEquals;

@RunWith(JUnit4.class)
public class HelpFormatterTest {

    @Test
    public void testOptionComparator() {
        OptionGroup group = new OptionGroup();
        Option h = new Option("h");
        Option s = new Option("s");
        Option b = new Option("b");
        Option t = new Option("t");
        group.addOption(h);
        group.addOption(s);
        group.addOption(b);
        group.addOption(t);
        Options options = new Options();
        options.addOptionGroup(group);
        options.addOption(new Option("o"));
        HelpFormatter formatter = new HelpFormatter();
        formatter.setOptionComparator(null);
        String help = formatter.printHelp("cmd", "", options, null);
        List<String> lines = Arrays.asList(help.split("\n"));
        assertEquals("Expected group 'h','s', 'b', 't' in order", lines.get(0), "Group");
        assertEquals("Expected option 'o' after group", lines.get(2), "Option o");
    }
}
