java
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class TestJsoupWhitespaceHandling {

    @Test
    public void testWhitespaceHandlingInPreTag() {
        String s = "<pre><code>\n" +
                "  message <span style=\"color:red\"> other   \n    message  with \n" +
                "   whitespaces      </span>\n" +
                "</code></pre>";
        Document doc = Jsoup.parse(s);
        String expectedOutput = "<pre><code>\n" +
                "  message <span style=\"color:red\"> other   \n    message  with \n" +
                "   whitespaces      </span>\n" +
                "</code></pre>";
        String actualOutput = doc.select("pre").first().outerHtml();
        assertEquals(expectedOutput, actualOutput);
    }
}
