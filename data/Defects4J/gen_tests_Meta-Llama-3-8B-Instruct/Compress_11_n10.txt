public void testCreateArchiveInputStream() {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    byte[] bytes = "This is a small text file".getBytes();
    bos.write(bytes);
    bos.write(bytes);
    bos.write(bytes);
    bos.write(bytes); // 100 bytes
    bos.write(bytes); // 101 bytes
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    assertFalse(ArchiveStreamFactory.createArchiveInputStream(bais) instanceof TarArchiveInputStream);
    assertTrue(ArchiveStreamFactory.createArchiveInputStream(new ByteArrayInputStream(bytes, 0, 101)) instanceof TarArchiveInputStream);
}