
public void testBase64InputStreamReadAtEndOfMultipleOfThreeBytes() throws IOException {
    byte[] bytes = new byte[] {(byte) 0x01, (byte) 0x02, (byte) 0x03};
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    Base64InputStream base64InputStream = new Base64InputStream(bais, true);
    byte[] buffer = new byte[3];
    int bytesRead = base64InputStream.read(buffer);
    assertEquals(3, bytesRead);
    base64InputStream.close();
    bais = new ByteArrayInputStream(bytes);
    base64InputStream = new Base64InputStream(bais, true);
    bytesRead = base64InputStream.read(buffer);
    assertEquals(0, bytesRead);
}
