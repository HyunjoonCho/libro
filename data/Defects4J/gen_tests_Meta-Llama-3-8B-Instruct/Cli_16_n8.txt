java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

import java.util.Arrays;
import java.util.List;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

@RunWith(Parameterized.class)
public class GroupConstraintsTest {

    @Parameters
    public static List<Object[]> data() {
        return Arrays.asList(new Object[][]{
            {"-A", false},
            {"-B", true},
            {"-A -B", true},
            {"-C", false}
        });
    }

    @Parameter(0)
    public String option;

    @Parameter(1)
    public boolean expectedHasOption;

    @Test
    public void testGroupConstraints() {
        WriteableCommandLine commandLine = new WriteableCommandLine();
        commandLine.addOption(new Option("-A", "groupA"));
        commandLine.addOption(new Option("-B", "groupB"));
        commandLine.addOption(new Option("-C", "groupC"));

        OptionSpec optionSpec = new OptionSpec("-B", "groupB");
        optionSpec.addGroup(new OptionSpec("-A", "groupA"));

        commandLine.addOption(optionSpec);

        assertTrue(commandLine.hasOption(option));

        assertEquals(expectedHasOption, commandLine.hasOption(option));
    }
}
