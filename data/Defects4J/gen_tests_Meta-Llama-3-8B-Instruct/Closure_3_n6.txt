public void testOptimizationFailsWithVariableInCatchClause() {
    final String expected = "try { throw Error(\"\"); } catch(a) { } return a.stack";
    assertEquals(expected, getStack());
}

private String getStack() {
    try {
        throw new Error("");
    } catch (Error a) {
        return a.toString();
    }
}