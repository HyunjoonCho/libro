public void testCSVFormatWithHeader() {
    CSVFormat tdf = CSVFormat.TDF.withHeader("x");
    try (BufferedWriter writer = Files.newBufferedWriter(Paths.get("data.csv"))) {
        CSVPrinter csvPrinter = new CSVPrinter(writer, tdf);
        csvPrinter.printRecord(42);
        csvPrinter.close();
    } catch (IOException e) {
        fail("Exception occurred: " + e.getMessage());
    }
    String expected = "x\n42";
    String actual = Files.readString(Paths.get("data.csv"));
    assertEquals(expected, actual);
}