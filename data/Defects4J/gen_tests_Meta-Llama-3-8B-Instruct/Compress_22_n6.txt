public void testReadTruncated() {
    byte[] data = new byte[770];
    // Initialize the data here...
    BZip2CompressorInputStream stream = new BZip2CompressorInputStream(new ByteArrayInputStream(data));
    int bytesRead = 0;
    while ((bytesRead < 770) && (stream.available() > 0)) {
        bytesRead += stream.read(new byte[1024]);
    }
    assertEquals(769, bytesRead);
}