java
public class AnonymousObjectTypeInferenceTest {
    public void testAnonymousObjectTypeInference() {
        // This test compiles fine
        // Java compiler infers the type of parry as {prop1: string, prop2: (number|undefined)}
        callz({prop1: "hi"});

        // This test does not compile
        // Java compiler does not infer the type of parry as {prop1: string, prop2: (number|undefined)} when it's a constructor
        try {
            new callz({prop1: "hi"});
            fail("Expected a compilation error");
        } catch (CompilationError e) {
            // expected
        }
    }

    public static void callz(Object parry) {
        if (parry instanceof Object && ((Object) parry).hasOwnProperty("prop2") && ((Object) parry).get("prop2") instanceof Number && ((Number) ((Object) parry).get("prop2")).doubleValue() < 5) {
            System.out.println("alright!");
        }
        System.out.println(((Object) parry).get("prop1"));
    }
}
