public void testLookupTranslatorCharSequenceFailure() {
    LookupTranslator translator = new LookupTranslator(StringEscapeUtils.ESCAPE_HTML4);
    CharSequence cs1 = "1 < 2";
    CharSequence cs2 = CharBuffer.wrap("1 < 2".toCharArray());
    try {
        assertEquals(StringEscapeUtils.escapeHtml4(cs1), translator.translate(cs1));
        assertEquals(StringEscapeUtils.escapeHtml4(cs1), translator.translate(cs2));
    } catch (IllegalStateException e) {
        fail("LookupTranslator should not throw an exception");
    }
}