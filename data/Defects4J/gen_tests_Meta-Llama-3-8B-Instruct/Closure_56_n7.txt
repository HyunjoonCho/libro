public void testLastWarningOrErrorTruncated() {
    String output = new Compiler().run(new File("test.js"));
    String expectedOutput = "test.js:1: ERROR - variable foo is undefined\nalert(foo);\n ^\n" +
            "test.js:2: ERROR - variable bar is undefined\n";
    assertEquals(expectedOutput, output);
}