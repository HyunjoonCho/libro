
public void testIssue() throws IOException, JsonMappingException {
    String json = "{\"a\":1, \"b\":null}";
    TokenBuffer tokenBuffer = new TokenBuffer(new ByteArrayInputStream(json.getBytes()));
    tokenBuffer.nextToken();
    assertEquals(JsonToken.START_OBJECT, tokenBuffer.getCurrentToken());
    assertEquals("a", tokenBuffer.getCurrentName());
    tokenBuffer.nextToken();
    assertEquals(JsonToken.VALUE_NUMBER_INT, tokenBuffer.getCurrentToken());
    assertEquals(1, tokenBuffer.getIntValue());
    assertEquals(JsonToken.FIELD_NAME, tokenBuffer.nextToken());
    assertEquals("b", tokenBuffer.getCurrentName());
    assertEquals(JsonToken.VALUE_NULL, tokenBuffer.nextToken());
    assertEquals(JsonToken.END_OBJECT, tokenBuffer.nextToken());
}
