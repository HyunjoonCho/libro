public void testIssue107() {
    // This test method will reproduce the failure
    // Create a new compiler instance
    Compiler compiler = new Compiler();
    // Compile the given JavaScript code
    compiler.compile("var test = {};\n\n/* @interface */\n" +
            "test.T = function() {};\n\n/* @constructor */\n" +
            "test.A = function() {};\n\n/* @constructor */\n" +
            "test.B = function() {};\n\n/* @constructor */\n" +
            "test.X = function() {\n" +
            "    this.type = test.A;\n" +
            "    this.t = this.f();\n" +
            "};\n\n/* @return {test.T} */\n" +
            "test.X.prototype.f = function() {\n" +
            "    if (this.type === test.A) {\n" +
            "        return new test.A();\n" +
            "    } else if (this.type === test.B) {\n" +
            "        return new test.B();\n" +
            "    }\n" +
            "};");
    // Check if the compilation was successful
    assert(compiler.hasErrors());
}