
import org.jaxen.JaxenContext;
import org.jaxen.JaxenException;
import org.jaxen.SimpleContext;
import org.jaxen.XPath;
import org.jaxen.XPathContext;

import java.io.ByteArrayInputStream;
import java.io.IOException;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import org.junit.Test;

import static org.junit.Assert.*;

public class JXPathTest {

    @Test
    public void testDescendantOrSelfAxis() throws JaxenException, ParserConfigurationException, SAXException, IOException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        String xml = "<root id='1234'/>";
        Document doc = builder.parse(new InputSource(new ByteArrayInputStream(xml.getBytes())));
        JaxenContext context = new SimpleContext();
        XPath xpath = context.compile("//root/@id/text()");
        assertEquals("1234", xpath.evaluate(doc));
    }
}
