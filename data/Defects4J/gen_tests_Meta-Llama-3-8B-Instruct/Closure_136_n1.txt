public void testSuperReplacement() {
    // Create a test class with a method that uses $super
    final TestClass testClass = new TestClass();
    final JavaScriptEngine engine = new JavaScriptEngine();
    engine.compile("function TestClass() { this.$super(); }");
    engine.execute("var test = new TestClass();");
    // Check that $super is replaced with $super$$4
    assertEquals("$super$$4", engine.getScope().getVariable("test.$").getName());
}