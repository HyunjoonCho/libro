
public void testRemoveIgnoreCase() {
    Map<String, Attribute> attributes = new LinkedHashMap<>();
    attributes.put("abc", new Attribute("attr1", "value1"));
    attributes.put("def", new Attribute("attr2", "value2"));
    attributes.put("ghi", new Attribute("attr3", "value3"));

    // Reproduce the bug
    Iterator<Map.Entry<String, Attribute>> iter = attributes.entrySet().iterator();
    while (iter.hasNext()) {
        Map.Entry<String, Attribute> entry = iter.next();
        if (entry.getKey().equalsIgnoreCase("abc")) {
            iter.remove();
        }
    }

    // Verify the exception is thrown
    assertThrows(ConcurrentModificationException.class, () -> {
        // Try to remove another element
        attributes.entrySet().iterator().remove();
    });
}
