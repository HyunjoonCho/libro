public void testNodeSetReturnedByExtensionFunction() {
    JXPathContext context = JXPathContext.newContext(new MockNode());
    NodeSet result = (NodeSet) ExtensionFunction.myFunction(context);
    assertEquals(1, result.getLength());
    Node node = result.item(0);
    assertEquals(Node.NODESET_TYPE, node.getNodeType());
    assertEquals(1, ((NodeSet) node).getLength());
}