java
import org.jxpath.JXPathContext;
import org.jxpath.Pointer;
import org.jxpath.PointerIterator;
import org.jxpath.XPathContext;
import org.jxpath.helper.BeanContext;
import org.jxpath.helper.BeanNode;
import org.jxpath.helper.BeanNodeSet;
import org.jxpath.helper.BeanPointer;
import org.jxpath.helper.BeanSet;
import org.jxpath.helper.NodeSet;
import org.junit.Test;

public class JXPathTest {

    @Test
    public void testNodeSet() {
        BeanContext beanContext = new BeanContext();
        BeanNode node = new BeanNode();
        node.setName("node");
        beanContext.pushNode(node);

        JXPathContext context = JXPathContext.newContext(beanContext);
        NodeSet nodeSet = (NodeSet) context.selectNodes("ems:observations()");

        PointerIterator iterator = context.iterate(nodeSet);
        while (iterator.hasNext()) {
            Pointer pointer = iterator.next();
            if (pointer.isNodeSet()) {
                BeanSet beanSet = (BeanSet) pointer.getBean();
                for (Object bean : beanSet.getBeanList()) {
                    System.out.println(bean);
                }
            } else {
                System.out.println(pointer.getBean());
            }
        }
    }
}
