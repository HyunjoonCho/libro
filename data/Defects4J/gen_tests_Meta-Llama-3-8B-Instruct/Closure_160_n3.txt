
public void testCheckVarsUndefinedVarsDiagnostic() {
    String[] args = {"--js", "test.js", "--jscomp_warning", "checkVars", "--jscomp_warning", "undefinedVars"};
    try {
        ProcessBuilder builder = new ProcessBuilder("java", "-jar", "compiler.jar");
        Process process = builder.start();
        String output = new BufferedReader(new InputStreamReader(process.getInputStream())).lines().collect(Collectors.join());
        Assert.assertFalse(output.contains("WARNING - variable foo is undefined"));
    } catch (IOException e) {
        Assert.fail("Failed to run compiler with warning options");
    }
}
