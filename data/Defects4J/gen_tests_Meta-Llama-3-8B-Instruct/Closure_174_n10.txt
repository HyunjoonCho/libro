
public void testCompilerCrashOnGoogScope() throws Exception {
    String code = "goog.provide(\"main\");\n" +
            "goog.scope(function (){\n" +
            " var a = foo, b, c = 1;\n" +
            "});";
    JShell shell = new JShell();
    try {
        shell.compile(code);
        fail("Expected compiler crash");
    } catch (CompilationFailedException e) {
        // expected
    }
}
