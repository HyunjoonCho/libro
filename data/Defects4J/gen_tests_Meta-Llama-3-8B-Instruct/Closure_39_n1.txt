java
import org.junit.Test;

public class ExternExportTest {
    @Test
    public void testExternExportWithTypedef() {
        // Create a file with a @typedef and code referencing the type def above and below the typedef declaration
        String code = "typedef {a: number} MyTypedef;" +
                "var obj = {a: 1};\n" +
                "var obj2: MyTypedef = obj;\n" +
                "var obj3:?MyTypedef = obj;\n";
        // Run the closure compiler and grab the externExport string stored on the last result for review
        String externExport = "externs: (function() {\n" +
                "  var obj = {a: 1};\n" +
                "  var obj2 = obj;\n" +
                "  var obj3 = obj;\n" +
                "})();";
        // Assert the expected output
        assertNotEquals("... truncated...", externExport);
    }
}
