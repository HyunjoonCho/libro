java
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;
import org.apache.logging.log4j.core.LogEvent;
import org.apache.logging.log4j.core.parser.LogEventParser;
import org.apache.logging.log4j.core.parser.JsonLogEventParser;
import java.nio.charset.StandardCharsets;

import static org.junit.Assert.assertNotNull;

@RunWith(JUnit4.class)
public class LogEventParserTest {

    @Test
    public void testJsonLogEventParser() throws Exception {
        String inputString = "{\"timeMillis\" : 1493121664118, \"thread\" : \"main\", \"threadId\" : 1, \"threadPriority\" : 5, \"level\" : \"INFO\", \"loggerName\" : \"HelloWorld\", \"marker\" : { \"name\" : \"child\", \"parents\" : [ { \"name\" : \"parent\", \"parents\" : [ { \"name\" : \"grandparent\" } ] } ] }, \"message\" : \"Hello, world!\", \"thrown\" : { \"commonElementCount\" : 0, \"message\" : \"error message\", \"name\" : \"java.lang.RuntimeException\", \"extendedStackTrace\" : [ { \"class\" : \"logtest.Main\", \"method\" : \"main\", \"file\" : \"Main.java\", \"line\" : 29, \"exact\" : true, \"location\" : \"classes/\", \"version\" : \"?\" } ] }, \"contextStack\" : [ \"one\", \"two\" ], \"loggerFqcn\" : \"org.apache.logging.log4j.spi.AbstractLogger\", \"endOfBatch\" : false, \"contextMap\" : { \"bar\" : \"BAR\", \"foo\" : \"FOO\" }, \"source\" : { \"class\" : \"logtest.Main\", \"method\" : \"main\", \"file\" : \"Main.java\", \"line\" : 29 } }";

        LogEventParser parser = new JsonLogEventParser();
        LogEvent result = parser.parseFrom(inputString.getBytes(StandardCharsets.UTF_8));
        assertNotNull(result);
    }
}
