public void testInvalidPropertyReported() {
    String code = "var Person = function(options){};\n" +
            "Person = makeClass(\n" +
            "/** @lends Person.prototype */ {\n" +
            "  /** @this {Person} */\n" +
            "  initialize: function(options) {\n" +
            "    /** @type {string} */ this.name_ = options.thisPropDoesNotExist;\n" +
            "  },\n" +
            "  say: function(message) {\n" +
            "    window.console.log(this.name_ +'says:'+ message);\n" +
            "  }\n" +
            "};\n" +
            "var joe = new Person({name: 'joe', height: 300});\n" +
            "joe.say('hi');";
    try {
        Compiler.compile(code);
        fail("Expected compilation error");
    } catch (CompilationException e) {
        // expected
    }
}