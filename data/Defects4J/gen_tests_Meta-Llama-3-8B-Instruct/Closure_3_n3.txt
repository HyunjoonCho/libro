public void testOptimizationFailure() {
    String result = new ClosureCompiler().compile(
        "function getStack() { " +
        "try { throw Error(''); } catch(a) { return a.stack; } } " +
        "window['getStackTrace']=getStack;");
    assertEquals("function getStack() { throw Error(''); } catch(a) { return a.stack; } window.getStackTrace = getStack;", result);
}