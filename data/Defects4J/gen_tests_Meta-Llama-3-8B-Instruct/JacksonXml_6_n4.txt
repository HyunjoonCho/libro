java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.xml.XmlMapper;
import org.junit.Test;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

import static org.junit.Assert.assertArrayEquals;

public class ToXmlGeneratorWriteBinaryTest {

    @Test
    public void testWriteBinaryWithInputStream() throws IOException {
        String data = "Hello, World!";
        byte[] bytes = data.getBytes();
        InputStream inputStream = new ByteArrayInputStream(bytes);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        XmlMapper xmlMapper = new XmlMapper();
        xmlMapper.writeValue(bos, bytes);
        byte[] expected = bos.toByteArray();
        byte[] actual = new byte[0];
        xmlMapper.writeValue(new ByteArrayOutputStream(), actual, inputStream);
        assertArrayEquals(expected, actual);
    }
}
