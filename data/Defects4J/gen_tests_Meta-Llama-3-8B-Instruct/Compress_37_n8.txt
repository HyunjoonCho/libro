public void testParsingPaxHeaders() throws IOException {
    String paxHeaderString = "pax_header1\n" +
            "content_type: application/octet-stream\n" +
            "size: 123\n\n" +
            "\n"; // empty line at the end
    TarArchiveInputStream tarInputStream = new TarArchiveInputStream(new ByteArrayInputStream(paxHeaderString.getBytes()));
    try {
        tarInputStream.parsePaxHeaders();
        fail("Expected NegativeArraySizeException");
    } catch (NegativeArraySizeException e) {
        // expected
    }
}