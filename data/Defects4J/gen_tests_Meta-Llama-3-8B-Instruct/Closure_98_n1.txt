public void testBadVariableInliningInClosure() {
    String script = "function foo() { var arr = [1, 2, 3, 4, 5]; for (var i = 0, l = arr.length; i < l; i++) { var j = arr[i]; (function() { var k = j; setTimeout(function() { console.log(k); }, 0); })(); } } foo();";
    assertEquals("5", compileAndRunScript(script));
}

private String compileAndRunScript(String script) {
    // Implement the logic to compile and run the script, e.g. using a JavaScript engine
}