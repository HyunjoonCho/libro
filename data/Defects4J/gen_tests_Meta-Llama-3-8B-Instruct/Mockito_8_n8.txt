public void testGenericsSelfReference() {
    GenericsSelfReference selfReference = Mockito.mock(GenericsSelfReference.class);
    when(selfReference.self()).thenReturn((GenericsSelfReference<T>) selfReference);
    GenericMetadataSupport genericMetadata = GenericMetadataSupport.inferFrom(GenericsSelfReference.class).resolveGenericReturnType(GenericsSelfReference.class.getMethod("self"));
    assertEquals(GenericsSelfReference.class, genericMetadata.rawType());
}