java
public void testLastEventDetection() {
    // Create an ODE integrator
    ODEIntegrator integrator = new DormandPrince54Integrator(1e-6, 1e-6, 1e-6, 0, 0);

    // Define the ODE function
    double[] y = new double[1];
    double[] dydt = new double[1];
    y[0] = 0;
    dydt[0] = 1;

    // Set the switching function
    integrator.setSwitchingFunction(new SwitchingFunction() {
        @Override
        public boolean isSwitching(double t, double[] y) {
            return y[0] > 0;
        }
    });

    // Set the initial condition
    integrator.setInitialCondition(0, y);

    // Define the event
    Event event = new Event(90, new EventAction() {
        @Override
        public void actionPerformed(Event event) {
            // Simulate the event
            System.out.println("Event detected at " + event.getTime());
        }
    });

    // Integrate the ODE
    integrator.integrate(0, 153, event);

    // Check if the event was detected
    assertEquals(90, event.getTime(), 1e-6);
}
