java
import org.junit.Test;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.ErrorReporter;
import com.google.javascript.jscomp.SourceFile;

public class TypeRefiningThisTest {
    @Test(expected = IllegalArgumentException.class)
    public void testTypeRefiningThis() {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        ErrorReporter errorReporter = new ErrorReporter() {
            @Override
            public void reportError(int start, int end, String message) {
                throw new AssertionError(message);
            }
        };
        compiler.compile(SourceFile.fromSource("function foo() { goog.isNull(this); }"), options, errorReporter);
    }
}
