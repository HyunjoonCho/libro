public void testDangerousUseOfGlobalThisObject() {
    ClosureCompiler compiler = new ClosureCompiler();
    compiler.compile("function Foo() { this._bar = null; }; " +
            "function writeMethodWithAnnotation() { this._bar = 123; };" +
            "function readMethodWithAnnotation() { return this._bar; };" +
            "function writeMethodWithoutAnnotation() { this._bar = 123; };" +
            "function readMethodWithoutAnnotation() { return this._bar; }");
    assertEquals(0, compiler.getWarnings().size()); // no warning
    compiler.compile("function Foo() { this._bar = null; }; " +
            "function writeMethodWithoutAnnotation() { this._bar = 123; };" +
            "function readMethodWithoutAnnotation() { return this._bar; }");
    assertEquals(1, compiler.getWarnings().size()); // one warning
}