
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.JUnit4;

@RunWith(JUnit4.class)
public class TestClosureCompiler {
    @Test
    public void testDangerousUseOfGlobalThisObject() {
        // Create a test class
        class Foo {
            private Object _bar;

            public void writeMethodWithAnnotation() {
                this._bar = 123; // no warning
            }

            public void readMethodWithAnnotation() {
                this._bar = 123; // should warn
            }

            public void writeMethodWithoutAnnotation() {
                this._bar = 123; // should warn
            }

            public Object readMethodWithoutAnnotation() {
                return this._bar; // should not warn
            }
        }

        // Compile the test class
        // Use some sort of code compiler or parser to check for warnings
        // Verify that the expected warnings are emitted
    }
}
