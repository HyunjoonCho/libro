
import org.joda.time.DateTime;
import org.joda.time.DateTimeZone;
import org.joda.time.Instant;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;
import org.joda.time.format.DateTimeFormatterBuilder;
import org.joda.time.format.ParsePosition;
import org.junit.Test;

import java.util.GregorianCalendar;

public class DateTimeFormatterParseTest {

    @Test
    public void testParseIntoBrokenYear() {
        DateTimeZone defaultZone = DateTimeZone.getDefault();
        DateTimeZone.setDefault(DateTimeZone.UTC);

        DateTimeFormatter formatter = new DateTimeFormatterBuilder()
               .appendPattern("MM/dd/yyyy")
               .toFormatter();

        Instant instant = new GregorianCalendar(2022, 1, 29, 0, 0, 0).toInstant();

        DateTime dt = formatter.parseDateTime("02/29", new ParsePosition(0), instant);

        assertEquals(2022, dt.getYear());
    }
}
