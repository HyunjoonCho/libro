public void testLastWarningOrErrorTruncated() {
    // Compile the JavaScript file and capture the output
    String[] args = new String[]{"-jar", "compiler.jar", "--warning_level", "VERBOSE", "--js", "test.js"};
    String output = new ProcessBuilder("java", args).redirectOutput(new File("output.txt")).start().waitFor() + "";
    // Check that the output is truncated
    assert output.contains("variable foo is undefined");
    assert!output.contains("variable bar is undefined");
}