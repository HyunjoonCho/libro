java
import org.junit.Test;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;
import org.apache.commons.compress.archivers.zip.ZipArchiveInputStream;

import static org.junit.Assert.assertArrayEquals;

public class ZipTest {
    @Test
    public void testZip() throws IOException {
        byte[] zip =...; // same as in the bug report
        ByteArrayInputStream bin = new ByteArrayInputStream(zip);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ZipArchiveInputStream in = new ZipArchiveInputStream(bin);
        try {
            while (true) {
                ZipArchiveEntry entry = in.getNextZipEntry();
                if (entry == null) {
                    break;
                }
                byte[] buf = new byte[(int) entry.getSize()];
                in.read(buf);
                bos.write(buf);
            }
        } finally {
            in.close();
        }
        byte[] expected =...; // expected zip contents
        assertArrayEquals(expected, bos.toByteArray());
    }
}
