public void testInvalidPropertyInPrototypeFunction() {
    String code = """
        ns.MyClass = function(thing) {
            this.thing_ = thing;
        };

        ns.MyClass.prototype.doIt = function() {
            var subthing = this.thing_.subthing;
            for (var i = 0; i < subthing.noprop; i++) {
                window.console.log(i);
            }
        };

        var thing = {subthing: {prop: 3}};

        var c = new ns.MyClass(thing);
        c.doIt();
    """;

    // This should throw a compilation error
    expectCompilationError(code);
}