java
import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonPrimitive;
import org.junit.Test;

import java.util.Map;

import static org.junit.Assert.assertThrows;

public class GsonWildcardSerializationTest {

    @Test
    public void testWildcardSerialization() {
        Gson gson = new Gson();
        String json = "{\"inBig\": {\"key\": [{\"inSmall\": \"hello\"}]}";
        BigClass bigClass = gson.fromJson(json, BigClass.class);

        assertThrows(ClassCastException.class, () -> {
            SmallClass small = bigClass.getInBig().get("key").get(0);
        });
    }
}

class BigClass {
    Map<String, Map<String,? extends List<SmallClass>>> inBig;
}

class SmallClass {
    String inSmall;
}
