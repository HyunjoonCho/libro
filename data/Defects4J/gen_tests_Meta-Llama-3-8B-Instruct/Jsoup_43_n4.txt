java
@Test
public void testElementSiblingIndex() {
    Document document = DocumentHelper.parseText("<root><div><p>1</p><p>2</p></div><div><p>3</p><p>4</p></div></root>");
    Element root = document.getRootElement();
    Element div1 = root.element("div").elements().get(0);
    Element div2 = root.element("div").elements().get(1);
    Element p1 = div1.element("p").elements().get(0);
    Element p2 = div1.element("p").elements().get(1);
    Element p3 = div2.element("p").elements().get(0);
    Element p4 = div2.element("p").elements().get(1);

    assertEquals(p2, root.element("div").elements().get(p1.elementSiblingIndex()));
    assertEquals(p4, root.element("div").elements().get(p3.elementSiblingIndex()));
}
