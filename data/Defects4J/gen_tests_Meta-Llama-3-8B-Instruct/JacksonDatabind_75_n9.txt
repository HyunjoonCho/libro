
public void testJsonFormatOnEnum() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);
    String json = mapper.writeValueAsString(new Foo(Color.GREEN));
    assertEquals("\"GREEN\"", json);
    mapper.disable(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);
    json = mapper.writeValueAsString(new Foo(Color.GREEN));
    assertEquals("\"\"GREEN\"\"", json); // should be serialized as integer
}
