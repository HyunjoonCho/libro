
public void testFastDateFormatSerialization() {
    FastDateFormat format = new FastDateFormat("yyyy-MM-dd");
    byte[] serialized = serialize(format);
    // Make sure this line doesn't throw any exceptions
    FastDateFormat deserialized = deserialize(serialized);
    assertEquals(format.toPattern(), deserialized.toPattern());
}

private byte[] serialize(Object obj) throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bos);
    oos.writeObject(obj);
    oos.close();
    return bos.toByteArray();
}

private Object deserialize(byte[] bytes) throws IOException, ClassNotFoundException {
    ByteArrayInputStream bis = new ByteArrayInputStream(bytes);
    ObjectInputStream ois = new ObjectInputStream(bis);
    return ois.readObject();
}
