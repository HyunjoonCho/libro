
public void testPrimitiveFieldAnnotationTakesPrecedenceOverDefault() {
    Gson gson = new Gson();
    GadgetWithPrimitivePart gadget = new GadgetWithPrimitivePart(42);
    String json = gson.toJson(gadget);
    assertEquals("{\"part\":\"42\"}", json);
    gadget = gson.fromJson(json, GadgetWithPrimitivePart.class);
    assertEquals("42", gadget.part);
}

private static class GadgetWithPrimitivePart {
    @JsonAdapter(LongToStringTypeAdapterFactory.class)
    final long part;

    private GadgetWithPrimitivePart(long part) {
        this.part = part;
    }
}

private static class LongToStringTypeAdapterFactory implements TypeAdapterFactory {
    //... (rest of the implementation)
}
