java
import org.apache.commons.jxpath.JXPathContext;
import org.apache.commons.jxpath.JXPathContextFactory;
import org.junit.Test;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.ParserConfigurationException;
import java.io.ByteArrayInputStream;
import java.io.IOException;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;

public class JXPathContextIteratePointersTest {

    @Test
    public void testIteratePointers() throws ParserConfigurationException, IOException {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        String xml = "<a:doc xmlns:a=\"ns\"><a:elem/><b:elem xmlns:b=\"ns\"></b:elem></a:doc>";
        Document document = builder.parse(new ByteArrayInputStream(xml.getBytes()));
        Element root = document.getDocumentElement();

        JXPathContext context = JXPathContext.newContext(root);
        JXPathContext iterContext = JXPathContext.newContext(root);

        String[] expectedElements = {"a:elem", "b:elem", "a:elem"};
        String[] actualElements = new String[0];

        // Act
        for (Object obj : iterContext.iteratePointers("@*:*")) {
            actualElements = (String[]) iterContext.getContext().getProperty(obj, "local-name");
        }

        // Assert
        assertEquals(expectedElements.length, actualElements.length);
        for (int i = 0; i < actualElements.length; i++) {
            assertEquals(expectedElements[i], actualElements[i]);
        }
    }
}
