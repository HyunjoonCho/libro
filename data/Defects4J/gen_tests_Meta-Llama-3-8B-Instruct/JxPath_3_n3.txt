java
import org.jaxen.JXPathContext;
import org.jaxen.JXPathContextFactory;
import org.jaxen.SimpleContext;
import org.jaxen.SimpleNode;
import org.jaxen.XPath;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Test {

    public static void main(String[] args) {
        Map<String, Object> map = new HashMap<>();
        map.put("a", null);

        JXPathContextFactory factory = JXPathContextFactory.newInstance();
        JXPathContext context = factory.createContext(map);

        context.setVariable("a", new Object() {
            private Map<String, Object> innerMap = new HashMap<>();

            public Object createChild(JXPathContext context, String name, int index) {
                if (index > -1) {
                    List<Object> list = new ArrayList<>();
                    for (int i = 0; i <= index; i++) {
                        list.add(new HashMap());
                    }
                    innerMap.put(name, list);
                } else {
                    innerMap.put(name, new HashMap());
                }
                return innerMap;
            }
        });

        try {
            context.createPath("a/b[1]/c");
            context.createPath("a/b[2]/c");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
