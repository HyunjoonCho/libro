
public void testSerializationOfNestedNonWrappedLists() throws Exception {
    // Define the POJOs
    class Record {
        private List<Field> fields;
        // getters and setters
    }
    class Field {
        // getters and setters
    }
    class Definition {
        private List<Record> records;
        // getters and setters
    }

    // Create an instance of the POJOs
    Definition definition = new Definition();
    definition.setRecords(new ArrayList<>());

    // Serialize the POJO
    String serializedDefinition = new ObjectMapper().writeValueAsString(definition);

    // Verify the serialization
    // This will fail because the inner list is empty and the outer list is not properly serialized
    assertEquals("expected serialization result", serializedDefinition);
}
