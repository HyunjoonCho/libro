
import org.junit.Test;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;

public class TestScopedAliases {
    @Test
    public void testPreconditionCrash() {
        String code = """
            var goog = {};
            goog.scope;

            var ns = {};
            ns.sub = {};
            /* @constructor */
            ns.sub.C = function() {};

            goog.scope(function() {
              var sub = ns.sub;
              /* @type {sub.C} */
              var x = null;
            });
            """;
        Compiler compiler = new Compiler(code, new CompilerOptions());
        compiler.compile();
    }
}
