
// Define the parameters for the test
double tolerance = 1e-6;
double start = 67.5;
double end = 112.5;
double event1 = 90.0;
double event2 = 135.0;

// Define the test method
public void testEventDetection() {
    // Initialize the solver
    Solver solver = new Solver();

    // Set the event handler
    solver.setEventHandler(new EventHandler() {
        @Override
        public boolean handleEvent(Event event) {
            // Check if the event is the first event
            if (event.getPoint().get() == event1) {
                // Check if the solver converged to a value slightly before the event
                double value = solver.getSolution().get(event1 - tolerance);
                // If the value is negative, then the switch will not be detected
                if (value < 0) {
                    fail("The event was not detected");
                }
            }
            // Check if the event is the second event
            else if (event.getPoint().get() == event2) {
                // Check if the event was detected
                if (!solver.hasEvent()) {
                    fail("The event was not detected");
                }
            }
            return true;
        }
    });

    // Solve the ODE
    solver.solve(start, end);

    // Check if the event was detected
    if (!solver.hasEvent()) {
        fail("The event was not detected");
    }
}
