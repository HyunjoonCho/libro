public void testSmartNameRemovalCrash() {
    Compiler compiler = new Compiler();
    String code = """
        var goog = {};
        goog.inherits = function(x, y) {};
        var ns = {};
        /* @constructor */
        ns.PageSelectionModel = function(){};
        
        /* @constructor */ 
        ns.PageSelectionModel.FooEvent = function() {};
        /* @constructor */ 
        ns.PageSelectionModel.SelectEvent = function() {};
        goog.inherits(ns.PageSelectionModel.ChangeEvent, ns.PageSelectionModel.FooEvent);
    """;
    try {
        compiler.compile(code);
        fail("Expected compiler crash");
    } catch (Exception e) {
        // expected
    }
}