public void testArDoesNotDeleteCorrectly() throws IOException {
    // Initialize the archive
    ArArchive archive = new ArArchive();
    archive.create("bla.ar");
    archive.add("test1.xml");
    archive.add("test2.xml");

    // Delete the second file
    archive.delete("test2.xml");

    // Check that getNextEntry still returns the first file
    ArArchiveEntry entry = archive.getNextEntry();
    assertEquals("test1.xml", entry.getName());

    // Check that the file is still present in the archive
    archive.close();
    Process process = new ProcessBuilder("ar", "-t", "bla.ar").start();
    String output = new BufferedReader(new InputStreamReader(process.getInputStream())).lines().collect(Collectors.joining("\n"));
    assertTrue(output.contains("test1.xml"));
    assertTrue(output.contains("test2.xml"));
}