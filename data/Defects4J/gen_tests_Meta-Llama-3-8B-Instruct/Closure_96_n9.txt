
import org.junit.Test;
import static org.junit.Assert.*;

public class TestVarArgsTypeCheck {
    @Test
    public void testVarArgsTypeCheck() {
        // Compile and run the following code
        String code = """
            /**
             * @param {...string} var_args
             */
            function foo(var_args) {
                return arguments.length;
            }
            foo('hello'); // no warning - ok
            foo(123); // warning - ok
            foo('hello', 123); // no warning! error.
            """;
        // Expect a type mismatch warning for the second parameter in the third foo() call
        assertEquals(1, foo("hello")); // no warning - ok
        assertEquals(1, foo(123)); // warning - ok
        try {
            foo("hello", 123); // no warning! error.
            fail("Expected type mismatch warning");
        } catch (Exception e) {
            // expected exception
        }
    }
}
