java
import org.junit.Test;
import java.io.ByteArrayInputStream;
import java.io.IOException;

import static org.junit.Assert.assertArrayEquals;
import static org.junit.Assert.assertEquals;

public class Base64InputStreamTest {

    @Test
    public void testReadAtEndOfStream() throws IOException {
        byte[] data = "abc".getBytes();
        ByteArrayInputStream in = new ByteArrayInputStream(data);
        Base64InputStream base64In = new Base64InputStream(in, true);
        byte[] buffer = new byte[3];
        int bytesRead = base64In.read(buffer);
        assertArrayEquals(data, buffer, 0, bytesRead);
        assertEquals(0, base64In.read(buffer));
    }
}
