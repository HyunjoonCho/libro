
import org.junit.Test;
import java.util.ArrayList;
import java.util.List;

public class TestNestedNonWrappedLists {
    @Test
    public void testDeserializationOfNestedNonWrappedLists() {
        // Define the POJOs
        public class Record {
            private List<Field> fields;
        }

        public class Field {
            // No fields
        }

        public class Definition {
            private List<Record> records;
        }

        // Create an instance of Definition with nested lists
        Definition definition = new Definition();
        definition.records = new ArrayList<>();
        definition.records.add(new Record());
        definition.records.get(0).fields = new ArrayList<>();

        // Serialize and deserialize the instance
        String json = JacksonUtil.toJson(definition);
        Definition deserializedDefinition = JacksonUtil.fromJson(json, Definition.class);

        // Assert the deserialized instance
        assertEquals(1, deserializedDefinition.records.size());
        assertEquals(0, deserializedDefinition.records.get(0).fields.size());
    }
}
