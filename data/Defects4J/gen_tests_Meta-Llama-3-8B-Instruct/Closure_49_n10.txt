java
import org.junit.Test;
import org.junit.runner.RunWith;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.JSError;
import com.google.javascript.jscomp.JSModule;
import com.google.javascript.jscomp.Result;
import org.junit.runners.JUnit4;

import java.util.List;

@RunWith(JUnit4.class)
public class TestClosureCompiler {
    @Test
    public void testVariableShadowing() {
        Compiler compiler = new Compiler();
        compiler.setCompilationLevel(CompilationLevel.SIMPLE_OPTIMIZATIONS);
        JSModule module = compiler.compile("var foo = function bar() { var bar; alert(bar); }");
        List<JSError> errors = module.getErrorList();
        assertEquals(0, errors.size());
        String output = module.toSource();
        assertEquals("var foo = function bar() { alert(void 0); }", output);
    }
}
