
public void testDefaultOptionsNotUpdated() {
    Options options = new Options();
    options.addOption(new Option("a", "option a"));
    options.addOption(new Option("b", "option b").setRequired(false).setDefaultValue("b"));
    options.addOptionGroup(new OptionGroup("group", "group description")
           .addOption(options.getOption("a"))
           .addOption(options.getOption("b")));

    Properties defaultOptions = new Properties();
    defaultOptions.setProperty("b", "b");

    CommandLineParser parser = new DefaultParser();
    try {
        CommandLine commandLine = parser.parse(options, new String[] {"-a"}, defaultOptions);
        assertTrue(commandLine.hasOption("a"));
        assertTrue(commandLine.hasOption("b"));
    } catch (ParseException e) {
        fail("Expected no exception");
    }
}
