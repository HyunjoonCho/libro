
public void testPearsonsCorrelationPValuesPrecision() {
    // Create a test case with many treatments
    double[] data1 = new double[1000];
    double[] data2 = new double[1000];
    for (int i = 0; i < 1000; i++) {
        data1[i] = i % 2;
        data2[i] = i % 2 + 0.1;
    }
    
    PearsonsCorrelation correlation = new PearsonsCorrelation(data1, data2);
    double t = correlation.getCorrelation();
    double p = correlation.getCorrelationPValues();
    
    // Check if p-values are not limited by machine epsilon
    assertEquals(0.0, p, 1e-12); // expected p-value should be 0.0
    
    // Check if p-values are not limited by machine epsilon
    correlation = new PearsonsCorrelation(data1, data2);
    t = correlation.getCorrelation();
    p = 2 * (1 - tDistribution.cumulativeProbability(t)); // modified p-value calculation
    assertEquals(0.0, p, 1e-12); // expected p-value should be 0.0
}
