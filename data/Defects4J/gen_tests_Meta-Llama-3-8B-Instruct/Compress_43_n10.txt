public void testZipVersionNeededToExtract() {
    Zip64Mode zip64Mode = Zip64Mode.AsNeeded;
    ZipMethod zipMethod = ZipMethod.Deflated;
    ZipArchiveEntry entry = mock(ZipArchiveEntry.class);
    when(entry.getCompressionMethod()).thenReturn(zipMethod);
    when(entry.requiresZip64()).thenReturn(true);
    ZipArchiveOutputStream zipOut = mock(ZipArchiveOutputStream.class);
    ZipArchiveOutputStream bufferedOut = mock(BufferedOutputStream.class);
    when(zipOut.getOutputStream()).thenReturn(bufferedOut);
    ZipArchiveOutputStreamDelegate delegate = new ZipArchiveOutputStreamDelegate(zipOut, zip64Mode);
    byte[] buf = new byte[2];
    delegate.putShort(ZipArchiveOutputStreamDelegate.INITIAL_VERSION, buf, ZipArchiveOutputStream.LFH_VERSION_NEEDED_OFFSET);
    assertEquals(ZipArchiveOutputStream.INITIAL_VERSION, delegate.getVersionNeededToExtract(zipMethod, delegate.hasZip64Extra(entry)));
}