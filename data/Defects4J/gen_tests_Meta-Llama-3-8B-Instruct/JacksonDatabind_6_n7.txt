java
@Test
public void testParsingISO8601Formats() throws Exception {
    String json = "{\"timestamp\":\"2014-10-03T18:00:00.6-05:00\"}";
    String json2 = "{\"timestamp\":\"2014-10-03T18:00:00.61-05:00\"}";
    String json3 = "{\"timestamp\":\"1997-07-16T19:20+01:00\"}";
    String json4 = "{\"timestamp\":\"1997-07-16T19:20:30.45+01:00\"}";

    // Test 1
    ObjectMapper mapper = new ObjectMapper();
    DateTimeFormatter formatter = DateTimeFormatterFactory.createFormatter();
    DateTime parsedDate = mapper.readValue(json, formatter);
    assertEquals(2014, parsedDate.getYear());
    assertEquals(10, parsedDate.getMonthOfYear());
    assertEquals(3, parsedDate.getDayOfMonth());
    assertEquals(18, parsedDate.getHourOfDay());
    assertEquals(0, parsedDate.getMinuteOfHour());
    assertEquals(0, parsedDate.getSecondOfMinute());
    assertEquals(600000000, parsedDate.getMillisOfSecond());

    // Test 2
    parsedDate = mapper.readValue(json2, formatter);
    assertEquals(2014, parsedDate.getYear());
    assertEquals(10, parsedDate.getMonthOfYear());
    assertEquals(3, parsedDate.getDayOfMonth());
    assertEquals(18, parsedDate.getHourOfDay());
    assertEquals(0, parsedDate.getMinuteOfHour());
    assertEquals(0, parsedDate.getSecondOfMinute());
    assertEquals(600000000, parsedDate.getMillisOfSecond());

    // Test 3
    parsedDate = mapper.readValue(json3, formatter);
    assertEquals(1997, parsedDate.getYear());
    assertEquals(7, parsedDate.getMonthOfYear());
    assertEquals(16, parsedDate.getDayOfMonth());
    assertEquals(19, parsedDate.getHourOfDay());
    assertEquals(20, parsedDate.getMinuteOfHour());
    assertEquals(0, parsedDate.getSecondOfMinute());
    assertEquals(0, parsedDate.getMillisOfSecond());

    // Test 4
    parsedDate = mapper.readValue(json4, formatter);
    assertEquals(1997, parsedDate.getYear());
    assertEquals(7, parsedDate.getMonthOfYear());
    assertEquals(16, parsedDate.getDayOfMonth());
    assertEquals(19, parsedDate.getHourOfDay());
    assertEquals(20, parsedDate.getMinuteOfHour());
    assertEquals(30, parsedDate.getSecondOfMinute());
    assertEquals(450000, parsedDate.getMillisOfSecond());
}
