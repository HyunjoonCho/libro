
public void testJacksonRecursiveTypeSerialization() throws Exception {
    ObjectMapper mapper = new ObjectMapper();

    Base base = new Base();
    Sub sub = new Sub();

    base.setSub(sub);

    String json = mapper.writeValueAsString(base);

    // Expected output: {"base":1,"sub":{"sub":2}}
    // Actual output: {"sub":2}

    assertEquals("{\"base\":1,\"sub\":{\"sub\":2}}", json);
}
