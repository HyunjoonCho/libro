public void testCollapsePropertiesException() {
    // Create a Compiler object with ADVANCED_OPTIMIZATIONS
    Compiler compiler = new Compiler();
    compiler.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);

    // Create a JavaScript file with the problematic code
    String code = "goog.exportSymbol('foo', function() {});";

    // Compile the code
    try {
        compiler.compile(code);
        fail("Expected an exception to be thrown");
    } catch (RuntimeException e) {
        // Check the exception message
        assertEquals("java.lang.IllegalArgumentException", e.getMessage());
    }
}