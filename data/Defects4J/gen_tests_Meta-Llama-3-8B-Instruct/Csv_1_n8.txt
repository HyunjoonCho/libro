java
public void testExtendedBufferReaderEOLHandling() {
    ExtendedBufferReader reader = new ExtendedBufferReader();
    reader.append("abc\r\n");
    assertEquals(1, reader.readLine());
    assertEquals("abc", reader.readLine());
    reader.append("def\r");
    assertEquals(2, reader.readLine());
    assertEquals("def", reader.readLine());
    reader.append("ghi\n");
    assertEquals(3, reader.readLine());
    assertEquals("ghi", reader.readLine());
}
