public void testAMDModuleCompilationError() throws IOException {
    String[] args = new String[] {
        "--transform_amd_modules", "--process_common_js_modules", "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS", "--js_output_file=out.js",
        "--js=Bar.js", "--js=lib/Foo.js"
    };
    Compiler compiler = new Compiler();
    Compiler.ExitCode result = compiler.run( compiler.getArguments(args) );
    assertEquals(1, result.getExitCode());
    assertEquals("required entry point \"module$lib$Foo\" never provided", compiler.getError());
}