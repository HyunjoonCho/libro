public void testCSVFormatWithHeader() {
    try {
        CSVFormat tdf = CSVFormat.TDF.withHeader("x");
        CSVPrinter csvPrinter = tdf.print(Files.newBufferedWriter(Paths.get("data.csv")));
        csvPrinter.printRecord(42);
        csvPrinter.close();
        fail("Expected exception, but no exception was thrown");
    } catch (IOException e) {
        // expected
    }
}