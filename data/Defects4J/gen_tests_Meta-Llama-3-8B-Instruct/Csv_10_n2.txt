
public void testCSVFormatWithHeader() throws IOException {
    Path path = Paths.get("data.csv");
    CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(Files.newBufferedWriter(path));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    String expected = "x\n42\n";
    String actual = Files.readString(path);
    assertEquals(expected, actual);
}
