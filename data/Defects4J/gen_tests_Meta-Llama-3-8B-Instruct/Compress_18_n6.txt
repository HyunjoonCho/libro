
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import static org.junit.Assert.fail;

public void testLongDirectoryNameInTarArchive() {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    TarArchiveOutputStream tarOut = new TarArchiveOutputStream(bos);

    TarArchiveEntry entry = new TarArchiveEntry("PaxHeaders.X/layers/openstreetmap__osm.disy.net/.tiles/1.0.0/openstreetmap__osm.disy.net/default/");
    try {
        tarOut.putArchiveEntry(entry);
        tarOut.close();
    } catch (IOException e) {
        fail("Expected to write the directory entry without throwing an exception");
    }

    // Check if the output stream contains the expected data
    String expected = "PaxHeaders.X/layers/openstreetmap__osm.disy.net/.tiles/1.0.0/openstreetmap__osm.disy.net/default/\n";
    assertEquals(expected, bos.toString());
}
