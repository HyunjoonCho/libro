
public void testCustomSerializer() throws IOException {
    String mapOut = mapper.writer().withAttribute("myAttr", "Hello!").writeValueAsString(new HashMap<String, Object>() {{
        put("data", new Data());
    }});
    assertEquals("{\"data\":{\"aStr\":\"The value is: Hello!\"}}", mapOut);

    String treeOut = mapper.writer().withAttribute("myAttr", "Hello!").writeValueAsString(mapper.createObjectNode().putPOJO("data", new Data()));
    assertEquals("{\"data\":{\"aStr\":\"The value is: Hello!\"}}", treeOut);
}
