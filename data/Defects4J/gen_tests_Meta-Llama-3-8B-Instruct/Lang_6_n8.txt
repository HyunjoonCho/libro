public void testCharSequenceTranslator() {
    CharSequenceTranslator translator = new CharSequenceTranslator() {
        public int translate(char[] input, int index, int end, Writer out) throws IOException {
            if (index < end) {
                out.write(input[index]);
            }
            return index + 1;
        }
    };
    translator.translate("\uD83D\uDE30".toCharArray(), 0, 2, new StringWriter());
}