java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;
import com.google.javascript.jscomp.Type;
import org.junit.Test;

import java.io.IOException;

public class TestIssue107 {
    @Test
    public void testResolveTypes() throws IOException {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        options.setWarningLevel(CompilerOptions.WarningLevel.VERBOSE);
        options.setSummaryDetailLevel(3);
        options.setProcessClosurePrimitives(true);
        options.setError(CompilerOptions.ErrorLevel.STRICT_MODULE_DEP_CHECK);
        options.setError(CompilerOptions.ErrorLevel.INVALID_CASTS);
        options.setLoggingLevel(CompilerOptions.LoggingLevel.ALL);

        SourceFile sourceFile = new SourceFile("test.js", "function foo() { return 1; }");
        compiler.compile(sourceFile, options);

        // This line should throw a ClassCastException
        Type type = compiler.getType("foo");
    }
}
