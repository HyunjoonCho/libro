public void testReadTruncated() {
    byte[] data = new byte[770];
    byte[] truncatedData = new byte[769];
    System.arraycopy(data, 0, truncatedData, 0, 769);
    BZip2CompressorInputStream bis = new BZip2CompressorInputStream(new ByteArrayInputStream(truncatedData));
    assertEquals(769, bis.read(data));
}