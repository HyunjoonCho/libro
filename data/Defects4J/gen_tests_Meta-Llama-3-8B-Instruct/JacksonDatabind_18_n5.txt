java
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.ObjectMapper.DefaultTypeFactory;
import com.fasterxml.jackson.databind.type.TypeFactory;

import java.io.IOException;
import java.io.StringReader;
import java.util.Iterator;

import org.junit.Test;

public class TestJsonProcessingExceptionRecovery {

    private static final ObjectMapper mapper = new ObjectMapper();
    private static final TypeFactory typeFactory = DefaultTypeFactory.instance;

    @Test(expected = JsonMappingException.class)
    public void testJsonProcessingExceptionRecovery() throws IOException {
        String json = "{\"a\": [";
        StringReader reader = new StringReader(json);
        Iterator<Object> iterator = mapper.getFactory().createObjectReader().readValues(reader, Object.class);
        while (iterator.hasNext()) {
            iterator.next();
        }
    }
}
