public void testResettingDefaultNamespaceCausesEndlessLoop() {
    // Create a sample XML document
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element foo = doc.createElementNS("bla", "b:foo");
    foo.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "test111");
    Element bar = doc.createElementNS("bla", "b:bar");
    bar.setTextContent("a");
    foo.appendChild(bar);
    Element test = doc.createElement("test");
    foo.appendChild(test);
    doc.appendChild(foo);

    // Create a JXPathContext
    JXPathContext context = JXPathContext.newContext(doc);

    // Get the 'test' node
    Object testNode = context.selectNode("test");

    // Request the.asPath() on the 'test' node
    String path = context.getContext().getNodeType().asPath(testNode);

    // Verify that the test does not end up in an endless loop
    // (This will likely fail if the test does not reproduce the bug)
    //...
}