public void testResetNamespace() {
    Document document = DocumentHelper.createDocument();
    Element root = document.createElement("root");
    document.appendChild(root);

    Element foo = document.createElementNS("bla", "b:foo");
    root.appendChild(foo);

    Element bar = document.createElementNS("bla", "b:bar");
    foo.appendChild(bar);

    Element test = document.createElement("test");
    foo.appendChild(test);

    DOMNodePointer pointer = new DOMNodePointer(root, new NodePointer(root, test));

    try {
        pointer.asPath();
        fail("Expected NullPointerException or endless loop");
    } catch (NullPointerException e) {
        // expected
    }
}