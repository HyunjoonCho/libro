public void testReadTruncatedFile() {
    byte[] data = new byte[770];
    // Initialize data with some values
    BZip2CompressorInputStream bis = new BZip2CompressorInputStream(new ByteArrayInputStream(data));
    int bytesRead = 0;
    while (bis.available() > 0) {
        bytesRead += bis.read(new byte[1024]);
    }
    assertEquals(769, bytesRead);
}