java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;

public class TestCrash {
    public static void main(String[] args) {
        CompilerOptions options = new CompilerOptions();
        options.setWarningLevel(WarningLevel.VERBOSE);
        options.setCompilationLevel(CompilationLevel.SIMPLE_OPTIMIZATIONS);

        Compiler compiler = new Compiler(options);
        SourceFile sourceFile = SourceFile.fromSource("var test = {\n" +
                "  T: function() {};\n" +
                "  A: function() {};\n" +
                "  B: function() {};\n" +
                "  X: function() {\n" +
                "    this.type = test.A;\n" +
                "    this.t = this.f();\n" +
                "  },\n" +
                "  X.prototype.f = function() {\n" +
                "    if (this.type === test.A) {\n" +
                "      return new test.A();\n" +
                "    } else if (this.type === test.B) {\n" +
                "      return new test.B();\n" +
                "    }\n" +
                "  }\n" +
                "};", "crash.js");

        compiler.compile(sourceFile);
    }
}
