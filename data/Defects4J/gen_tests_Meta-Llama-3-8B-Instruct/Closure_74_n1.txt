public void testInlineIfOptimization() {
    Object a = new Object();
    Object b = new Object();
    try {
        System.out.println(true == null? a : b);
    } catch (Exception e) {
        fail("Expected 'true == null? a : b' to print 'a', but got an exception");
    }
    try {
        System.out.println(true == false? a : b);
    } catch (Exception e) {
        fail("Expected 'true == false? a : b' to print 'b', but got an exception");
    }
    try {
        System.out.println(sum(true, 1));
    } catch (Exception e) {
        fail("Expected'sum(true, 1)' to print '3', but got an exception");
    }
}

private int sum(boolean a, int b) {
    return a? 2 : b;
}