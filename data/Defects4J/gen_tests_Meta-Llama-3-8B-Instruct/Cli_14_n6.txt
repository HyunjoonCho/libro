java
import org.junit.Test;

import org.apache.commons.cli2.CommandLine;
import org.apache.commons.cli2.OptionException;
import org.apache.commons.cli2.Parser;
import org.apache.commons.cli2.Option;
import org.apache.commons.cli2.validation.FileValidator;

import java.io.File;

public class CLI2SampleTest {

    @Test(expected = OptionException.class)
    public void testFileValidatorThrowsClassCastException() throws Exception {
        DefaultOptionBuilder obuilder = new DefaultOptionBuilder();
        ArgumentBuilder abuilder = new ArgumentBuilder();
        GroupBuilder gbuilder = new GroupBuilder();
        DefaultOption fileNameOption = obuilder
           .withShortName("f")
           .withLongName("file-name")
           .withRequired(true)
           .withDescription("name of an existing file")
           .withArgument(abuilder
               .withName("file-name")
               .withValidator(FileValidator.getExistingFileInstance())
               .create())
           .create();
        Group options = gbuilder
           .withName("options")
           .withOption(fileNameOption)
           .create();
        Parser parser = new Parser();
        parser.setHelpTrigger("--help");
        parser.setGroup(options);
        parser.parseAndHelp(new String[] {"-f", "path-to-an-existing-file"});
    }
}
