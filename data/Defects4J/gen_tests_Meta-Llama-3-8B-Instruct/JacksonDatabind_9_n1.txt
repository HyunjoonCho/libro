public void testMapWithClassAsKey() throws Exception {
    Map<Class<? extends Object>, String> map = new HashMap<>();
    map.put(ArrayList.class, "ArrayList");
    map.put(HashMap.class, "HashMap");

    ObjectMapper mapper = new ObjectMapper();

    String json = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(map);
    System.out.println(json);

    JsonNode node = mapper.readTree(json);
    Map<String, String> deserializedMap = new HashMap<>();

    for (JsonNode entry : node) {
        String key = entry.getKey();
        String value = entry.asText();
        deserializedMap.put(Class.forName(key), value);
    }

    assertEquals("ArrayList", deserializedMap.get(ArrayList.class));
    assertEquals("HashMap", deserializedMap.get(HashMap.class));
}