
import org.junit.Test;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.SequenceInputStream;
import java.io.SequenceInputStream;
import java.util.zip.CRC32;

import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;

import static org.junit.Assert.fail;

public class TarArchiveTest {

    @Test(expected = IOException.class)
    public void testLongDirectoryName() throws IOException {
        TarArchiveOutputStream tarOut = new TarArchiveOutputStream(new ByteArrayOutputStream());
        TarArchiveEntry entry = new TarArchiveEntry("PaxHeaders.X/layers/openstreetmap__osm.disy.net/.tiles/1.0.0/openstreetmap__osm.disy.net/default/");
        tarOut.putArchiveEntry(entry);
        tarOut.write(new byte[114]); // 114 bytes exceeds the size in header of 0 bytes
        tarOut.closeEntry();
        tarOut.close();
    }
}
