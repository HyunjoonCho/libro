java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.deser.DeserializationProblemHandler;
import com.fasterxml.jackson.databind.ObjectMapperTestUtil;
import com.fasterxml.jackson.databind.SerializationFeature;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.fail;

public class AcceptCaseInsensitivePropertiesTest {

    @Test
    public void testAcceptCaseInsensitivePropertiesFailsWithJsonUnwrapped() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(SerializationFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES);
        mapper.enable(SerializationFeature.FEATURE_FAILURE_INCLUDE_NAME);
        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);

        Person person = new Person();
        person.businessAddress = new Address();
        person.businessAddress.street = "some street";
        person.businessAddress.addon = "addon";
        person.businessAddress.zip = "12345";
        person.businessAddress.town = "town";
        person.businessAddress.country = "country";

        String json = mapper.writeValueAsString(person);
        try {
            mapper.readValue(json, Person.class);
            fail("Expected JSONException");
        } catch (IOException e) {
            // Expected exception
        }
    }
}

class Person {
    @JsonUnwrapped(prefix = "businessAddress.")
    public Address businessAddress;
}

class Address {
    public String street;
    public String addon;
    public String zip;
    public String town;
    public String country;
}
