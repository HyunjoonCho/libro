
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.module.jaxb.JaxbAnnotationModule;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class JacksonBugTest {

    @Test
    public void testObjectIdAndTypeIdAsWrapperObject() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JaxbAnnotationModule());

        // setup test data
        MyObject obj = new MyObject();
        obj.setId(1L);

        // serialize and deserialize
        String json = mapper.writeValueAsString(obj);
        MyObject deserializedObj = mapper.readValue(json, MyObject.class);

        // verify deserialization
        assertEquals(1L, deserializedObj.getId());
    }
}
