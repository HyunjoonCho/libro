public void testExternExportTypedef() {
    String source = "typedef foo.bar.MyType {\n" +
            "  @:optional function myMethod():String;\n" +
            "}\n" +
            "class MyClass {\n" +
            "  public function myMethod():String {\n" +
            "    return \"hello\";\n" +
            "  }\n" +
            "}\n" +
            "extern class ExternClass {\n" +
            "  public function myMethod():MyType;\n" +
            "}\n";
    String expected = "extern class ExternClass {\n" +
            "  public function myMethod():{@:optional function myMethod():String;};\n" +
            "}\n";
    String actual = new ExternExport(source).toString();
    assertEquals(expected, actual);
}