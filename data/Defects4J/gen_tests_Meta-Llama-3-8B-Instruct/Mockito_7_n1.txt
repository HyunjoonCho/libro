public void testDeepStubbingWithGenerics() {
    MyClass1 myMock1 = mock(MyClass1.class, RETURNS_DEEP_STUBS);
    when(myMock1.getNested()).thenAnswer(invocation -> {
        MyClass2 myMock2 = mock(MyClass2.class, RETURNS_DEEP_STUBS);
        when(myMock2.getNested()).thenAnswer(invocation -> {
            MyClass3 myMock3 = mock(MyClass3.class);
            when(myMock3.returnSomething()).thenReturn("Hello World.");
            return myMock3;
        });
        return myMock2;
    });
}