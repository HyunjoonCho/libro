public void testIncompleteNamespaceHandling() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.newDocument();
    Element root = doc.createElementNS("http://example.com", "ElementA");
    root.setAttributeNS("http://example.com", "A", "myAttr", "Mytype");
    Element child = doc.createElementNS("http://example.com", "B");
    child.setTextContent("MY VALUE");
    root.appendChild(child);
    doc.appendChild(root);
    try {
        DOMNodePointer.createAttribute(root, "A", "myAttr");
    } catch (UnknownNamespaceException e) {
        // Expected exception, so no assertion
    } else {
        fail("Expected UnknownNamespaceException");
    }
}