public void testNestedNonWrappedLists() {
    List<Record> records = new ArrayList<>();
    records.add(new Record(Arrays.asList(new Field("field1"), new Field("field2"))));
    records.add(new Record(Arrays.asList()));
    String json = mapper.writeValueAsString(records);
    List<Record> deserializedRecords = mapper.readValue(json, new TypeReference<List<Record>>() {});
    assertEquals(2, deserializedRecords.size());
    assertEquals(2, deserializedRecords.get(0).getFields().size());
    assertEquals(0, deserializedRecords.get(1).getFields().size());
}