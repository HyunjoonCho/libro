java
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerException;
import org.junit.Test;

public class TestClosureCompiler {
    @Test
    public void testIssue() throws CompilerException {
        Compiler compiler = new Compiler();
        compiler.compile("var test = {\n" +
                "    T: function() {},\n" +
                "    A: function() {\n" +
                "    },\n" +
                "    B: function() {\n" +
                "    },\n" +
                "    X: function() {\n" +
                "        this.type = test.A;\n" +
                "        this.t = this.f();\n" +
                "    },\n" +
                "    X.prototype.f = function() {\n" +
                "        if (this.type === test.A) {\n" +
                "            return new test.A();\n" +
                "        } else if (this.type === test.B) {\n" +
                "            return new test.B();\n" +
                "        }\n" +
                "    }\n" +
                "};");
    }
}
