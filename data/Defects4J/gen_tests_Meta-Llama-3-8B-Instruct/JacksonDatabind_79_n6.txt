
public void testObjectIdReferenceAlwaysAsIdOnClass() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping();
    mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);

    ReallyAlwaysAsId a = new ReallyAlwaysId(13);
    ReallyAlwaysContainer container = new ReallyAlwaysContainer();
    container.a = a;
    container.b = a;

    String json = mapper.writeValueAsString(container);
    assertEquals("{\"a\":1,\"b\":1}", json);
}
