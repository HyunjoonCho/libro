
public void testCompressorStreamFactory() throws IOException {
    // Create a test file with zlib header
    byte[] header = new byte[] {(byte) 0x78, (byte) 0x01, (byte) 0x00, (byte) 0x00};
    byte[] data = new byte[] {(byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};
    byte[] input = new byte[header.length + data.length];
    System.arraycopy(header, 0, input, 0, header.length);
    System.arraycopy(data, 0, input, header.length, data.length);

    // Create a test file
    File file = new File("test.deflatez");
    FileOutputStream fos = new FileOutputStream(file);
    fos.write(input);
    fos.close();

    // Try to decompress the file using CompressorStreamFactory
    CompressorInputStream cis = null;
    try {
        cis = CompressorStreamFactory.createCompressorInputStream(new FileInputStream(file));
    } catch (CompressorException e) {
        fail("Expected to create a CompressorInputStream, but got a CompressorException");
    } finally {
        if (cis!= null) {
            cis.close();
        }
    }
}
