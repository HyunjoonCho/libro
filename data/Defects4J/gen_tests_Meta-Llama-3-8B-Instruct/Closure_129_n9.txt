java
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class BugTest {
    @Test
    public void testCastingFunctionBeforeCalling() {
        String code1 = "console.log( /*@type {function(!string):!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'])( '$version' ));";
        assertEquals("use strict';console.log((0,(new window.ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\")).GetVariable)(\"$version\");", code1);

        String code2 = "console.log( /*@type {!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable']( '$version' ));";
        assertEquals("use strict';console.log((new window.ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\")).GetVariable(\"$version\"));", code2);
    }
}
