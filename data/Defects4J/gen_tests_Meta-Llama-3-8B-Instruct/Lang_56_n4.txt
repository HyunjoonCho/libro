
public void testFastDateFormatDeserialization() throws Exception {
    FastDateFormat fdf = new FastDateFormat("yyyy-MM-dd");
    byte[] bytes = serialize(fdf);
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    ObjectInputStream ois = new ObjectInputStream(bais);
    FastDateFormat deserializedFdf = (FastDateFormat) ois.readObject();
    // This test will fail if the deserialization does not work correctly
    assertEquals(fdf.toPattern(), deserializedFdf.toPattern());
}

private byte[] serialize(Object obj) throws Exception {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bos);
    oos.writeObject(obj);
    oos.close();
    return bos.toByteArray();
}
