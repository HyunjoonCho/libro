java
public void testAssignmentWithinCondition() {
    String original = "function reduction() {\n" +
            "  var a, b;\n" +
            "  if (echo(b = true) || echo(b = false))\n" +
            "    a = b;\n" +
            "  else\n" +
            "    a = null;\n" +
            "  return a;\n" +
            "}";

    String compiled = "function reduction() {\n" +
            "  var a;\n" +
            "  return echo(true) || echo(a = false)? a: null\n" +
            "}";

    assertEquals("return true || (a = false)? a: null", compiled);
}
