public void testArgumentsMoved() {
    final Object[] args = new Object[] {1, 2, 3};
    Function function = new Function() {
        public Object invoke() {
            Object[] arg = args;
            setTimeout(new Timer() {
                public void run() {
                    assertEquals(1, arg.length);
                    assertEquals(1, arg[0]);
                    assertEquals(2, arg[1]);
                    assertEquals(3, arg[2]);
                }
            }, 0);
            return null;
        }
    };
    function.invoke();
}