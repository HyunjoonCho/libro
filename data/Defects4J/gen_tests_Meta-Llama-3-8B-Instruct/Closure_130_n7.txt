
public void testCollapseArguments() {
    CompilerOptions compilerOptions = new CompilerOptions();
    compilerOptions.setCollapsePropertiesOnExternTypes(true);
    Compiler compiler = new Compiler(compilerOptions);

    String originalCode = "function () { return function () { var arg = arguments; setTimeout(function() { alert(arg); }, 0); } }";
    String rewrittenCode = compiler.compile(originalCode);

    assertEquals(originalCode, rewrittenCode);
}
