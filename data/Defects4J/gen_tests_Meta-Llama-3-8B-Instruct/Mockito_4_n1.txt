
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mockito;
import org.powermock.core.classloader.annotations.PowerMockIgnore;
import org.powermock.core.classloader.annotations.PowerMockRunner;
import org.powermock.modules.junit4.PowerMockRunnerDelegate;
import org.powermock.reflect.Whitebox;

import static org.junit.Assert.assertThrows;

@RunWith(PowerMockRunner.class)
@PowerMockRunnerDelegate(JUnit4.class)
@PowerMockIgnore("sun.reflect.*")
public class BugReportTest {

    @Test
    public void testExceptionOnVerifyZeroInteractions() {
        // Create a mock object
        Object mockObject = Mockito.mock(Object.class);

        // Set a default answer for the mock object
        Mockito.when(mockObject.toString()).thenReturn("some string");

        // Try to verify zero interactions on the mock object
        Mockito.verifyZeroInteractions(mockObject);

        // Expect a ClassCastException
        assertThrows(ClassCastException.class, () -> Whitebox.setInternalState(mockObject, "someNonString"));
    }
}
