public void testPolymorphicTypes() {
    @JsonTypeInfo(
            use = JsonTypeInfo.Id.NAME,
            include = JsonTypeInfo.As.EXISTING_PROPERTY,
            property = "type"
    )
    @JsonSubTypes({
            @JsonSubTypes.Type(value = SubClass.class, name = "subType")
    })
    public static abstract class SuperClass {
        @JsonProperty("name")
        private String name;
    }

    public static class SubClass extends SuperClass {
        @JsonProperty("subProperty")
        private String subProperty;
    }

    SuperClass superClass = new SubClass();
    superClass.setName("parent");
    superClass.setSubProperty("subValue");

    String json = mapper.writeValueAsString(superClass);
    assertEquals("{\"name\":\"parent\",\"type\":\"subType\",\"subProperty\":\"subValue\"}", json);
}