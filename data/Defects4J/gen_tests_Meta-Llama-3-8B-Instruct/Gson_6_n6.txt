java
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.TypeAdapterFactory;
import com.google.gson.reflect.TypeToken;
import org.junit.Test;

import static org.junit.Assert.assertNull;

public class GsonBugTest {
    @Test
    public void testGsonNullTypeAdapterFactory() {
        Gson gson = new GsonBuilder()
               .registerTypeAdapterFactory(new TypeAdapterFactory() {
                    @Override
                    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
                        return null; // Simulate TypeAdapterFactory.create() returning null
                    }
                })
               .create();
        assertNull(gson.toJson("")); // This should throw a NullPointerException
    }
}
