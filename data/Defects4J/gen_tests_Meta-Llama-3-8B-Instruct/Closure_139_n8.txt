
import org.junit.Test;

public class RedefinitionOfFunctionTest {
    @Test
    public void testRedefinitionOfFunction() {
        // Step 1: Run the code snippet
        assertFunctionReturns(1, new Function() {
            public Object invoke() {
                return 2;
            }
        });
        function f = new Function() {
            public Object invoke() {
                return 2;
            }
        };
        assertFunctionReturns(2, f);

        // Step 2: Redefine the function
        function f() {
            return 1;
        }

        // Expect an error
        assertThrows("error", function() {
            f();
        });
    }

    private void assertFunctionReturns(int expected, Function f) {
        assertEquals(expected, (int) f.invoke());
    }
}
