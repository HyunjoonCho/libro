
public void testJsonValuePolymorphicTypeLoss() {
    // Given
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    mapper.enableDefaultTyping();

    CommandAPDU commandAPDU = new CommandAPDU(new byte[] {1, 2, 3});
    String json = mapper.writeValueAsString(commandAPDU);

    // When
    CommandAPDU deserializedCommandAPDU = mapper.readValue(json, CommandAPDU.class);

    // Then
    assertEquals(commandAPDU.getApdu(), deserializedCommandAPDU.getApdu());
}
