public void testBase64InputStreamRead() throws IOException {
    InputStream in = new ByteArrayInputStream(new byte[] {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16});
    Reader reader = new InputStreamReader(new Base64InputStream(in, true));
    byte[] buffer = new byte[16];
    int bytesRead = reader.read(buffer);
    assertEquals(16, bytesRead);
    assertEquals(0, buffer[0]);
    assertEquals(1, buffer[1]);
    assertEquals(2, buffer[2]);
    assertEquals(3, buffer[3]);
    assertEquals(4, buffer[4]);
    assertEquals(5, buffer[5]);
    assertEquals(6, buffer[6]);
    assertEquals(7, buffer[7]);
    assertEquals(8, buffer[8]);
    assertEquals(9, buffer[9]);
    assertEquals(10, buffer[10]);
    assertEquals(11, buffer[11]);
    assertEquals(12, buffer[12]);
    assertEquals(13, buffer[13]);
    assertEquals(14, buffer[14]);
    assertEquals(15, buffer[15]);
}