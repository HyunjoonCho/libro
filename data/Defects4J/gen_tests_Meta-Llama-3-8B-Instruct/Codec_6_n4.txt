
public void testBase64InputStreamRead() throws IOException {
    byte[] data = new byte[3];
    data[0] = 1;
    data[1] = 2;
    data[2] = 3;

    ByteArrayInputStream bais = new ByteArrayInputStream(data);
    Base64InputStream base64InputStream = new Base64InputStream(bais, true);

    byte[] buffer = new byte[1];
    assertEquals(3, base64InputStream.read(buffer));
    assertEquals(1, buffer[0]);
    assertEquals(2, buffer[1]);
    assertEquals(3, buffer[2]);

    assertEquals(0, base64InputStream.read(buffer)); // This should return 0
}
