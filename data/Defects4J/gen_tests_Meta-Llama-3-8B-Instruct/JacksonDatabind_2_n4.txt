
public void testSerializationToTree() throws IOException {
    X<Integer> x = new X<>();
    x.s = "test";
    x.items = Arrays.asList(1, 2, 3);

    ObjectMapper mapper = new ObjectMapper();
    JsonNode tree = mapper.valueToTree(x);
    JsonNode itemsNode = tree.get("items");
    assertTrue(itemsNode.isContainerNode());
    assertEquals(3, itemsNode.size());
    for (int i = 0; i < 3; i++) {
        JsonNode itemNode = itemsNode.get(i);
        assertEquals(JsonNode.ValueNode.valueOf(i + 1), itemNode);
    }
}
