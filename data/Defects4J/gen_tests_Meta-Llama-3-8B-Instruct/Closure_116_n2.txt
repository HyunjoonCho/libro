public void testErroneousOptimization() {
    // Create a JavaScript compiler
    Compiler compiler = new Compiler();
    compiler.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
    compiler.setWarningLevel(WarningLevel.VERBOSE);
    compiler.externs("window.js");
    compiler.addSourceUnit("input.js");
    compiler.compile();
    String output = compiler.toSource();

    // Verify the output
    String expectedOutput = "window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};";
    Assert.assertEquals(expectedOutput, output);
}