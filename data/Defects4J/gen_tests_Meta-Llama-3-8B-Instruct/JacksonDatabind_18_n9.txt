
public void testErrorRecoveryInObjectReaderReadValues() {
    ObjectReader reader = new ObjectReader();
    MappingIterator<String> iterator = reader.readValues(new StringReader("{\"a\": [1, 2, 3]}"));

    // Simulate a parsing error
    iterator.nextToken(); // Move to the first element in the array
    throw new JsonProcessingException(new JsonLocation("", 0, 0, 0), "Error message");

    // Check that the iterator is in an inconsistent state
    assertEquals(JsonToken.END_OBJECT, iterator.nextToken()); // Should not throw exception
    assertEquals(JsonToken.END_ARRAY, iterator.nextToken()); // Should not throw exception
    assertEquals(JsonToken.END_OBJECT, iterator.nextToken()); // Should not throw exception
}
