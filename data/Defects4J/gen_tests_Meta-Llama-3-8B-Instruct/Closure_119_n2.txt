
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.JSError;
import com.google.javascript.jscomp.JSError.Type;
import com.google.javascript.jscomp.SourceFile;

public void testIssue107() {
    String code = "try {\n" +
                  "  var x = 5;\n" +
                  "}\n" +
                  "catch(e) {\n" +
                  "  var s = \"FAIL\" + e.name + \"\": \"\" + e.message;\n" +
                  "}";

    Compiler compiler = new Compiler();
    SourceFile sourceFile = SourceFile.fromSource(code);

    try {
        compiler.compile(sourceFile);
        fail("Expected JSC_UNDEFINED_NAME warning");
    } catch (JSError e) {
        // Check that the expected warning is present
        for (JSError error : e.getErrors()) {
            if (error.getType() == Type.JSC_UNDEFINED_NAME) {
                assertEquals("e is never defined", error.getMessage());
                return;
            }
        }
        fail("Expected JSC_UNDEFINED_NAME warning not found");
    }
}
