
public void testEventStateNotUpdated() {
    // Initialize ODE solver
    ODE ode = new ODE();
    ode.addEventHandler(event1);
    ode.addEventHandler(event2);

    // Set initial state
    ode.setState(new double[] {0, 0});

    // Step the ODE solver
    ode.step();

    // Trigger event1, which asks for a RESET_STATE
    event1.eventOccurred(ode);

    // Check that event2 is not updated
    assertEquals(0, ode.getState()[0]);
    assertEquals(0, ode.getState()[1]);

    // Step the ODE solver again
    ode.step();

    // Check that event2 is still not updated
    assertEquals(0, ode.getState()[0]);
    assertEquals(0, ode.getState()[1]);
}
