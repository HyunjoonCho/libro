java
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.core.JsonParser.Feature;
import com.fasterxml.jackson.core.JsonToken;
import org.junit.Test;

import java.io.IOException;
import java.math.BigDecimal;

import static org.junit.Assert.fail;
import static org.junit.Assert.assertNull;

public class JacksonNaNTest {
    @Test
    public void testNaNAsBigDecimal() throws IOException {
        JsonParser jsonParser = JsonParser.createParser();
        jsonParser.enable(Feature.ALLOW_NON_NUMERIC_NUMBERS);
        jsonParser.nextToken();
        jsonParser.nextValue();
        try {
            jsonParser.getDecimalNumber();
            fail("Expected NullPointerException");
        } catch (NullPointerException e) {
            // expected
        }
    }
}
