
public void testTarArchiveInputStreamThrowsIOException() throws Exception {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bos.write(new byte[] {(byte) -1});
    bos.write(new byte[] {0, 0, 0, 0});
    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    TarArchiveInputStream tas = new TarArchiveInputStream(bis);
    try {
        tas.getNextEntry();
        fail("Expected IOException, but no exception was thrown");
    } catch (IOException e) {
        // expected
    }
}
