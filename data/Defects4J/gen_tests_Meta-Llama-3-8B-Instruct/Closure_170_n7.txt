java
public void testOverlyAggressiveCommaRemoval() {
    String originalCode = "function Test(n) {\n" +
            " var i = 0;\n" +
            " return typeof n!== \"undefined\"? (i = n.length) : (n = \"foo\"), i\n" +
            "}\n" +
            "var dummy = \"6chars\";\n" +
            "console && console.log( Test(dummy) )\n";

    String compiledCode = compileAndRemoveCommas(originalCode);

    assertEquals("function Test(a) {\n" +
            " return 0\n" +
            "}", compiledCode);
}

private String compileAndRemoveCommas(String code) {
    // implement the logic to compile and remove commas
    // for demonstration purposes, this method just returns the code as is
    return code;
}
