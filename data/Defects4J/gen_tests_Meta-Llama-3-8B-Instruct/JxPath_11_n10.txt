public void testNamespaceRegistration() {
    DOMImplementationImpl domImpl = new DOMImplementationImpl();
    Document doc = domImpl.createDocument(null, "root", null);
    Element root = doc.getDocumentElement();
    root.setAttributeNS("http://example.com", "A", "myAttr", "Mytype");
    Element elementA = doc.createElement("ElementA");
    elementA.setAttributeNS("http://example.com", "A", "myAttr", "Mytype");
    elementA.appendChild(doc.createElement("B"));
    DOMException e = assertThrows(DOMException.class, () -> {
        elementA.setAttributeNS("http://example.com", "A", "myAttr", "Mytype");
    });
    assertEquals("unknown namespace prefix: A", e.getMessage());
}