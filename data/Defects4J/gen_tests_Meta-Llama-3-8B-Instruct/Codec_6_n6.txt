
public void testBase64InputStreamRead() throws IOException {
    byte[] data = new byte[3]; // 3 bytes long, a multiple of 3
    data[0] = 1;
    data[1] = 2;
    data[2] = 3;

    ByteArrayInputStream inputStream = new ByteArrayInputStream(data);
    Base64InputStream base64InputStream = new Base64InputStream(inputStream, true);

    byte[] buffer = new byte[1];
    int bytesRead = base64InputStream.read(buffer);
    assertEquals(0, bytesRead); // This should fail with "java.io.IOException: Underlying input stream returned zero bytes"
}
