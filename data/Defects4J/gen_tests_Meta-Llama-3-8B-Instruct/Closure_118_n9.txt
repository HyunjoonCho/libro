public void testPrototypeMethodRemoved() {
    var foo = {};
    foo.bar = {
        'bar1': function() { console.log('bar1'); }
    };

    function foobar() {}
    foobar.prototype = foo.bar;

    foo.foobar = new foobar;

    try {
        foo.foobar.bar1();
        fail("Expected 'bar1' to be removed");
    } catch (e) {
        assertEquals("bar1", e.message);
    }
}