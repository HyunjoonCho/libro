
public class BugReportTest {
    public void testOptimizationFailsWithVariableInCatchClause() {
        // setup
        final String expectedResult = "expected stack trace";
        String getStack = new String() {
            try {
                throw new Error();
            } catch (Error a) {
                return a.stack;
            }
        };
        // act
        String actualResult = getStack;
        // assert
        assertEquals(expectedResult, actualResult);
    }
}
