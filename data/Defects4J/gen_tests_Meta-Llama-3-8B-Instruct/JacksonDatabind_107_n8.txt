java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.deser.DeserializationProblemHandler;
import com.fasterxml.jackson.databind.type.TypeFactory;
import com.fasterxml.jackson.databind.type.TypeReference;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNull;

public class DeserializationProblemHandlerTest {

    @Test
    public void testDeserializationWithDeserializationProblemHandler() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enableDefaultTyping();
        mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
        mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);

        DeserializationProblemHandler problemHandler = new DeserializationProblemHandler() {
            @Override
            public Object handleUnknownTypeId(DeserializationContext ctxt, JavaType type, String typeId, TypeIdResolver typeIdResolver, String typeName) {
                return Void.TYPE;
            }
        };

        String json = "{\"unknownType\":\"someType\"}";
        TypeReference<Map<String, Object>> typeRef = new TypeReference<Map<String, Object>>() {
        };

        Map<String, Object> map = mapper.readerFor(typeRef).with(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)
               .with(DeserializationFeature.FAIL_ON_NULL_FOR_EMPTY)
               .with(DeserializationFeature.FAIL_ON_IGNORED_PROPERTIES)
               .with(DeserializationFeature.FAIL_ON_TRAILING_COMMA)
               .with(DeserializationFeature.FAIL_ON_MISSING_CREATOR_PROPERTIES)
               .with(DeserializationFeature.FAIL_ON_MISSING_EXTERNAL_TYPE_ID_PROPERTY)
               .with(DeserializationFeature.FAIL_ON_MISSING_ROOT_NAME)
               .with(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES)
               .with(DeserializationFeature.FAIL_ON_NULL_IN_COERCE_TO_OBJECT)
               .with(DeserializationFeature.FAIL_ON_NUMBERS_FOR_OBJECT_ID)
               .with(DeserializationFeature.FAIL_ON_READING_DATE_TIME_AS_NANOSECONDS)
               .with(DeserializationFeature.FAIL_ON_READING_DATE_TIME_ZONE)
               .with(DeserializationFeature.FAIL_ON_READING_DOUBLEPRECISION)
               .with(DeserializationFeature.FAIL_ON_READING_FLOATPRECISION)
               .with(DeserializationFeature.FAIL_ON_READING_LONG)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_AS_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_AS_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_AS_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_AS_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_AS_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE_TIME)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_LOCAL_DATE)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH_INSTANT)
               .with(DeserializationFeature.FAIL_ON_READING_TIMESTAMP_IN_ZONED_DATE_TIME_WITH_ZONED_DATE_TIME_WITH