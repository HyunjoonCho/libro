
import org.junit.Test;
import com.google.javascript.jscomp.CompilationLevel;
import com.google.javascript.jscomp.JSError;
import com.google.javascript.jscomp.JSType;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.SourceFile;

public class TestVarArgsTypeCheck {
  @Test
  public void testVarArgsTypeCheck() {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setWarningLevel(CompilerOptions.WarningLevel VERBOSE);
    SourceFile sourceFile = SourceFile.fromSource("function foo(var_args) {\n" +
        "  return arguments.length;\n" +
        "}");
    compiler.compile(sourceFile, options, CompilationLevel.SIMPLE_OPTIMIZATIONS);

    // Verify that the third call to foo() does not produce a type mismatch warning
    JSError error = compiler.getError();
    assert(error == null);
  }
}
