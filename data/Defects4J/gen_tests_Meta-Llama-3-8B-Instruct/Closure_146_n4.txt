public void testBadTypeInference() {
    final String expectedMessage = "JSC_TYPE_MISMATCH: actual parameter 1 of g does not match formal parameter";
    try {
        Compiler.compile("function f(x) { if (x!= undefined) { g(x); } } function g(x) {}");
        fail("Expected a type mismatch error");
    } catch (CompilationException e) {
        assertEquals(expectedMessage, e.getMessage());
    }
}