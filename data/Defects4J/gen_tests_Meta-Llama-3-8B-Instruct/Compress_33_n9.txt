java
public void testCompressorStreamFactoryDeflateStreamWithZlibHeader() throws IOException {
    // Create a file with a zlib header
    File file = new File("bla.tar.deflatez");
    // Compress the file
    //...
    // Create a FileInputStream
    FileInputStream fis = new FileInputStream(file);
    // Create a CompressorStreamFactory
    CompressorStreamFactory factory = new CompressorStreamFactory();
    // Try to create a CompressorInputStream
    try {
        factory.createCompressorInputStream(fis);
        fail("Expected CompressorException");
    } catch (CompressorException e) {
        // Expected exception
    }
}
