
public void testCSVFormatWithHeader() throws IOException {
    String expectedOutput = "x\n42";
    File tempFile = File.createTempFile("data", ".csv");
    try (CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(new FileWriter(tempFile))) {
        csvPrinter.printRecord(42);
    }
    String actualOutput = Files.readString(Paths.get(tempFile.getAbsolutePath()));
    assertEquals(expectedOutput, actualOutput);
}
