
public void testIssue() throws Exception {
    // Create a prototype function
    final Function myClass = new Function("function MyClass(thing) { this.thing = thing; }");
    myClass.prototype.doIt = new Function("function() { var subthing = this.thing.subthing; for (var i = 0; i < subthing.noprop; i++) { console.log(i); } }");

    // Create an instance of the prototype function
    final Object thing = new Object();
    thing.subthing = new Object();
    thing.subthing.noprop = 3;

    // Call the doIt method
    myClass.prototype.doIt.call(new MyClass(thing));
}
