public void testInheritanceNotDetected() {
  Function<Window, Object> getter = window -> window.eval("SubClassInstance.CustomMethod()");
  try (ScriptEngine engine = new ScriptEngineManager().getEngineByName("javascript")) {
    engine.put("SuperClass", new Function<Object, Object>() {
      @Override public Object apply(Object ignored) {
        return null;
      }
    });
    engine.put("SubClass", new Function<Object, Object>() {
      @Override public Object apply(Object ignored) {
        return null;
      }
    });
    engine.eval(getter.toString());
    fail("Expected exception to be thrown");
  } catch (ScriptException e) {
    assertTrue(e.getMessage().contains("JSC_UNKNOWN_OVERRIDE"));
  }
}