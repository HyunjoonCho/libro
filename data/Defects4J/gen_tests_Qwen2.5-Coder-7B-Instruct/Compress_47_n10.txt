public void testGetNextZipEntryThrowsExceptionWhenCompressedSizeIsUnknown() throws IOException {
    ZipArchiveEntry entry = mock(ZipArchiveEntry.class);
    when(entry.getCompressedSize()).thenReturn(ArchiveEntry.SIZE_UNKNOWN);
    when(entry.getMethod()).thenReturn(ZipMethod.BZIP2.getCode());

    InputStream in = mock(InputStream.class);

    ZipArchiveInputStream zipIn = new ZipArchiveInputStream(in);
    zipIn.getNextZipEntry();

    verify(zipIn, never()).setInput(in);
    verify(zipIn).close();
}