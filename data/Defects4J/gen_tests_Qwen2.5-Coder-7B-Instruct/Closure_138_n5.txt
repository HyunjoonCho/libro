import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.JSError;

import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertTrue;

public class IssueTest {

    @Test
    public void testDeterministicTestWarning() throws Exception {
        Compiler compiler = new Compiler();
        CompilerOptions options = new CompilerOptions();
        String jsSource = "var t = null;\n" +
                "\n" +
                "window.test = function()\n" +
                "{\n" +
                " if (t!= null)\n" +
                " {\n" +
                " t = null;\n" +
                " }\n" +
                "\n" +
                " t = 1;\n" +
                "};";

        List<JSError> errors = compiler.compile(jsSource, null, options).getErrors();

        assertTrue(errors.stream().noneMatch(error -> error.getType().equals("JSC_DETERMINISTIC_TEST")));
    }
}