public void testZipFileCreationWithManyEntries() throws Exception {
    int numberOfFiles = 1000;
    String baseName = "file";
    String extension = ".txt";

    try (ZipOutputStream zos = new ZipOutputStream(new FileOutputStream("test.zip"))) {
        for (int i = 0; i < numberOfFiles; i++) {
            String fileName = baseName + i + extension;
            ZipArchiveEntry entry = new ZipArchiveEntry(fileName);
            zos.putNextEntry(entry);
            zos.write(("Content of " + fileName).getBytes());
            zos.closeEntry();
        }
    }

    try (ZipInputStream zis = new ZipInputStream(new FileInputStream("test.zip"))) {
        ZipArchiveEntry entry;
        while ((entry = zis.getNextEntry())!= null) {
            // Ensure each entry can be read without throwing exceptions
            assertTrue(zis.available() > 0);
            zis.closeEntry();
        }
    }
}