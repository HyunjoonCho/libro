import static org.junit.Assert.*;
import org.apache.commons.lang3.builder.HashCodeBuilder;
import org.apache.commons.lang3.builder.ToStringStyle;

public void testThreadLocalMemoryLeak() throws Exception {
    // Trigger loading of ToStringStyle which initializes the ThreadLocal
    ToStringStyle.SHORT_PREFIX_STYLE.hashCode();
    
    // Manually clean up after ourselves since there's no public API to do this
    HashCodeBuilder.clearThreadLocal();
    
    assertNull(HashCodeBuilder.THREADLOCAL.get());
}