public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<ElementA xmlns:A='http://example.com/A' xmlns:B='http://example.com/B'>"
            + "  <A:ElementA A:myAttr=\"Mytype\">"
            + "    <B:ElementB>MY VALUE</B:ElementB>"
            + "  </A:ElementA>"
            + "</ElementA>";
    Document document = new SAXBuilder().build(new StringReader(xml));
    DOMNodePointer pointer = new DOMNodePointer(null, document.getDocumentElement(), null);
    pointer.registerNamespace("A", "http://example.com/A");
    pointer.registerNamespace("B", "http://example.com/B");

    try {
        pointer.createAttribute("A:nonExistentAttr", "value");
        fail("Expected NamespaceException");
    } catch (NamespaceException e) {
        // Expected
    }
}