public void testTarArchiveOutputStreamBytesWritten() throws IOException {
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    try (TarArchiveOutputStream tarArchiveOutputStream = new TarArchiveOutputStream(byteArrayOutputStream)) {
        TarArchiveEntry entry = new TarArchiveEntry("testfile", "text/plain");
        tarArchiveOutputStream.putArchiveEntry(entry);

        byte[] data = "Hello, World!".getBytes();
        tarArchiveOutputStream.write(data);

        tarArchiveOutputStream.closeArchiveEntry();
    }

    long bytesWritten = byteArrayOutputStream.size();
    assertTrue(bytesWritten > 0);
    assertEquals("Hello, World!".length(), bytesWritten);
}