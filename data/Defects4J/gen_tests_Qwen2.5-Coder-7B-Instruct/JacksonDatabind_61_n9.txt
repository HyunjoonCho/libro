public void testDeserializationProblem() throws Exception {
    String json = "{\n" +
            "  \"__t\" : \"java.util.HashMap\",\n" +
            "  \"longInMap\" : [ \"java.lang.Long\", 2 ],\n" +
            "  \"longAsField\" : {\n" +
            "    \"__t\" : \"com.example.Main$Data\",\n" +
            "    \"key\" : [ \"java.lang.Long\", 1 ]\n" +
            "  }\n" +
            "}";
    
    ObjectMapper mapper = new ObjectMapper();
    Map deserializedData = mapper.readValue(json, Map.class);
    
    assertNotNull(deserializedData);
    assertTrue(deserializedData.containsKey("longInMap"));
    assertTrue(deserializedData.containsKey("longAsField"));
    
    Object longInMap = deserializedData.get("longInMap");
    assertTrue(longInMap instanceof List);
    assertEquals(2L, ((List) longInMap).get(1));
    
    Object longAsField = deserializedData.get("longAsField");
    assertTrue(longAsField instanceof Map);
    Map<String, Object> longAsFieldMap = (Map<String, Object>) longAsField;