public void testLanguageInECMAScript5Strict() throws Exception {
    String js1 = "var getNum = function() { return 5; };";
    String js2 = "alert(getNum());";

    Compiler compiler = new Compiler();
    compiler.initLogger(new NullLogger());

    List<CompilerInput> inputs = new ArrayList<>();
    inputs.add(SourceFile.fromCode("get_num.js", js1));
    inputs.add(SourceFile.fromCode("alert.js", js2));

    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(LanguageMode.ECMASCRIPT5_STRICT);
    options.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
    options.setWarningLevel(DiagnosticGroups.WARNING, CheckLevel.ERROR);

    Result result = compiler.compile(inputs, null, null, options);

    assertTrue(result.success);
    assertEquals("'use strict';alert(5);", compiler.toSource());
}