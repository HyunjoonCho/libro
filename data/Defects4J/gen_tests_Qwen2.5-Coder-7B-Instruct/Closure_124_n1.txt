public void testDifferentOutputFromRestAPIAndCommandLineJar() throws Exception {
    String input = "var foreignObject = gfx.parentNode.parentNode;\n" +
                   "var parentContainer = foreignObject.parentNode.parentNode;";
    
    URL url = new URL("http://closure-compiler.appspot.com/home");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setDoOutput(true);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
    
    String data = "js_code=" + URLEncoder.encode(input, "UTF-8") +
                  "&compilation_level=SIMPLE_OPTIMIZATIONS" +
                  "&output_file_name=default.js";
    
    try (OutputStream os = connection.getOutputStream()) {
        byte[] inputBytes = data.getBytes("utf-8");
        os.write(inputBytes, 0, inputBytes.length);           
    }
    
    StringBuilder response = new StringBuilder();
    try (BufferedReader br = new BufferedReader(
             new InputStreamReader(connection.getInputStream(), "utf-8"))) {
        String responseLine = null;
        while ((responseLine = br.readLine())!= null) {
            response.append(responseLine.trim());
        }
    }
    
    String closureCompilerOutput = response.toString();