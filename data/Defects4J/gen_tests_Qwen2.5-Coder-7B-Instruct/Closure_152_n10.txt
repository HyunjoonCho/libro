public void testResolveTypes() {
    String jsCode = "function foo(x) { return x; }";
    Compiler compiler = new Compiler();
    compiler.initOptions(new CommandLineRunner().getOptions());
    compiler.addSource("test", jsCode);
    try {
        compiler.compile(compiler.getInputs(), null, null);
        fail("Expected ClassCastException");
    } catch (ClassCastException e) {
        // Expected exception
    }
}