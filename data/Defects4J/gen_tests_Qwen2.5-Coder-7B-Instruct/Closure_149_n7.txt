public void testStringEscapingOption() throws IOException {
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(LanguageMode.ECMASCRIPT5);
    options.setLanguageOut(LanguageMode.ECMASCRIPT5);

    // Add custom pass to disable string escaping
    options.addPassFactory(new PassFactory() {
        @Override
        public AbstractCompilerPass create(AbstractCompiler compiler) {
            return new DisableStringEscapingPass(compiler);
        }
    });

    SourceFile input = SourceFile.fromCode("input.js", "var str = \"\\u00e9\";");
    List<SourceFile> externs = ImmutableList.of(SourceFile.fromCode("externs.js", ""));

    Result result = compiler.compile(externs, ImmutableList.of(input), options);
    assertTrue(result.success);

    String js = compiler.toSource();
    assertFalse(js.contains("\\u00e9"));
}