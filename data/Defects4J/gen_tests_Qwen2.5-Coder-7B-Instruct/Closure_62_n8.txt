public void testColumnCaretInErrorOutput() throws Exception {
    String input = "alert(1;\n>";
    String expectedOutput = "test.js:1: ERROR - Parse error. missing ) after argument list\n" +
                             "alert(1;\n" +
                             " ^\n";

    Process process = Runtime.getRuntime().exec("java -jar compiler.jar --js test.js");
    BufferedWriter writer = new BufferedWriter(new FileWriter("test.js"));
    writer.write(input);
    writer.close();

    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    StringBuilder output = new StringBuilder();
    String line;
    while ((line = reader.readLine())!= null) {
        output.append(line).append("\n");
    }
    reader.close();

    assertEquals(expectedOutput, output.toString());
}