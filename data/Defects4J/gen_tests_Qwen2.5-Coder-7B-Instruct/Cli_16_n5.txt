public void testGroupConstraints() throws Exception {
    Option optA = new Option("a", "option-a", true, "");
    Option optB = new Option("b", "option-b", true, "");
    OptionGroup groupA = new OptionGroup();
    groupA.addOption(optA);
    OptionGroup groupB = new OptionGroup();
    groupB.setRequired(true);
    groupB.addOption(optB);
    groupB.addOption(groupA);

    DefaultParser parser = new DefaultParser();
    CommandLine cmdLine = parser.parse(new Options().addOptionGroup(groupB), new String[]{"--option-b", "value"});

    assertTrue(cmdLine.hasOption("b"));
    assertFalse(cmdLine.hasOption("a"));
}