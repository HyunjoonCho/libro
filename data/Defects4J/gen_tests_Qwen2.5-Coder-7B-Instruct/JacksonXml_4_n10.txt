public void testXmlSerializerProvider() throws Exception {
    ObjectMapper mapper = new XmlMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(Object.class, new JsonSerializer<Object>() {
        @Override
        public void serialize(Object value, JsonGenerator gen, SerializerProvider serializers)
                throws IOException {
            // This should trigger the issue if not fixed
        }
    });
    mapper.registerModule(module);

    // Configure withRootName
    ((XmlMapper)mapper).addMixIn(Object.class, new ObjectMixIn() {
        @JsonSerialize(using = CustomObjectSerializer.class)
    });

    String xml = mapper.writeValueAsString(null);
    assertTrue(xml.contains("<CustomObject/>")); // Assuming CustomObject is the root name
}