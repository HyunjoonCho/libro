public void testCannotSeeVersionWithVersionFlag() throws Exception {
    Process process = Runtime.getRuntime().exec(new String[] { "java", "-jar", "compiler.jar", "--version" });
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
    String line;
    while ((line = reader.readLine())!= null) {
        assertTrue(line.contains("requires operand"));
    }
    int exitCode = process.waitFor();
    assertEquals(1, exitCode);
}