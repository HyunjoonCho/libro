public void testArrayIndexOutOfBoundsException() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    for (int i = 0; i < 10920; i++) {
        baos.write((byte) i);
    }
    InputStream is = new ByteArrayInputStream(baos.toByteArray());
    Base64InputStream b64stream = new Base64InputStream(is, true, 0, null);

    int count = 0;
    while (b64stream.read()!= -1) {
        count++;
    }

    assertEquals(10920, count);
}