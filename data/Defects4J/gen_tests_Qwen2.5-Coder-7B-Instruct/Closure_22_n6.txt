public void testClassifyNonRightmostExpressions() {
    // Test case 1
    Expression expr1 = new CommaExpression(new ConstantExpression(1),
                                            new ConstantExpression(2),
                                            new ConstantExpression(42));
    List<Expression> problematicExprs1 = classifyProblematicExpressions(expr1);
    assertEquals(1, problematicExprs1.size());
    assertEquals(new ConstantExpression(1), problematicExprs1.get(0));

    // Test case 2
    MethodCallExpression callExpr2 = new MethodCallExpression(
        new VariableExpression("foo"),
        new CommaExpression(new MethodCallExpression("bar", Collections.emptyList()),
                            new ConstantExpression(2),
                            new ConstantExpression(42))
    );
    List<Expression> problematicExprs2 = classifyProblematicExpressions(callExpr2);
    assertEquals(0, problematicExprs2.size());

    // Test case 3
    Expression expr3 = new CommaExpression(
        new CommaExpression(new ConstantExpression(1),
                            new ConstantExpression(2),
                            new ConstantExpression(3)),
        new CommaExpression(new ConstantExpression(4),
                            new ConstantExpression(5),
                            new ConstantExpression(42))
    );
    List<Expression> problematicExpr