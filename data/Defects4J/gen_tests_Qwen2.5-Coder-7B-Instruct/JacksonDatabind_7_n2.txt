public void testTokenBufferDelegateDeserialization() throws Exception {
    String json = "{\"a\":1,\"b\":null}";
    ObjectMapper mapper = new ObjectMapper();
    JsonParser parser = mapper.getFactory().createParser(json);
    parser.nextToken(); // START_OBJECT

    TokenBuffer buffer = new TokenBuffer(mapper.getFactory(), false);
    buffer.copyCurrentStructure(parser);

    assertEquals(JsonToken.START_OBJECT, buffer.getCurrentToken());
    assertEquals("a", buffer.nextToken().asText());
    assertEquals(JsonToken.VALUE_NUMBER_INT, buffer.nextToken());
    assertEquals("b", buffer.nextToken().asText());
    assertEquals(JsonToken.VALUE_NULL, buffer.nextToken());
    assertNull(buffer.nextToken());
}