import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertEquals;

public class TestCaseTest {

  @Test
  public void testContextAttributesPassedToCustomSerializer() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    ObjectNode treeTest = mapper.createObjectNode();
    treeTest.putPOJO("data", new TestCase.Data());

    String treeOut = mapper.writer()
                            .withAttribute("myAttr", "Hello!")
                            .writeValueAsString(treeTest);

    assertEquals("{\"data\":{\"aStr\":\"The value is: Hello!\"}}", treeOut);
  }
}