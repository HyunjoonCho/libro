public void testWriteBinaryWithInputStream() throws Exception {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    ToXmlGenerator generator = (ToXmlGenerator) JsonFactory.instance.createGenerator(out);

    try (InputStream data = new ByteArrayInputStream(new byte[]{0x01, 0x02, 0x03})) {
        generator.writeBinary(Base64Variants.getDefaultVariant(), data, 3);
    }

    String xml = out.toString("UTF-8");
    assertTrue(xml.contains("<binary>AQID</binary>"));
}