public void testUnwantedPOJOsEmbeddedInTreeViaSerializationToTree() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(new ListAttributeSerializer());
    mapper.registerModule(module);

    List<String> items = Arrays.asList("item1", "item2");
    ListAttribute attribute = new ListAttribute("key", items);
    JsonNode node = mapper.valueToTree(attribute);

    assertTrue(node.has("itemType"));
    assertTrue(node.has("items"));

    JsonNode itemsNode = node.get("items");
    assertFalse(itemsNode.isValueNode());
    assertEquals(2, itemsNode.size());

    Iterator<JsonNode> elements = itemsNode.elements();
    while (elements.hasNext()) {
        JsonNode element = elements.next();
        assertTrue(element.isTextual());
    }
}