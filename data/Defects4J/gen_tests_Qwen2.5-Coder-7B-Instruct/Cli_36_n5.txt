public void testHelpFormatterOptionComparatorNull() throws Exception {
    StringWriter sw = new StringWriter();
    PrintWriter pw = new PrintWriter(sw);
    HelpFormatter formatter = new HelpFormatter();
    formatter.setOut(pw);
    formatter.setOptionComparator(null);
    
    OptionGroup group = new OptionGroup();
    group.addOption(Option.builder("a").build());
    group.addOption(Option.builder("b").build());

    Option o1 = Option.builder("c").build();
    Option o2 = Option.builder("d").build();

    Options options = new Options();
    options.addOptionGroup(group);
    options.addOption(o1);
    options.addOption(o2);

    formatter.printHelp("test", options, true);

    String expectedOutput = "usage: test\n" +
                             "  -a,--a   \n" +
                             "  -b,--b   \n" +
                             "  -c,--c   \n" +
                             "  -d,--d   \n";
    assertEquals(expectedOutput, sw.toString());
}