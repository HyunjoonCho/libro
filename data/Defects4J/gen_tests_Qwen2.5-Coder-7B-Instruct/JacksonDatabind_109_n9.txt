import static org.junit.Assert.assertEquals;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import com.fasterxml.jackson.annotation.JsonFormat;
import java.math.BigDecimal;

public class TestWriteBigDecimalAsPlain {

    public static class TestClass {
        @JsonFormat(shape = JsonFormat.Shape.STRING)
        private BigDecimal value;

        public TestClass(BigDecimal value) {
            this.value = value;
        }

        public BigDecimal getValue() {
            return value;
        }
    }

    @org.junit.Test
    public void testWriteBigDecimalAsPlain() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        mapper.configure(SerializationFeature.WRITE_BIGDECIMAL_AS_PLAIN, true);

        String json = mapper.writeValueAsString(new TestClass(new BigDecimal("0.0000000005")));
        assertEquals("{\"value\":\"0.0000000005\"}", json);
    }
}