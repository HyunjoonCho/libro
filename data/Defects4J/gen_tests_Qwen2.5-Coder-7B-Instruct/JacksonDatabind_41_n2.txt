public void testConstructTypeWithNullContext() throws Exception {
    SimpleModule module = new SimpleModule();
    module.addDeserializer(String.class, new JsonDeserializer<String>() {
        @Override
        public String deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            return p.getText();
        }
    });
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(module);

    JsonNode node = mapper.readTree("\"test\"");
    try {
        SimpleTypeFactory.constructType(node.getNodeType(), null);
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}