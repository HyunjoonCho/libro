public void testResolveTypesBug() {
  String jsCode = "function foo(x) { return x; }";
  Compiler compiler = new Compiler();
  compiler.init(new CommandLineRunner(), null, null);
  compiler.setOptionsForTest(
      "--create_name_map_files", "true",
      "--jscomp_warning", "missingProperties",
      "--jscomp_warning", "undefinedVars",
      "--jscomp_warning", "checkTypes",
      "--warning_level", "VERBOSE",
      "--summary_detail_level", "3",
      "--process_closure_primitives", "true",
      "--jscomp_error", "strictModuleDepCheck",
      "--jscomp_error", "invalidCasts",
      "--logging_level", "ALL",
      "--compilation_level", "ADVANCED_OPTIMIZATIONS");

  compiler.compile(SourceFile.fromCode("testfile.js", jsCode));

  assertTrue(compiler.getResult().success);
}