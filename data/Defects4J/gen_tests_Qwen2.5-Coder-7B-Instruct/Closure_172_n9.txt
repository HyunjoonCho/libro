public void testPrototypePropertyTypeInference() {
    JavacTask task = (JavacTask) ToolProvider.getSystemJavaCompiler().getTask(null, null, null, null, null, Arrays.asList(
            new SourceFileObject("Test.java", 
                "/** @param {Object} a */\n" +
                "function f(a) {\n" +
                " a.prototype = '__proto';\n" +
                "}\n\n" +
                "/** @param {Object} a */\n" +
                "function g(a) {\n" +
                " a.prototype = function(){};\n" +
                "}"
            )
    ));
    Iterable<? extends Diagnostic<? extends JavaFileObject>> diagnostics = task.call();
    assertTrue(diagnostics.stream().anyMatch(d -> d.getCode().equals("type.mismatch")));
}