public void testVoidFunctionWithSideEffects() {
    boolean[] called = {false};
    new Object() {
        void function() {
            called[0] = true;
        }
    }.function();
    assertTrue(called[0]);
}