public void testTypeIdResolver() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(MyGenericClass.class, new MyGenericClassSerializer());
    module.addDeserializer(MyGenericClass.class, new MyGenericClassDeserializer());
    module.setTypeIdResolver(new MyTypeIdResolver());
    mapper.registerModule(module);

    String json = "{\"value\":\"test\"}";
    MyGenericClass<String> result = mapper.readValue(json, new TypeReference<MyGenericClass<String>>() {});

    assertNotNull(result);
    assertEquals(String.class, result.getValue().getClass());
    assertEquals("test", result.getValue());
}