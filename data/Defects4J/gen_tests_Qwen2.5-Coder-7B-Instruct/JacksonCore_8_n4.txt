public void testInconsistentTextBufferBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    assertSame(null, buffer.getTextBuffer()); // or assertSame(new char[0], buffer.getTextBuffer())
    assertEquals("", buffer.contentsAsString());
    assertSame(buffer.getTextBuffer(), buffer.getTextBuffer()); // should return the same value
}