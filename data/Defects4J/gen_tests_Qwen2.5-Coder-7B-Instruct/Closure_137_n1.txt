public void testInvalidDeterministicTest() {
    String source = "var t = null;\n\nwindow.test = function()\n{\n if (t!= null)\n {\n t = null;\n }\n\n t = 1;\n};";
    try {
        JsCompiler compiler = new JsCompiler();
        compiler.compile(SourceFile.fromCode("test.js", source));
        fail("Expected JSC_DETERMINISTIC_TEST error");
    } catch (JavaScriptException e) {
        assertTrue(e.getMessage().contains("JSC_DETERMINISTIC_TEST"));
    }
}