public void testTarArchiveWithLongDirectory() throws IOException {
    String longDirectoryName = "layers/openstreetmap_osm.disy.net/tiles/1.0.0/openstreetmap_osm.disy.net/default/";
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    TarArchiveOutputStream taos = new TarArchiveOutputStream(baos);

    TarArchiveEntry entry = new TarArchiveEntry(longDirectoryName, "directory");
    taos.putArchiveEntry(entry);
    try {
        taos.closeArchiveEntry();
        fail("Expected IOException");
    } catch (IOException e) {
        // Expected
    }
    taos.finish();
    taos.close();
}