public void testBase64InputStreamReadZeroBytesAtEnd() throws Exception {
    byte[] data = "SGVsbG8gV29ybGQh".getBytes(); // "Hello World!" encoded in Base64
    InputStream in = new ByteArrayInputStream(data);
    
    Base64InputStream base64In = new Base64InputStream(in, true);
    int bytesRead;
    while ((bytesRead = base64In.read())!= -1) {
        // Consume all bytes
    }
    
    try {
        base64In.read();
        fail("Expected IOException to be thrown");
    } catch (IOException e) {
        // Expected exception
    }
}