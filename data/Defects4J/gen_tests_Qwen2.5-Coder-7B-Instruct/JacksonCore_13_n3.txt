public void testUTF8JsonGenerator() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    JsonGenerator gen = mapper.getFactory().createGenerator(out, JsonEncoding.UTF8);
    gen.setCodec(mapper);
    gen.enable(SerializationFeature.QUOTE_FIELD_NAMES);
    gen.writeStartObject();
    gen.writeStringField("field", "value");
    gen.writeEndObject();
    gen.close();
    String json = out.toString("UTF-8");
    assertTrue(json.contains("\"field\""));
}