public void testRecordTypeInvalidPropertyNotReportedOnFunctionWithThisAnnotation() {
    String jsCode = "var makeClass = function(protoMethods) { var clazz = function() { this.initialize.apply(this, arguments); } for (var i in protoMethods) { clazz.prototype[i] = protoMethods[i]; } return clazz; } /** @constructor */ var Person = function(options){}; Person = makeClass(/** @lends Person.prototype */ { /** @this {Person} */ initialize: function(options) { /** @type {string} */ this.name_ = options.thisPropDoesNotExist; }, /** @param {string} message @this {Person} */ say: function(message) { window.console.log(this.name_ +'says:'+ message); } }); var joe = new Person({name: 'joe', height: 300}); joe.say('hi');";
    Compiler compiler = new Compiler();
    compiler.initLogger(new PrintStream(System.err));
    boolean success = compiler.compile(
            Collections.singletonList(new SourceFile("repro.js", jsCode)),
            Collections.<SourceFile>emptyList(),
            Collections.<String>emptyList(),
            null,
            null,
            null,
            null,
            null,