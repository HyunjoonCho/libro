public void testCompilerVersionOption() throws Exception {
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
    Process process = pb.start();
    int exitCode = process.waitFor();
    assertEquals(1, exitCode);
    String errorOutput = new String(process.getErrorStream().readAllBytes());
    assertTrue(errorOutput.contains("--version is not supported"));
}