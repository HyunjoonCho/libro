public void testTypeIdResolver() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(MyGenericClass.class, new MyGenericClassSerializer());
    module.addDeserializer(MyGenericClass.class, new MyGenericClassDeserializer());
    mapper.registerModule(module);

    String json = "{\"myField\":\"value\"}";
    MyGenericClass<String> result = mapper.readValue(json, new TypeReference<MyGenericClass<String>>() {});
    assertEquals(String.class, result.getType());
}