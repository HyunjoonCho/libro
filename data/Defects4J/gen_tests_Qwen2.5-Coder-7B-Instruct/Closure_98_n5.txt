import org.junit.Test;
import static org.mockito.Mockito.*;

public class TestBadVariableInlining {

    @Test
    public void testBug() {
        final List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);
        Runnable[] runnables = new Runnable[list.size()];
        for (int i = 0; i < list.size(); i++) {
            final int index = i;
            runnables[index] = () -> System.out.println(list.get(index));
        }
        for (Runnable runnable : runnables) {
            runnable.run();
        }
    }

}