public void testJacksonDeserializationProblem() throws Exception {
    String json = "{ \"__t\": \"java.util.HashMap\", \"longInMap\": [\"java.lang.Long\", 2], \"longAsField\": { \"__t\": \"Main$Data\", \"key\": [\"java.lang.Long\", 1] } }";

    ObjectMapper mapper = new ObjectMapper();
    Map deserializedData = mapper.readValue(json, Map.class);

    assertTrue(deserializedData instanceof HashMap);
    assertEquals(2L, ((HashMap<?,?>) deserializedData).get("longInMap"));
    assertEquals(1L, ((Data) ((HashMap<?,?>) deserializedData).get("longAsField")).key);
}

static class Data {
    public long key;
}