public void testSevenZEmptyEntries() throws IOException {
    File tempDir = Files.createTempDirectory("sevenztest").toFile();
    try {
        // Create 7 empty files
        for (int i = 0; i < 7; i++) {
            new File(tempDir, "emptyfile_" + i).createNewFile();
        }
        assertThrows(CorruptedArchiveException.class, () -> {
            SevenZOutput out = new SevenZOutput(new FileOutputStream("archive.7z"));
            SevenZFileSystemManager fsManager = new SevenZFileSystemManager();
            fsManager.init(out);
            Path root = Paths.get(tempDir.getAbsolutePath());
            fsManager.addFiles(root, "");
            fsManager.close();
        });

        // Create 7 files, some empty, some with content
        for (int i = 0; i < 7; i++) {
            File file = new File(tempDir, "file_" + i);
            file.createNewFile();
            if (i % 2 == 0) {
                Files.write(file.toPath(), "content".getBytes());
            }
        }
        assertThrows(CorruptedArchiveException.class, () -> {
            SevenZOutput out = new SevenZOutput(new