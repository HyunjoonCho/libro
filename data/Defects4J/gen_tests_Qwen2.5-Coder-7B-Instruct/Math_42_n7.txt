public void testNegativeValueWithRestrictNonNegative() throws Exception {
    double[] initialGuess = {1.0, -1.0};
    RealVector point = new ArrayRealVector(initialGuess);
    SimplexSolver solver = new SimplexSolver();
    
    Problem problem = new Problem() {
        public int getDimension() {
            return 2;
        }
        
        public double evaluate(double[] point) {
            return point[0] + point[1];
        }
        
        public boolean isFeasible(double[] point) {
            return Math.abs(point[0] + point[1] - 1) < 1e-6;
        }
    };
    
    PointValuePair solution = solver.optimize(problem, GoalType.MINIMIZE, true, new NonNegativeConstraint(false));
    assertFalse(solution.getValue() < 0);
}