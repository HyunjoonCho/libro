public void testDeserializingPrimitiveLong() throws Exception {
    String json = "{\"__t\":\"java.util.HashMap\",\"longInMap\":[\"java.lang.Long\",2],\"longAsField\":{\"__t\":\"Main$Data\",\"key\":[\"java.lang.Long\",1]}}";

    ObjectMapper mapper = new ObjectMapper();
    Map<String, Object> result = mapper.readValue(json, Map.class);

    assertEquals(Long.valueOf(2), ((Map<String, Object>)result.get("longInMap")).get("value"));
    assertEquals(Long.valueOf(1), ((Map<String, Object>)((Map<String, Object>)result.get("longAsField")).get("key")).get("value"));
}