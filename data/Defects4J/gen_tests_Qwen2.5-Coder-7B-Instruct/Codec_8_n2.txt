public void testBase64InputStreamReads() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    for (int i = 0; i < 10920; i++) {
        baos.write(i % 256);
    }
    InputStream is = new ByteArrayInputStream(baos.toByteArray());
    Base64InputStream b64stream = new Base64InputStream(is, true, 0, null);
    int n = 0;
    while (b64stream.read()!= -1) {
        n++;
    }
    assertEquals(10920, n);
}