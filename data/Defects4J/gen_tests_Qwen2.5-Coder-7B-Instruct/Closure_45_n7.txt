public void testAssignmentRemovedInArrayPush() {
    String input = "function f() { var a = [], b; a.push(b = []); b[0] = 1; return a; }";
    String expected = "function f(){var a=[];a.push([]);b=[1];return a}";
    assertEquals(expected, compile(input));
}

private String compile(String input) {
    Compiler compiler = new Compiler();
    compiler.initLogger(new NullErrorReporter());
    compiler.compile(SourceFile.fromCode("test.js", input), null, null);
    CodeGenerator generator = new CodeGenerator(compiler);
    return generator.generate(null);
}