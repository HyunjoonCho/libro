public void testIssueWithLabeledLoopsAndBreaks() throws Exception {
    String input = "var i = 0; lab1: do{ lab2: do{ i++; if (1) { break lab2; } else { break lab1; } } while(false); } while(false); console.log(i);";
    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());
    Result result = compiler.compile(
        Collections.singletonList(input),
        null,
        null,
        true);
    assertTrue(result.success);
    String jsCode = compiler.toSource();
    assertTrue(jsCode.contains("{a++;break b;}"));
    assertFalse(jsCode.contains("if (1) { break lab2; } else { break lab1; }"));
}