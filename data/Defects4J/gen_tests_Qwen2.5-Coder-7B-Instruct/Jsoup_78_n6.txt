public void testUnderlyingInputStreamZeroBytes() throws IOException {
    InputStream inputStream = mock(InputStream.class);
    when(inputStream.read(any(byte[].class))).thenReturn(0);

    try {
        new CharacterReader(inputStream);
        fail("Expected IOException to be thrown");
    } catch (IOException e) {
        assertEquals("Underlying input stream returned zero bytes", e.getMessage());
    }
}