public void testInvalidDeterministicTest() {
    // This test should compile without warnings
    String source = 
        "// ==ClosureCompiler==\n" +
        "// @output_file_name default.js\n" +
        "// @compilation_level ADVANCED_OPTIMIZATIONS\n" +
        "// ==/ClosureCompiler==\n" +
        "\n" +
        "var t = null;\n" +
        "\n" +
        "window.test = function()\n" +
        "{\n" +
        " if (t!= null)\n" +
        " {\n" +
        " t = null;\n" +
        " }\n" +
        "\n" +
        " t = 1;\n" +
        "};";

    try {
        JsCompiler compiler = new JsCompiler();
        CompilerOptions options = new CompilerOptions();
        compiler.compile(SourceFile.fromCode("test.js", source), null, options);
        assertTrue(compiler.hasErrors());
    } catch (Exception e) {
        fail("Compilation failed unexpectedly: " + e.getMessage());
    }
}