public void testCoreRoundingFunctions() {
    XPathContext context = new XPathContext();
    
    assertEquals(Double.NaN, assertXPathValue(context, "floor('NaN')").doubleValue(), 0);
    assertEquals(Double.NEGATIVE_INFINITY, assertXPathValue(context, "floor(-2 div 0)").doubleValue(), 0);
    assertEquals(Double.POSITIVE_INFINITY, assertXPathValue(context, "floor(2 div 0)").doubleValue(), 0);

    assertEquals(Double.NaN, assertXPathValue(context, "ceiling('NaN')").doubleValue(), 0);
    assertEquals(Double.NEGATIVE_INFINITY, assertXPathValue(context, "ceiling(-2 div 0)").doubleValue(), 0);
    assertEquals(Double.POSITIVE_INFINITY, assertXPathValue(context, "ceiling(2 div 0)").doubleValue(), 0);

    assertEquals(Double.NaN, assertXPathValue(context, "round('NaN')").doubleValue(), 0);
    assertEquals(Double.NEGATIVE_INFINITY, assertXPathValue(context, "round(-2 div 0)").doubleValue(), 0);
    assertEquals(Double.POSITIVE_INFINITY, assertXPathValue(context, "round(2 div 0)").doubleValue(), 0);
}

private Object assertXPathValue(XPathContext context, String expression) {