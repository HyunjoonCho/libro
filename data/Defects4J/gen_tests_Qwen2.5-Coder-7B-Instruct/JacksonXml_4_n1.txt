public void testXmlSerializerProviderWithNull() throws Exception {
    ObjectMapper mapper = new XmlMapper();
    SimpleModule module = new SimpleModule();
    module.setSerializerModifier(new BeanSerializerModifier() {
        @Override
        public JsonSerializer<?> modifySerializer(SerializationConfig config,
                BeanDescription beanDesc, JsonSerializer<?> serializer) {
            return new JsonSerializer<Object>() {
                @Override
                public void serialize(Object value, JsonGenerator gen,
                        SerializerProvider serializers) throws IOException {
                    gen.writeStartObject();
                    gen.writeStringField("test", "value");
                    gen.writeEndObject();
                }
            };
        }
    });
    mapper.registerModule(module);
    String result = mapper.writeValueAsString(null);
    assertEquals("<null/>", result);
}