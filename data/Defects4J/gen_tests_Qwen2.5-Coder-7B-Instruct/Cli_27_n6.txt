public void testOptionGroupWithLongOption() {
    Options options = new Options();
    Option longOption = Option.builder()
                             .longOpt("very-long-option-name")
                             .hasArg(false)
                             .build();
    options.addOption(longOption);

    OptionGroup group = new OptionGroup();
    group.addOption(longOption);
    options.addOptionGroup(group);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmdLine = null;
    try {
        cmdLine = parser.parse(options, new String[]{"--very-long-option-name"});
    } catch (ParseException e) {
        fail("Failed to parse command line arguments: " + e.getMessage());
    }

    assertTrue(cmdLine.hasOption("very-long-option-name"));
    assertTrue(group.isSelected());
}