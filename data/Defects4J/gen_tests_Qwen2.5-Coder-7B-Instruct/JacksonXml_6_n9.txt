public void testWriteBinaryWithInputStream() throws Exception {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    ToXMLGenerator generator = new ToXMLGenerator(out, JsonEncoding.UTF8);

    InputStream inputStream = new ByteArrayInputStream(new byte[]{0x01, 0x02, 0x03});
    generator.writeBinary(null, inputStream, 3);

    String xml = new String(out.toByteArray(), StandardCharsets.UTF_8);
    assertEquals("<root><binary>AQID</binary></root>", xml);
}