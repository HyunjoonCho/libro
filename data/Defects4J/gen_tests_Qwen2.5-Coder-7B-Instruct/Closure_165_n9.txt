public void testIncorrectPropertyCheck() {
    // Define the first record type with properties 'name' and 'id'
    Map<String, Object> record1 = new HashMap<>();
    record1.put("name", "jim");
    record1.put("id", 0);

    // Define the second record type with property 'name2'
    Map<String, Object> record2 = new HashMap<>();
    record2.put("name2", "foo");

    // Call the function with the first record type
    try {
        func(record1);
        fail("Expected exception not thrown");
    } catch (Exception e) {
        assertTrue(e instanceof IllegalArgumentException);
    }

    // Call the function with the second record type
    try {
        func(record2);
        fail("Expected exception not thrown");
    } catch (Exception e) {
        assertTrue(e instanceof IllegalArgumentException);
    }
}

private void func(Map<String, Object> rec) {
    if (!rec.containsKey("name2")) {
        throw new IllegalArgumentException("Property name2 never defined on rec");
    }
    String name2 = (String) rec.get("name2");
    System.out.println(name2);
}