public void testRequiredOptions() throws Exception {
    // Arrange
    Options options = new Options();
    Option helpOption = Option.builder("h")
           .longOpt("help")
           .hasArg(false)
           .desc("display help message")
           .build();
    options.addOption(helpOption);

    Option argOption = Option.builder("c")
           .required(true)
           .hasArg()
           .desc("required argument")
           .build();
    options.addOption(argOption);

    CommandLineParser parser = new DefaultParser();
    String[] args = {"-c", "<arg>"};

    // Act
    try {
        CommandLine cmd = parser.parse(options, args);
    } catch (ParseException e) {
        // Assert
        assertEquals("-h", e.getMessage());
    }
}