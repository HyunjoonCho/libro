public void testReadSymlinkInTarFile() throws IOException {
    // Create a temporary directory to hold the tar file
    File tempDir = Files.createTempDirectory("tar-test").toFile();
    try {
        // Create a tar file with a symlink
        Path tarFilePath = Paths.get(tempDir.getAbsolutePath(), "test.tar");
        try (TarArchiveOutputStream tarOut = new TarArchiveOutputStream(
                Files.newOutputStream(tarFilePath))) {

            // Add a regular file
            TarArchiveEntry entry = new TarArchiveEntry("regularfile.txt", "regularfile.txt");
            tarOut.putArchiveEntry(entry);
            tarOut.write("content".getBytes());
            tarOut.closeArchiveEntry();

            // Add a symlink
            entry = new TarArchiveEntry("symlink", "symlink");
            entry.setLinkName("regularfile.txt");
            tarOut.putArchiveEntry(entry);
            tarOut.closeArchiveEntry();
        }

        // Try to read the tar file
        try (TarArchiveInputStream tarIn = new TarArchiveInputStream(
                Files.newInputStream(tarFilePath))) {
            TarArchiveEntry entry;
            while ((entry = tarIn.getNextTarEntry())!= null) {
                // Process each entry
            }
        }