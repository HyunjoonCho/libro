public void testAssignmentToObjectInConditionalCausesTypeErrorOnFunctionWithRecordTypeReturnType() {
    Object result = func(true, false);
    assertNotNull(result);
    assertTrue(result instanceof Map);
    Map<String, Object> resultMap = (Map<String, Object>) result;
    assertEquals(1, resultMap.size());
    assertEquals("{a=3}", resultMap.get("prop1").toString());

    result = func(false, true);
    assertNotNull(result);
    assertTrue(result instanceof Map);
    resultMap = (Map<String, Object>) result;
    assertEquals(1, resultMap.size());
    assertEquals("prop2", resultMap.get("prop2"));

    result = func(false, false);
    assertNull(result);
}