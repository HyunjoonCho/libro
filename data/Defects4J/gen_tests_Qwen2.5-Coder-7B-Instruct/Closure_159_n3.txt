public void testClosureCompiler() throws Exception {
    String input = 
        "function preload_check_all() { }" +
        "function test() { preload_check_all(); }";
    String expectedOutput = 
        "function a() { }" +
        "function b() { a(); }";
    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());
    compiler.compile(SourceFile.fromCode("test.js", input),
                   SourceFile.fromCode("output.js", ""),
                   null);
    String actualOutput = compiler.toSource();
    assertEquals(expectedOutput, actualOutput);
}