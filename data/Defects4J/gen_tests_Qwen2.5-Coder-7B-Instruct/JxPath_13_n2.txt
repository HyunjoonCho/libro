public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<root xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>" +
                 "  <ElementA A:myAttr=\"Mytype\">" +
                 "    <B:ElementB>MY VALUE</B:ElementB>" +
                 "  </ElementA>" +
                 "</root>";
    
    DOMSource source = new DOMSource(new InputSource(new StringReader(xml)));
    Document document = (Document)source.getNode();
    
    NamespaceContext ctx = new SimpleNamespaceContext();
    ctx.setPrefix("xsi", "http://www.w3.org/2001/XMLSchema-instance");
    ctx.setPrefix("A", "/http...");
    ctx.setPrefix("B", "/http...");
    
    XPath xpath = XPathFactory.newInstance().newXPath();
    xpath.setNamespaceContext(ctx);
    
    Node node = (Node)xpath.evaluate("//ElementA/@A:myAttr", document, XPathConstants.NODE);
    assertNotNull(node);
    assertEquals("Mytype", node.getTextContent());
}