public void testgetNextZipEntryThrowsExceptionWhenCompressedSizeIsUnknownAndBzip2() throws IOException {
    ZipArchiveEntry entry = mock(ZipArchiveEntry.class);
    when(entry.getCompressedSize()).thenReturn(ArchiveEntry.SIZE_UNKNOWN);
    when(entry.getMethod()).thenReturn(ZipMethod.BZIP2.getCode());

    InputStream in = mock(InputStream.class);
    BoundedInputStream boundedIn = mock(BoundedInputStream.class);
    when(in.markSupported()).thenReturn(true);
    when(boundedIn.available()).thenReturn(0);

    ZipArchiveInputStream zipIn = new ZipArchiveInputStream(in);
    zipIn.setNextEntry(entry);

    try {
        zipIn.read();
        fail("Expected IOException to be thrown");
    } catch (IOException e) {
        assertTrue(e.getMessage().contains("compressed size is unknown"));
    }
}