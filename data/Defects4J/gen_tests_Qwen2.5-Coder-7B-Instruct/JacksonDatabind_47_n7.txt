import static org.junit.Assert.*;
import com.fasterxml.jackson.annotation.JsonDeserialize;
import com.fasterxml.jackson.annotation.JsonSerialize;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonTest {

    public void testModelObjects() throws Exception {
        ObjectMapper mapper = new ObjectMapper();
        String json = "{\"reference\":{\"id\":\"test\"}}";
        Foo foo = mapper.readValue(json, Foo.class);
        assertNotNull(foo.getReference());
        assertTrue(foo.getReference() instanceof BaseAccessionIdentifier);
    }

    static class Foo {
        @JsonSerialize(as = BaseAccessionIdentifier.class)
        @JsonDeserialize(as = BaseAccessionIdentifier.class)
        private AccessionIdentifier reference;

        public AccessionIdentifier getReference() {
            return reference;
        }

        public void setReference(AccessionIdentifier reference) {
            this.reference = reference;
        }
    }

    interface AccessionIdentifier {}

    static class BaseAccessionIdentifier implements AccessionIdentifier {
        private String id;

        public String getId() {
            return id;
        }

        public void setId(String id) {
            this.id = id;
        }
    }
}