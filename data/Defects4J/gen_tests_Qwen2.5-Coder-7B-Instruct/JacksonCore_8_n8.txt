public void testInconsistentTextBufferBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    
    Object textBuffer1 = buffer.getTextBuffer();
    String contentsAsString = buffer.contentsAsString();
    Object textBuffer2 = buffer.getTextBuffer();
    
    assertNull(textBuffer1);
    assertEquals("", contentsAsString);
    assertArrayEquals(new char[0], (char[])textBuffer2);
}