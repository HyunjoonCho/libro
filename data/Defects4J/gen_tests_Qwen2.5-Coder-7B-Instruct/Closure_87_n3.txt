public void testIE8Error() {
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("JavaScript");

    String script = "var b = {};\n" +
                    "b.onchange = function(event) { console.log('Change event'); };\n" +
                    "if (b.onchange) {\n" +
                    "  b.onchange({_extendedByPrototype: Prototype.emptyFunction, target: b});\n" +
                    "}\n";

    try {
        engine.eval(script);
        fail("Expected exception was not thrown");
    } catch (ScriptException e) {
        assertTrue(e.getMessage().contains("Object doesn't support this action"));
    }
}