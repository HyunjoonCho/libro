public void testWriteBinaryWithInputStream() throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    ToXMLGenerator xmlGen = new ToXMLGenerator(out, JsonEncoding.UTF8);

    InputStream inputStream = new ByteArrayInputStream(new byte[]{1, 2, 3, 4});
    xmlGen.writeBinary(null, inputStream, 4);
    xmlGen.close();

    String result = out.toString("UTF-8");
    // Add assertions based on expected XML output
}