public void testImplicitNamespaces() {
  StringBuilder builder = new StringBuilder();
  JavaScriptCompiler compiler = new JavaScriptCompiler();
  List<SourceFile> externs = ImmutableList.of(SourceFile.fromCode("externs", ""));
  List<SourceFile> inputs = ImmutableList.of(
      SourceFile.fromCode("moduleA.js", "goog.provide('apps');"),
      SourceFile.fromCode("moduleB.js", "goog.provide('apps.foo.bar.B');"),
      SourceFile.fromCode("moduleC.js", "goog.provide('apps.foo.bar.C');")
  );
  CompilerOptions options = new CompilerOptions();
  options.setOptimizationLevel(CompilationLevel.SIMPLE_OPTIMIZATIONS);
  compiler.compile(externs, inputs, options);
  String js = compiler.toSource();
  assertTrue(js.contains("var apps={}"));
  assertTrue(js.contains("apps.foo.bar={}"));
  assertTrue(js.contains("apps.foo={}"));
  assertTrue(js.contains("apps.foo.bar.B={}"));
  assertTrue(js.contains("apps.foo.bar.C={}"));
}