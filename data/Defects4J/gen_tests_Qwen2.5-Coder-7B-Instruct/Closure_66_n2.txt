public void testEnumTypeCheck() {
    String jsCode = 
      "/**\n" +
      " * @type {Object}\n" +
      " */\n" +
      "var NS = {};\n\n" +
      "/**\n" +
      " * @enum {number}\n" +
      " */\n" +
      "NS.keys = {\n" +
      "  a: 1,\n" +
      "  b: 2,\n" +
      "  c: 3\n" +
      "};\n\n" +
      "/**\n" +
      " * @enum\n" +
      " */\n" +
      "window['gKEYS'] = NS.keys;";
    
    Compiler compiler = new Compiler();
    compiler.initLogger(new PrintStream(System.err));
    compiler.compile(
        Collections.singletonList(new JSSourceFile("test.js", CharStreams.fromString(jsCode))),
        null,
        null,
        new CompilationLevel(ADVANCED_OPTIMIZATIONS),
        new DiagnosticCollector<Error>(true),
        null
    );
    List<Diagnostic<?>> diagnostics = compiler.getDiagnostics();
    assertTrue(diagnostics.stream().noneMatch(d -> d.getType()