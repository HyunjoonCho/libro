public void testCollapseProperties() throws Exception {
    String jsCode = "var x = {}; goog.exportSymbol('x', x);";
    Compiler compiler = new Compiler();
    compiler.init();
    compiler.setWarningLevel(DiagnosticGroups.CHECK_UNDEFINED_PROPERTIES, CheckLevel.ERROR);
    compiler.setWarningLevel(DiagnosticGroups.MISSING_PROPERTY_DEFINITION, CheckLevel.ERROR);
    compiler.compile(SourceFile.fromCode("test", jsCode));
    assertTrue(compiler.hasErrors());
}