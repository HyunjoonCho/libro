public void testLanguageInECMAScript5Strict() throws Exception {
    String input1 = "var getNum = function() { return 5; };";
    String input2 = "alert(getNum());";

    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());

    compiler.addSourceFromCode("input1", input1);
    compiler.addSourceFromCode("input2", input2);

    compiler.setOptionsForTest(
        "--language_in", "ECMASCRIPT5_STRICT",
        "--compilation_level", "ADVANCED_OPTIMIZATIONS",
        "--warning_level", "VERBOSE");

    compiler.compile();

    List<CompilerInput> inputs = compiler.getAllInputs();
    String result = Joiner.on("\n").join(inputs.stream()
       .map(CompilerInput::getCode)
       .collect(Collectors.toList()));

    assertTrue(result.contains("'use strict';"));
    assertTrue(result.contains("alert(5);"));
}