public void testCompilerCrash() throws Exception {
    String sourceCode = 
        "/** @constructor */\n" +
        "var Shape = function() {};\n" +
        "Shape = goog.inherits(Shape, Object);\n";
    
    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());
    compiler.addInputJS(sourceCode);
    try {
        compiler.compile();
        fail("Expected compiler crash did not occur.");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}