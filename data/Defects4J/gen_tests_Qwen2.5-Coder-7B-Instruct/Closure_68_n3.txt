public void testCrypticErrorMessage() throws Exception {
    String jsCode = "/**\n" +
                    "* @type function\n" +
                    "*/\n" +
                    "var callback;\n";

    File tempFile = File.createTempFile("test", ".js");
    try (PrintWriter writer = new PrintWriter(tempFile)) {
        writer.print(jsCode);
    }

    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", tempFile.getAbsolutePath());
    Process process = pb.start();
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
    String line;
    while ((line = reader.readLine())!= null) {
        assertTrue(line.contains("expected '('"));
    }
    int exitCode = process.waitFor();
    assertEquals(0, exitCode);
}