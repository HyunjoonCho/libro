public void testSwitchedOrderOfStatements() {
    String jsCode = 
        "var customData = { key: 'value' };\n" +
        "function testRemoveKey(key) {\n" +
        "    var dataSlot = customData,\n" +
        "        retval = dataSlot && dataSlot[key],\n" +
        "        hadKey = dataSlot && (key in dataSlot);\n" +
        "\n" +
        "    if (dataSlot)\n" +
        "        delete dataSlot[key];\n" +
        "\n" +
        "    return hadKey? retval : null;\n" +
        "}\n" +
        "\n" +
        "console.log(testRemoveKey('key'));\n" +
        "console.log('key' in customData);";
    
    JavaScriptCompiler compiler = new JavaScriptCompiler();
    CompilerOptions options = new CompilerOptions();
    Result result = compiler.compile(new SourceFile("test.js", CharSource.from(jsCode)), null, options);

    assertTrue(result.success);
    List<String> warnings = compiler.getWarnings();
    assertTrue(warnings.isEmpty());

    String compiledJs = compiler.toSource();
    assertFalse(compiledJs.contains("