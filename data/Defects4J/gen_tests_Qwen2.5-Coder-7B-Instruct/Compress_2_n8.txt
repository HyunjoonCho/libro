public void testArDelete() throws IOException {
    // Create initial archive with two files
    File tempFile = File.createTempFile("bla", ".ar");
    try (ArchiveOutputStream aos = new ArchiveOutputStream(new FileOutputStream(tempFile))) {
        addEntry(aos, "test1.xml", "content1".getBytes());
        addEntry(aos, "test2.xml", "content2".getBytes());
    }

    // Delete one file
    try (ArchiveInputStream ais = new ArchiveInputStream(new FileInputStream(tempFile))) {
        ArchiveEntry entry;
        while ((entry = ais.getNextEntry())!= null) {
            String name = entry.getName();
            if ("test2.xml".equals(name)) {
                continue; // Skip the entry to be deleted
            }
            // Re-add other entries to the archive
            try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {
                byte[] buffer = new byte[1024];
                int len;
                while ((len = ais.read(buffer)) > 0) {
                    baos.write(buffer, 0, len);
                }
                addEntry(aos, name, baos.toByteArray());
            }
        }
    }

    // Verify that the second file is actually deleted
    try (