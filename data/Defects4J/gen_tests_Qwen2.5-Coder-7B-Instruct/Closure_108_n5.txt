public void testPreconditionCrash() {
  String jsCode = "var goog = {}; goog.scope; var ns = {}; ns.sub = {}; /** @constructor */ ns.sub.C = function() {}; goog.scope(function() { var sub = ns.sub; /** @type {sub.C} */ var x = null; });";
  JavaScriptCompiler compiler = new JavaScriptCompiler();
  compiler.compile(SourceFile.fromCode("test.js", jsCode));
  assertTrue(compiler.hasErrors());
}