public void testBase64InputStreamRead() throws Exception {
    byte[] data = "SGVsbG8gV29ybGQh".getBytes(); // "Hello World!" in Base64
    InputStream in = new ByteArrayInputStream(data);
    Base64InputStream base64In = new Base64InputStream(in, true);

    byte[] buffer = new byte[10];
    int bytesRead = base64In.read(buffer);
    assertEquals(12, bytesRead); // Should read all 12 bytes

    bytesRead = base64In.read(buffer);
    assertEquals(-1, bytesRead); // Should return -1 indicating end of stream
}