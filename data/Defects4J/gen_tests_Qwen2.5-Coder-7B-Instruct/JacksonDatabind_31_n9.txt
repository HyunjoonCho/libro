public void testJsonStreamContexts() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"name\":\"John\", \"age\":30}";

    // Convert using readValue
    JsonNode node = mapper.readTree(json);
    assertTrue(node.has("name"));

    // Convert using treeToValue
    Person person = mapper.treeToValue(node, Person.class);
    assertEquals("John", person.getName());

    // Check write context
    StringWriter sw = new StringWriter();
    JsonGenerator gen = mapper.getFactory().createGenerator(sw);
    mapper.writeValue(gen, person);
    gen.close();

    assertEquals("{\"name\":\"John\",\"age\":30}", sw.toString());
}

class Person {
    private String name;
    private int age;

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public int getAge() { return age; }
    public void setAge(int age) { this.age = age; }
}