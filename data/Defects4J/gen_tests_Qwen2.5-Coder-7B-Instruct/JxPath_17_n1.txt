public void testNamespacedAttributeNotSelectedWithWildcard() throws Exception {
    String xml = "<xml xmlns:x='foo' x:pop='a'/>";
    Document doc = parseXml(xml);
    NodeList nodes = selectNodes(doc, "/xml/@*");
    assertEquals(0, nodes.getLength());

    nodes = selectNodes(doc, "/xml/@x:*");
    assertEquals(1, nodes.getLength());
    assertEquals("a", nodes.item(0).getNodeValue());
}

private Document parseXml(String xml) throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    return builder.parse(new InputSource(new StringReader(xml)));
}

private NodeList selectNodes(Document doc, String xpath) throws Exception {
    XPathFactory xpathFactory = XPathFactory.newInstance();
    XPath xpathObj = xpathFactory.newXPath();
    return xpathObj.evaluate(xpath, doc, XPathConstants.NODESET);
}