public void testBOBYQAOptimizerWithTooManyInterpolationPoints() {
    int dim = 3;
    double[] startPoint = {1.0, 2.0, 3.0};
    double[][] boundaries = {{0.0, 0.0, 0.0}, {2.0, 2.0, 2.0}};
    MultivariateFunction func =...; // Your multivariate function here

    BOBYQAOptimizer optim = new BOBYQAOptimizer(2 * dim + 2);
    try {
        optim.optimize(Integer.MAX_VALUE, func, GoalType.MINIMIZE, startPoint, boundaries[0], boundaries[1]);
        fail("Expected an exception to be thrown");
    } catch (Exception e) {
        assertTrue(e.getMessage().contains("off by one error"));
    }
}