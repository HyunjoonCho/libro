public void testAdvancedCompilationsRenameFunction() throws Exception {
    String input = 
      "function A() { this._x = 1; }" +
      "A.prototype['func1'] = null;" +
      "A.prototype.func1 = function() { this._x = 2; this.func2(); };" +
      "A.prototype.func2 = function() { this._x = 3; };";

    String output = compile(input);

    assertTrue(output.contains("function a() { this.a = 1; }"));
    assertTrue(output.contains("a.prototype.func1 = a.prototype.b = function() { this.a = 2;"));
    assertFalse(output.contains("this.func2();"));
}