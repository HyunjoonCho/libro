public void testWriteStringWithoutFieldName() throws Exception {
    StringWriter sw = new StringWriter();
    JsonGenerator gen = JsonFactory.defaultInstance().createGenerator(sw);
    try {
      gen.writeString("value");
      fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
      // Expected
    }
    gen.writeFieldName("name");
    gen.writeString("value");
    gen.close();
    String json = sw.toString();
    assertEquals("{\"name\":\"value\"}", json);
}