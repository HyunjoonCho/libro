public void testCompilerCrash() throws Exception {
    URL url = new URL("https://raw.githubusercontent.com/scottschiller/SoundManager2/master/script/soundmanager2-nodebug.js");
    InputStream inputStream = url.openStream();
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    byte[] buffer = new byte[1024];
    int bytesRead;
    while ((bytesRead = inputStream.read(buffer))!= -1) {
        outputStream.write(buffer, 0, bytesRead);
    }
    String jsCode = outputStream.toString();

    // Simulate running the Closure Compiler with the JS code
    ProcessBuilder processBuilder = new ProcessBuilder(
            "java", "-jar", "compiler-20110811.jar",
            "--js", "-", "--js_output_file", "/dev/null"
    );
    Process process = processBuilder.start();
    PrintWriter writer = new PrintWriter(process.getOutputStream(), true);
    writer.print(jsCode);
    writer.close();

    // Check that the compiler did not crash
    int exitCode = process.waitFor();
    assertEquals(0, exitCode);
}