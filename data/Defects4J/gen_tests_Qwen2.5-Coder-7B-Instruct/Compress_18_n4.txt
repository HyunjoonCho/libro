public void testTarArchiveWithLongDirectoryName() throws IOException {
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "very_long_directory_name_that_should_not_cause_error_in_tar_archive_" + System.currentTimeMillis());
    tempDir.mkdirs();
    
    try (TarArchiveOutputStream tarOut = new TarArchiveOutputStream(new FileOutputStream(tempDir.getPath() + ".tar"))) {
        TarArchiveEntry tarEntry = new TarArchiveEntry(tempDir.getName(), tempDir.getName() + "/");
        tarOut.putArchiveEntry(tarEntry);
        tarOut.closeArchiveEntry();
    }
    
    assertTrue(tempDir.delete());
}