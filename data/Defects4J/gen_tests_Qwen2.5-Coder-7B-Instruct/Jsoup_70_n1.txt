public void testWhitespacesInPreTag() {
    String input = "<pre><code>\n"
            + "  message <span style=\"color:red\"> other   \n    message  with \n"
            + "   whitespaces      </span>\n"
            + "</code></pre>";
    Document doc = Jsoup.parse(input);
    String expectedOutput = "<pre><code>\n" +
                             "  message <span style=\"color:red\"> other   \n    message  with \n" +
                             "   whitespaces      </span>\n" +
                             "</code></pre>";
    assertEquals(expectedOutput, doc.select("pre").first().outerHtml());
}