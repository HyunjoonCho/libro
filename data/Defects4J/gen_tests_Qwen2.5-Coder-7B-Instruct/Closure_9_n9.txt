public void testCompilerFailsToFindAmdModuleInSubdirectory() throws Exception {
    File fooJs = new File("lib/Foo.js");
    File barJs = new File("Bar.js");

    // Assume these files exist and contain valid AMD module definitions

    ProcessBuilder pb = new ProcessBuilder(
        "java", "-jar", "compiler.jar",
        "--transform_amd_modules", "--process_common_js_modules",
        "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js",
        "--js=" + barJs.getAbsolutePath(),
        "--js=" + fooJs.getAbsolutePath()
    );

    Process process = pb.start();
    int exitCode = process.waitFor();

    assertEquals(1, exitCode);
}