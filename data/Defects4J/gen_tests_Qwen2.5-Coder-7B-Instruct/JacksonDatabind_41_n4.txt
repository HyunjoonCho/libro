public void testConstructTypeWithNullContext() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addDeserializer(String.class, new JsonDeserializer<String>() {
        @Override
        public String deserialize(JsonParser p, DeserializationContext ctxt)
                throws IOException, JsonProcessingException {
            return p.getText();
        }
    });
    mapper.registerModule(module);

    try {
        TypeFactory typeFactory = mapper.getTypeFactory();
        typeFactory.constructType(String.class, null);
        fail("Expected NullPointerException to be thrown");
    } catch (NullPointerException e) {
        // expected
    }
}