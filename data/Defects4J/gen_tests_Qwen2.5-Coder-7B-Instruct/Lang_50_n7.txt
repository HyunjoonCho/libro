public void testDateInstanceLocaleChange() {
    Locale defaultLocale = Locale.getDefault();
    try {
        Locale.setDefault(Locale.US);

        FastDateFormat dateInstance = FastDateFormat.getDateInstance(FastDateFormat.DEFAULT, (Locale) null);
        FastDateFormat dateTimeInstance = FastDateFormat.getDateTimeInstance(FastDateFormat.DEFAULT, FastDateFormat.DEFAULT, (Locale) null);

        Locale.setDefault(Locale.FRANCE);

        assertNotEquals(dateInstance, FastDateFormat.getDateInstance(FastDateFormat.DEFAULT, (Locale) null));
        assertNotEquals(dateTimeInstance, FastDateFormat.getDateTimeInstance(FastDateFormat.DEFAULT, FastDateFormat.DEFAULT, (Locale) null));
    } finally {
        Locale.setDefault(defaultLocale);
    }
}