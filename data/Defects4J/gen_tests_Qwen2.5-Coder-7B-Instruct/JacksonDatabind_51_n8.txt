public void testTypeIdResolver() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(MyClass.class, new MyClassSerializer());
    module.addDeserializer(MyClass.class, new MyClassDeserializer());
    module.setTypeIdResolver(new MyTypeIdResolver());
    mapper.registerModule(module);

    MyClass obj = mapper.readValue("{\"myField\":\"value\"}", MyClass.class);
    assertNotNull(obj);
    assertEquals("value", obj.getMyField());
}