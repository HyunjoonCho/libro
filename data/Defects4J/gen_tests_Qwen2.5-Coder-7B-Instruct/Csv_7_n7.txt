public void testDuplicateColumnNamesInHeader() {
    String csvData = "Col1,Col2,Col2,Col3,Col4\n" +
                     "1,2,3,4,5\n" +
                     "4,5,6,7,8";
    Reader reader = new StringReader(csvData);
    Iterable<CSVRecord> records = CSVFormat.DEFAULT.parse(reader);

    Map<String, Integer> headerMap = new HashMap<>();
    for (CSVRecord record : records) {
        for (String header : record.getHeaderMap().keySet()) {
            headerMap.put(header, record.getHeaderMap().get(header));
        }
    }

    assertEquals(4, headerMap.size());
    assertTrue(headerMap.containsKey("Col1"));
    assertTrue(headerMap.containsKey("Col2"));
    assertTrue(headerMap.containsKey("Col3"));
    assertTrue(headerMap.containsKey("Col4"));
}