public void testDuplicateHeaders() throws IOException {
    String csvContent = "Col1,Col2,Col2,Col3,Col4\n" +
                        "1,2,3,4,5\n" +
                        "4,5,6,7,8";

    Reader reader = new StringReader(csvContent);
    Iterable<CSVRecord> records = CSVFormat.DEFAULT.parse(reader);

    CSVRecord record = records.iterator().next();
    assertTrue(record.isConsistent());

    assertEquals(5, record.size());
    assertEquals("1", record.get(0));
    assertEquals("2", record.get(1));
    assertEquals("3", record.get(2));
    assertEquals("4", record.get(3));
    assertEquals("5", record.get(4));
}