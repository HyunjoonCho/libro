public void testJsonGeneratorException() throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    JsonFactory f = new JsonFactory();
    JsonGenerator g = f.createGenerator(out);
    g.writeStartObject();
    g.writeFieldName("field");
    try {
        g.writeString("value");
        fail("Expected exception was not thrown");
    } catch (IllegalStateException e) {
        // Expected exception
    }
    g.close();
}