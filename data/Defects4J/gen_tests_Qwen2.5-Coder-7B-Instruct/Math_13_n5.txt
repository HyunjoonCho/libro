public void testMultivariateVectorOptimizers() throws Exception {
    int numberOfWeights = 41200;
    double[] weights = new double[numberOfWeights];
    Arrays.fill(weights, 1.0);

    Weight weight = new Weight(weights);

    // Create a mock objective function
    MultivariateFunction objectiveFunction = mock(MultivariateFunction.class);
    when(objectiveFunction.value(any(double[].class))).thenReturn(0.0);

    // Attempt to optimize using a multivariate optimizer
    try {
        SimplexOptimizer optimizer = new SimplexOptimizer();
        PointValuePair result = optimizer.optimize(
            OptimumDirection.MINIMIZE,
            objectiveFunction,
            null,
            weight.toMatrix()
        );
        fail("Expected OutOfMemoryError due to large matrix creation");
    } catch (OutOfMemoryError e) {
        // Expected exception
    }
}