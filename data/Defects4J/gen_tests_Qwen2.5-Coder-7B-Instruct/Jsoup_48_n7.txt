public void testDuplicateHeaderHandling() {
    Map<String, List<String>> headers = new HashMap<>();
    headers.put("X-Powered-By", Arrays.asList("PHP/5.2.8", "ASP.NET"));

    Response response = mock(Response.class);
    when(response.headers()).thenReturn(headers);

    Jsoup.connect("http://example.com")
         .execute()
         .header("X-Powered-By");

    verify(response).header("X-Powered-By", "PHP/5.2.8 ASP.NET");
}