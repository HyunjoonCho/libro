public void testCustomUnmodifiableSetMixin() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addAbstractTypeMapping(Set.class, Collections.unmodifiableSet(Collections.emptySet()).getClass());
    mapper.registerModule(module);

    String json = "[\"java.util.Collections$UnmodifiableSet\",[]]";
    Set<String> result = mapper.readValue(json, Set.class);
    assertTrue(result.isEmpty());
}