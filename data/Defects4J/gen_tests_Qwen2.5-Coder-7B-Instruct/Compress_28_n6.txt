public void testTarArchiveInputStreamUnexpectedEOF() throws IOException {
    InputStream inputStream = getClass().getResourceAsStream("/corrupted-tar.bz2");
    TarArchiveInputStream tarInput = new TarArchiveInputStream(inputStream);
    try {
        TarArchiveEntry entry = tarInput.getNextEntry();
        assertNotNull(entry);
        byte[] buffer = new byte[1024];
        int bytesRead;
        while ((bytesRead = tarInput.read(buffer))!= -1) {
            // Consume the data to ensure the stream progresses
        }
        fail("Expected IOException due to unexpected EOF");
    } catch (IOException e) {
        assertTrue(e.getMessage().contains("Unexpected end of ZLIB stream"));
    } finally {
        tarInput.close();
    }
}