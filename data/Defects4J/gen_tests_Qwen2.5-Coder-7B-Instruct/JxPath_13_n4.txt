public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<root xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" " +
                 "xmlns:A=\"http://example.com/A\" " +
                 "xmlns:B=\"http://example.com/B\">" +
                 "<A:ElementA A:myAttr=\"Mytype\">" +
                 "   <B:ElementB>MY VALUE</B:ElementB>" +
                 "</A:ElementA>" +
                 "</root>";
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new InputSource(new StringReader(xml)));
    DOMModel model = new DOMModel(doc.getDocumentElement(), null);

    try {
        model.createAttribute("A:myAttr", "SomeValue");
        fail("Expected NamespaceException to be thrown");
    } catch (NamespaceException e) {
        // Expected exception
    }
}