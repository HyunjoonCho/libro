public void testGoogIsArrayDoesntHintCompiler() {
    String jsCode = 
        "/**" + System.lineSeparator() +
        " * @param {*}" + System.lineSeparator() +
        " * @return {*}" + System.lineSeparator() +
        " */" + System.lineSeparator() +
        "var test = function(object) {" + System.lineSeparator() +
        "  if (goog.isArray(object)) {" + System.lineSeparator() +
        "    /** @type {Array} */ var x = object;" + System.lineSeparator() +
        "    return x;" + System.lineSeparator() +
        "  }" + System.lineSeparator() +
        "};";

    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(LanguageMode.ECMASCRIPT5);
    options.setLanguageOut(LanguageMode.ECMASCRIPT5);
    options.setOptimizationLevel(OptimizeOptions.Level.ADVANCED_OPTIMIZATIONS);

    Compiler compiler = new Compiler();
    Result result = compiler.compile(new JSSourceFile("test.js", CharSource.fromString(jsCode)), null, options);

    assertFalse(result.success);
    assertTrue(compiler.getErrorCount() > 0);
}