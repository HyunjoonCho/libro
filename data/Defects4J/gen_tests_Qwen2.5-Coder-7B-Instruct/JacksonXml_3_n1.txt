public void testNextTextValueForAttributes() throws Exception {
    String xml = "<root><child attr=\"value\">text</child></root>";
    XMLInputFactory factory = XMLInputFactory.newInstance();
    XMLStreamReader reader = factory.createXMLStreamReader(new StringReader(xml));
    while (reader.hasNext()) {
        int event = reader.next();
        if (event == XMLStreamConstants.START_ELEMENT) {
            assertTrue(reader.getAttributeCount() > 0);
            String text = reader.nextText();
            assertNotNull(text);
            assertEquals("text", text);
        }
    }
}