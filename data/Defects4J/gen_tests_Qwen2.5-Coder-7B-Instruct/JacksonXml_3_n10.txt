public void testNextTextValueForAttributes() throws Exception {
    String xml = "<root><child attr=\"value\">text</child></root>";
    XMLInputFactory f = XMLInputFactory.newInstance();
    XMLStreamReader reader = f.createXMLStreamReader(new StringReader(xml));
    while (reader.hasNext()) {
        int event = reader.next();
        if (event == XMLStreamConstants.START_ELEMENT) {
            reader.getAttributeCount(); // consume attributes
        } else if (event == XMLStreamConstants.CHARACTERS && reader.isStartElement()) {
            String text = reader.getText();
            assertNotNull(text);
            assertEquals("value", text); // assuming "attr" attribute contains "value"
            break;
        }
    }
}