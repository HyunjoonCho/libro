public void testPrimitiveFieldAnnotationIgnoredForGson() {
    Gson gson = new GsonBuilder().registerTypeAdapter(long.class, new LongToStringTypeAdapter()).create();
    String json = gson.toJson(new GadgetWithPrimitivePart(42));
    assertEquals("{\"part\":\"42\"}", json);
}

private static final class LongToStringTypeAdapter extends TypeAdapter<Long> {
    @Override public void write(JsonWriter out, Long value) throws IOException {
        out.value(value.toString());
    }

    @Override public Long read(JsonReader in) throws IOException {
        return in.nextLong();
    }
}

private static final class GadgetWithPrimitivePart {
    @JsonAdapter(LongToStringTypeAdapter.class)
    final long part;

    private GadgetWithPrimitivePart(long part) {
        this.part = part;
    }
}