public void testVarArgsTypeCheck() {
    String[] args1 = {"hello"};
    String[] args2 = {"hello", "123"};
    String[] args3 = {123.toString()};
    
    Method method = null;
    try {
        method = TestClass.class.getMethod("foo", String[].class);
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    }
    
    Assert.assertEquals(1, method.invoke(null, (Object) args1));
    Assert.assertEquals(2, method.invoke(null, (Object) args2));
    Assert.assertThrows(ClassCastException.class, () -> method.invoke(null, (Object) args3));
}