public void testBzip2CompressorInputStreamReadsTruncatedFile() throws IOException {
    byte[] testData = new byte[770];
    Arrays.fill(testData, (byte) 0x42); // Fill with arbitrary data

    try (InputStream inputStream = new ByteArrayInputStream(testData)) {
        inputStream.close(); // Simulate truncation by closing input stream prematurely

        try (BZip2CompressorInputStream bzIn = new BZip2CompressorInputStream(inputStream)) {
            byte[] buffer = new byte[770];
            int bytesRead = bzIn.read(buffer);

            assertEquals(769, bytesRead); // Jython reads 769 bytes instead of 770
        }
    }
}