public void testHelpFormatterSetOptionComparatorNull() throws Exception {
    StringWriter out = new StringWriter();
    HelpFormatter formatter = new HelpFormatter();
    formatter.setOut(out);
    formatter.setOptionComparator(null);
    
    OptionGroup group = new OptionGroup();
    group.addOption(Option.builder("h").build())
     .addOption(Option.builder("s").build())
     .addOption(Option.builder("b").build())
     .addOption(Option.builder("t").build());

    Options options = new Options();
    options.addOptionGroup(group);
    options.addOption(Option.builder("o").build());

    formatter.printHelp("cmd", "", options, null);

    String helpText = out.toString();
    assertTrue(helpText.contains("-h, --help"));
    assertTrue(helpText.contains("-s, --some-option"));
    assertTrue(helpText.contains("-b, --another-option"));
    assertTrue(helpText.contains("-t, --yet-another-option"));
    assertTrue(helpText.contains("-o, --optional-option"));
}