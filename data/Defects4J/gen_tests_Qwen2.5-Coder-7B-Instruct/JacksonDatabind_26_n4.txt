import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.util.CompactStringObjectMap;

import java.io.ByteArrayOutputStream;
import java.io.ObjectOutputStream;

public void testSerializationProblem() throws Exception {
    CompactStringObjectMap map = CompactStringObjectMap.emptyInstance();
    ObjectMapper mapper = new ObjectMapper();

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    try {
        oos.writeObject(mapper.readerFor(String.class));
    } finally {
        oos.close();
    }
}