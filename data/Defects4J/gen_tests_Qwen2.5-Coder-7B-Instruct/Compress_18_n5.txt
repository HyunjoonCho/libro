public void testLongDirectoryNameInTarArchive() throws IOException {
    String longDirName = "layers/openstreetmap_osm.disy.net/.tiles/1.0.0/openstreetmap_osm.disy.net/default/";
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "test-tar");
    tempDir.mkdirs();
    try {
        File dirToTar = new File(tempDir, longDirName);
        dirToTar.mkdirs();

        FileOutputStream fos = new FileOutputStream(new File(tempDir, "test.tar"));
        TarArchiveOutputStream taos = new TarArchiveOutputStream(fos);

        TarArchiveEntry tae = new TarArchiveEntry(dirToTar, longDirName);
        taos.putArchiveEntry(tae); // This line should throw the exception

        taos.closeArchiveEntry();
        taos.finish();
        taos.close();
    } finally {
        FileUtils.deleteQuietly(tempDir);
    }
}