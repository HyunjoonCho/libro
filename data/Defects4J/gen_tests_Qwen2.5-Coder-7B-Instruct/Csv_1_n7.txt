public void testExtendedBufferedReader() throws IOException {
    String input = "line1\r\nline2\nline3\r";
    ExtendedBufferedReader reader = new ExtendedBufferedReader(new StringReader(input));
    
    assertEquals("line1", reader.readLine());
    assertEquals(1, reader.getLineNumber());

    assertEquals("line2", reader.readLine());
    assertEquals(2, reader.getLineNumber());

    assertEquals("line3", reader.readLine());
    assertEquals(3, reader.getLineNumber());

    assertNull(reader.readLine());
    assertEquals(4, reader.getLineNumber());
}