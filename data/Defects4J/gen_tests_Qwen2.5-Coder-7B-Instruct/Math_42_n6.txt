public void testNegativeValueWithRestrictNonNegative() throws Exception {
    Problem problem = new Problem();
    Variable[] variables = new Variable[2];
    variables[0] = new Variable("x", 1.0, Double.POSITIVE_INFINITY, false);
    variables[1] = new Variable("y", 1.0, Double.POSITIVE_INFINITY, false);

    Constraint constraint = new LinearConstraint(new double[]{1.0, 0.0}, Relationship.EQ, 1.0);

    problem.addVariable(variables[0]);
    problem.addVariable(variables[1]);
    problem.addConstraint(constraint);

    ObjectiveFunction objectiveFunction = new ObjectiveFunction(new double[]{1.0, 1.0, 0.0}, GoalType.MINIMIZE);

    SimplexSolver solver = new SimplexSolver();
    PointValuePair solution = solver.optimize(objectiveFunction, problem, SimplexSolver.Phase.START, false);

    assertTrue(solution.getValue() >= 0);
    assertEquals(1.0, solution.getPoint()[0], 0.0);
    assertEquals(-1.0, solution.getPoint()[1], 0.0);
}