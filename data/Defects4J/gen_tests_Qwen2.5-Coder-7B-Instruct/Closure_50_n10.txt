public void testArrayJoinOptimization() throws Exception {
    String input = 
      "var a=['constant',confirm('value from user')];alert(a.join(','));";
    String expectedOutput =
      "var a=['constant',confirm('value from user')];alert(a.join());";
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setCodingConvention(new CodingConventions.Default());
    Result result = compiler.compile(SourceFile.fromCode("test.js", input),
                                   SourceFile.fromCode("out.js", ""),
                                   options);
    assertEquals(expectedOutput, compiler.toSource());
}