public void testAllowMultipleMatches() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.setDeserializerModifier(new BeanDeserializerModifier() {
        @Override
        public JsonDeserializer<?> modifyArrayDeserializer(DeserializationConfig config,
                ArrayType type, BeanDescription beanDesc, JsonDeserializer<?> deserializer) {
            return new FilteringParserDelegate(deserializer) {
                @Override
                protected boolean isHandled(JsonToken t) {
                    return true;
                }
            };
        }
    });
    mapper.registerModule(module);

    try {
        mapper.readValue("[\"a\",\"b\"]", String[].class);
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // expected
    }
}