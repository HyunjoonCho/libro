public void testArgumentCaptorForVarargs() {
    MyClass mock = Mockito.mock(MyClass.class);
    String[] args = {"a", "b"};
    mock.myMethod(args);

    ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);
    Mockito.verify(mock).myMethod(captor.capture());

    assertArrayEquals(new String[]{"a", "b"}, captor.getValue());
}