public void testSubclassDeserializationProblem() throws Exception {
    class MyMultiKey extends MultiKey<String, String> {
        private static final long serialVersionUID = 1L;

        public MyMultiKey(String key1, String key2) {
            super(key1, key2);
        }
    }

    MyMultiKey original = new MyMultiKey("key1", "key2");
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bos);
    oos.writeObject(original);
    oos.close();

    ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
    ObjectInputStream ois = new ObjectInputStream(bis);
    MyMultiKey deserialized = (MyMultiKey) ois.readObject();
    ois.close();

    assertNotSame(original, deserialized);
    assertEquals(original.getKey(0), deserialized.getKey(0));
    assertEquals(original.getKey(1), deserialized.getKey(1));
}