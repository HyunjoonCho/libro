public void testGroupConstraints() throws Exception {
    Option optionA = new Option("a", "optionA", true, "");
    Option optionB = new Option("b", "optionB", true, "");

    Group groupA = new Group();
    groupA.addOption(optionA);

    Group groupB = new Group();
    groupB.setRequired(true);
    groupB.setMinimum(1);
    groupB.setMaximum(1);
    groupB.addOption(optionB);
    groupB.addGroup(groupA);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmdLine = parser.parse(new Options().addGroups(groupB), new String[]{"-b", "value"});

    assertTrue(cmdLine.hasOption("b"));
    assertFalse(cmdLine.hasOption("a"));
}