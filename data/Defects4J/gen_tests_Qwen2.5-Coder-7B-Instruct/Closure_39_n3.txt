public void testExternExportWithTypedef() {
    String input = 
        "var /** @typedef {number} */ Foo;\n" +
        "\n" +
        "function bar(opt_foo) {}\n" +
        "\n" +
        "/** @type {Foo} */ var fooVar = 42;";
    String expectedOutput = 
        "var Foo;\n" +
        "\n" +
        "function bar(opt_foo) {}\n" +
        "\n" +
        "var fooVar = 42;";
    assertEquals(expectedOutput, compile(input));
}

private String compile(String input) {
    // Use the Closure Compiler API to compile the input and return the extern export string
}