public void testCpioUnpack() throws IOException {
    final File input = getFile("cmdcreated.cpio");
    final InputStream in = new FileInputStream(input);
    CpioArchiveInputStream cin = new CpioArchiveInputStream(in);

    try {
        CpioArchiveEntry entry;
        while ((entry = (CpioArchiveEntry) cin.getNextCPIOEntry())!= null) {
            File target = new File(dir, entry.getName());
            final OutputStream out = new FileOutputStream(target);
            IOUtils.copy(cin, out);
            out.close();
        }
    } finally {
        cin.close();
    }

    // Add assertions to verify the contents of the unpacked files
    // For example:
    assertTrue(new File(dir, "file1.txt").exists());
    assertTrue(new File(dir, "file2.txt").exists());
}