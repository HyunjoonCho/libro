public void testNegativeValueWithRestrictNonNegative() throws Exception {
    Problem problem = new Problem();
    Variable[] variables = problem.addVariables(2);

    Function function = Expressions.buildLinear(variables[0], 1)
           .addTerm(variables[1], 1)
           .build();

    Constraint constraint = Expressions.buildLinear(variables[0], 1).build()
           .toConstraint(Relationship.EQ, 1);

    Solver solver = SolverFactory.newDefault().withFunction(function)
           .withConstraint(constraint)
           .withGoalType(GoalType.MINIMIZE)
           .withPivotRule(PivotRules.BEST_RATIO);

    Solution solution = solver.solve();
    assertTrue(solution.getVariableValues()[1] >= 0);
}