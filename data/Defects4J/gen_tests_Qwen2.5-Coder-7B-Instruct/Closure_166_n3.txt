public void testAnonymousObjectTypeInference() {
    Object obj1 = new Object() {
        public String prop = "a";
    };
    Object obj2 = new Object() {
        public String prop = "a";
        public String prop2 = "b";
    };

    func(obj1);
    func2(obj1);

    try {
        func2(obj2);
        fail("Expected exception not thrown");
    } catch (Exception e) {
        // Expected exception
    }
}