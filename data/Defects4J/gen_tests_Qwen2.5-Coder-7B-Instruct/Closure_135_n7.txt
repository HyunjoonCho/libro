public void testInheritanceNotDetected() {
  Function<Window, Object> getter = w -> w.eval("new SubClass()");
  assertEquals(getter.apply(new MockWindow()).getClass().getMethod("CustomMethod").getDeclaringClass(), SuperClass.class);
}

private static final class MockWindow extends Window {
  @Override
  public Object eval(String script) {
    try {
      return super.eval(script);
    } catch (Exception e) {
      throw new RuntimeException(e);
    }
  }
}