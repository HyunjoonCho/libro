import static org.junit.Assert.assertEquals;

import java.util.Calendar;
import java.util.Date;
import org.apache.commons.lang3.time.DateUtils;

public void testDateUtilsTruncateDSTSwitch() {
    Calendar calendar = Calendar.getInstance();
    calendar.set(2004, Calendar.OCTOBER, 31, 1, 0, 0);
    calendar.setTimeZone(TimeZone.getTimeZone("MDT"));
    Date oct31_01MDT = calendar.getTime();

    Date result = DateUtils.truncate(oct31_01MDT, Calendar.HOUR_OF_DAY);

    calendar.add(Calendar.HOUR_OF_DAY, 1);
    Date expected = calendar.getTime();

    assertEquals(expected, result);
}