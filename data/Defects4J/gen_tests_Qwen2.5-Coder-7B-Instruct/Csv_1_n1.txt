public void testReadLineWithCarriageReturn() throws IOException {
    String input = "line1\r\nline2";
    ExtendedBufferedReader reader = new ExtendedBufferedReader(new StringReader(input));
    String line1 = reader.readLine();
    String line2 = reader.readLine();
    assertNull(line2);
    assertEquals(2, reader.getLineNumber());
}