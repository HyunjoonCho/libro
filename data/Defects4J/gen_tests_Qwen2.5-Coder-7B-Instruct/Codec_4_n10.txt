import org.apache.commons.codec.binary.Base64;
import java.util.Arrays;

public class TestBase64Encoding {

    @Test
    public void testEncodeWithCRLFAndChunking() throws Exception {
        byte[] input = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa".getBytes("UTF-8");
        Base64 base64 = new Base64();
        
        byte[] encodedBytes = base64.encode(input);
        String encodedString = new String(encodedBytes, "UTF-8");
        
        // Check for CRLF at the end
        assertTrue(encodedString.endsWith("\r\n"));
        
        // Check for correct chunking
        String[] chunks = encodedString.split("\r\n");
        assertEquals(2, chunks.length);
        assertEquals(76, chunks[0].length());
        assertEquals(52, chunks[1].length());
    }

}