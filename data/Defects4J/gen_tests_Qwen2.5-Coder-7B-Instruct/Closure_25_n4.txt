public void testAnonymousObjectTypeInference() {
  String reverseJs = "/**\n" +
                     " * @param {{prop1: string, prop2: (number|undefined)}} parry\n" +
                     " * @constructor\n" +
                     " */\n" +
                     "function callz(parry) {\n" +
                     "  if (parry.prop2 && parry.prop2 < 5) alert('alright!');\n" +
                     "  alert(parry.prop1);\n" +
                     "}\n" +
                     "\n" +
                     "new callz({prop1: 'hi'});";
  
  JsCompiler compiler = new JsCompiler();
  compiler.init(new CompilerOptions(), new ErrorManager());
  compiler.addInputSource(SourceFile.fromCode("reverse.js", reverseJs));
  boolean success = compiler.compile();
  assertFalse(success);
  assertEquals(1, compiler.getErrorCount());
}