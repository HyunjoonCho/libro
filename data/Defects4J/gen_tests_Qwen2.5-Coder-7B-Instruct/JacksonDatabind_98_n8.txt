import static org.junit.Assert.assertEquals;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

public class TestJacksonEnumPolymorphism {

    @Test(expected = IllegalArgumentException.class)
    public void testEnumPolymorphism() throws Exception {
        String json = "{\"kind\": \"CONTACT\", \"to\": {\"name\": \"Foo\"}}";
        ObjectMapper mapper = new ObjectMapper();
        mapper.readValue(json, Message.class);
    }

    // Reproduction classes from the provided GitHub link
    public static class Message {
        public Kind kind;
        public To to;
    }

    public enum Kind {
        CONTACT
    }

    public static class To {
        public String name;
    }
}