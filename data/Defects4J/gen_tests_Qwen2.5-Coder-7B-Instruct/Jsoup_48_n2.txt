public void testDuplicateHeader() {
    Map<String, List<String>> headers = new HashMap<>();
    headers.put("X-Powered-By", Arrays.asList("PHP/5.2.8", "ASP.NET"));

    List<Header> resultHeaders = new ArrayList<>();
    for (Map.Entry<String, List<String>> entry : headers.entrySet()) {
        String name = entry.getKey();
        List<String> values = entry.getValue();
        if (name!= null &&!values.isEmpty()) {
            StringBuilder valBuilder = new StringBuilder();
            for (String str : values) {
                valBuilder.append(str).append(" ");
            }
            resultHeaders.add(new Header(name, valBuilder.toString().trim()));
        }
    }

    assertTrue(resultHeaders.stream()
                          .anyMatch(header -> "X-Powered-By".equals(header.getName()) &&
                                               "PHP/5.2.8 ASP.NET".equals(header.getValue())));
}