public void testJsonIdentityReferenceOnClass() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    ReallyAlwaysAsId obj = new ReallyAlwaysAsId(13);
    String json = mapper.writeValueAsString(obj);
    assertTrue(json.contains("\"value\":13"));

    ReallyAlwaysContainer container = new ReallyAlwaysContainer();
    json = mapper.writeValueAsString(container);
    assertTrue(json.contains("\"a\":{\"id\":1,\"value\":13}"));
    assertTrue(json.contains("\"b\":{\"id\":2,\"value\":13}"));
}