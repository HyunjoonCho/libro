public void testWithHeaderDoesNotWorkWithCSVPrinter() throws IOException {
    Path path = Paths.get("data.csv");
    try (CSVPrinter csvPrinter = new CSVPrinter(
            Files.newBufferedWriter(path),
            CSVFormat.DEFAULT.withHeader("x"))) {
        csvPrinter.printRecord(42);
    }
    
    String content = new String(Files.readAllBytes(path));
    assertEquals("x\n42\n", content);
}