public void testObjectReaderReadValuesErrorRecovery() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"a\":1,\"b\":2}";
    MappingIterator<Map<String,Object>> it = mapper.readerFor(Map.class)
           .readValues(json.substring(0, json.length() - 1));
    try {
        while (it.hasNext()) {
            it.nextValue();
        }
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        // expected
    }
    assertFalse(it.hasNext());
}