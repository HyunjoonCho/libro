public void testReadLineWithCR() throws IOException {
    String input = "line1\r\nline2";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    assertEquals("line1", reader.readLine());
    assertEquals(1, reader.getLineNumber());
    assertEquals("line2", reader.readLine());
    assertEquals(2, reader.getLineNumber());
}