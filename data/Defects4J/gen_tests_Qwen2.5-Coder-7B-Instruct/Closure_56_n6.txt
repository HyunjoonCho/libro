public void testLastWarningOrErrorTruncated() throws Exception {
    String input = "alert(foo);\nalert(bar);";
    String expectedOutput = 
        ">java -jar compiler.jar --warning_level VERBOSE --js test.js\n" +
        "test.js:1: ERROR - variable foo is undefined\n" +
        "alert(foo);\n" +
        "^\n\n" +
        "test.js:2: ERROR - variable bar is undefined\n\n" +
        "2 error(s), 0 warning(s)\n";

    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    PrintStream originalOut = System.out;
    System.setOut(new PrintStream(outputStream));

    // Simulate running the compiler with the given input
    CompilerRunner.main(new String[] { "--warning_level", "VERBOSE", "--js", "test.js" });

    System.setOut(originalOut);

    String actualOutput = outputStream.toString();
    assertEquals(expectedOutput, actualOutput);
}