public void testCastingFunctionBeforeCalling() throws Exception {
    String input = "console.log(/\\*\\* @type {function(!string):!string} \\*/ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'])( '$version' ));";
    String expected = "console.log((new window.ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\")).GetVariable(\"$version\"));";
    String actual = compiler.compile(input, null, null).getCode();
    assertEquals(expected, actual);
}