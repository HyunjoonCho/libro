public void testOptimizationFailsWithVariableInCatchClause() {
    // Arrange
    ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");

    // Act
    engine.eval("function getStack() { var getErrorObject = function() { try { throw Error(''); } catch(err) { return err; } }; return getErrorObject().stack; } window['getStackTrace'] = getStack;");
    Object result = engine.eval("window.getStackTrace();");

    // Assert
    assertNotNull(result);
}