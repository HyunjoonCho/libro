public void testResolveTypes() throws Exception {
  String jsCode = "var x = {a: 1};";
  Compiler compiler = new Compiler();
  compiler.initOptions(new Options());
  compiler.addInput(jsCode, "test.js");
  try {
    compiler.compile();
    fail("Expected ClassCastException");
  } catch (ClassCastException e) {
    assertTrue(e.getMessage().contains("UnionType cannot be cast to ObjectType"));
  }
}