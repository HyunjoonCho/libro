public void testCrypticErrorMessageOnInvalidTypeFunctionAnnotation() throws Exception {
    String jsCode = "/**\n" +
                   "* @type function\n" +
                   "*/\n" +
                   "var callback;\n";
    File inputFile = new File("test.js");
    Files.write(inputFile.toPath(), jsCode.getBytes());

    Process process = Runtime.getRuntime().exec(new String[]{"java", "-jar", "compiler.jar", "--js", inputFile.getAbsolutePath()});
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    process.getErrorStream().transferTo(outputStream);

    String errorOutput = outputStream.toString();
    assertTrue(errorOutput.contains("expected '('"));
}