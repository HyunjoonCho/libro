public void testDependencySortingWithClosurePassFalse() throws Exception {
    Compiler compiler = new Compiler();
    compiler.init();
    compiler.addInput(null, "var a = 1;", "file1.js");
    compiler.addInput(null, "goog.require('file1'); var b = 2;", "file2.js");
    CompilerOptions options = new CompilerOptions();
    options.setDependencySorting(true);
    options.setClosurePass(false);
    compiler.compile(options, null, null);
    assertTrue(compiler.getResult().getErrors().length == 0);
    String result = compiler.toSource();
    assertTrue(result.contains("var a = 1;"));
    assertTrue(result.contains("var b = 2;"));
    assertTrue(result.indexOf("var b") > result.indexOf("var a"));
}