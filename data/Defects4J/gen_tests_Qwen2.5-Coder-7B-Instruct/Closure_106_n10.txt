public void testCollapsePropertiesException() throws Exception {
    String jsCode = "var obj = {prop: 1};\n" +
                   "goog.exportSymbol('obj.prop', obj.prop);";
    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());
    compiler.addInput(jsCode);
    try {
        compiler.compile();
        fail("Expected RuntimeException to be thrown");
    } catch (RuntimeException e) {
        assertTrue(e.getCause() instanceof IllegalArgumentException);
    }
}