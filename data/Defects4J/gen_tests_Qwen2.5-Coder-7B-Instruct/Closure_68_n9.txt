public void testCrypticErrorMessage() throws Exception {
    String jsCode = "/**\n" +
                   "* @type function\n" +
                   "*/\n" +
                   "var callback;\n";
    File tempFile = File.createTempFile("test", ".js");
    try (PrintWriter writer = new PrintWriter(tempFile)) {
        writer.print(jsCode);
    }
    Process process = Runtime.getRuntime().exec(
            new String[]{"java", "-jar", "compiler-20110502.jar", "--js", tempFile.getAbsolutePath()});
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    process.getErrorStream().transferTo(out);
    String errorOutput = out.toString();
    assertTrue(errorOutput.contains("expected '('"));
}