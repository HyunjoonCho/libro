public void testMultiKeySubclassDeserializationProblem()
        throws Exception {
    class CustomMultiKey extends MultiKey {
        private static final long serialVersionUID = 1L;

        public CustomMultiKey(Object... keys) {
            super(keys);
        }
    }

    CustomMultiKey original = new CustomMultiKey("key1", "key2");
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    try (ObjectOutputStream oos = new ObjectOutputStream(bos)) {
        oos.writeObject(original);
    }

    CustomMultiKey deserialized = null;
    try (ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bos.toByteArray()))) {
        deserialized = (CustomMultiKey) ois.readObject();
    }

    assertNotSame(original, deserialized);
    assertEquals(original.getKey(0), deserialized.getKey(0));
    assertEquals(original.getKey(1), deserialized.getKey(1));
}