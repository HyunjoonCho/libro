public void testZipArchiveInputStreamEndOfStream() throws Exception {
    InputStream inputStream =... // provide a truncated zip input stream
    ZipArchiveInputStream zis = new ZipArchiveInputStream(inputStream);
    
    byte[] buffer = new byte[1024];
    int bytesRead;
    long totalBytesRead = 0;
    while ((bytesRead = zis.read(buffer))!= -1) {
        totalBytesRead += bytesRead;
    }
    
    assertEquals(-1, bytesRead); // should return -1 indicating end of stream
    assertTrue(totalBytesRead < expectedTotalSize); // should indicate less data read than expected due to truncation
}