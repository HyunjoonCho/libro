public <T> void testTemplateInferenceFailure() {
    new Class<String>() {}.foo(new Function<Class<?>, Class<?>>() {
        public Class<?> apply(Class<?> input) {
            return null;
        }
    });
}