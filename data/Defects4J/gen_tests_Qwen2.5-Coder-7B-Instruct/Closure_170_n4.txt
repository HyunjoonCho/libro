public void testOverlyAggressiveCommaRemoval() {
    String sourceCode = 
        "function Test(n) {\n" +
        "  var i = 0;\n" +
        "  return typeof n!== \"undefined\"? (i = n.length) : (n = \"foo\"), i\n" +
        "}\n" +
        "var dummy = \"6chars\";\n" +
        "console && console.log(Test(dummy));";

    // Simulate compilation with simple optimizations
    String optimizedCode = 
        "function Test(a) {\n" +
        "  return 0\n" +
        "}\n" +
        "var dummy = \"6chars\";\n" +
        "console && console.log(Test(dummy));";

    // Assert that the optimized code does not produce the expected result
    assertNotEquals("0", executeJavaScript(optimizedCode));
}

private String executeJavaScript(String code) {
    // Execute the JavaScript code and return the result
    // This is a placeholder implementation
    return "";
}