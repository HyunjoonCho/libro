public void testZipFileWithManyEntries() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try (ZipOutputStream zos = new ZipOutputStream(baos)) {
        for (int i = 0; i < 1000; i++) {
            String fileName = "file" + i;
            ZipArchiveEntry entry = new ZipArchiveEntry(fileName);
            zos.putNextEntry(entry);
            zos.write(("content" + i).getBytes());
            zos.closeEntry();
        }
    }

    byte[] zipData = baos.toByteArray();
    try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(zipData))) {
        ZipArchiveEntry entry;
        while ((entry = zis.getNextEntry())!= null) {
            // Ensure each entry is correctly read without corruption
            assertNotNull(zis.read());
            zis.closeEntry();
        }
    }
}