public void testSerializeDeserializeWithGenerics() throws Exception {
    Gson gson = new Gson();
    Bar bar = new Bar(1);
    String json = gson.toJson(bar);
    Bar deserializedBar = gson.fromJson(json, Bar.class);

    assertEquals(bar, deserializedBar);
}