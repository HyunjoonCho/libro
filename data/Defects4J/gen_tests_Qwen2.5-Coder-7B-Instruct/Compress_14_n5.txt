public void testSymlinkInTarFile() throws IOException {
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "test-tar-symlink");
    tempDir.mkdirs();
    try {
        // Create a symlink in a tar file
        File tarFile = new File(tempDir, "test.tar");
        FileOutputStream fos = new FileOutputStream(tarFile);
        TarArchiveOutputStream taos = new TarArchiveOutputStream(fos);
        TarArchiveEntry entry = new TarArchiveEntry("symlink", "link");
        entry.setLinkName("/path/to/symlink");
        taos.putArchiveEntry(entry);
        taos.closeArchiveEntry();
        taos.finish();
        taos.close();

        // Try to read the tar file
        FileInputStream fis = new FileInputStream(tarFile);
        TarArchiveInputStream tais = new TarArchiveInputStream(fis);
        TarArchiveEntry nextEntry;
        while ((nextEntry = tais.getNextTarEntry())!= null) {
            System.out.println(nextEntry.getName());
        }
        tais.close();
    } finally {
        FileUtils.deleteDirectory(tempDir);
    }
}