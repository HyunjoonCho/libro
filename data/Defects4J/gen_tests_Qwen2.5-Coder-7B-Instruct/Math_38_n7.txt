public void testBOBYQAOptimizerWithTooManyInterpolationPoints() throws Exception {
    int dim = 3;
    double[] startPoint = {0, 0, 0};
    double[][] boundaries = {{-1, -1, -1}, {1, 1, 1}};
    int numberOfInterpolationPoints = 2 * dim + 2;

    BOBYQAOptimizer optimizer = new BOBYQAOptimizer(numberOfInterpolationPoints);
    try {
        optimizer.optimize(100000, mockFunction(), GoalType.MINIMIZE, startPoint, boundaries[0], boundaries[1]);
        fail("Expected an exception to be thrown");
    } catch (Exception e) {
        // Expected exception
    }
}

private MultivariateFunction mockFunction() {
    return mock(MultivariateFunction.class);
}