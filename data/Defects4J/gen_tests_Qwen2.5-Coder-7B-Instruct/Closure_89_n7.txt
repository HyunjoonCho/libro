public void testCompilerRemovesFunctionProperties() {
    Function<Object> f1 = new Function<Object>() {
        public Object apply(Object input) {
            return null;
        }
    };
    f1.setProperty("alwaysCall", true);

    Function<Object> f2 = new Function<Object>() {
        public Object apply(Object input) {
            return null;
        }
    };

    Map<String, Function<Object>> map = new HashMap<>();
    map.put("f1", f1);
    map.put("f2", f2);

    String key = Math.random() > 0.5? "f1" : "f2";
    Function<Object> function = map.get(key);

    assertTrue((Boolean) function.getProperty("alwaysCall"));
}