public void testObviousOptimizations() {
    assertEquals(3, evaluate("(true == null? a() : b())", 2));
    assertEquals(3, evaluate("(true == false? a() : b())", 2));
}

private int evaluate(String expression, int b) {
    return new ScriptEngineManager().getEngineByName("JavaScript").eval(expression).equals(b)? 3 : b;
}