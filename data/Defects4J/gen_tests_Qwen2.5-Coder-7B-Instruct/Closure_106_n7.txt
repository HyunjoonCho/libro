public void testCollapsePropertiesThrowsException() {
    String jsCode = "var obj = {}; goog.exportSymbol('obj', obj);";
    try {
        JsCompilerOptions options = new JsCompilerOptions();
        options.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
        Compiler compiler = new Compiler();
        compiler.init(options, null, null);
        compiler.compile(new ErrorManager(), Collections.singletonList(jsCode));
        fail("Expected IllegalArgumentException to be thrown");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }
}