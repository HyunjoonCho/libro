public void testTemplateInferenceFailure() throws Exception {
    URLClassLoader loader = new URLClassLoader(new URL[]{new File(".").toURI().toURL()});
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);
    List<String> options = Arrays.asList("-d", "out");
    Iterable<? extends JavaFileObject> compilationUnits = fileManager.getFileObjectsFromFiles(
        Collections.singletonList(new File("Class.java")));
    JavaCompiler.CompilationTask task = compiler.getTask(null, fileManager, null, options, null, compilationUnits);
    assertFalse(task.call());
}