public void testIssueWithAdvancedOptimizations() {
    String code = "var MSG_foo='bar';";
    try (InputStream inputStream = new ByteArrayInputStream(code.getBytes())) {
      Compiler compiler = new Compiler();
      compiler.initLogger(new NullErrorManager());
      JSSourceFile externs = JSSourceFile.fromCode("externs.js", "");
      JSSourceFile input = JSSourceFile.fromCode("test.js", code);
      compiler.compile(externs, input, null);
      assertTrue(compiler.hasErrors());
      assertFalse(compiler.hasWarnings());
    } catch (IOException e) {
      fail(e.getMessage());
    }
}