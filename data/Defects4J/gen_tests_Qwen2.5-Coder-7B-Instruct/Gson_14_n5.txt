public void testCollapseChainsOfSuperExtendsBounds() {
  TypeToken<Foo1<String>> token = new TypeToken<Foo1<String>>() {};
  Type resolvedType = Types.resolve(token.getType(), 
      new HashMap<TypeVariable<?>, Type>() {{
          put(TypeToken.of(Foo2.class).getTypeParameters()[0], 
              new TypeToken<List<? extends String>>() {}.getType());
          put(TypeToken.of(Foo1.class).getTypeParameters()[0], 
              new TypeToken<Set<? super Integer>>() {}.getType());
      }});
  assertEquals(new TypeToken<Set<? super Object>>() {}.getType(), resolvedType);
}