public void testObjectIdRegression() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(MyObject.class, new JsonSerializer<MyObject>() {
        @Override
        public void serialize(MyObject value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            gen.writeStartObject();
            gen.writeObjectField("id", value.getId());
            gen.writeStringField("name", value.getName());
            gen.writeEndObject();
        }
    });
    mapper.registerModule(module);

    MyObject obj = new MyObject(1, "test");
    String json = mapper.writeValueAsString(obj);
    assertEquals("{\"id\":1,\"name\":\"test\"}", json);
}

class MyObject {
    private int id;
    private String name;

    public MyObject(int id, String name) {
        this.id = id;
        this.name = name;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}