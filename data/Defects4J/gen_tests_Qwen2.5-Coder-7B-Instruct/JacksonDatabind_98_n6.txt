public void testEnumPolymorphicDeserializationFailure() throws IOException {
    String json = "{\n" +
                  "  \"kind\": \"CONTACT\",\n" +
                  "  \"to\": {\n" +
                  "    \"name\": \"Foo\"\n" +
                  "  }\n" +
                  "}";
    ObjectMapper mapper = new ObjectMapper();
    try {
        mapper.readValue(json, MyClass.class);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        assertTrue(e.getCause() instanceof IllegalArgumentException);
        assertEquals("argument type mismatch", e.getCause().getMessage());
    }
}

class MyClass {
    public Kind kind;
    public To to;

    public static class To {
        public String name;
    }

    public enum Kind {
        CONTACT,
        EMAIL
    }
}