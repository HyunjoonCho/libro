public void testBzip2ReadTruncated() throws IOException {
    InputStream inputStream = new FileInputStream(new File("path/to/truncated.bz2.file"));
    BZip2CompressorInputStream bzIn = new BZip2CompressorInputStream(inputStream);
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    byte[] buffer = new byte[1024];
    int bytesRead;
    while ((bytesRead = bzIn.read(buffer))!= -1) {
        out.write(buffer, 0, bytesRead);
    }
    byte[] result = out.toByteArray();
    assertEquals(770, result.length);
}