public void testCannotSeeVersionWithVersionFlag() throws Exception {
    ProcessBuilder pb = new ProcessBuilder(
            "java", "-jar", "compiler.jar", "--version");
    pb.redirectErrorStream(true);
    Process p = pb.start();
    String result = IOUtils.toString(p.getInputStream(), Charset.defaultCharset());
    int exitCode = p.waitFor();

    assertEquals(0, exitCode);
    assertTrue(result.contains("Closure Compiler"));
    assertFalse(result.contains("Опция \"--version\" требует операнд"));
}