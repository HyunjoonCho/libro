import com.google.common.base.Functions;
import org.junit.Test;

import static org.mockito.Mockito.*;

public class TestBadTypeInference {

    @Test(expected = NullPointerException.class)
    public void testIsArrayWithNullLength() {
        Object mockObject = mock(Object.class);
        when(mockObject.getClass()).thenReturn(new Class<Object>() {});
        Functions.identity().apply(mockObject); // This line should throw NPE
    }
}