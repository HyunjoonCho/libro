public void testAllowMultipleMatches() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(String.class, new JsonSerializer<String>() {
        @Override
        public void serialize(String value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            gen.writeStartArray();
            gen.writeString(value);
            gen.writeString(value);
            gen.writeEndArray();
        }
    });
    mapper.registerModule(module);

    String input = "\"test\"";
    JsonNode node = mapper.readTree(input);
    assertEquals(2, node.size());
    assertEquals("test", node.get(0).asText());
    assertEquals("test", node.get(1).asText());
}