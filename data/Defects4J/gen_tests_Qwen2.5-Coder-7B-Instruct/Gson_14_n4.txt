public void testRecursiveResolve() {
    TypeToken<Foo1<String>> token = new TypeToken<Foo1<String>>() {};
    Type resolvedType = Types.resolve(token.getType(), null, new HashMap<TypeVariable<?>, Type>());
    assertTrue(resolvedType instanceof ParameterizedType);
    ParameterizedType parameterizedType = (ParameterizedType) resolvedType;
    assertEquals(String.class, ((ParameterizedType)parameterizedType.getActualTypeArguments()[0]).getRawType());
}