public void testAllowMultipleMatches() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(String.class, new JsonSerializer<String>() {
        @Override
        public void serialize(String value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            gen.writeStartArray();
            for (char c : value.toCharArray()) {
                gen.writeString(String.valueOf(c));
            }
            gen.writeEndArray();
        }
    });
    mapper.registerModule(module);

    String input = "\"abc\"";
    String expectedOutput = "[\"a\",\"b\",\"c\"]";
    JsonNode node = mapper.readTree(input);
    StringWriter sw = new StringWriter();
    PrettyPrinter pp = new DefaultPrettyPrinter();
    pp.indentArraysWith(new DefaultIndenter(" ", true));
    mapper.writer(pp).writeValue(sw, node);
    assertEquals(expectedOutput, sw.toString());
}