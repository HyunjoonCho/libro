public void testAnonymousObjectTypeInference() {
    String jsCodeWithFunction = 
        "/**\n" +
        " * @param {{prop1: string, prop2: (number|undefined)}} parry\n" +
        " */\n" +
        "function callz(parry) {\n" +
        " if (parry.prop2 && parry.prop2 < 5) alert('alright!');\n" +
        " alert(parry.prop1);\n" +
        "}\n";
    String jsCodeWithConstructor = 
        "/**\n" +
        " * @param {{prop1: string, prop2: (number|undefined)}} parry\n" +
        " * @constructor\n" +
        " */\n" +
        "function callz(parry) {\n" +
        " if (parry.prop2 && parry.prop2 < 5) alert('alright!');\n" +
        " alert(parry.prop1);\n" +
        "}\n";
    assertTrue(validateJsCode(jsCodeWithFunction));
    assertFalse(validateJsCode(jsCodeWithConstructor));
}

private boolean validateJsCode(String jsCode) {
    ProcessBuilder pb = new