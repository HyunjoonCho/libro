public void testClosureCompilerDefineAnnotation() throws IOException {
    String input = "/** @define {string} */\n" +
                   "var CONSTANT = \"some very long string name that I want to wrap \" +\n" +
                   " \"and so break using a + since I don't want to \" +\n" +
                   " \"introduce a newline into the string.\";";
    Path inputFile = Files.write(Files.createTempFile("input", ".js"), input.getBytes());
    Path outputFile = Files.createTempFile("output", ".js");

    ProcessBuilder pb = new ProcessBuilder(
        "java",
        "-jar",
        "path/to/closure-compiler.jar",
        "--js", inputFile.toString(),
        "--js_output_file", outputFile.toString()
    );
    int exitCode = pb.start().waitFor();
    assertTrue("Expected 0 but got: " + exitCode, exitCode == 0);

    String output = new String(Files.readAllBytes(outputFile));
    assertTrue(output.contains("CONSTANT = \"some very long string name that I want to wrap and so break using a + since I don't want to introduce a newline into the string.\";"));
}