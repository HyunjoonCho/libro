public void testCompilerCrashOnGoogScopeLocals() {
    String sourceCode = 
        "goog.provide('main');\n" +
        "goog.scope(function (){\n" +
        "  var a = foo, b, c = 1;\n" +
        "});";
    try {
        Compiler.compile(sourceCode, null, new CompilerOptions(), null);
        fail("Expected compiler crash due to invalid goog.scope usage.");
    } catch (Exception e) {
        // Expected exception
    }
}