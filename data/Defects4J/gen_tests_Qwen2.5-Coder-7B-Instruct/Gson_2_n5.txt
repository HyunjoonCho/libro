public void testTypeHierarchyAdapter() {
    TypeAdapterFactory factory = new TypeHierarchyAdapter.Factory();
    Gson gson = new GsonBuilder().registerTypeAdapterFactory(factory).create();

    String jsonTruck = "{\"type\":\"Truck\",\"make\":\"Ford\"}";
    try {
        Car car = gson.fromJson(jsonTruck, Car.class);
        fail("Expected exception to be thrown");
    } catch (JsonSyntaxException e) {
        // Expected exception
    }
}