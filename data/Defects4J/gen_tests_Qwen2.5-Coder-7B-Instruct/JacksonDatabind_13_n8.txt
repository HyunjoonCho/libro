public void testAllowNullObjectId() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    MyObject obj = mapper.readValue("{\"id\":null}", MyObject.class);
    assertNull(obj.getId());

    try {
        mapper.configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, true);
        mapper.readValue("{\"id\":null}", MyObject.class);
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}

class MyObject {
    private Long id;

    public Long getId() { return id; }

    public void setId(Long id) { this.id = id; }
}