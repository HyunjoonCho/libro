public void testReproducibleCrashWithSwitchStatement() {
    String jsCode = 
        "function a(b) {\n" +
        "  switch (b.v) {\n" +
        "  case 'SWITCH':\n" +
        "    if (b.i >= 0) {\n" +
        "      return b.o;\n" +
        "    } else {\n" +
        "      return undefined;\n" +
        "    }\n" +
        // Commented out the "break;" line to work around the crash
        //    break;
        "  }\n" +
        "}\n";

    try {
        JavaScriptEngine engine = new JavaScriptEngine();
        engine.eval(jsCode);
        fail("Expected RuntimeException to be thrown");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}