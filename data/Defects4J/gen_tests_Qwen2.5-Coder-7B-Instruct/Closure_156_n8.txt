public void testCompilerCrash() {
    String jsCode = "var dojox$gfx$shape$Shape; dojox$gfx$shape$Shape = function() {};";
    JsCompiler compiler = new JsCompiler();
    try {
        compiler.compile(jsCode);
        fail("Expected compiler crash did not occur.");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}