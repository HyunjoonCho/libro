public void testOptionGroupWithLongOption() {
    Options options = new Options();
    Option option1 = Option.builder("short").hasArg().build();
    Option option2 = Option.builder().longOpt("very-long-option-name").hasArg().build();
    options.addOption(option1);
    options.addOption(option2);

    OptionGroup group = new OptionGroup();
    group.addOption(option1);
    group.addOption(option2);
    options.addOptionGroup(group);

    CommandLineParser parser = new DefaultParser();
    String[] args = {"--very-long-option-name", "value"};
    CommandLine cmd = null;
    try {
        cmd = parser.parse(options, args);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    assertTrue(cmd.hasOption("very-long-option-name"));
    group.setSelected(cmd.getOptions()[0]);
    assertTrue(group.getSelectedOptions().contains(cmd.getOptions()[0]));
}