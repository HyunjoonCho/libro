public void testZipWithManyEntries() throws IOException {
    int numFiles = 1000;
    String baseName = "file";
    try (ZipOutputStream zos = new ZipOutputStream(new FileOutputStream("test.zip"))) {
        for (int i = 0; i < numFiles; i++) {
            ZipArchiveEntry entry = new ZipArchiveEntry(baseName + i + ".txt");
            zos.putNextEntry(entry);
            zos.write(("Content of " + entry.getName()).getBytes());
            zos.closeEntry();
        }
    }

    try (ZipFile zipFile = new ZipFile("test.zip")) {
        Enumeration<? extends ZipEntry> entries = zipFile.entries();
        while (entries.hasMoreElements()) {
            ZipEntry entry = entries.nextElement();
            assertNotNull(entry);
            assertTrue(zipFile.getInputStream(entry).available() > 0);
        }
    }
}