public void testCustomUnmodifiableSetMixin() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addDeserializer(Set.class, new StdCollectionDeserializer<>(Collections.unmodifiableSet(new HashSet<>()).getClass()));
    mapper.registerModule(module);

    String json = "[\"java.util.Collections$UnmodifiableSet\", []]";
    Set<?> result = mapper.readValue(json, Set.class);
    assertTrue(result.isEmpty());
}