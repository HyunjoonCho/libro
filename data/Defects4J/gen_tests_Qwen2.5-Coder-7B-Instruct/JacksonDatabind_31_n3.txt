public void testJsonStreamContexts() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"name\":\"John\", \"age\":30}";
    JsonNode node = mapper.readTree(json);

    // Convert using TreeToValue
    Person person = mapper.treeToValue(node, Person.class);
    assertEquals("John", person.getName());
    assertEquals(30, person.getAge());

    // Write using TreeWriter
    StringWriter sw = new StringWriter();
    JsonGenerator gen = mapper.getFactory().createGenerator(sw);
    mapper.writeValue(gen, node);
    gen.close();

    assertEquals("{\"name\":\"John\",\"age\":30}", sw.toString());
}

class Person {
    private String name;
    private int age;

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public int getAge() { return age; }
    public void setAge(int age) { this.age = age; }
}