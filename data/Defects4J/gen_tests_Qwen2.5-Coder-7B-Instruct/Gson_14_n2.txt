public void testGsonTypesResolve() {
    TypeToken<Foo1<String>> token = new TypeToken<Foo1<String>>() {};
    Type resolvedType = Types.resolve(token.getType(), Collections.<Type>emptyMap());
    assertTrue(resolvedType instanceof ParameterizedType);
    ParameterizedType parameterizedType = (ParameterizedType) resolvedType;
    assertEquals(Foo1.class, parameterizedType.getRawType());

    Type argType = parameterizedType.getActualTypeArguments()[0];
    assertTrue(argType instanceof WildcardType);
    WildcardType wildcardType = (WildcardType) argType;

    assertTrue(wildcardType.getUpperBounds().length == 1);
    assertTrue(wildcardType.getLowerBounds().length == 0);

    Type upperBound = wildcardType.getUpperBounds()[0];
    assertTrue(upperBound instanceof ParameterizedType);
    ParameterizedType upperBoundType = (ParameterizedType) upperBound;

    assertEquals(Foo2.class, upperBoundType.getRawType());

    Type[] upperBoundArgs = upperBoundType.getActualTypeArguments();
    assertTrue(upperBoundArgs.length == 1);

    assertTrue(upperBoundArgs[0] instanceof WildcardType);
    WildcardType upperBoundWildcardType = (