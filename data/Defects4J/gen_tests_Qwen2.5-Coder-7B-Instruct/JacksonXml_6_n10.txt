public void testWriteBinaryInputStream() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ToXmlGenerator xmlGen = new ToXmlGenerator(new XmlFactory(), baos);
    
    byte[] testData = "testdata".getBytes("UTF-8");
    InputStream inputStream = new ByteArrayInputStream(testData);
    
    xmlGen.writeBinary(null, inputStream, testData.length);
    xmlGen.close();
    
    String result = baos.toString("UTF-8");
    assertTrue(result.contains("<binary>"));
}