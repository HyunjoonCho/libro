public void testRecordTypeInvalidPropertyNotReportedOnFunctionWithThisAnnotation() {
    // Arrange
    String jsCode = "var makeClass = function(protoMethods) { var clazz = function() { this.initialize.apply(this, arguments); } for (var i in protoMethods) { clazz.prototype[i] = protoMethods[i]; } return clazz; }; /** @constructor */ var Person = function(options){}; Person = makeClass(/** @lends Person.prototype */ { /** @this {Person} */ initialize: function(options) { /** @type {string} */ this.name_ = options.thisPropDoesNotExist; }, /** @param {string} message @this {Person} */ say: function(message) { window.console.log(this.name_ +'says:'+ message); } }); var joe = new Person({name: 'joe', height: 300}); joe.say('hi');";

    // Act & Assert
    try {
        JavaScriptCompiler compiler = new JavaScriptCompiler();
        compiler.compile(jsCode);
        fail("Expected a compilation error due to invalid property 'thisPropDoesNotExist'");
    } catch (JavaScriptCompilationException e) {
        assertTrue(e.getMessage().contains("Unknown property 'thisPropDoesNotExist'