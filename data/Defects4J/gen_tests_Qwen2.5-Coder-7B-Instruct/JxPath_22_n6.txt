public void testResetDefaultNamespace() throws Exception {
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new InputSource(new StringReader("<root xmlns=\"test111\"><child xmlns=\"\"></child></root>")));
    XPath xpath = XPathFactory.newInstance().newXPath();
    Node childNode = (Node) xpath.evaluate("/root/child", doc, XPathConstants.NODE);

    try {
        childNode.getAttributes().getNamedItem("xmlns").setNodeValue("");
        fail("Expected exception not thrown");
    } catch (DOMException e) {
        assertEquals(DOMException.NAMESPACE_ERR, e.getCode());
    }

    try {
        childNode.getAttributes().getNamedItem("xmlns").setNodeValue(null);
        fail("Expected exception not thrown");
    } catch (DOMException e) {
        assertEquals(DOMException.NAMESPACE_ERR, e.getCode());
    }
}