public void testSmartNameRemovalCrash() {
    // This test is intended to crash, so there is no assertion needed.
    // The goal is to demonstrate that the code causes a crash.
    String code = 
        "var goog = {};\n" +
        "goog.inherits = function(x, y) {};\n" +
        "var ns = {};\n" +
        "/** @constructor */\n" +
        "ns.PageSelectionModel = function(){};
        /** @constructor */\n" +
        "ns.PageSelectionModel.FooEvent = function() {};
        /** @constructor */\n" +
        "ns.PageSelectionModel.SelectEvent = function() {};
        goog.inherits(ns.PageSelectionModel.ChangeEvent, ns.PageSelectionModel.FooEvent);";
    
    try {
        Compiler compiler = new Compiler();
        compiler.compile(SourceFile.fromCode("test.js", code), null, null);
        fail("Expected compilation to crash.");
    } catch (Exception e) {
        assertTrue(e instanceof IllegalStateException);
    }
}