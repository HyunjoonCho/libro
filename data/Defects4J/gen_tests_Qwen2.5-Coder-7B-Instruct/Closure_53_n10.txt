public void testCompilerCrash() throws Exception {
    URL url = new URL("https://raw.github.com/scottschiller/SoundManager2/master/script/soundmanager2-nodebug.js");
    InputStream input = url.openStream();
    StringWriter writer = new StringWriter();
    IOUtils.copy(input, writer);
    String jsCode = writer.toString();

    Compiler compiler = new Compiler();
    compiler.init();
    Result result = compiler.compile(
            Collections.singletonList(new SourceFile("soundmanager2-nodebug.js", CharStreams.asReader(new StringReader(jsCode)))),
            Collections.<String>emptyList(),
            null,
            null,
            null);

    assertFalse(result.successful());
}