public void testTypeIdResolver() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(new CustomSerializer());
    module.addDeserializer(CustomClass.class, new CustomDeserializer());
    module.addKeyDeserializer(String.class, new CustomKeyDeserializer());
    module.setTypeIdResolver(new CustomTypeIdResolver());
    mapper.registerModule(module);

    String json = "{\"id\": \"custom-id\", \"value\": \"test-value\"}";
    CustomClass<?> obj = mapper.readValue(json, CustomClass.class);
    assertNotNull(obj);
    assertEquals("custom-id", obj.getId());
    assertEquals("test-value", obj.getValue());
}