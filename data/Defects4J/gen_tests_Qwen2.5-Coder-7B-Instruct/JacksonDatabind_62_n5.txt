public void testCustomUnmodifiableSetMixin() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.setMixInAnnotations(Collections.unmodifiableSet(Collections.<String>emptySet()).getClass(), UnmodifiableSetMixin.class);
    mapper.registerModule(module);
    mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);

    String json = "[\"java.util.Collections$UnmodifiableSet\",[]]";
    Set<String> result = mapper.readValue(json, Set.class);
    assertTrue(result.isEmpty());
}