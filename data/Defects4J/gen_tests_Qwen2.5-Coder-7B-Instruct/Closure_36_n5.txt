public void testGoogAddSingletonGetter() {
    // Arrange
    Compiler compiler = new Compiler();
    compiler.init();

    String jsCode = "goog.provide('foo');\n" +
                   "var foo = function() { this.values = []; };\n" +
                   "goog.addSingletonGetter(foo);\n" +
                   "\n" +
                   "foo.prototype.add = function(value) { this.values.push(value); }";

    CompilerInput input = new CompilerInput(jsCode);

    // Act
    compiler.compile(input);

    // Assert
    assertFalse(compiler.hasErrors());
    assertTrue(compiler.getResult().contains("goog.provide('foo');"));
    assertTrue(compiler.getResult().contains("var foo = function() { this.values = []; };"));
    assertTrue(compiler.getResult().contains("goog.addSingletonGetter(foo);"));
    assertTrue(compiler.getResult().contains("foo.prototype.add = function(value) { this.values.push(value); }"));
}