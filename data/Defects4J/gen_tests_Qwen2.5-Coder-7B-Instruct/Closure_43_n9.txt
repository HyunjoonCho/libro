public void testLendsAnnotation() throws Exception {
    String source = 
      "function Class() {};\n" +
      "(function() {\n" +
      "  /**\n" +
      "   * @constructor\n" +
      "   */\n" +
      "  var MyClass = function() { };\n" +
      "  /**\n" +
      "   * @type {!Object}\n" +
      "   * @lends MyClass.prototype\n" +
      "   */\n" +
      "  var proto = MyClass.prototype;\n" +
      "  /**\n" +
      "   * @return {number}\n" +
      "   */\n" +
      "  proto.getValue = function() { return 42; };\n" +
      "})();\n";
    
    Compiler compiler = new Compiler();
    compiler.initOptions(new CompilerOptions());
    compiler.compile(
        ImmutableList.of(),
        ImmutableList.of(source),
        ImmutableList.<JSSourceFile>of(),
        new InMemoryErrorManager());
    assertTrue(compiler.getErrorCount() == 0);
}