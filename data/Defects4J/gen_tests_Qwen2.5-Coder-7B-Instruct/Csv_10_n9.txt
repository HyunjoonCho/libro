public void testWithHeader() throws IOException {
    Path path = Files.createTempFile("test", ".csv");
    try (CSVPrinter csvPrinter = new CSVPrinter(Files.newBufferedWriter(path),
            CSVFormat.DEFAULT.withHeader("x"))) {
        csvPrinter.printRecord(42);
    }
    
    List<String> lines = Files.readAllLines(path);
    assertEquals(2, lines.size());
    assertEquals("x", lines.get(0));
    assertEquals("42", lines.get(1));
}