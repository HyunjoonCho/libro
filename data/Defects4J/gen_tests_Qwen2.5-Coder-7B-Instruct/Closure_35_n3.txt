public void testAssignmentToObjectInConditionalCausesTypeErrorOnFunctionWithRecordTypeReturnType() {
    Object result = func(true, false);
    assertTrue(result instanceof Record);
    assertFalse(((Record)result).hasProperty("prop2"));
    assertTrue(((Record)result).hasProperty("prop3"));
    
    result = func(false, true);
    assertTrue(result instanceof Record);
    assertTrue(((Record)result).hasProperty("prop2"));
    assertFalse(((Record)result).hasProperty("prop3"));
    
    result = func(true, true);
    assertTrue(result instanceof Record);
    assertTrue(((Record)result).hasProperty("prop2"));
    assertFalse(((Record)result).hasProperty("prop3"));
}