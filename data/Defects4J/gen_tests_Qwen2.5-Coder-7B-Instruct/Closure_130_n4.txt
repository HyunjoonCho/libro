public void testArgumentsScope() {
    Function outerFunction = new Function() {
        public Object call(Object[] args) {
            Function innerFunction = new Function() {
                public Object call(Object[] args) {
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    return args;
                }
            };
            return innerFunction.call(new Object[]{});
        }
    };

    Object result = outerFunction.call(new Object[]{});
    assertTrue(result instanceof Object[]);
    assertEquals(0, ((Object[])result).length);
}