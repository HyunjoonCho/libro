public void testExtendedBufferedReaderEOLHandling() throws IOException {
    String input = "line1\r\nline2\nline3";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    String line;
    int expectedLines = 3;
    while ((line = reader.readLine())!= null) {
        expectedLines--;
    }
    assertEquals(0, expectedLines);
    
    input = "line1\rline2\nline3";
    reader = new ExtendedBufferReader(new StringReader(input));
    expectedLines = 3;
    while ((line = reader.readLine())!= null) {
        expectedLines--;
    }
    assertEquals(0, expectedLines);
}