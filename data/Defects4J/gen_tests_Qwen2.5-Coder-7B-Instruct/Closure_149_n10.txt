public void testDisableStringEscaping() throws Exception {
    CompilerOptions options = new CompilerOptions();
    options.setLanguageIn(LanguageMode.ECMASCRIPT5);
    options.setLanguageOut(LanguageMode.ECMASCRIPT5);

    // Disable string escaping
    options.setStringEscapeBehavior(StringEscapeBehavior.NONE);

    SourceFile input = SourceFile.fromCode("test.js", "var str = \"\\u00e4\\u00f6\\u00fc\";");
    JavaScriptCompiler compiler = new JavaScriptCompiler();
    Result result = compiler.compile(SourceFile.fromCode("test.js", ""), ImmutableSet.of(input), options);

    assertFalse(result.successful());
}