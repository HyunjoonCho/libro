public void testBase64InputStreamReadAtEnd() throws IOException {
    byte[] data = "SGVsbG8gV29ybGQh".getBytes(); // Base64 encoded "Hello World!"
    InputStream in = new ByteArrayInputStream(data);
    
    Base64InputStream base64In = new Base64InputStream(in, true);
    int read;
    while ((read = base64In.read())!= -1) {
        // consume all data
    }
    
    assertEquals(-1, base64In.read()); // should return -1 indicating end of stream
}