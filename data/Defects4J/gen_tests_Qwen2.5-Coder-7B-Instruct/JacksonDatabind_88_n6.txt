public void testMissingTypeChecks() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addDeserializer(String.class, new JsonDeserializer<String>() {
        @Override
        public String deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            return "not a string";
        }
    });
    mapper.registerModule(module);

    try {
        mapper.readValue("{\"value\": \"string\"}", MyClass.class);
        fail("Expected exception not thrown");
    } catch (JsonMappingException e) {
        // expected
    }
}

class MyClass {
    private Object value;

    public Object getValue() {
        return value;
    }

    public void setValue(Object value) {
        this.value = value;
    }
}