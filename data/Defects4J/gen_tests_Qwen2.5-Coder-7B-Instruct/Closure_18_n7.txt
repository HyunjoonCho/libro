public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    compiler.init();
    
    CompilerOptions options = new CompilerOptions();
    options.setClosurePass(false);
    options.setDependencySorting(true);
    
    List<SourceFile> externs = ImmutableList.of(SourceFile.fromCode("externs.js", "var window;"));
    List<SourceFile> inputs = ImmutableList.of(
        SourceFile.fromCode("input1.js", "goog.require('b');"),
        SourceFile.fromCode("input2.js", "goog.provide('a');");
    );
    
    compiler.compile(externs, inputs, options);
    
    assertTrue(compiler.getResultTree().getFirstChild().hasChildren());
}