public void testReadValuesWithErrorRecovery() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"a\":1,\"b\":2";
    MappingIterator<Object> iter = mapper.readerFor(Object.class)
           .readValues(json);
    try {
        while (iter.hasNext()) {
            iter.nextValue();
        }
        fail("Expected JsonProcessingException");
    } catch (JsonProcessingException e) {
        // expected
    }
    assertTrue(iter.hasCurrentToken());
    assertEquals(JsonToken.END_OBJECT, iter.currentToken());
}