public void testInvalidHttpCharset() throws IOException {
    String html = "<html><head><meta charset=\"UTF8\"></head><body></body></html>";
    byte[] bytes = html.getBytes("UTF-8");
    Document doc = Jsoup.parse(bytes, "UTF-8", "");
    assertTrue(doc.html().contains("<html>"));

    // Simulate invalid HTTP-Charset header
    bytes = html.getBytes("ISO-8859-1");
    try {
        doc = Jsoup.parse(bytes, "UTF-8", "");
        fail("Expected UnsupportedCharsetException");
    } catch (UnsupportedCharsetException e) {
        // Expected
    }
}