public void testThreadLocalMemoryLeak() throws Exception {
    Object obj = new Object();
    ToStringStyle style = new ToStringStyle();
    style.append(obj);
    assertNull(style.getContext().get());
    System.gc();
    Thread.sleep(1000); // wait for GC to run
    assertNull(style.getContext().get());
}