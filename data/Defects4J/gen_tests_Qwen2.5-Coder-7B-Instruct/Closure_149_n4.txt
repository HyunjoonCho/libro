public void testDisableStringEscaping() {
    CompilerOptions options = new CompilerOptions();
    options.setStringEscapeAscii(false);

    SourceFile input = SourceFile.fromCode("test.js", "\"\u00e4\u00f6\u00fc\"");
    JSModule module = new JSModule("test");
    module.add(input);

    CompilationLevel.SIMPLE_OPTIMIZATIONS.run(options, null, Lists.newArrayList(module));

    CodeGenerator generator = new CodeGenerator(new StringBuilder(), options);
    generator.generateModule(module);

    String output = generator.toString();
    assertTrue(output.contains("\u00e4\u00f6\u00fc"));
}