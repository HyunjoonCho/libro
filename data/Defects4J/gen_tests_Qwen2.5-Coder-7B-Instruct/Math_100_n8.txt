public void testAbstractEstimator() throws Exception {
    Problem problem = new Problem();
    ParameterEstimate[] params = new ParameterEstimate[5];
    params[0] = new ParameterEstimate(new Parameter("p0", 0.0, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY));
    params[1] = new ParameterEstimate(new Parameter("p1", 0.0, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY));
    params[2] = new ParameterEstimate(new Parameter("p2", 0.0, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY));
    params[3] = new ParameterEstimate(new Parameter("p3", 0.0, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY));
    params[4] = new ParameterEstimate(new Parameter("p4", 0.0, Double.NEGATIVE_INFINITY, Double.POSITIVE_INFINITY));
    problem.setAllParameters(params);

    AbstractEstimator estimator = new AbstractEstimator() {
        @Override
        public double[] estimate(double[][] observations) {
            return new double[params.length];
        }
    };

    try {
        estimator.getCovariances();
        fail("ArrayIndexOutOfBoundsException expected");