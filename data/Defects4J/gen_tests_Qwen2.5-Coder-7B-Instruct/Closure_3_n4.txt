public void testOptimizationFailsWithVariableInCatchClause() {
    // Arrange
    String script = "function getStack() { var getErrorObject = function() { try { throw Error(''); } catch(err) { return err; } }; return getErrorObject().stack; }; window['getStackTrace'] = getStack;";
    
    // Act
    ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");
    try {
        engine.eval(script);
        Invocable invocable = (Invocable) engine;
        Object stackTrace = invocable.invokeFunction("getStackTrace");
        
        // Assert
        assertNotNull(stackTrace);
        assertTrue(stackTrace.toString().contains("at getStack"));
    } catch (ScriptException | NoSuchMethodException e) {
        fail(e.getMessage());
    }
}