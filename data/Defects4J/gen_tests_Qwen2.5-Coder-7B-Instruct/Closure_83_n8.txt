public void testCannotSeeVersionWithVersionOption() throws Exception {
    Process process = Runtime.getRuntime().exec(new String[]{"java", "-jar", "compiler.jar", "--version"});
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
    String line;
    boolean sawError = false;
    while ((line = reader.readLine())!= null) {
        if (line.contains("Опция \"--version\" требует операнд")) {
            sawError = true;
        }
    }
    assertTrue(sawError);
    int exitCode = process.waitFor();
    assertEquals(0, exitCode);
}