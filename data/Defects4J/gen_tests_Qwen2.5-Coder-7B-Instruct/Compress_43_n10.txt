public void testLocalVersionNeededToExtractDoesNotMatchCentralDirectory() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ZipArchiveOutputStream zaos = new ZipArchiveOutputStream(new BufferedOutputStream(baos));
    ZipArchiveEntry entry = new ZipArchiveEntry("test.txt");
    zaos.putArchiveEntry(entry);
    zaos.write("test".getBytes());
    zaos.closeArchiveEntry();
    zaos.finish();

    byte[] bytes = baos.toByteArray();
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    ZipInputStream zis = new ZipInputStream(bais);

    ZipEntry ze = zis.getNextEntry();
    int localVersionNeededToExtract = ((ze.getCrc() >> 16) & 0xFF);
    int centralVersionNeededToExtract = ze.getVersionNeededToExtract();

    assertEquals(localVersionNeededToExtract, centralVersionNeededToExtract);
}