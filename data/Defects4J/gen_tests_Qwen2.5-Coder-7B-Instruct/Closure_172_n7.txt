import com.google.javascript.jscomp.JSError;
import com.google.javascript.jscomp.Compiler;
import com.google.javascript.jscomp.CompilerOptions;
import com.google.javascript.jscomp.Result;

public void testTypeOfPrototypePropertyIncorrectlyInferredToString() {
    String jsCode =
        "/** @param {Object} a */\n" +
        "function f(a) {\n" +
        " a.prototype = '__proto';\n" +
        "}\n" +
        "\n" +
        "/** @param {Object} a */\n" +
        "function g(a) {\n" +
        " a.prototype = function(){return null;};\n" +
        "}";
    
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    Result result = compiler.compile(jsCode, "", options);

    assertTrue(result.successful);
    assertEquals(0, compiler.getErrorCount());
    assertEquals(0, compiler.getWarningCount());
}