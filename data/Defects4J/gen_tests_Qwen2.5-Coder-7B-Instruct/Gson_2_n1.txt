public void testTypeHierarchyAdapters() {
    TypeAdapter<Vehicle> vehicleAdapter = new TypeToken<Vehicle>(){}.getFactory().create(GsonBuilder.class.create(), new TypeToken<Vehicle>(){}.getType());

    String jsonForTruck = "{\"type\":\"Truck\", \"capacity\":5}";
    
    try {
        vehicleAdapter.fromJson(jsonForTruck);
        fail("Expected exception was not thrown");
    } catch (JsonSyntaxException e) {
        // Expected exception
    }
}