public void testNextTextValueForAttributes() throws Exception {
    String xml = "<root><element attr=\"value\">text</element></root>";
    XMLInputFactory f = XMLInputFactory.newInstance();
    XMLStreamReader reader = f.createXMLStreamReader(new StringReader(xml));
    while (reader.hasNext()) {
        int event = reader.next();
        if (event == XMLStreamConstants.START_ELEMENT) {
            assertTrue(reader.getAttributeCount() > 0);
            String text = reader.nextText();
            assertNotNull(text);
            assertEquals("text", text);
        }
    }
}