public void testBZip2CompressorInputStreamReadsTruncatedFile() throws IOException {
    InputStream inputStream = new FileInputStream("path/to/truncated.bz2/file");
    BZip2CompressorInputStream bzip2CompressorInputStream = new BZip2CompressorInputStream(inputStream);

    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    byte[] buffer = new byte[1024];
    int bytesRead;
    while ((bytesRead = bzip2CompressorInputStream.read(buffer))!= -1) {
        byteArrayOutputStream.write(buffer, 0, bytesRead);
    }

    assertEquals(770, byteArrayOutputStream.size());
}