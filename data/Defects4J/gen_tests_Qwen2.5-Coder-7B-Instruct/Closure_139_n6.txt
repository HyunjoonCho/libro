public void testRedefinitionOfFunctionInThirdPartyCode() {
    String jsCode = 
        "function assert(b) {if (!b) throw \"error\"}\n" +
        "\n" +
        "assert(f() === 1)\n" +
        "var f = function() {return 2;};\n" +
        "assert(f() === 2)\n" +
        "\n" +
        "function f() {return 1;}";
    
    // Simulate compilation process (e.g., using GWT compiler)
    String compiledJsCode = compileJavaScript(jsCode);

    // Check if the first definition of f has been changed
    assertTrue(compiledJsCode.contains("function f() {return 1;}"));
}