public void testDeterministicTestWarning() {
    // Arrange
    String sourceCode = "var t = null; window.test = function(){ if (t!= null) { t = null; } t = 1; };";

    // Act & Assert
    Compiler compiler = new Compiler();
    DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<>();
    JavaFileObject fileObject = SimpleJavaFileObjects.stringSource("Test", sourceCode);
    boolean success = compiler.compile(Arrays.asList(fileObject), null, null, diagnostics);

    assertTrue(success);
    assertEquals(0, diagnostics.getDiagnostics().size());
}