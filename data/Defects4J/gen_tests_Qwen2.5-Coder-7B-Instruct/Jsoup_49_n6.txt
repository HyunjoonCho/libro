public void testBugInElementInsertChildren() {
    Document doc = Jsoup.parse("<html><head></head><body><div id='parent'><div id='child1'></div><div id='child2'></div></div></body></html>");
    Element parent = doc.select("#parent").first();
    Elements children = parent.select("div");

    List<Element> toMove = Arrays.asList(children.get(2), children.get(3));
    parent.insertChildren(0, toMove);

    String expectedHtml = "<html><head></head><body><div id='parent'><div id='child3'></div><div id='child4'></div><div id='child1'></div><div id='child2'></div></div></body></html>";
    assertEquals(expectedHtml.replaceAll("\\s+", ""), doc.html().replaceAll("\\s+", ""));
}