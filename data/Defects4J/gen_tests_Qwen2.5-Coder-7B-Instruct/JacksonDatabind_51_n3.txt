public void testTypeIdResolver() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(new MySerializer());
    module.addDeserializer(MyClass.class, new MyDeserializer());
    mapper.registerModule(module);

    MyClass<?> obj = new MyClass<String>("test");
    String json = mapper.writeValueAsString(obj);
    MyClass<?> result = mapper.readValue(json, MyClass.class);

    assertNotNull(result.getType());
    assertEquals(String.class, result.getType());
}