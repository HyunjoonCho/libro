public void testClosureRemovesNeededCode() {
    String input = "Math.blah = function(test) { test.a = 5; }; var test = new Object(); Math.blah(test);";
    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());
    compiler.compile(SourceFile.fromCode("test.js", input), null, new DiagnosticCollector<Error>() {});
    assertTrue(compiler.getErrorCount() > 0);
    assertTrue(compiler.getWarningCount() > 0);
}