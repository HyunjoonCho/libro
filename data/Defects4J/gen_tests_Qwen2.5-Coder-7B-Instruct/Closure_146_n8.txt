public void testBadTypeInference() {
  Function<String, Void> function = new Function<String, Void>() {
    public Void apply(String input) {
      return null;
    }
  };
  try {
    function.apply(null);
    fail("Expected NullPointerException");
  } catch (NullPointerException e) {
    // Expected exception
  }
}