public void testFunctionWithNoSideEffects() {
    boolean[] sideEffectOccurred = {false};
    new Object() {
        void function() {
            sideEffectOccurred[0] = true;
        }
    }.function();
    assertTrue(sideEffectOccurred[0]);
}