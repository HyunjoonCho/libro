public void testCastingFunctionBeforeCallingItProducesBadCodeAndBreaksPluginCode() throws Exception {
  String jsCode = "console.log(/\\*\\* @type {function(!string):!string} \\*\\/, ((new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash'))['GetVariable'])( '$version' ));";
  Compiler compiler = new Compiler();
  compiler.initOptions(new Options());
  compiler.compile(SourceFile.fromCode("test.js", jsCode), null, null);
  assertTrue(compiler.getErrorCount() > 0);
  assertTrue(compiler.getWarningCount() > 0);
}