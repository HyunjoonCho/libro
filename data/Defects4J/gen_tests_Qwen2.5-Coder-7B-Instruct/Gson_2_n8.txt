public void testTypeHierarchyAdapter() {
    TypeAdapter<Vehicle> vehicleAdapter = new TypeToken<Vehicle>(){}.getDeserializer(new Gson());

    String truckJson = "{\"type\":\"Truck\",\"make\":\"Ford\"}";
    try {
        Car car = (Car) vehicleAdapter.deserialize(JsonParser.parseString(truckJson));
        fail("Expected exception to be thrown");
    } catch (Exception e) {
        // Expected exception
    }
}