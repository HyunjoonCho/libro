public void testEncodingPassThrough() throws Exception {
    String encoding = "UTF-8";
    InputStream inputStream = new ByteArrayInputStream(new byte[0]);
    ArchiveInputStream archiveInputStream = ArchiveStreamFactory.createArchiveInputStream(inputStream, encoding);

    assertTrue(archiveInputStream instanceof ArjArchiveInputStream ||
               archiveInputStream instanceof CpioArchiveInputStream ||
               archiveInputStream instanceof DumpArchiveInputStream ||
               archiveInputStream instanceof JarArchiveInputStream);

    assertEquals(encoding, ((AbstractArchiveEntry) archiveInputStream.getNextEntry()).getEncoding());
}