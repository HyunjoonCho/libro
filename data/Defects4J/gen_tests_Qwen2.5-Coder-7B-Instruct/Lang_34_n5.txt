import static org.junit.Assert.*;

import org.apache.commons.lang3.builder.HashCodeBuilder;
import org.apache.commons.lang3.builder.ToStringStyle;

public void testThreadLocalMemoryLeak() throws Exception {
    // Trigger loading of ToStringStyle which initializes a ThreadLocal
    new ToStringStyle();

    // Create multiple instances of classes using ToStringStyle and HashCodeBuilder
    // This should cause the ThreadLocal to accumulate references
    for (int i = 0; i < 1000; i++) {
        new Object();
        new Object();
    }

    // Force garbage collection to try to clean up ThreadLocal references
    System.gc();

    // Check that the ThreadLocal still holds references, indicating a potential memory leak
    assertNotNull(Thread.currentThread().getThreadLocals());
}