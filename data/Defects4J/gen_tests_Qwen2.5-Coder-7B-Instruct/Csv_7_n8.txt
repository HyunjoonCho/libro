public void testHeaderMapInconsistency() throws IOException {
    String csvContent = "Col1,Col2,Col2,Col3,Col4\n" +
                         "1,2,3,4,5\n" +
                         "4,5,6,7,8";
    
    Reader reader = new StringReader(csvContent);
    Iterable<CSVRecord> records = CSVFormat.RFC4180
                                          .withDelimiter(',')
                                          .withQuoteChar('"')
                                          .withQuotePolicy(Quote.MINIMAL)
                                          .withIgnoreSurroundingSpaces(true)
                                          .withHeader()
                                          .withSkipHeaderRecord(true)
                                          .parse(reader);
    
    CSVRecord record = Iterables.getFirst(records, null);
    assertNotNull(record);
    assertTrue(record.isConsistent());
}