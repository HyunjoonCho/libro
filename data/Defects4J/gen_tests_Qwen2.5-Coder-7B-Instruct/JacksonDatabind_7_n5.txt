public void testTokenBufferDelegateDeserialization() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"a\":1,\"b\":null}";
    JsonParser parser = mapper.getFactory().createParser(json);
    TokenBuffer buffer = new TokenBuffer(parser.getCodec(), false);
    buffer.copyCurrentStructure(parser);

    assertToken(JsonToken.START_OBJECT, buffer.getCurrentToken());
    assertToken(JsonToken.FIELD_NAME, buffer.nextToken());
    assertToken(JsonToken.VALUE_NUMBER_INT, buffer.nextToken());
    assertToken(JsonToken.FIELD_NAME, buffer.nextToken());
    assertToken(JsonToken.VALUE_NULL, buffer.nextToken());
    assertNull(buffer.nextToken());
}