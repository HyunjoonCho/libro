public void testBufferOwnershipCheckRelaxation() throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    IOContext context = IOContext.builder(out).build();
    ByteBuffer buffer = ByteBuffer.allocate(16);
    ByteBuffer resultBuffer = context.promoteByteBuffer(buffer, 32);

    assertNotSame(buffer, resultBuffer);
    assertEquals(32, resultBuffer.capacity());
}