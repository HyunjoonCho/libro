public void testInconsistentTextBufferBehavior() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();

    Object textBuffer = buffer.getTextBuffer();
    assertNotNull(textBuffer);

    String contentsAsString = buffer.contentsAsString();
    assertEquals("", contentsAsString);

    Object textBufferAfterContentsAsString = buffer.getTextBuffer();
    assertArrayEquals(new char[0], (char[])textBufferAfterContentsAsString);
}