public void testArrayJoinOptimization() throws Exception {
    String jsCode = 
        "var a=['constant',confirm('value from user')];" +
        "alert(a.join(','));";
    String optimizedJsCode = 
        "var a=['constant',confirm('value from user')];" +
        "alert(a.join());";

    JavaScriptCompiler compiler = new JavaScriptCompiler();
    compiler.init(new CompilerOptions(), null);
    CompilerInput input = new CompilerInput(jsCode);
    compiler.addInput(input);

    CompilerResult result = compiler.compile(null);
    assertEquals(optimizedJsCode, result.getCode());
}