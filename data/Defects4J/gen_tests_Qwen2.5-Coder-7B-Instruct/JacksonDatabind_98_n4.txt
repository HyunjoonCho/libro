import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

public class TestEnumPolymorphism {

    @Test(expected = IllegalArgumentException.class)
    public void testEnumPolymorphism() throws Exception {
        String json = "{\"kind\": \"CONTACT\", \"to\": {\"name\": \"Foo\"}}";
        ObjectMapper mapper = new ObjectMapper();
        mapper.readValue(json, TargetClass.class);
    }

}

class TargetClass {
    Kind kind;
    To to;
}

class To {
    String name;
}

enum Kind {
    CONTACT,
    MESSAGE
}