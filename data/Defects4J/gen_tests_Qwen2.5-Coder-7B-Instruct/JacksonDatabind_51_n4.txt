public void testTypeIdResolver() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(MyGenericClass.class, new MyGenericClassSerializer());
    module.addDeserializer(MyGenericClass.class, new MyGenericClassDeserializer());
    module.addKeySerializer(MyGenericType.class, new MyGenericTypeKeySerializer());
    module.addKeyDeserializer(MyGenericType.class, new MyGenericTypeKeyDeserializer());
    mapper.registerModule(module);

    String json = "{\"myField\":\"value\"}";
    MyClass<MyGenericType> result = mapper.readValue(json, MyClass.class);

    assertNotNull(result);
    assertEquals("value", result.getMyField().getValue());
}