public void testArgumentCaptorVarargs() {
    List<String> list = mock(List.class);
    ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);

    list.addAll(new String[]{"a", "b"});

    verify(list).addAll(captor.capture());

    String[] capturedValue = captor.getValue();
    assertEquals(2, capturedValue.length);
    assertEquals("a", capturedValue[0]);
    assertEquals("b", capturedValue[1]);
}