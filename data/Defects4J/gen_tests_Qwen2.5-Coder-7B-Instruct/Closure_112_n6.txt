public <T> void testTemplateInferenceFailure() {
    new Class<T>() {}.foo(new Function<Integer, Integer>() {
        public Integer apply(Integer a) {
            return null;
        }
    });
}