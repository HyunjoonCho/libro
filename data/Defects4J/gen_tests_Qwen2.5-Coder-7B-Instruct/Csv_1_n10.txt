public void testExtendedBufferedReaderEOLHandling() throws IOException {
    String input = "line1\r\nline2\nline3";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    assertEquals("line1", reader.readLine());
    assertEquals(2, reader.getLineNumber()); // Line number should be 2 after reading "line1"

    assertEquals("line2", reader.readLine());
    assertEquals(3, reader.getLineNumber()); // Line number should be 3 after reading "line2"

    assertEquals("line3", reader.readLine());
    assertEquals(4, reader.getLineNumber()); // Line number should be 4 after reading "line3"
}