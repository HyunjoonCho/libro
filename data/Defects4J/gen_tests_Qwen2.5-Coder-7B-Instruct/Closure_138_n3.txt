public void testInvalidDeterministicTestWarning() {
    // Arrange
    String jsCode = "var t = null; window.test = function(){ if (t!= null) { t = null; } t = 1; };";

    // Act & Assert
    try {
        Compiler compiler = new Compiler();
        compiler.initOptions(new Options());
        compiler.compile(SourceFile.fromCode("test.js", jsCode), SourceFile.fromCode("externs.js", ""), null);
        fail("Expected JSC_DETERMINISTIC_TEST warning to be thrown");
    } catch (CompilerException e) {
        assertTrue(e.getMessage().contains("JSC_DETERMINISTIC_TEST"));
    }
}