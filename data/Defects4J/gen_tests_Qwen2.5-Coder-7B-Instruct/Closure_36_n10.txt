public void testGoogAddSingletonGetter() {
    // Arrange
    String input = 
      "goog.provide('foo');\n" +
      "\n" +
      "var foo = function() { this.values = []; };\n" +
      "goog.addSingletonGetter(foo);\n" +
      "\n" +
      "foo.prototype.add = function(value) {this.values.push(value)};";

    // Act
    Compiler compiler = new Compiler();
    compiler.init();
    compiler.setLanguageIn(LanguageMode.ECMASCRIPT5);
    compiler.setLanguageOut(LanguageMode.ECMASCRIPT5);
    compiler.compile(new SourceFile("test", input));

    // Assert
    CodeGenerator generator = new JsCodeGenerator(compiler);
    String result = generator.generateJs();

    assertTrue(result.contains("goog.addSingletonGetter(foo);"));
    assertFalse(result.contains("return $ctor$$.$instance_ || ($ctor$$.$instance_ = new $ctor$$)"));
}