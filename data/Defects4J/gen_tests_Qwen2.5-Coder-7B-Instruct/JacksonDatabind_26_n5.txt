import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.util.CompactStringObjectMap;

public void testSerializeObjectReader() throws Exception {
    CompactStringObjectMap map = new CompactStringObjectMap();
    ObjectMapper mapper = new ObjectMapper();
    
    // This should not throw an exception
    byte[] serialized = mapper.writeValueAsBytes(map);
    CompactStringObjectMap deserialized = mapper.readValue(serialized, CompactStringObjectMap.class);
    
    assertNotSame(map, deserialized); // Ensure it's a new instance
    assertEquals(map.size(), deserialized.size()); // Ensure content is preserved
}