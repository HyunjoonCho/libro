public void testArgumentsScope() {
    Function<?> outerFunction = new Function<Object, Object>() {
        @Override
        public Object apply(Object o) {
            final Object[] args = (Object[]) o;
            return new Function<Void, Void>() {
                @Override
                public Void apply(Void v) {
                    new Thread(new Runnable() {
                        @Override
                        public void run() {
                            System.out.println(Arrays.toString(args));
                        }
                    }).start();
                    return null;
                }
            };
        }
    };

    Function<Void, Void> innerFunction = (Function<Void, Void>) outerFunction.apply(new Object[]{1, 2, 3});
    innerFunction.apply(null);
}