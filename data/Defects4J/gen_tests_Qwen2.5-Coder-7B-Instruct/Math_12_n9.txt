public void testGammaDistributionCloning() throws Exception {
    RandomGenerator random = new MersenneTwister();
    GammaDistribution gamma = new GammaDistribution(random, 2.0, 3.0);

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    oos.writeObject(gamma);
    oos.close();

    ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
    ObjectInputStream ois = new ObjectInputStream(bais);
    GammaDistribution clonedGamma = (GammaDistribution) ois.readObject();
    ois.close();

    double[] sample1 = new double[1000];
    gamma.sample(sample1);
    double[] sample2 = new double[1000];
    clonedGamma.sample(sample2);

    assertArrayEquals(sample1, sample2, 0.1);
}