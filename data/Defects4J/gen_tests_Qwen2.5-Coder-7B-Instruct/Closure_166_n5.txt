import org.junit.Test;
import static org.junit.Assert.*;

public class TestAnonymousObjectTypeInference {

    public interface Record {
        String getProp();
    }

    public interface ExtendedRecord extends Record {
        String getProp2();
    }

    public void func(Record record) {
        System.out.println(record.getProp());
    }

    public void func2(Object record) {
        if (record instanceof String) {
            System.out.println((String) record);
        } else if (record instanceof Record) {
            System.out.println(((Record) record).getProp());
        }
    }

    @Test
    public void testFunc2WithExtendedRecord() {
        ExtendedRecord extendedRecord = new ExtendedRecord() {
            @Override
            public String getProp() {
                return "a";
            }

            @Override
            public String getProp2() {
                return null;
            }
        };

        try {
            func2(extendedRecord);
            fail("Expected IllegalArgumentException");
        } catch (IllegalArgumentException e) {
            // Expected exception
        }
    }
}