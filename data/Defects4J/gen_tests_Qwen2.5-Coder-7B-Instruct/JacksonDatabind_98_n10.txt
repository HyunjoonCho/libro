import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class TestJacksonEnumPolymorphism {

    @Test(expected = IllegalArgumentException.class)
    public void testDeserializeEnumWithExternalProperty() throws Exception {
        String json = "{\n" +
                "  \"kind\": \"CONTACT\",\n" +
                "  \"to\": {\n" +
                "    \"name\": \"Foo\"\n" +
                "  }\n" +
                "}";
        ObjectMapper mapper = new ObjectMapper();
        mapper.readValue(json, MyClass.class);
    }

    private static class MyClass {
        private Kind kind;
        private To to;

        // getters and setters
    }

    private static class To {
        private String name;

        // getters and setters
    }

    private enum Kind {
        CONTACT
    }
}