public void testPrototypeMethodRemoved() {
    Object foo = new Object();
    ((Map<String, Object>)foo).put("bar", new Object() {
        public void bar1() {
            System.out.println("bar1");
        }
    });

    Object foobar = new Object();
    ((Map<String, Object>)foobar).putAll((Map<String, Object>)foo);

    ((Object)((Map<String, Object>)foobar).get("bar")).getClass().getMethod("bar1").invoke(((Map<String, Object>)foobar).get("bar"));

    // This should throw NoSuchMethodException if the prototype method is removed
}