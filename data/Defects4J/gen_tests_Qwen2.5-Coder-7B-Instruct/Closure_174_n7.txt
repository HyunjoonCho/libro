public void testCompilerCrashOnGoogScopeLocals() {
    try {
        String sourceCode = "goog.provide(\"main\");" +
                           "goog.scope(function (){" +
                           "var a = foo, b, c = 1;" +
                           "});";
        // Attempt to compile the source code which should cause a compilation error
        JavaScriptCompiler compiler = new JavaScriptCompiler();
        compiler.compile(SourceFile.fromCode("test.js", sourceCode));
        fail("Compilation did not throw expected exception");
    } catch (JavaScriptException e) {
        // Expected exception
    }
}