public void testInstanceMethodConversion() {
  StringBuilder sb = new StringBuilder();
  JavaScriptCompiler compiler = new JavaScriptCompiler(sb, null);
  String jsCode = "goog.require('goog.graphics.Path');\n" +
                  "function demo() {\n" +
                  "  var path = new goog.graphics.Path();\n" +
                  "  var points = [[1,1], [2,2]];\n" +
                  "  for (var i = 0; i < points.length; i++) {\n" +
                  "    (i == 0? path.moveTo : path.lineTo)(points[i][0], points[i][1]);\n" +
                  "  }\n" +
                  "}\n" +
                  "goog.exportSymbol('demo', demo);";
  CompilerOptions options = new CompilerOptions();
  options.setWarningLevel(DiagnosticGroups.CHECK_INSTANCE_METHODS_AS_FUNCTION_CALLS, CheckLevel.ERROR);
  compiler.compile(SourceFile.fromCode("test.js", jsCode), null, options);
  assertTrue(compiler.hasErrors());
}