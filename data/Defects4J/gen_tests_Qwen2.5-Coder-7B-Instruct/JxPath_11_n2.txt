public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xmlString =
        "<root xmlns:A=\"http://example.com/A\" xmlns:B=\"http://example.com/B\">" +
        "  <ElementA A:myAttr='Mytype'>" +
        "    <B:ElementB>MY VALUE</B:ElementB>" +
        "  </ElementA>" +
        "</root>";
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new InputSource(new StringReader(xmlString)));
    DOMNodePointer pointer = new DOMNodePointer(null, doc.getDocumentElement(), null);
    pointer.registerNamespace("A", "http://example.com/A");
    pointer.registerNamespace("B", "http://example.com/B");
    try {
        pointer.createAttribute("A:anotherAttr", "AnotherValue");
        fail("Expected NamespaceException to be thrown");
    } catch (NamespaceException e) {
        // Expected exception
    }
}