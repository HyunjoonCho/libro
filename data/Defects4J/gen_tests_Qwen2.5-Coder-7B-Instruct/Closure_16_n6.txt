public void testJsCompilerTypedefResolution() throws Exception {
    String source =
        "goog.provide('a.b.c');\n" +
        "\n" +
        "goog.scope(function() {\n" +
        "  var b = a.b;\n" +
        "  var c = b.c;\n" +
        "\n" +
        "  /** @typedef {string} */\n" +
        "  c.MyType;\n" +
        "\n" +
        "  /** @param {c.MyType} x The variable. */\n" +
        "  c.myFunc = function(x) {}\n" +
        "});";
    
    JsErrorReporter reporter = new JsErrorReporter();
    JsCompiler compiler = new JsCompiler(reporter, CompilerOptions.getDefaultOptions());
    compiler.compile(SourceFile.fromCode("test.js", source));
    assertTrue("No errors expected", reporter.getErrorCount() == 0);
}