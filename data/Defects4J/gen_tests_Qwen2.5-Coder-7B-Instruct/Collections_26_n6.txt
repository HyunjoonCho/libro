public void testSubclassingDeserializationProblem() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    MultiKey<String, String> original = new MultiKey<>("key1", "key2");
    oos.writeObject(original);
    oos.close();

    ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
    ObjectInputStream ois = new ObjectInputStream(bais);
    MultiKey<String, String> deserialized = (MultiKey<String, String>) ois.readObject();
    ois.close();

    assertNotSame(original, deserialized);
    assertEquals(original.getKey(0), deserialized.getKey(0));
    assertEquals(original.getKey(1), deserialized.getKey(1));
}