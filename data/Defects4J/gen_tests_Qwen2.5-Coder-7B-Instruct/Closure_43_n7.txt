public void testLendsDoesNotWorkUnlessClassIsDefinedBeforehand() {
    // Define the class beforehand
    String jsCode = 
        "/**\n" +
        "* @constructor\n" +
        "*/\n" +
        "var Person = function() {};\n" +
        "\n" +
        "/**\n" +
        "* @lends {Person.prototype}\n" +
        "*/\n" +
        "Person.prototype.getName = function() {\n" +
        "  return 'John';\n" +
        "};";

    // Try to compile the JavaScript code
    boolean success = true;
    try {
        Compiler compiler = new Compiler();
        compiler.compile(new StringReader(jsCode), null, null);
    } catch (Exception e) {
        success = false;
    }

    // Assert that the compilation was successful
    assertTrue(success);
}