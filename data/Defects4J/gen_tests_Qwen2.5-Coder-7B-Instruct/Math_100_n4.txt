public void testAbstractEstimator() throws Exception {
    Problem problem = mock(Problem.class);
    Parameter[] params = new Parameter[5];
    when(problem.getAllParameters()).thenReturn(params);

    Parameter param1 = mock(Parameter.class);
    Parameter param2 = mock(Parameter.class);
    when(param1.isBound()).thenReturn(true);
    when(param2.isBound()).thenReturn(false);

    when(problem.getParameter(0)).thenReturn(param1);
    when(problem.getParameter(1)).thenReturn(param2);

    AbstractEstimator estimator = new AbstractEstimator();
    try {
        estimator.getCovariances(problem);
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // Expected
    }

    try {
        estimator.guessParametersErrors(problem);
        fail("Expected ArrayIndexOutOfBoundsException");
    } catch (ArrayIndexOutOfBoundsException e) {
        // Expected
    }
}