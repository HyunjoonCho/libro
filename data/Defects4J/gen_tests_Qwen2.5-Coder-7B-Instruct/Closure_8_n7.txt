public void testObfuscationBug() throws Exception {
    String jsCode = 
        "function foo(bar){\n" +
        "  var bar = 42;\n" +
        "}\n";
    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());
    compiler.compile(SourceFile.fromCode("test.js", jsCode), null, null);
    CodeGenerator generator = new CodeGenerator(compiler);
    String result = generator.generateJs();
    assertTrue(result.indexOf("bar") < result.lastIndexOf("bar"));
}