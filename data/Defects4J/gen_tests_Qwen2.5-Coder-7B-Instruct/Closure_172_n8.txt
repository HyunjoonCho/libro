import com.google.javascript.jscomp.Compiler;
import com.google.javascript.rhino.jstype.JSType;

public void testTypeOfPrototypeProperty() {
    Compiler compiler = new Compiler();
    String jsCode =
            "/** @param {Object} a */\n" +
            "function f(a) {\n" +
            "  a.prototype = '__proto';\n" +
            "}\n" +
            "\n" +
            "/** @param {Object} a */\n" +
            "function g(a) {\n" +
            "  a.prototype = function(){};
";
    compiler.compile(jsCode);
    JSType prototypeTypeF = compiler.getTypeRegistry().getTypeForName("f").getPropertyType("prototype");
    JSType prototypeTypeG = compiler.getTypeRegistry().getTypeForName("g").getPropertyType("prototype");
    assertTrue(prototypeTypeF.isStringValueType());
    assertTrue(prototypeTypeGisFunctionType());
}