public void testCompilerFailsToFindAMDModuleInSubdirectory() throws Exception {
    // Arrange
    File rootDir = new File("path/to/root/directory");
    File fooJsFile = new File(rootDir, "lib/Foo.js");
    File barJsFile = new File(rootDir, "Bar.js");

    // Write content to Foo.js and Bar.js
    writeToFile(fooJsFile, "(function() { define('module$lib$Foo', [], function() { return {}; }); })();");
    writeToFile(barJsFile, "(function() { define('Bar', ['module$lib$Foo'], function(Foo) { return {}; }); })();");

    // Act & Assert
    ProcessBuilder processBuilder = new ProcessBuilder(
        "java", "-jar", "compiler.jar",
        "--transform_amd_modules", "--process_common_js_modules",
        "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js",
        "--js=" + barJsFile.getAbsolutePath(),
        "--js=" + fooJsFile.getAbsolutePath()
    );

    Process process = processBuilder.start();
    int exitCode = process.waitFor();

    assertEquals(1,