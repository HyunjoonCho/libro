public void testGoogScopeFunctionDeclaration() {
    try {
        String code = "goog.scope(function() { var x = function(){}});";
        JavaScriptCompiler compiler = new JavaScriptCompiler();
        CompilerOptions options = new CompilerOptions();
        Result result = compiler.compile(code, null, options);
        assertTrue(result.successful());
        
        code = "goog.scope(function() { function x() {} });";
        result = compiler.compile(code, null, options);
        assertTrue(result.successful());
        
        fail("Expected compilation to fail for both snippets.");
    } catch (Exception e) {
        // Expected exception
    }
}