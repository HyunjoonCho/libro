public void testTarArchiveWithLongDirectory() throws IOException {
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "test-long-directory-name");
    tempDir.mkdirs();
    
    try (TarArchiveOutputStream tarOut = new TarArchiveOutputStream(new FileOutputStream(tempDir + "/long-dir.tar"))) {
        String longDirName = StringUtils.repeat('a', 150); // Create a long directory name
        tarOut.putArchiveEntry(new TarArchiveEntry(longDirName));
        tarOut.closeArchiveEntry();
        
        fail("Expected IOException due to long directory name");
    } catch (IOException e) {
        assertTrue(e.getMessage().contains("exceeds size in header"));
    } finally {
        FileUtils.deleteQuietly(tempDir);
    }
}