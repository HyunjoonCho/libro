public void testCollapsePropertiesThrowsException() throws Exception {
    String jsCode = "var x = {y: 1}; goog.exportSymbol('x.y', x.y);";
    Compiler compiler = new Compiler();
    CompilerOptions options = new CompilerOptions();
    options.setCodingConvention(new CodingConventions.JsDoc());
    Result result = compiler.compile(SourceFile.fromCode("test", jsCode), Collections.<SourceFile>emptyList(), options);
    assertTrue(result.successful);
    assertEquals(0, compiler.getErrorCount());
    assertEquals(0, compiler.getWarningCount());
}