public void testTypeAliases() throws Exception {
    String source =
      "package com.example;\n" +
      "\n" +
      "import com.google.common.annotations.GwtCompatible;\n" +
      "\n" +
      "@GwtCompatible\n" +
      "public class MyClass {\n" +
      "  public static class Bar {}\n" +
      "\n" +
      "  public static class Foo {\n" +
      "    private Bar bar;\n" +
      "  }\n" +
      "}\n";
    JavaFileObject file = JavaFileObjects.forSourceString("com.example.MyClass", source);
    CompilationTask task = ToolProvider.getSystemJavaCompiler().getTask(null, null, null, null, null, Arrays.asList(file));
    assertFalse(task.call());
}