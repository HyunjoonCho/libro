public void testArgumentCaptorVarargs() {
    List<String> list = mock(List.class);

    String arg1 = "arg1";
    String arg2 = "arg2";
    list.add(arg1, arg2);

    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    verify(list).add(captor.capture(), captor.capture());

    assertEquals(asList(arg1, arg2), captor.getAllValues());
}