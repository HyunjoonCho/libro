public void testOptionBuilderResetOnException() {
    try {
        OptionBuilder.withLongOpt("foo")
                    .create('a')
                    .withArgName("bar")
                    .isRequired();
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }
    // Verify that OptionBuilder is reset
    assertNull(OptionBuilder.getLongOpt());
    assertEquals(' ', OptionBuilder.isRequired());
    assertNull(OptionBuilder.hasArgName());
}