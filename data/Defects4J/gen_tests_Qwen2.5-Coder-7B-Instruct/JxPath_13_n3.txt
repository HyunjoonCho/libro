public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<ElementA xmlns:A=\"http://example.com/A\" xmlns:B=\"http://example.com/B\">" +
                 "  <A:ElementA A:myAttr=\"Mytype\">" + 
                 "    <B:ElementB>MY VALUE</B:ElementB>" + 
                 "  </A:ElementA>" + 
                 "</ElementA>";
    
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse(new InputSource(new StringReader(xml)));
    
    DOMNodePointer pointer = new DOMNodePointer(null, doc.getDocumentElement(), null);
    try {
        pointer.createAttribute("A", "myAttr", "Mytype");
        fail("Expected NamespaceException");
    } catch (NamespaceException e) {
        // expected
    }
}