public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xmlString = "<root xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'><elementA A:myAttr=\"Mytype\"><B:ElementB>MY VALUE</B:ElementB></elementA></root>";
    Document document = DOMUtils.readDocument(new ByteArrayInputStream(xmlString.getBytes()));
    NamespaceContext context = new SimpleNamespaceContext();
    context.setPrefix("A", "http://example.com/A");
    context.setPrefix("B", "http://example.com/B");
    XPath xpath = XPathFactory.newInstance().newXPath();
    xpath.setNamespaceContext(context);
    NodeList nodeList = (NodeList) xpath.evaluate("//elementA/@A:myAttr", document, XPathConstants.NODESET);
    assertEquals(1, nodeList.getLength());
    assertEquals("Mytype", nodeList.item(0).getNodeValue());
}