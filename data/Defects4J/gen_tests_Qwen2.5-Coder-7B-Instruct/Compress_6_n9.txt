public void testZipCreationWithManyEntries() throws IOException {
    File tempFile = File.createTempFile("test", ".zip");
    try (ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(tempFile))) {
        for (int i = 0; i < 1000; i++) {
            String fileName = "file" + i % 10 + ".txt";
            ZipEntry entry = new ZipEntry(fileName);
            zos.putNextEntry(entry);
            zos.write(("content" + i).getBytes());
            zos.closeEntry();
        }
    }

    try (ZipInputStream zis = new ZipInputStream(new FileInputStream(tempFile))) {
        for (int i = 0; i < 1000; i++) {
            ZipEntry entry = zis.getNextEntry();
            assertNotNull(entry);
            assertEquals("file" + i % 10 + ".txt", entry.getName());
            byte[] buffer = new byte[1024];
            int len;
            while ((len = zis.read(buffer)) > 0) {
                // consume content
            }
            zis.closeEntry();
        }
    }
}