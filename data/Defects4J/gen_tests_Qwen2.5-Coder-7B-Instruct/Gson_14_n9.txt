public void testGsonTypesResolve() {
    TypeToken<Foo1<?>> token = new TypeToken<Foo1<?>>() {};
    Type resolvedType = Types.resolve(token.getType(), null, Collections.emptyMap());
    assertTrue(resolvedType instanceof ParameterizedType);
    ParameterizedType parameterizedType = (ParameterizedType) resolvedType;
    assertEquals(Foo1.class, parameterizedType.getRawType());

    Type argType = parameterizedType.getActualTypeArguments()[0];
    assertTrue(argType instanceof WildcardType);
    WildcardType wildcardType = (WildcardType) argType;

    Type[] upperBounds = wildcardType.getUpperBounds();
    assertEquals(1, upperBounds.length);
    assertTrue(upperBounds[0] instanceof ParameterizedType);
    ParameterizedType upperBound = (ParameterizedType) upperBounds[0];

    assertEquals(Foo2.class, upperBound.getRawType());
    Type[] upperArgType = upperBound.getActualTypeArguments();
    assertEquals(1, upperArgType.length);
    assertTrue(upperArgType[0] instanceof WildcardType);

    WildcardType upperWildcardType = (WildcardType) upperArgType[0];
    Type[] upperUpperBounds = upperWildcardType.getUpperBounds();