public void testTypeHierarchyAdapter() throws Exception {
    String jsonForTruck = "{\"type\":\"truck\", \"make\":\"Ford\"}";
    TypeReference<Car> carRef = new TypeReference<Car>() {};
    try {
        ObjectMapper mapper = new ObjectMapper();
        Car car = mapper.readValue(jsonForTruck, carRef);
        fail("Expected an exception because the JSON is for a Truck.");
    } catch (JsonMappingException e) {
        // Expected exception
    }
}