public void testHelpFormatterWrapping() {
    HelpFormatter formatter = new HelpFormatter();
    String expected =
        "usage: <mainclass>\n" +
        " \n" +
        "optional arguments:\n" +
        "  -h, --help            show this help message and exit\n" +
        "  -v, --version         show program's version number and exit\n" +
        "  -o FILENAME, --output=FILENAME\n" +
        "                        write output to FILENAME";
    String actual = formatter.printHelpString("MainClass", null,
                                              Option.builder("h").longOpt("help")
                                                    .desc("show this help message and exit")
                                                    .build(),
                                              Option.builder("v").longOpt("version")
                                                    .desc("show program's version number and exit")
                                                    .build(),
                                              Option.builder("o").longOpt("output")
                                                    .argName("FILENAME")
                                                    .desc("write output to FILENAME")
                                                    .hasArg()
                                                    .build());
    assertEquals(expected, actual);
}