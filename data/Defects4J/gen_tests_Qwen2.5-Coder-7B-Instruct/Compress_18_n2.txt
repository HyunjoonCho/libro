public void testTarArchiveWithLongDirectoryName() throws IOException {
    File tempDir = new File(System.getProperty("java.io.tmpdir"), "long_directory_name_" + System.currentTimeMillis());
    tempDir.mkdirs();
    
    try (TarArchiveOutputStream taos = new TarArchiveOutputStream(new FileOutputStream(tempDir.getAbsolutePath()))) {
        TarArchiveEntry entry = new TarArchiveEntry(tempDir.getName(), tempDir.getName());
        taos.putArchiveEntry(entry);
        // This line should cause the issue
        taos.write("test".getBytes());
        taos.closeArchiveEntry();
    } finally {
        FileUtils.deleteQuietly(tempDir);
    }
}