public void testPreconditionCrash() {
  String jsCode =
      "var goog = {};"
      + "goog.scope;"
      + ""
      + "var ns = {};"
      + "ns.sub = {};"
      + "/** @constructor */"
      + "ns.sub.C = function() {};"
      + ""
      + "goog.scope(function() {"
      + "  var sub = ns.sub;"
      + "/** @type {sub.C} */"
      + "  var x = null;"
      + "});";

  Compiler compiler = new Compiler();
  compiler.compile(new JSDocInfoParser(), new ErrorManager(), jsCode);
}