public void testCompilerCrash() throws Exception {
    URL url = new URL("https://raw.github.com/scottschiller/SoundManager2/master/script/soundmanager2-nodebug.js");
    InputStream input = url.openStream();
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    int nRead;
    byte[] data = new byte[16384];
    while ((nRead = input.read(data, 0, data.length))!= -1) {
      buffer.write(data, 0, nRead);
    }
    buffer.flush();

    String jsCode = buffer.toString("UTF-8");

    Compiler compiler = new Compiler();
    compiler.initOptions(new Options());

    List<SourceFile> externs = Lists.newArrayList(SourceFile.fromCode("externs.js", ""));
    List<SourceFile> inputs = Lists.newArrayList(SourceFile.fromCode("soundmanager2-nodebug.js", jsCode));

    Result result = compiler.compile(externs, inputs, null);

    assertFalse(result.success);
    assertTrue(compiler.hasErrors());
}