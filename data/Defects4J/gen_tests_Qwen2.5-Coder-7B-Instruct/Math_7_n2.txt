public void testEventStateNotUpdated() {
    // Arrange
    ODESolver solver = new ODESolver();
    EventManager manager = new EventManager();
    
    Event event1 = new Event() {
        @Override
        public boolean eventOccurred(double t, double[] y) {
            return false;
        }
        
        @Override
        public Action getAction() {
            return Action.RESET_STATE;
        }
    };
    
    Event event2 = new Event() {
        @Override
        public boolean eventOccurred(double t, double[] y) {
            return true;
        }
        
        @Override
        public Action getAction() {
            return Action.CONTINUE;
        }
    };
    
    manager.addEvent(event1);
    manager.addEvent(event2);
    solver.setEventManager(manager);
    
    // Act
    solver.integrate(new double[]{0.5}, new double[]{1.0});
    
    // Assert
    assertFalse(event1.eventOccurred(0.5, new double[]{1.0}));
    assertTrue(event2.eventOccurred(0.5, new double[]{1.0}));
}