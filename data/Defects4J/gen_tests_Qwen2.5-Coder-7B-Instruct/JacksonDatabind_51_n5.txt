public void testTypeIdResolver() throws JsonProcessingException {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(new CustomSerializer());
    module.addDeserializer(CustomClass.class, new CustomDeserializer());
    module.setTypeIdResolver(new CustomTypeIdResolver());
    mapper.registerModule(module);

    String json = "{\"type\":\"com.example.CustomClass\",\"value\":42}";
    CustomClass obj = mapper.readValue(json, CustomClass.class);
    assertNotNull(obj);
    assertEquals(42, obj.getValue());
}