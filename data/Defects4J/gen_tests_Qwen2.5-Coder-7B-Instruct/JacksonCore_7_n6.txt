public void testJsonGeneratorWriteStringFailure() throws Exception {
    StringWriter sw = new StringWriter();
    JsonGenerator gen = JsonFactory.instance.createGenerator(sw);
    gen.writeStartObject();
    gen.writeFieldName("field");
    try {
        gen.writeString("value");
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // Expected
    }
    gen.close();
}