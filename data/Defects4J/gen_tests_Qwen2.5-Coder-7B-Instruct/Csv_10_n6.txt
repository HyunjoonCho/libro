public void testCSVFormatWithHeader() throws IOException {
    Path path = Files.createTempFile("test", ".csv");
    try (CSVPrinter csvPrinter = new CSVPrinter(Files.newBufferedWriter(path),
            CSVFormat.TDF.withHeader("x"))) {
        csvPrinter.printRecord(42);
    }
    String content = new String(Files.readAllBytes(path));
    assertEquals("x\n42\n", content);
}