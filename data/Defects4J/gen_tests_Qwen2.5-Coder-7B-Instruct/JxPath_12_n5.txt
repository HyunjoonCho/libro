public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<root xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>" +
                 "  <ElementA A:myAttr='Mytype'>" +
                 "    <B:ElementB>MY VALUE</B:ElementB>" +
                 "  </ElementA>" +
                 "</root>";
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new InputSource(new StringReader(xml)));
    doc.getDocumentElement().normalize();

    NamespaceContext context = new SimpleNamespaceContext();
    context.addNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance");
    context.addNamespace("A", "/http...");
    context.addNamespace("B", "/http...");

    XPath xpath = XPathFactory.newInstance().newXPath();
    xpath.setNamespaceContext(context);

    String attrValue = (String) xpath.evaluate("//ElementA/@A:myAttr", doc, XPathConstants.STRING);
    assertEquals("Mytype", attrValue);
}