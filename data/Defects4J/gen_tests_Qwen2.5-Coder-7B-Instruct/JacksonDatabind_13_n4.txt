public void testAllowNullObjectId() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"id\":null}";
    MyObject obj = mapper.readValue(json, MyObject.class);
    assertNull(obj.getId());

    try {
        mapper.configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, true);
        mapper.readValue("{\"id\":null}", MyObjectWithPrimitiveId.class);
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // expected
    }
}

class MyObject {
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }
}

class MyObjectWithPrimitiveId {
    private long id;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }
}