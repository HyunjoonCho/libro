import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

public class JsoupPerformanceTest {

    @Test
    public void testQuadraticBehaviorOnDeeplyNestedPages() throws Exception {
        StringBuilder html = new StringBuilder();
        int depth = 1000; // Adjust this value to increase/decrease the depth of the nested structure

        // Create a deeply nested HTML structure
        for (int i = 0; i < depth; i++) {
            html.append("<div>");
        }
        html.append("Content");
        for (int i = 0; i < depth; i++) {
            html.append("</div>");
        }

        // Measure the performance of Jsoup's parsing process
        long startTime = System.currentTimeMillis();
        Document doc = Jsoup.parse(html.toString());
        long endTime = System.currentTimeMillis();

        // Assert that the parsing process completed within a reasonable amount of time
        long duration = endTime - startTime;
        assertTrue(duration < 5