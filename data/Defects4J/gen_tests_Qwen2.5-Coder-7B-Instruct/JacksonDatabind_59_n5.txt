public void testBug() throws JsonParseException, JsonMappingException, IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(DefaultTyping.NON_FINAL);

    String input = "{\"mapProperty\": [\"java.util.HashMap\", {\"key1|value1\": \"value2\"}]}";
    TestClass instance = mapper.readValue(input, TestClass.class);

    assertEquals(1, instance.mapProperty.size());
    assertTrue(instance.mapProperty.containsKey(new CompoundKey("key1", "value1")));
    assertEquals("value2", instance.mapProperty.get(new CompoundKey("key1", "value1")));
}