public void testNextTextValueForAttributes() throws Exception {
    String xml = "<root><element attr=\"value\">text</element></root>";
    XMLInputFactory f = XMLInputFactory.newInstance();
    XMLStreamReader parser = f.createXMLStreamReader(new StringReader(xml));
    assertTrue(parser.hasNext());
    parser.next(); // START_ELEMENT: root
    parser.next(); // START_ELEMENT: element
    assertEquals("value", parser.getAttributeValue(null, "attr"));
    assertEquals("text", parser.getElementText()); // This should return "text" instead of null
    assertFalse(parser.hasNext());
}