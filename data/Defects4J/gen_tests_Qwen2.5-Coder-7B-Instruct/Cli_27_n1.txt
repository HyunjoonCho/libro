public void testOptionGroupSelection() {
    OptionGroup group = new OptionGroup();
    Option option = new Option(null, "long-option", false, "");
    group.addOption(option);

    CommandLine cmdLine = new DefaultParser().parse(new Options().addOptionGroup(group), new String[]{"--long-option"});

    assertTrue(cmdLine.hasOption("long-option"));
    assertEquals("long-option", group.getSelected().getOpt());
}