public void testExtendedBufferedReaderEOLHandling() throws IOException {
    String input = "line1\r\nline2\nline3";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    String line;
    int lineNumber = 0;
    while ((line = reader.readLine())!= null) {
        lineNumber++;
        assertTrue(line.equals("line" + lineNumber));
    }
    
    assertEquals(3, lineNumber);
    
    reader.close();
}