public void testArgumentCaptorVarargs() {
    MyService service = mock(MyService.class);

    service.doSomething("a", "b", "c");

    ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);
    verify(service).doSomething(captor.capture());

    String[] args = captor.getValue();
    assertEquals(3, args.length);
    assertEquals("a", args[0]);
    assertEquals("b", args[1]);
    assertEquals("c", args[2]);
}