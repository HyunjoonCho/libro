public void testNullWithRootName() throws Exception {
    SimpleModule module = new SimpleModule();
    module.addSerializer(String.class, new JsonSerializer<String>() {
        @Override
        public void serialize(String value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            gen.writeStartObject();
            gen.writeStringField("test", value);
            gen.writeEndObject();
        }
    });
    
    ObjectMapper mapper = new XmlMapper().registerModule(module)
       .setSerializationInclusion(JsonInclude.Include.NON_NULL)
       .setAnnotationIntrospector(new JacksonAnnotationIntrospector());

    String xml = mapper.writeValueAsString(null);

    assertEquals("<test></test>", xml);
}