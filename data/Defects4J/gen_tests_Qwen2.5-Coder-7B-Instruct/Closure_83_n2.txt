public void testCannotSeeVersionWithVersionFlag() throws Exception {
    Process process = Runtime.getRuntime().exec(new String[] {"java", "-jar", "compiler.jar", "--version"});
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getErrorStream()));
    String line;
    boolean sawVersionError = false;
    while ((line = reader.readLine())!= null) {
        if ("Опция \"--version\" требует операнд".equals(line)) {
            sawVersionError = true;
        }
    }
    assertTrue("Expected to see version error message", sawVersionError);
    int exitCode = process.waitFor();
    assertEquals("Process exited with non-zero status", 0, exitCode);
}