public void testDuplicateHeaderEntriesInConstructor() {
    try {
        new CSVFormat(null, (String[]) null, ',', '"', '\\', '\n', true, false, 
                QuoteMode.MINIMAL, TrailingMode.REMOVE, CSVFormat.DEFAULT_ESCAPE_CHARACTER, CSVFormat.DEFAULT_NULL_STRING, 
                Collections.singletonMap("HEADER", "VALUE"), new String[]{"duplicate", "duplicate"});
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }
}