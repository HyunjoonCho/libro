public void testRelaxOwnershipChecks() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    IOContext context = IOContext.builder().build();
    ByteBuffer buffer = ByteBuffer.allocate(1024);
    ByteBuffer newBuffer = ByteBuffer.allocate(1024);

    // Mock the buffer supplier to return a different buffer
    context.setBufferSize(1024);
    context.setBuffer(buffer);
    ByteBuffer result = context.newByteBuffer(newBuffer.capacity());

    assertNotSame(buffer, result);
    assertEquals(newBuffer.capacity(), result.capacity());
}