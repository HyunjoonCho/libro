public void testExtendedBufferedReader() throws IOException {
    String input = "line1\r\nline2\rline3";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    assertEquals("line1", reader.readLine());
    assertEquals("line2", reader.readLine());
    assertEquals("line3", reader.readLine());
    assertNull(reader.readLine());
    
    assertEquals(3, reader.getLineNumber());
}