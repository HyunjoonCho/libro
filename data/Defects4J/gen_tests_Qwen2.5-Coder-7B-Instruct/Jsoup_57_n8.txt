public void testRemoveIgnoreCaseConcurrentModification() {
    Attributes attributes = new Attributes();
    attributes.add("key1", new Attribute("value1"));
    attributes.add("KEY2", new Attribute("value2"));

    Element element = new Element("div");
    element.attributes(attributes);

    element.select("div").first().removeAttr("key1");

    assertEquals(1, element.attributes().size());
    assertFalse(element.attributes().containsKey("key1"));
    assertTrue(element.attributes().containsKey("KEY2"));
}