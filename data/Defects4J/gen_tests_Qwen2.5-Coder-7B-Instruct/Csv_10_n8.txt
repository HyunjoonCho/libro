import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.nio.file.Files;
import java.nio.file.Paths;

public void testCSVFormatWithHeader() throws Exception {
    BufferedWriter writer = Files.newBufferedWriter(Paths.get("data.csv"));
    CSVPrinter csvPrinter = new CSVPrinter(writer, CSVFormat.TDF.withHeader("x"));
    csvPrinter.printRecord(42);
    csvPrinter.close();
    
    String content = new String(Files.readAllBytes(Paths.get("data.csv")));
    assertEquals("x\n42\n", content);
}