public void testOptionBuilderNotResetOnException() {
    try {
        OptionBuilder.withLongOpt("target")
                    .withArgName("opt")
                    .hasOptionalArg()
                    .create('t');
    } catch (IllegalArgumentException e) {
        // Expected exception
    }
    try {
        OptionBuilder.withLongOpt("another")
                    .withRequiredArg()
                    .create('a');
    } catch (IllegalArgumentException e) {
        fail("Second call to OptionBuilder.create() failed unexpectedly.");
    }
}