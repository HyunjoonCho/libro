public void testTypeHierarchyAdapter() throws Exception {
    String jsonTruck = "{\"type\":\"truck\",\"make\":\"Ford\"}";
    TypeReference<Vehicle> typeRef = new TypeReference<Car>() {};
    try {
        ObjectMapper mapper = new ObjectMapper();
        Car car = mapper.readValue(jsonTruck, typeRef);
        fail("Expected exception not thrown");
    } catch (JsonMappingException e) {
        assertTrue(e.getMessage().contains("Cannot deserialize instance of `com.example.Car` out of START_OBJECT token"));
    }
}