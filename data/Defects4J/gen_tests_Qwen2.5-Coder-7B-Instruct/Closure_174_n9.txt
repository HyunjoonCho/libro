public void testCompilerCrashOnGoogScopeLocals() {
    try {
        // This should throw an exception without crashing the compiler
        String sourceCode = "goog.provide(\"main\");\n" +
                            "goog.scope(function () {\n" +
                            "  var a = foo, b, c = 1;\n" +
                            "});";
        JsCompiler.compile(sourceCode);
        fail("Expected an exception to be thrown");
    } catch (Exception e) {
        // Check that the exception message contains the expected error
        assertTrue(e.getMessage().contains("Variable 'foo' is referenced before being assigned"));
    }
}