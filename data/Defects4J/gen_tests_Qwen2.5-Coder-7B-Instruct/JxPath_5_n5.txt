public void testCannotComparePointersFromDifferentTrees() throws Exception {
    JXPathContext context = new JXPathContext(new HashMap<String, Object>() {{
        put("var", Collections.singletonList("/OTHER/B"));
    }});
    try {
        List result = (List) context.getValue("$var | /MAIN/A");
        fail("Expected JXPathException to be thrown");
    } catch (JXPathException e) {
        assertTrue(e.getMessage().contains("Cannot compare pointers that do not belong to the same tree"));
    }
}