public void testUnwantedPOJOsInTree() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    X<String> x = new X<>();
    x.s = "test";
    List<String> items = Arrays.asList("item1", "item2");
    x.items = items;

    JsonNode tree = mapper.valueToTree(x);

    assertTrue(tree.has("s"));
    assertTrue(tree.has("items"));

    JsonNode itemsNode = tree.get("items");
    assertFalse(itemsNode.isValueNode());

    byte[] json = mapper.writeValueAsBytes(x);
    JsonNode fullTree = mapper.readTree(json);

    assertTrue(fullTree.has("s"));
    assertTrue(fullTree.has("items"));

    JsonNode fullItemsNode = fullTree.get("items");
    assertTrue(fullItemsNode.isArray());
    assertEquals(2, fullItemsNode.size());
}