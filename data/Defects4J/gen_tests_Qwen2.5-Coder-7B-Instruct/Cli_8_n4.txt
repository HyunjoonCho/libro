public void testHelpFormatterWrapping() throws Exception {
    Options options = new Options();
    Option opt = Option.builder("o")
                       .longOpt("option")
                       .desc("this is a very long description that should cause wrapping issues if the findWrapPos method is not working correctly")
                       .build();
    options.addOption(opt);

    HelpFormatter formatter = new HelpFormatter();
    StringWriter writer = new StringWriter();
    formatter.printOptions(writer, 80, options, 2, 2);

    String output = writer.toString();
    System.out.println(output);

    // Check that each line after the first is indented by less than 80 characters
    String[] lines = output.split("\n");
    for (int i = 1; i < lines.length; i++) {
        assertTrue(lines[i].length() <= 80);
    }
}