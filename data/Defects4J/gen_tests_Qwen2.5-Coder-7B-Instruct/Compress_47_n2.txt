public void testGetNextZipEntryThrowsExceptionWhenCompressedSizeIsUnknown() throws IOException {
    ZipArchiveEntry entry = mock(ZipArchiveEntry.class);
    when(entry.getCompressedSize()).thenReturn(ArchiveEntry.SIZE_UNKNOWN);
    when(entry.getMethod()).thenReturn(ZipMethod.BZIP2.getCode());

    try (ZipArchiveInputStream zis = new ZipArchiveInputStream(new ByteArrayInputStream(new byte[0]))) {
        zis.setNextEntry(entry);
        fail("Expected exception not thrown");
    } catch (IOException e) {
        assertTrue(e.getMessage().contains("compressed size is unknown"));
    }
}