public void testTarArchiveInputStreamSilentlyFinished() throws IOException {
    InputStream inputStream = getClass().getResourceAsStream("/corrupted-tar.tar.bz2");
    TarArchiveInputStream tarInputStream = new TarArchiveInputStream(inputStream);

    try {
        while (tarInputStream.getNextEntry()!= null) {
            // Simulate reading some data
            tarInputStream.read(new byte[1024]);
        }
    } catch (IOException e) {
        fail("Expected IOException to be thrown");
    }

    assertFalse(tarInputStream.isClosed());
}