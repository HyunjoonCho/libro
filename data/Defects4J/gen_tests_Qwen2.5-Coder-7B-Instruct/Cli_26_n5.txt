public void testOptionBuilderResetOnException() {
    try {
        OptionBuilder.withLongOpt("longopt")
                    .withDescription("some description")
                    .create('a');
    } catch (IllegalArgumentException e) {
        // expected exception
    }
    
    try {
        OptionBuilder.withLongOpt("anotherLongopt")
                    .withDescription("another description")
                    .create('b');
        fail("Expected IllegalArgumentException was not thrown");
    } catch (IllegalArgumentException e) {
        // expected exception
    }
}