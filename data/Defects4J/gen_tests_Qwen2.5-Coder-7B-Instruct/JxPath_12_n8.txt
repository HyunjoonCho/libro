public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<root xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" " +
                 "xmlns:A=\"http://example.com/A\" xmlns:B=\"http://example.com/B\">" +
                 "<ElementA A:myAttr=\"Mytype\">" +
                 "<B:ElementB>MY VALUE</B:ElementB>" +
                 "</ElementA></root>";
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.parse(new InputSource(new StringReader(xml)));

    DOMModel model = new DOMModel(document);
    NamespaceContext ctx = model.getNamespaceContext();

    ctx.registerNamespace("A", "http://example.com/A");
    ctx.registerNamespace("B", "http://example.com/B");

    NodePointer nodePointer = new DOMNodePointer(null, document.getDocumentElement(), ctx);
    assertNotNull(nodePointer.getAttributeValue("/A:ElementA/@A:myAttr"));
    assertEquals("Mytype", nodePointer.getAttributeValue("/A:ElementA/@A:myAttr"));
}