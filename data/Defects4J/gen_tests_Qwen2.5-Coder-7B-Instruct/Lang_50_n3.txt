public void testFastDateFormatLocaleChange() {
    Locale originalLocale = Locale.getDefault();
    try {
        Locale.setDefault(Locale.US);

        FastDateFormat sdfDate = FastDateFormat.getDateInstance(FastDateFormat.LONG);
        FastDateFormat sdfDateTime = FastDateFormat.getDateTimeInstance(FastDateFormat.MEDIUM, FastDateFormat.SHORT);

        Locale.setDefault(Locale.FRANCE);
        Date now = new Date();

        String usFormattedDate = sdfDate.format(now);
        String frFormattedDate = sdfDate.format(now);
        String usFormattedDateTime = sdfDateTime.format(now);
        String frFormattedDateTime = sdfDateTime.format(now);

        assertNotEquals(usFormattedDate, frFormattedDate);
        assertNotEquals(usFormattedDateTime, frFormattedDateTime);
    } finally {
        Locale.setDefault(originalLocale);
    }
}