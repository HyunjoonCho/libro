public void testTartest() throws IOException {
    try (FileOutputStream fos = new FileOutputStream("C:/temp/tartest.tar");
         ArchiveOutputStream aos = new ArchiveStreamFactory().createArchiveOutputStream(ArchiveStreamFactory.TAR, fos)) {

        File source = new File("C:/share/od_l.txt");
        TarArchiveEntry entry = new TarArchiveEntry(source);
        aos.putArchiveEntry(entry);

        try (FileInputStream fis = new FileInputStream(source)) {
            byte[] buffer = new byte[8192];
            int bytesRead;
            while ((bytesRead = fis.read(buffer))!= -1) {
                aos.write(buffer, 0, bytesRead);
            }
        }

        long bytesWrittenBeforeClose = aos.getBytesWritten();
        aos.closeArchiveEntry();
        aos.close();

        long bytesWrittenAfterClose = aos.getBytesWritten();

        System.out.println("Bytes Written Before Close: " + bytesWrittenBeforeClose);
        System.out.println("Bytes Written After Close: " + bytesWrittenAfterClose);

        assertEquals(source.length(), bytesWrittenBeforeClose);
        assertEquals(source.length(), bytesWrittenAfterClose);
    }
}