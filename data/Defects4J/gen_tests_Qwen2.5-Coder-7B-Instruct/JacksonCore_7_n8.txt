public void testJsonGeneratorWriteStringFailure() throws Exception {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    JsonFactory f = new JsonFactory();
    JsonGenerator g = f.createGenerator(out, JsonEncoding.UTF8);
    try {
        g.writeFieldName("field");
        g.writeString("value");
        fail("Expected IOException");
    } catch (IOException e) {
        // Expected
    }
    g.close();
}