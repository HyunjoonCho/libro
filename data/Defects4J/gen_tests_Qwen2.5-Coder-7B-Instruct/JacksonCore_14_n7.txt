public void testBufferOwnershipCheck() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    IOContext context = new IOContext(null, null, true, false);
    byte[] originalBuffer = new byte[1024];
    ByteBuffer buffer = ByteBuffer.wrap(originalBuffer);

    // Simulate a scenario where the buffer is replaced with a different one
    ByteBuffer newBuffer = ByteBuffer.allocateDirect(1024);
    context.updateReadPointer(newBuffer.position());
    context.updateWritePointer(newBuffer.position());

    // Perform operations that might trigger buffer resizing logic
    // For example, writing data to the buffer
    baos.write('a');
    baos.write('b');

    // Verify that the buffer was updated correctly without throwing an exception
    assertTrue(context.hasRoomForInput(1));
}