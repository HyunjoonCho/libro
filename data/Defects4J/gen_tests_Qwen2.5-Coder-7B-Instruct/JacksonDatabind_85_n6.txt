public void testDateTimeSerializerBaseCreateContextual() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
    SimpleModule module = new SimpleModule();
    module.addSerializer(Date.class, new JsonSerializer<Date>() {
        @Override
        public void serialize(Date value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            gen.writeString(dateFormat.format(value));
        }
    });
    mapper.registerModule(module);

    Date now = new Date();
    String json = mapper.writeValueAsString(now);
    assertTrue(json.contains(dateFormat.format(now)));
}