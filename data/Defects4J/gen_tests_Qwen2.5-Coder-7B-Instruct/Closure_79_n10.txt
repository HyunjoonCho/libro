public void testExternPrototypeError() throws Exception {
    String jsCode = "function Str(key, holder, stack) { }";
    File externFile = new File("prototype.js");
    Files.write(externFile.toPath(), jsCode.getBytes());

    List<String> args = Arrays.asList(
        "--compilation_level", "ADVANCED_OPTIMIZATIONS",
        "--externs", externFile.getAbsolutePath(),
        "--js", "bootloader.js"
    );

    try {
        Compiler compiler = new Compiler();
        compiler.initArgs(args.toArray(new String[0]));
        compiler.parseInputs();
        compiler.checkTypes();
        fail("Expected RuntimeException to be thrown");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
    }
}