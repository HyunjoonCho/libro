public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xmlString = "<root xmlns:A='http://example.com/A' xmlns:B='http://example.com/B'>" +
                       "  <ElementA A:myAttr='Mytype'>" +
                       "    <B:ElementB>MY VALUE</B:ElementB>" +
                       "  </ElementA>" +
                       "</root>";
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document document = builder.parse(new InputSource(new StringReader(xmlString)));
    
    DOMNodePointer nodePointer = new DOMNodePointer(null, document.getDocumentElement(), null);
    nodePointer.registerNamespace("A", "http://example.com/A");
    nodePointer.registerNamespace("B", "http://example.com/B");

    try {
        nodePointer.createAttribute("A:myAttr", "SomeValue");
        fail("Expected NamespaceException to be thrown");
    } catch (NamespaceException e) {
        // Expected exception
    }
}