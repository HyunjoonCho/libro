public void testCaretInErrorOutput() throws Exception {
    String input = "alert(1;";
    Process process = Runtime.getRuntime().exec("java -jar compiler.jar --js test.js");
    PrintWriter writer = new PrintWriter(process.getOutputStream(), true);
    writer.println(input);
    writer.close();
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String line;
    while ((line = reader.readLine())!= null) {
        assertTrue(line.contains("^"));
    }
    int exitCode = process.waitFor();
    assertEquals(1, exitCode);
}