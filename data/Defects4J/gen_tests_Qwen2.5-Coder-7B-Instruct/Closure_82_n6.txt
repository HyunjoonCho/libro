public void testIndexOfWarning() {
    try {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");
        engine.put("missingProperties", "true");
        engine.eval("var s = new String(\"hello\"); alert(s.toLowerCase.indexOf(\"l\"));");
        fail("Expected MissingPropertyException");
    } catch (ScriptException e) {
        assertTrue(e.getMessage().contains("Cannot find property 'toLowerCase'"));
    }
}