public void testIncompleteHandlingOfUndefinedNamespaces() throws Exception {
    String xml = "<ElementA xmlns:A='http://example.com/A' A:myAttr='Mytype'>" +
                 "  <B:ElementB xmlns:B='http://example.com/B'>MY VALUE</B:ElementB>" +
                 "</ElementA>";
    Document document = DOMUtil.readDocument(new StringReader(xml));
    DOMNodePointer pointer = new DOMNodePointer(null, document.getDocumentElement(), null);
    try {
        pointer.createAttribute("C:anotherAttr", "someValue", "http://example.com/C");
        fail("Expected NamespaceException to be thrown");
    } catch (NamespaceException e) {
        // Expected exception
    }
}