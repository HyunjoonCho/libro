public void testArgumentCaptorNoLongerWorkingForVarargs() {
    List<String> list = mock(List.class);

    String arg1 = "foo";
    String arg2 = "bar";

    list.add(arg1, arg2);

    ArgumentCaptor<String> captor = ArgumentCaptor.forClass(String.class);
    verify(list).add(captor.capture(), eq(arg2));

    assertEquals(arg1, captor.getValue());
}