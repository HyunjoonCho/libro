import org.junit.Test;
import static org.junit.Assert.*;

public class TestAnonymousObjectTypeInference {

    public interface Record {
        String getProp();
        Object getProp2();
    }

    public interface StringOrRecord {
        boolean isString();
        String getStringValue();
        String getProp();
        Object getProp2();
    }

    public void func(Record record) {
        System.out.println(record.getProp());
    }

    public void func2(StringOrRecord record) {
        if (record.isString()) {
            System.out.println(record.getStringValue());
        } else {
            System.out.println(record.getProp());
        }
    }

    @Test(expected = AssertionError.class)
    public void testFunc2WithNonStringArgument() {
        func2(new Record() {
            @Override
            public String getProp() {
                return "a";
            }

            @Override
            public Object getProp2() {
                return null;
            }
        });
    }
}