import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;
import org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream;

import java.io.ByteArrayOutputStream;

public void testZipVersionNeededToExtract() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try (ZipArchiveOutputStream zos = new ZipArchiveOutputStream(baos)) {
        ZipArchiveEntry entry = new ZipArchiveEntry("test.txt");
        zos.putArchiveEntry(entry);
        zos.closeArchiveEntry();
    }
    byte[] bytes = baos.toByteArray();

    // Check the version needed to extract in the local file header
    int localHeaderVersion = ((bytes[20] & 0xFF) << 8) | (bytes[21] & 0xFF);

    // Check the version needed to extract in the central directory
    int centralDirVersion = ((bytes[30] & 0xFF) << 8) | (bytes[31] & 0xFF);

    assertEquals(localHeaderVersion, centralDirVersion);
}