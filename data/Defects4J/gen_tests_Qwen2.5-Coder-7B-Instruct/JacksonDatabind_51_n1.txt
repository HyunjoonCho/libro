public void testTypeIdResolver() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSerializer(Foo.class, new FooSerializer());
    module.addDeserializer(Foo.class, new FooDeserializer());
    module.setTypeIdResolver(new CustomTypeIdResolver());
    mapper.registerModule(module);

    String json = "{\"@class\":\"com.example.Foo\",\"value\":123}";
    Foo foo = mapper.readValue(json, Foo.class);
    assertEquals(123, foo.getValue());
}