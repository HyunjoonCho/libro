public void testDifferentOutputFromRestApiAndCommandLineJar() throws Exception {
    String input = "var foreignObject = gfx.parentNode.parentNode; var parentContainer = foreignObject.parentNode.parentNode;";
    String expectedOutput = "if(b){if(a=b.parentNode.parentNode,b=a.parentNode.parentNode,null!==b)";
    String actualOutput = runCompiler(input, "--js");
    assertTrue(actualOutput.contains(expectedOutput));
}
private String runCompiler(String input, String... args) throws Exception {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    Main main = new Main(new PrintWriter(out));
    String[] allArgs = Stream.concat(Stream.of("--js_output_file", "/dev/null"), Stream.of(args)).toArray(String[]::new);
    int exitCode = main.run(allArgs, new ByteArrayInputStream(input.getBytes()), out);
    if (exitCode!= 0) {
        throw new RuntimeException("Compiler exited with code " + exitCode);
    }
    return out.toString().trim();
}