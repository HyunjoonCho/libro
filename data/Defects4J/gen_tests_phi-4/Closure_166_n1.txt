import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class TypeInferenceTest {

    public void testFunc(Object record) {
        System.out.println(((java.util.Map<?,?>) record).get("prop"));
    }

    public void testFunc2(Object record) {
        if (record instanceof String) {
            System.out.println(record);
        } else {
            System.out.println(((java.util.Map<?,?>) record).get("prop"));
        }
    }

    @Test(expected = ClassCastException.class)
    public void testIssueWithFunc2() {
        testFunc2((Object) java.util.Collections.singletonMap("prop", "a"));
    }
}