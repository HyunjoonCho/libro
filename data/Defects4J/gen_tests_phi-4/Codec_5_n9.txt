public void testBase64InputStreamNullPointerException() {
    byte[] data = "H4sIAAAAAAAAAFvzloG1uIhBKiuxLFGvODW5tCizpFIvODM9LzXFPykrNbmE8//eDC2bq/".getBytes();
    data = java.util.Arrays.copyOf(data, 1024); // Ensure the buffer is filled to the size of 1024 bytes

    try (ByteArrayInputStream bais = new ByteArrayInputStream(data);
         Base64InputStream bis = new Base64InputStream(bais)) {

        byte[] output = new byte[1024];
        int bytesRead = bis.read(output);

        // The test should verify that a NullPointerException is thrown
        // When the read is attempted after EOF with buffer still null
        try {
            int nextRead = bis.read(output);
            fail("Expected a NullPointerException to be thrown.");
        } catch (NullPointerException e) {
            // Expected exception
        }
    }
}