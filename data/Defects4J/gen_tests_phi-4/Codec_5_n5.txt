public void testBase64InputStreamNPE() throws IOException {
    byte[] input = "H4sIAAAAAAAAAFvzloG1uIhBKiuxLFGvODW5tCizpFIvODM9LzXFPykrNbmE8//eDC2bq/+ZGJijGdiT8/NKUvNKShiYop2iGTiLgQoTS0qLUgsZ6hgYfRh4SjJSE3PS84GmZOSWMAj5gMzVz0nMS9cP".getBytes(StandardCharsets.UTF_8);
    ByteArrayInputStream bais = new ByteArrayInputStream(input);
    
    try (Base64InputStream bis = new Base64InputStream(bais, Base64.DEFAULT)) {
        byte[] buffer = new byte[1024];
        int bytesRead = bis.read(buffer);
        if (bytesRead!= -1) {
            fail("Expected EOF (-1) after the first read, but got " + bytesRead);
        }
    } catch (NullPointerException e) {
        // Expected exception
    }
}