public void testInstanceMethodOperation() {
    try {
        DemoClass demo = new DemoClass();
        demo.runDemo();
        fail("Expected an exception due to incorrect 'this' context in instance method call.");
    } catch (Exception e) {
        assertTrue(e instanceof IllegalStateException);
        assertTrue(e.getMessage().contains("this is not set correctly"));
    }
}

class DemoClass {
    void runDemo() {
        Path path = new Path();
        double[][] points = {{1, 1}, {2, 2}};
        for (int i = 0; i < points.length; i++) {
            (i == 0? path::moveTo : path::lineTo).apply(points[i][0], points[i][1]);
        }
    }
}

class Path {
    void moveTo(double x, double y) {
        if (this == null) {
            throw new IllegalStateException("'this' is not set correctly");
        }
        // Implementation
    }

    void lineTo(double x, double y) {
        if (this == null) {
            throw new IllegalStateException("'this' is not set correctly");
        }
        // Implementation
    }
}