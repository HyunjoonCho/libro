public void testBase64InputStreamReads() {
    // Create a byte array representing a repeated pattern that will be Base64 encoded
    byte[] input = new byte[10920];
    for (int i = 0; i < input.length; i++) {
        input[i] = (byte) 'A'; // Using 'A' as it has a simple Base64 encoding
    }

    // Wrap the byte array in an InputStream
    InputStream inputStream = new ByteArrayInputStream(input);

    // Create a Base64InputStream
    Base64InputStream b64stream = new Base64InputStream(inputStream, true, 0, null);

    // Attempt to read from the Base64InputStream until an exception occurs
    int n = 0;
    try {
        while (b64stream.read()!= -1) {
            n++;
        }
    } catch (ArrayIndexOutOfBoundsException e) {
        // Expected exception, verify the number of reads before the exception
        assertEquals(10920, n);
    }
}