public void testBase64InputStreamReadZero() throws IOException {
    String input = "SGVsbG8gV29ybGQ="; // "Hello World" in Base64, length is multiple of 3
    InputStream in = new ByteArrayInputStream(input.getBytes("UTF-8"));
    Base64InputStream base64InputStream = new Base64InputStream(in, true);

    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    byte[] bytes = new byte[4]; // Arbitrary length, not a multiple of 3
    int bytesRead;
    while ((bytesRead = base64InputStream.read(bytes))!= -1) {
        buffer.write(bytes, 0, bytesRead);
    }

    assertEquals("SGVsbG8gV29ybGQ=", new String(buffer.toByteArray(), "UTF-8"));
    // Ensure the stream does not return zero prematurely
    assertFalse(base64InputStream.read(bytes) == 0);
}