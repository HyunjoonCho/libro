public void testJsonWriterValueNumberLeniency() {
    JsonWriter writer = Json.createWriterFactory(new JsonWriterFactory()).createWriter(new StringWriter());
    
    try {
        // Test with Number, which should be lenient in lenient mode
        writer.setLenient(true);
        writer.value((Number) Double.valueOf(Double.NaN));
        writer.close();
        fail("Expected IllegalArgumentException for NaN when using Number in lenient mode");
    } catch (IllegalArgumentException e) {
        // Expected
    }
    
    try {
        // Test with double, which should not be lenient even in lenient mode
        writer.setLenient(true);
        writer.value(Double.NaN);
        writer.close();
        fail("Expected IllegalArgumentException for NaN when using double");
    } catch (IllegalArgumentException e) {
        // Expected
    }
}