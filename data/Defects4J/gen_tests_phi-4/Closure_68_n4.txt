public void testCrypticErrorMessage() throws Exception {
    String testJs = 
        "/**\n" +
        " * @type function\n" +
        " */\n" +
        "var callback;\n";

    ByteArrayOutputStream output = new ByteArrayOutputStream();
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler-20110502.jar", "--js", "-");
    pb.redirectErrorStream(true);
    Process process = pb.start();
    try (OutputStream os = process.getOutputStream()) {
        os.write(testJs.getBytes());
        os.flush();
        os.close();
    }

    String result = new String(output.toByteArray());
    assertTrue(result.contains("Unexpected end of file"));
    assertFalse(result.contains("expected '('"));
}