public void testNodeSetHandling() {
    // Assuming JXPathContext and other necessary setup is done here

    JXPathContext context = JXPathContext.newContext(createContextNode());
    NodeSet nodeSet = (NodeSet) context.getValue("ems:observations()");

    // Verify that nodeSet is iterable and not a single wrapped node
    assertTrue(nodeSet instanceof Iterable);
    Iterator<NodePointer> iterator = nodeSet.iterator();
    NodePointer firstPointer = iterator.next();
    
    // Verify that the NodePointer is not wrapped
    assertNotNull(firstPointer);
    assertFalse(firstPointer instanceof BeanPointer);

    // Additional checks to ensure no pointers are missed
    while (iterator.hasNext()) {
        NodePointer pointer = iterator.next();
        assertNotNull(pointer);
        assertFalse(pointer instanceof BeanPointer);
    }
}