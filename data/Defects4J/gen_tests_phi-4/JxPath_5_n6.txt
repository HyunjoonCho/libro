public void testXPathUnionWithVariable() {
    JXPathContext context = JXPathContext.newContext(createXmlDocument());

    context.setVariable("var", context.getNodes("/MAIN/A"));
    try {
        context.selectNodes("$var | /MAIN/A");
        fail("Expected JXPathException to be thrown");
    } catch (JXPathException e) {
        assertEquals("Cannot compare pointers that do not belong to the same tree: '$var' and ''",
                     e.getMessage());
    }
}

private Document createXmlDocument() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder;
    try {
        builder = factory.newDocumentBuilder();
        Document doc = builder.newDocument();
        Element main = doc.createElement("MAIN");
        Element a = doc.createElement("A");
        main.appendChild(a);
        doc.appendChild(main);
        return doc;
    } catch (ParserConfigurationException e) {
        throw new RuntimeException(e);
    }
}

Note: Ensure the necessary setup for `JXPathContext` and XML document creation is in place within your test environment. This method assumes you have a method `createXmlDocument()` to provide the XML context. Adjust as needed for your specific setup.