public void testMockitoAbstractClassSpying() {
    // Example 1: Fake with trivial logic
    UserAccount userAccount = Mockito.mock(UserAccount.class);
    Mockito.when(userAccount.getEmails()).thenReturn(Arrays.asList("email1@example.com", "email2@example.com"));
    Mockito.doAnswer(invocation -> {
        userAccount.addEmail("email3@example.com");
        return null;
    }).when(userAccount).addEmail(Mockito.anyString());

    assertEquals(2, userAccount.getEmails().size());
    userAccount.addEmail("email3@example.com");
    assertEquals(3, userAccount.getEmails().size());

    // Example 2: Callback-style API
    AccountService accountService = Mockito.mock(AccountService.class);
    UserAccount mockAccount = Mockito.mock(UserAccount.class);
    Mockito.doAnswer(invocation -> {
        AsyncCallback<UserAccount> callback = (AsyncCallback<UserAccount>) invocation.getArguments()[1];
        callback.onSuccess(mockAccount);
        return null;
    }).when(accountService).getAccount(Mockito