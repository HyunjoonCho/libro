public void testClosureCompilerCrash() {
    String jsCode = 
        "var g=function(m){return m*Math.random()|0},\n" +
        "    d=document,\n" +
        "    h=d.getElementById('h'),\n" +
        "    c=d.getElementById('c'),\n" +
        "    l;\n" +
        "(l=function(){requestAnimationFrame(l);h.style.textShadow=\"0 0 1px #000,\"+(g(10)-5)+\"px \"+(g(10)-5)+\"px 0 #888,0 0 180px rgb(\"+g(255)+\",\"+g(255)+\",\"+g(255)+\")\"})();\n" +
        "d.addEventListener('mousemove',function(v){c.style.marginTop=(v.pageY/10+15|0)+'px'})";

    try {
        // Simulate the closure compiler processing the JavaScript code
        ClosureCompiler.compile(jsCode, "ADVANCED_OPTIMIZATIONS", false, false, false);
    } catch (CompilerException e) {
        assertTrue(e.getMessage().contains("Unexpected variable l"));
    }
}

This test method prepares the JavaScript code that