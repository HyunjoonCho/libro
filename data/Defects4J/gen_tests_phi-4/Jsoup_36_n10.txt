public void testInvalidCharsetDetection() {
    String htmlContent = "<html lang=\"en-US\">\n<head>\n" +
                         "    <meta charset=\"UTF-8\">\n" +
                         "    <meta http-equiv=\"Content-Type\" content=\"text/html; \">\n" +
                         "</head>\n";

    try {
        Document doc = Jsoup.parse(htmlContent);
        fail("Should have thrown IllegalCharsetNameException");
    } catch (IllegalCharsetNameException e) {
        // Expected exception
    }
}