public void testGroupConstraints() {
    CommandLineParser parser = new DefaultParser();
    Options options = new Options();

    OptionGroup groupB = new OptionGroup();
    Option optionA = new Option("A", "option-a", false, "Option A");
    groupB.addOption(optionA);
    groupB.setRequired(true);
    groupB.setMinimumRequired(1);
    groupB.setMaximumAllowed(1);

    Option optionB = new Option("B", "option-b", false, "Option B");
    options.addOption(optionB);

    options.addOptionGroup(groupB);

    String[] args = {"-B"};
    CommandLine cmd = parser.parse(options, args);

    assertFalse(cmd.hasOption("A"));
    assertTrue(cmd.hasOption("B"));
    assertEquals(0, cmd.getOptionGroup(groupB).getOptions().size());
}