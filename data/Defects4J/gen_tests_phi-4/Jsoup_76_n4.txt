public void testPreAndTextareaNewlineHandling() {
    String html = "<pre>\nabc  def</pre>";
    Document doc = Jsoup.parse(html);
    Element preElement = doc.select("pre").get(0);
    String textOutput = preElement.childNode(0).text();
    assertEquals("abc def", textOutput);

    String wholeTextOutput = preElement.childNode(0).getWholeText();
    assertEquals("abc  def", wholeTextOutput);

    String htmlWithTwoNewlines = "<pre>\n\nabc  def</pre>";
    Document docWithTwoNewlines = Jsoup.parse(htmlWithTwoNewlines);
    Element preElementWithTwoNewlines = docWithTwoNewlines.select("pre").get(0);
    String wholeTextOutputWithTwoNewlines = preElementWithTwoNewlines.childNode(0).getWholeText();
    assertEquals("\nabc  def", wholeTextOutputWithTwoNewlines);
}