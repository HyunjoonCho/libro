public void testCSVPrinterWithHeader() throws IOException {
    StringWriter writer = new StringWriter();
    CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(new PrintWriter(writer));
    csvPrinter.printRecord(42);
    csvPrinter.close();

    String result = writer.toString().trim();
    assertEquals("x\n42", result);
}