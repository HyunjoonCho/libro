public void testJsonIncludeNonDefault() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    String json = mapper.writeValueAsString(new TestClass("nonDefaultString"));
    assertEquals("{\n  \"nonDefaultStringField\" : \"nonDefaultString\"\n}", json);

    json = mapper.writeValueAsString(new TestClass(null));
    assertEquals("{\n}", json);
}

private static class TestClass {
    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private final String nonDefaultStringField;

    public TestClass(String nonDefaultStringField) {
        this.nonDefaultStringField = nonDefaultStringField;
    }
}