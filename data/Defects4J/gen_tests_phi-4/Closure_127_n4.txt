public void testFinallyBreakOptimization() {
    boolean caught = false;
    try {
        try {
            throw new RuntimeException("throw me");
        } finally {
            // Fake catcher
            caught = true;
            breakLabel: break breakLabel;
        }
    } catch (Throwable e) {
        fail("Exception should be caught by finally block break");
    }

    assertTrue(caught, "The finally block was not executed as expected");
}