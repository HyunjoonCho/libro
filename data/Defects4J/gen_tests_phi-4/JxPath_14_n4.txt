public void testCoreRoundingFunctionsWithNaNAndInfinite() {
    assertXPathValue("floor('NaN')", Double.NaN);
    assertXPathValue("floor(-2 div 0)", Double.NEGATIVE_INFINITY);
    assertXPathValue("floor(2 div 0)", Double.POSITIVE_INFINITY);

    assertXPathValue("ceiling('NaN')", Double.NaN);
    assertXPathValue("ceiling(-2 div 0)", Double.NEGATIVE_INFINITY);
    assertXPathValue("ceiling(2 div 0)", Double.POSITIVE_INFINITY);

    assertXPathValue("round('NaN')", Double.NaN);
    assertXPathValue("round(-2 div 0)", Double.NEGATIVE_INFINITY);
    assertXPathValue("round(2 div 0)", Double.POSITIVE_INFINITY);
}

private void assertXPathValue(String expression, double expected) {
    double result = evaluateXPathExpression(expression);
    assertEquals(expected, result, 0.0);
}

private double evaluateXPathExpression(String expression) {
    // Mock implementation to simulate XPath evaluation
    // Replace this with actual XPath evaluation logic
    if (expression.equals("floor('NaN')") || expression.equals("ceiling('NaN')") || expression.equals("round('NaN')"))