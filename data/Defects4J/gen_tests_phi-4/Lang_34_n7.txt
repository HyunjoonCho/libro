public void testThreadLocalMemoryLeak() {
    ToStringStyle style = new ToStringStyle();
    style.setUseIdentityHashCode(false); // Triggering the use of ThreadLocal
    StringBuilder sb = new StringBuilder();
    style.append("test", sb);
    // Verify the style's hash code is computed
    assertEquals(style.hashCode(), sb.toString().hashCode());
}