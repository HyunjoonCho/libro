public void testStrBuilderLengthVsSize() {
    StrBuilder builder = new StrBuilder();
    builder.append("abc");
    // Assuming the issue is with accessing beyond the actual size of the buffer
    // when using thisBuf.length instead of size()
    try {
        builder.setCharAt(3, 'd'); // Intentionally access beyond the size
        fail("ArrayIndexOutOfBoundsException expected");
    } catch (ArrayIndexOutOfBoundsException e) {
        // Expected exception
    }
    
    // Test with correct usage using size()
    builder.setCharAt(builder.size() - 1, 'z');
    assertEquals("abz", builder.toString());
}