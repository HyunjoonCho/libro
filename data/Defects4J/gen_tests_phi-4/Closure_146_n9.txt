public void testBadTypeInferenceForUndefined() {
    // Simulating JavaScript environment or behavior with custom functions
    assertThrows(IllegalArgumentException.class, () -> {
        f("test"); // This should not throw, but due to the bug, it does
    });

    void f(Object x) {
        if (x!= null) { // Simulating 'undefined' check in JavaScript
            g(x.toString());
        }
    }

    void g(String x) {
        if (!"test".equals(x)) {
            throw new IllegalArgumentException("Type mismatch");
        }
    }
}