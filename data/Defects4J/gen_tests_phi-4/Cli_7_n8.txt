public void testRequiredOptions() {
    Options options = new Options();
    Option helpOption = new Option("h", "help", false, "Display help");
    helpOption.setRequired(true);
    options.addOption(helpOption);

    String[] args = {"-c", "<arg>"};
    CommandLineParser parser = new DefaultParser();
    try {
        CommandLine cmd = parser.parse(options, args);
        assertFalse(cmd.hasOption("h"));
    } catch (ParseException e) {
        fail("Exception should not be thrown");
    }
    assertEquals(Arrays.asList("-h"), Arrays.asList(new String[]{"-h"}));
}