public void testZipArchiveInputStreamCompressedSizeUnknown() {
    ArchiveEntry entry = new ArchiveEntry();
    entry.setCompressedSize(ArchiveEntry.SIZE_UNKNOWN);
    entry.setMethod(ZipMethod.BZIP2.getCode());

    ZipArchiveInputStream zipArchiveInputStream = new ZipArchiveInputStream(new ByteArrayInputStream(new byte[0]));
    try {
        zipArchiveInputStream.getNextZipEntry();
        fail("Expected an exception to be thrown when compressed size is unknown.");
    } catch (Exception e) {
        assertEquals("Compressed size is unknown for bzip2 entry.", e.getMessage());
    }
}