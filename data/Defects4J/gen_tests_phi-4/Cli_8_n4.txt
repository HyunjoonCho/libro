public void testHelpFormatterWrapBug() {
    HelpFormatter formatter = new HelpFormatter();
    Option option = new Option("longOption", "A very long option description that should wrap correctly but does not.");
    formatter.printOption(option);

    String output = captureOutput(() -> {
        formatter.printHelp("test", new Options().addOption(option));
    });

    String[] lines = output.split("\n");
    assertEquals("Expected first line to be correct length.", expectedFirstLineLength, lines[0].length());

    for (int i = 1; i < lines.length; i++) {
        assertTrue("Line " + i + " is longer than expected.", lines[i].length() <= expectedLineLength);
    }
}

private int expectedFirstLineLength = 80; // Example expected length
private int expectedLineLength = 80; // Example expected line length

private String captureOutput(Runnable task) {
    ByteArrayOutputStream outContent = new ByteArrayOutputStream();
    System.setOut(new PrintStream(outContent));
    task.run();
    System.setOut(System.out);
    return outContent.toString();
}