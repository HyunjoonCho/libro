public void testIssueWithTr() {
    Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element table = document.createElement("table");
    document.appendChild(table);

    Element tr = document.createElement("tr");
    table.appendChild(tr);

    TableNode tableNode = new TableNode();
    tableNode.setDocument(document);
    tableNode.setDomNode(table);

    Element newTr = document.createElement("tr");
    tableNode.append(newTr);

    NodeList elements = table.getChildNodes();
    boolean foundTrOutsideTable = false;
    for (int i = 0; i < elements.getLength(); i++) {
        Node node = elements.item(i);
        if (node instanceof Element && "tr".equals(node.getNodeName())) {
            Element trElement = (Element) node;
            NodeList trChildNodes = trElement.getChildNodes();
            for (int j = 0; j < trChildNodes.getLength(); j++) {
                Node trChildNode = trChildNodes.item(j);
                if (trChildNode.getNodeType() == Node.ELEMENT_NODE && "table".equals(trChildNode.getNodeName())) {
                    foundTrOutsideTable = true;
                    break;
                }
            }
        }
        if (foundTrOutsideTable