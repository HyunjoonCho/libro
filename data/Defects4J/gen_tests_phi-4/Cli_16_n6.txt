public void testGroupConstraints() {
    Options options = new Options();
    OptionGroup groupA = new OptionGroup();
    Option optionA1 = new Option("a1");
    Option optionA2 = new Option("a2");
    groupA.addOption(optionA1);
    groupA.addOption(optionA2);
    groupA.setRequired(true);

    OptionGroup groupB = new OptionGroup();
    groupB.addOption(new Option("b1"));
    groupB.setRequired(false);

    options.addOptionGroup(groupA);
    options.addOptionGroup(groupB);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmd = parser.parse(options, new String[]{"--b1"});
    
    boolean isGroupAPresent = cmd.hasOption("a1") || cmd.hasOption("a2");
    boolean isGroupBPresent = cmd.hasOption("b1");

    assert isGroupAPresent : "Group A should be considered present";
    assert!cmd.hasOption("a1") &&!cmd.hasOption("a2") : "Options a1 and a2 should not be present in cmd";
    assert isGroupBPresent : "Group B should be present";
}