public void testCSVParserGetHeaderMapThrowsNPE() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader();
    String data = "Name,Age\nJohn Doe,30\nJane Doe,25";
    try (Reader reader = new StringReader(data);
         CSVParser parser = new CSVParser(reader, format)) {
        // Intentionally using a parser without headers to reproduce the NPE
        CSVFormat noHeaderFormat = CSVFormat.DEFAULT.withFirstRecordAsHeader().withSkipHeaderRecord();
        try (Reader noHeaderReader = new StringReader(data);
             CSVParser noHeaderParser = new CSVParser(noHeaderReader, noHeaderFormat)) {
            assertThrows(NullPointerException.class, () -> {
                Map<String, Integer> header = noHeaderParser.getHeaderMap();
            });
        }
    }
}