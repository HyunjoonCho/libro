public void testDeeplyNestedPages() {
    String deeplyNestedHtml = "<html>";
    for (int i = 0; i < 1000; i++) {
        deeplyNestedHtml += "<div>";
        for (int j = 0; j < 10; j++) {
            deeplyNestedHtml += "<span></span>";
        }
        deeplyNestedHtml += "</div>";
    }
    deeplyNestedHtml += "</html>";

    Document document = Jsoup.parse(deeplyNestedHtml);

    // Assert that parsing does not throw an exception or take too long
    long startTime = System.currentTimeMillis();
    document.body().childNodeSize();
    long endTime = System.currentTimeMillis();

    assertTrue("Parsing took too long: " + (endTime - startTime) + "ms", (endTime - startTime) < 1000);
}