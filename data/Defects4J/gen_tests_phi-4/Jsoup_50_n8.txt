import java.nio.charset.StandardCharsets;
import java.util.List;
import org.jsoup.helper.DataUtil;
import org.jsoup.nodes.Document;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertEquals;

public class DataUtilTest {

    @Test
    public void testUtf16StreamWithBomProcessedAsUtf8() throws Exception {
        String utf16BomString = "\uFEFF\u0048\u0065\u006C\u006C\u006F"; // "Hello" with UTF-16 BOM
        byte[] utf16BomBytes = utf16BomString.getBytes(StandardCharsets.UTF_16BE);
        
        Document doc = DataUtil.parseByteData("UTF-8", List.of(utf16BomBytes));
        
        assertEquals("Hello", doc.text());
    }
}