public void testTypeHierarchyAdapters() {
    String jsonCar = "{\"type\":\"Car\",\"make\":\"Toyota\",\"model\":\"Corolla\"}";
    String jsonTruck = "{\"type\":\"Truck\",\"make\":\"Ford\",\"model\":\"F-150\"}";

    Decoder decoder = new Decoder(jsonCar);
    try {
        Car car = decoder.decode(Car.class);
    } catch (IllegalArgumentException e) {
        // Expected exception for Car
    }
    
    try {
        Car car = decoder.decode(Car.class);
        fail("Expected IllegalArgumentException when decoding Truck JSON as a Car.");
    } catch (IllegalArgumentException e) {
        // Expected exception since Truck JSON is being decoded as a Car
    }
}