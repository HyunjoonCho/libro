public void testEncodingPassThrough() throws IOException {
    String encoding = "UTF-8";
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    
    try (InputStream in = new ByteArrayInputStream(new byte[0])) {
        ArjArchiveInputStream arjStream = new ArjArchiveInputStream(in, encoding);
        assertEncoding(arjStream, encoding);
        
        CpioArchiveInputStream cpioStream = new CpioArchiveInputStream(in, encoding);
        assertEncoding(cpioStream, encoding);
        
        DumpArchiveInputStream dumpStream = new DumpArchiveInputStream(in, encoding);
        assertEncoding(dumpStream, encoding);
        
        JarArchiveInputStream jarInput = new JarArchiveInputStream(in, encoding);
        assertEncoding(jarInput, encoding);
        
        try (OutputStream out = new ByteArrayOutputStream()) {
            JarArchiveOutputStream jarOutput = new JarArchiveOutputStream(out, encoding);
            assertEncoding(jarOutput, encoding);
        }
    }
}

private void assertEncoding(ArchiveStream ar, String expectedEncoding) {
    assertEquals(expectedEncoding, ar.getEncoding());
}