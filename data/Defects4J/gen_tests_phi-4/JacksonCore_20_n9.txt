public void testWriteEmbeddedObjectForByteArray() {
    JsonFactory factory = new JsonFactory();
    StringWriter stringWriter = new StringWriter();
    JsonGenerator generator = factory.createGenerator(stringWriter);

    byte[] byteArray = new byte[]{1, 2, 3, 4, 5};
    generator.writeStartObject();
    generator.writeFieldName("data");
    generator.writeEmbeddedObject(byteArray);
    generator.writeEndObject();
    generator.close();

    String expectedJson = "{\"data\":{\"$binary\":\"AQIDBAU=\",\"$type\":\"00\"}}";
    assertEquals(expectedJson, stringWriter.toString());
}