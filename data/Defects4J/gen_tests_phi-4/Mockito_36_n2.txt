import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.ExpectedException;
import org.junit.runner.RunWith;
import org.mockito.junit.MockitoJUnit;
import org.mockito.junit.MockitoRule;

import static org.junit.Assert.fail;

@RunWith(MockitoJUnit.class)
public class MockitoJUnitRuleCompatibilityTest {

    @Rule
    public MockitoRule mockitoRule = MockitoJUnit.rule();

    @Rule
    public ExpectedException exception = ExpectedException.none();

    @Test
    public void testMockitoRuleIncompatibleWithJUnit47() {
        exception.expect(RuntimeException.class);
        exception.expectMessage("Mockito cannot operate without a valid test instance");

        // Simulate the test scenario where Mockito rule fails without a test instance
        try {
            mockitoRule.verifyNoMoreInteractions(); // This should fail if the rule can't access the test instance
        } catch (Exception e) {
            fail("Expected Mockito rule to