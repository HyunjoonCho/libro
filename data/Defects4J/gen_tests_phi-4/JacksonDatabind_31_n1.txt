import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;
import org.junit.jupiter.api.Test;

import java.io.IOException;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class JsonStreamContextsTest {

    @Test
    public void testWriteAndConvertContextDifference() throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        ObjectNode node = mapper.createObjectNode();
        node.put("key", "value");

        // Write context
        JsonGenerator gen = mapper.getFactory().createGenerator(null);
        node.writeTo(gen);
        gen.close();

        // Convert context
        String jsonString = mapper.writeValueAsString(node);

        // Check if the contexts differ
        // This test assumes the contexts should be the same, and thus the output should be identical
        assertEquals("{\"key\":\"value\"}", jsonString);
    }
}