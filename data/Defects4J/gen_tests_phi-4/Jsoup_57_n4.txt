public void testRemoveIgnoreCaseConcurrentModificationException() {
    LinkedHashMap<String, Attribute> attributes = new LinkedHashMap<>();
    attributes.put("abc", new Attribute());
    attributes.put("ABC", new Attribute());

    attributes.values().stream()
       .filter(attr -> attr.removeAttr("attr1").removeAttr("attr2").matches("abc"))
       .findFirst()
       .ifPresent(attr -> attributes.values().removeIf(value -> value.equals(attr)));

    assertEquals(1, attributes.size());
}