public void testInvalidFormatExceptionReference() {
    String json = "[{\"name\":\"John\"}, {\"age\":30}]";
    ObjectMapper mapper = new ObjectMapper();
    Collection<ObjectNode> nodes;
    try {
        nodes = mapper.readValue(json, new TypeReference<List<ObjectNode>>() {});
    } catch (JsonMappingException e) {
        Throwable cause = e.getCause();
        while (cause instanceof JsonMappingException) {
            cause = cause.getCause();
        }
        if (cause instanceof InvalidFormatException) {
            InvalidFormatException ife = (InvalidFormatException) cause;
            assertEquals(1, ife.getIndex());
        }
    }
}