public void testWhitespaceHandlingInHtml() {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.newDocument();
    Element root = doc.createElement("root");
    doc.appendChild(root);
    root.appendChild(doc.createTextNode("   leading and trailing spaces   "));
    
    String htmlOutput = root.html();
    assertEquals("leading and trailing spaces", htmlOutput);
}