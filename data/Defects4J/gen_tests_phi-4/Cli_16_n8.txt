public void testGroupConstraints() {
    Options options = new Options();
    
    OptionGroup groupA = new OptionGroup();
    Option optionA1 = new Option("a1", "option-a1");
    Option optionA2 = new Option("a2", "option-a2");
    groupA.addOption(optionA1);
    groupA.addOption(optionA2);
    options.addOptionGroup(groupA);

    OptionGroup groupB = new OptionGroup();
    Option optionB = new Option("b", "option-b");
    groupB.setRequired(true);
    groupB.setMinimumNumber(1);
    groupB.setMaximumNumber(1);
    options.addOptionGroup(groupB);
    
    CommandLineParser parser = new DefaultParser();
    CommandLine commandLine = parser.parse(options, new String[]{"-a1", "-b"});
    
    assertTrue(commandLine.hasOption("b"));
    assertEquals(1, commandLine.getOptionValues("b").size());
}