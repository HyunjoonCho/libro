public void testCharsetDetectionFailure() {
    String htmlContent = "<html lang=\"en-US\">\n" +
                         "<head>\n" +
                         "    <meta charset=\"UTF-8\">\n" +
                         "    <meta http-equiv=\"Content-Type\" content=\"text/html; \" />\n" +
                         "</head>\n" +
                         "</html>";

    try {
        Document document = Jsoup.parse(htmlContent);
        // If no exception, the test should fail because we expect an exception
        fail("Expected IllegalCharsetNameException");
    } catch (IllegalCharsetNameException e) {
        // Expected exception
    } catch (Exception e) {
        fail("Expected IllegalCharsetNameException, but got: " + e.getClass().getName());
    }
}