public void testSwitchedOrderOfDeleteAndIn() {
    java.util.Map<String, String> customData = new java.util.HashMap<>();
    customData.put("key", "value");

    String result = testRemoveKey(customData, "key");
    assert result.equals("value") : "Expected 'value', but got " + result;

    boolean keyExists = customData.containsKey("key");
    assert keyExists : "Expected 'key' to be present, but it was not";
}

private String testRemoveKey(java.util.Map<String, String> customData, String key) {
    String retval = customData!= null? customData.get(key) : null;
    boolean hadKey = customData!= null && customData.containsKey(key);

    if (customData!= null) {
        customData.remove(key);
    }

    return hadKey? retval : null;
}