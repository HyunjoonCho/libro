public void testArrayPushAssignment() {
    // Simulate the behavior of the Closure Compiler's transformation
    Function<Void, Object[]> f = () -> {
        Object[] a = new Object[0];
        Object b = new Object();
        a = java.util.Arrays.copyOf(a, a.length + 1);
        a[a.length - 1] = b;
        ((Object[]) a[a.length - 1]).length = 1; // Simulate b = []
        ((Object[]) a[a.length - 1])[0] = 1; // Simulate b[0] = 1
        return a;
    };

    Object[] result = f.apply(null);
    assertEquals(1, result.length);
    assertEquals(1, ((Object[]) result[0])[0]);
}