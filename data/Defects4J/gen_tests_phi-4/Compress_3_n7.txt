public void testFinishMethodSafety() throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ArchiveOutputStream aos = new ZipOutputStream(baos);
    
    aos.putNextEntry(new ZipEntry("test.txt"));
    aos.write("test".getBytes());
    
    // Call finish externally before close
    aos.finish();
    
    // Attempt to close after calling finish
    aos.close();
    
    // Verify the archive is valid
    try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(baos.toByteArray()))) {
        ZipEntry entry = zis.getNextEntry();
        assertNotNull(entry);
        assertEquals("test.txt", entry.getName());
    } catch (ZipException e) {
        fail("Archive is corrupted: " + e.getMessage());
    }
}