public void testFastDateFormatSerialization() {
    FastDateFormat format = FastDateFormat.getInstance("yyyy-MM-dd");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try (ObjectOutputStream oos = new ObjectOutputStream(baos)) {
        oos.writeObject(format);
    } catch (IOException e) {
        fail("Serialization should succeed");
    }

    FastDateFormat deserializedFormat;
    try (ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(baos.toByteArray()))) {
        deserializedFormat = (FastDateFormat) ois.readObject();
    } catch (IOException | ClassNotFoundException e) {
        fail("Deserialization should succeed");
    }

    assertEquals(format, deserializedFormat);
    assertNotSame(format, deserializedFormat);
}