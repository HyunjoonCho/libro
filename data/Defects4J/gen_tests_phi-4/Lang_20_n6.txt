public void testStringUtilsJoinWithNullToString() {
    Exception exception = assertThrows(NullPointerException.class, () -> {
        StringUtils.join(new Object[]{
                new Object() {
                    @Override
                    public String toString() {
                        return null;
                    }
                }
        }, ',');
    });
    assertEquals("toString() returned null for one of the elements", exception.getMessage());
}