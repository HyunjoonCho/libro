public void testBase64InputStreamEndOfStream() throws IOException {
    String base64EncodedString = "YmFzZTY0";
    InputStream inputStream = new ByteArrayInputStream(base64EncodedString.getBytes());
    Base64InputStream base64InputStream = new Base64InputStream(inputStream, true);
    
    byte[] buffer = new byte[2]; // Buffer size less than the base64 decoded byte array length
    int bytesRead = base64InputStream.read(buffer);
    
    // Since "YmFzZTY0" decodes to "base2" which is 5 bytes, read should not return 0
    // before the entire output is consumed
    assertFalse("Expected more bytes, got 0", bytesRead == 0);
    
    // Close the stream to trigger the bug when the stream is a multiple of 3 bytes
    base64InputStream.close();
}