public void testOptionBuilderNotResetAfterIAE() {
    Option option = OptionBuilder.withArgName("arg")
                                .hasArg()
                                .create("invalidOption");

    try {
        option.create("anotherInvalidOption");
    } catch (IllegalArgumentException e) {
        OptionBuilder.withArgName("arg")
                    .hasArg()
                    .create("validOption");
    }

    assertEquals("arg", OptionBuilder.getArgName());
}