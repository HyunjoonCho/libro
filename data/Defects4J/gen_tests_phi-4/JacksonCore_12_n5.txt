public void testJsonParserTokenLocation() throws Exception {
    final String DOC = "{\"name\":123}";
    JsonFactory jf = new JsonFactory();
    JsonParser jp = jf.createJsonParser(new StringReader(DOC));

    assertEquals(JsonToken.START_OBJECT, jp.nextToken());
    assertEquals(JsonToken.FIELD_NAME, jp.nextToken());

    // Capture location after FIELD_NAME
    JsonLocation locationAfterFieldName = jp.getTokenLocation();

    assertEquals(JsonToken.VALUE_NUMBER_INT, jp.nextToken());

    // Capture location after nextToken()
    JsonLocation locationAfterNextToken = jp.getTokenLocation();

    // They should be different, but due to the bug, they are the same
    assertNotEquals(locationAfterFieldName, locationAfterNextToken);

    jp.close();
}