import static org.mockito.Mockito.*;

public void testArgumentCaptorWithVarargs() {
    // Mock a method with varargs
    List<Integer> mockedList = mock(List.class);
    when(mockedList.addAll(anyVararg())).thenReturn(true);

    // Call the method with varargs
    mockedList.addAll(1, 2, 3);

    // Capture the varargs
    ArgumentCaptor<Integer[]> captor = ArgumentCaptor.forClass(Integer[].class);
    verify(mockedList).addAll(captor.capture());

    // Assert the captured varargs
    Integer[] capturedArgs = captor.getValue();
    assertArrayEquals(new Integer[]{1, 2, 3}, capturedArgs);
}