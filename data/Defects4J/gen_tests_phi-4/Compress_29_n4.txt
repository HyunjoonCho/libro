public void testArchiveStreamFactoryEncoding() throws IOException {
    String encoding = "UTF-8";
    InputStream inputStream = new ByteArrayInputStream(new byte[0]);
    
    ArchiveStreamFactory factory = new ArchiveStreamFactory();
    
    // Test for each stream type
    Object arjStream = factory.createArchiveInputStream(encoding, inputStream);
    assertEncoding(arjStream, encoding);
    
    Object cpioStream = factory.createArchiveInputStream(encoding, inputStream);
    assertEncoding(cpioStream, encoding);
    
    Object dumpStream = factory.createArchiveInputStream(encoding, inputStream);
    assertEncoding(dumpStream, encoding);
    
    Object jarInput = factory.createArchiveInputStream(encoding, inputStream);
    assertEncoding(jarInput, encoding);
    
    OutputStream outputStream = new ByteArrayOutputStream();
    Object jarOutput = factory.createArchiveOutputStream(encoding, outputStream);
    assertEncoding(jarOutput, encoding);
}

private void assertEncoding(Object stream, String expectedEncoding) {
    if (stream instanceof ArjArchiveInputStream) {
        assertEquals(expectedEncoding, ((ArjArchiveInputStream) stream).getEncoding());
    } else if (stream instanceof CpioArchiveInputStream) {
        assertEquals(expectedEncoding, ((CpioArchiveInputStream) stream).getEncoding());
    } else if (stream instanceof DumpArchive