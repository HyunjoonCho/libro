public void testCsvRecordToMapThrowsNpe() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader().withSkipHeaderRecord();
    try (Reader reader = new StringReader("field1,field2\nvalue1,value2")) {
        Iterable<CSVRecord> records = CSVFormat.DEFAULT.withHeader().withSkipHeaderRecord().parse(reader);
        CSVRecord record = records.iterator().next();
        assertThrows(NullPointerException.class, () -> {
            record.toMap();
        });
    }
}