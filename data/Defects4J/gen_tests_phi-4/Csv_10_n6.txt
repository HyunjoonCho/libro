public void testCSVFormatWithHeader() throws IOException {
    Path path = Paths.get("data.csv");
    try (BufferedWriter writer = Files.newBufferedWriter(path);
         CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(writer)) {
        csvPrinter.printRecord(42);
    }

    // Read back the content to verify
    String content = new String(Files.readAllBytes(path));
    assertEquals("x\n42\n", content);
}