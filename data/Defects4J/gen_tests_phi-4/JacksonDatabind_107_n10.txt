public void testDeserializationProblemHandlerHandleUnknownTypeId() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(DefaultTyping.OBJECT_AND_NON_CONCRETE);

    DeserializationProblemHandler handler = new DeserializationProblemHandler() {
        @Override
        public boolean handleUnknownTypeId(DeserializationContext ctxt, JavaType type, String id, TypeIdResolver idResolver, String className) {
            return true;
        }
    };

    mapper.addHandler(handler);
    mapper.readValue("{ \"unknownType\": \"foo\" }", Object.class);
}