import org.junit.Test;
import static org.junit.Assert.*;

public class ClosureCompilerTest {

    @Test
    public void testObfuscatedCodeTriggeringTypeError() {
        String originalCode = 
            "function example(arg) {"
            + "    var x = arg + 1;"
            + "    var arg = x + 2;"
            + "}";

        String obfuscatedCode = 
            "function example(a) {"
            + "    var a = a + 1;"
            + "    var a = a + 2;"
            + "}";

        String result = simulateClosureCompilerObfuscation(originalCode);

        assertEquals(obfuscatedCode, result);

        // Simulate JavaScript execution in Firefox
        try {
            executeJavaScriptInFirefox(obfuscatedCode);
            fail("Expected TypeError in Firefox due to redeclaration of 'a'");
        } catch (TypeError e) {
            assertTrue(e.getMessage().contains("variable