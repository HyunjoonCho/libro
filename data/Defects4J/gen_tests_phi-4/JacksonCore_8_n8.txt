public void testTextBufferInconsistency() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();

    // First call should return null
    assertSame(null, buffer.getTextBuffer());

    // contentsAsString should return an empty string
    assertEquals("", buffer.contentsAsString());

    // Second call should return an empty array
    assertArrayEquals(new char[0], buffer.getTextBuffer());
}