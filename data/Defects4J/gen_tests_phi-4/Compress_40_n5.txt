public void testOverflowInBitInputStream() {
    ByteArrayInputStream in = new ByteArrayInputStream(new byte[]{
        87, 45, 66, 15, 90, 29, 88, 61, 33, 74
    });
    BitInputStream bin = new BitInputStream(in, ByteOrder.LITTLE_ENDIAN);

    try {
        long ret = bin.readBits(5);
        ret = bin.readBits(63); // This call should cause an overflow
        ret = bin.readBits(12); // Subsequent call should give incorrect result due to overflow
        assert false : "Expected overflow to throw exception or result in incorrect behavior";
    } catch (Exception e) {
        // Expected behavior due to overflow
    }
}