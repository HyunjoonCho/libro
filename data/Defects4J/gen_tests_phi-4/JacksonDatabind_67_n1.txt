import com.fasterxml.jackson.databind.*;
import com.fasterxml.jackson.datatype.guava.deser.ImmutableMapDeserializer;
import com.fasterxml.jackson.datatype.guava.GuavaModule;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.google.common.collect.ImmutableMap;

import org.junit.jupiter.api.Test;

import java.io.IOException;
import java.util.EnumSet;
import java.util.Map;

import static org.junit.jupiter.api.Assertions.assertEquals;

public class EnumKeyDeserializerTest {

    enum SampleEnum {
        VALUE_ONE, VALUE_TWO
    }

    @Test
    public void testMapKeyDeserializerModifiersIgnored() throws IOException, JsonProcessingException {
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new GuavaModule());

        // Register the deserializer modifier
        mapper.getDeserializationConfig().with(new BeanDeserializerModifier() {
            @Override
            public JsonDeserializer<Enum> modifyEnumDeserializer(
                    DeserializationConfig config,
                    final JavaType type,
                    Bean