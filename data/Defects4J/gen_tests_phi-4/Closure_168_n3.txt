import org.junit.Test;
import static org.junit.Assert.fail;

public class PersonTest {

    @Test
    public void testWrongArgumentCountErrorNotReported() {
        try {
            var makeClass = (protoMethods) -> {
                var clazz = () -> {
                    initialize.apply(this, new Object[0]);
                };
                for (var i : protoMethods.entrySet()) {
                    clazz.prototype.put(i.getKey(), i.getValue());
                }
                return clazz;
            };

            @FunctionalInterface
            interface PersonConstructor {
                void apply(String name);
            }

            @FunctionalInterface
            interface PersonPrototype {
                void initialize(String name);
                String getName();
                void say(String message);
            }

            var Person = makeClass((PersonPrototype proto) -> {
                proto.initialize("name");
                proto.getName();
                proto.say("message");
            });

            var joe = new Person("joe") {
                public void say(String message) {
                    var self = this;
                    new Thread(() -> {
                        try {
                            self.getName(1);
                        } catch (Exception e) {
                            // Intentionally ignoring the exception to reproduce the bug
                        }
                    }).start();
                }
            };
            joe.say("hi");

        } catch