public void testNullPointerExceptionWithNaN() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS, true);

    String json = "NaN";
    JsonParser parser = mapper.getFactory().createParser(json);

    parser.nextToken();
    parser.getDecimalValue(); // This should throw NumberFormatException
}