public void testRequiredOptions() {
    Options options = new Options();
    Option hOption = OptionBuilder.withArgName("help").hasArg()
                                 .withDescription("print this message").create("h");
    Option cOption = OptionBuilder.withArgName("config").hasArg()
                                 .withDescription("set config file").create("c");
    options.addOption(hOption);
    options.addOption(cOption);

    CommandLineParser parser = new DefaultParser();
    String[] args = new String[]{"-c", "arg"};
    CommandLine cmd = parser.parse(options, args);

    String expected = "-h";
    String actual = cmd.getOptionValue("h");
    assertEquals(expected, actual);
}