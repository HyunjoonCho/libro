public void testClosureCompilerCrash() {
    String jsCode = 
        "var g=function(m){return m*Math.random()|0},d=document," +
        "h=d.getElementById('h'),c=d.getElementById('c'),l;" +
        "(l=function(){requestAnimationFrame(l);h.style.textShadow=" +
        "\"0 0 1px #000,\"+(g(10)-5)+\"px \"+(g(10)-5)+\"px 0 #888," +
        "0 0 180px rgb(\"+g(255)+\",\"+g(255)+\",\"+g(255)+")\"})();" +
        "d.addEventListener('mousemove',function(v){c.style.marginTop=(v.pageY/10+15|0)+'px'})";

    String compilationLevel = "ADVANCED_OPTIMIZATIONS";
    String outputFormat = "json";
    String outputInfo = "compiled_code,warnings,errors,statistics";
    String warningLevel = "verbose";
    String outputFileName = "default.js";

    // Simulate the Closure Compiler processing
    try {
        compileJavaScript(jsCode, compilationLevel, outputFormat, outputInfo, warningLevel, outputFileName);
    } catch (RuntimeException