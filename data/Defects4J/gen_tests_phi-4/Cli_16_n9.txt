public void testGroupConstraints() {
    Options options = new Options();
    Option groupOption = Option.builder("g").hasArg().desc("Group option").build();
    Option groupA = Option.builder("a").desc("Group A").build();
    
    OptionGroup group = new OptionGroup();
    group.addOption(groupA);
    group.setRequired(true);
    
    options.addOption(groupOption);
    options.addOptionGroup(group);
    
    CommandLineParser parser = new DefaultParser();
    CommandLine cmd = parser.parse(options, new String[]{"-g", "-a"});
    
    assertTrue(cmd.hasOption("g"));
    assertTrue(cmd.hasOption("a"));
    
    // Intentionally failing assertion to replicate the described issue
    assertEquals(1, cmd.getOptionValues("g").length);
}