public void testClassCastExceptionDuringTypeCheck() {
    // Setup context for compilation
    CompilationContext context = new CompilationContext();
    
    // Define a RecordType
    RecordType recordType = new RecordType("Record");
    context.addType(recordType);
    
    // Define a NamedType that references the RecordType
    NamedType namedType = new NamedType("Named", recordType);
    
    // Define a ProxyObjectType referencing the NamedType
    ProxyObjectType proxyType = new ProxyObjectType(namedType);
    
    // Simulate compilation attempt
    try {
        context.compile(proxyType);
    } catch (ClassCastException e) {
        assertTrue("Expected ClassCastException", true);
    } catch (Exception e) {
        fail("Expected ClassCastException, but got: " + e.getClass().getName());
    }
}