public void testCustomSerializerAttribute() throws IOException {
    // Initialize the custom serializer
    ObjectMapper mapper = new ObjectMapper();

    // Create an instance of Data with attribute set
    Data data = new Data();
    data.aStr = "Hello";

    // Create a map and serialize it with the custom serializer
    Map<String, Object> mapTest = new HashMap<>();
    mapTest.put("data", data);
    String mapOut = mapper.writerFor(Data.class).withAttribute("myAttr", "Hello!").writeValueAsString(mapTest);
    assertEquals("{\"data\":{\"aStr\":\"The value is: Hello!\"}}", mapOut);

    // Create an ObjectNode and serialize it with the custom serializer
    ObjectNode treeTest = mapper.createObjectNode();
    treeTest.set("data", mapper.valueToTree(data));
    String treeOut = mapper.writerFor(Data.class).withAttribute("myAttr", "Hello!").writeValueAsString(treeTest);
    assertEquals("{\"data\":{\"aStr\":\"The value is: NULL\"}}", treeOut);
}