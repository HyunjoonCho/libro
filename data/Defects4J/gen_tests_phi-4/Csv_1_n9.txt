public void testExtendedBufferReaderEOLHandling() {
    String input = "Line1\rLine2\nLine3\r\nLine4\rLine5\n";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    assertEquals("Line1", reader.readLine());
    assertEquals("Line2", reader.readLine());
    assertEquals("Line3", reader.readLine());
    assertEquals("Line4", reader.readLine());
    assertEquals("Line5", reader.readLine());

    assertEquals(5, reader.getLineCount());
}