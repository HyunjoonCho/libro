public void testTypeHierarchyAdapter() {
    String jsonCar = "{\"type\":\"car\",\"wheels\":4}";
    String jsonTruck = "{\"type\":\"truck\",\"wheels\":6}";

    ObjectMapper mapper = new ObjectMapper();
    mapper.addTypeHierarchyAdapter(Vehicle.class, new VehicleAdapter());

    assertThrows(RuntimeException.class, () -> {
        Car car = mapper.readValue(jsonTruck, Car.class);
    });

    assertThrows(RuntimeException.class, () -> {
        Truck truck = mapper.readValue(jsonCar, Truck.class);
    });
}