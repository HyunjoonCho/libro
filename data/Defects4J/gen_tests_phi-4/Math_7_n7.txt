public void testEventStateResetIssue() {
    ODESolver solver = new ODESolver();
    EventHandler eventHandler1 = new EventHandler() {
        @Override
        public void eventOccurred(double time, double[] state) {
            // Simulate RESET_STATE request
            solver.requestStateReset();
        }
    };

    EventHandler eventHandler2 = new EventHandler() {
        @Override
        public void eventOccurred(double time, double[] state) {
            // This handler should not be updated correctly if eventHandler1 triggers RESET_STATE
            assert state[0] >= -1 && state[0] <= 1 : "State out of expected bounds";
        }
    };

    solver.addEventHandler(eventHandler1);
    solver.addEventHandler(eventHandler2);

    // Simulate ODE integration step
    double[] initialState = {0.5};
    solver.integrate(0.0, 1.0, initialState);

    // Check if eventHandler2 was not updated correctly
    double[] newState = {1.0e20}; // Simulate incorrect state update
    eventHandler2.eventOccurred(1.0, newState);
}