import static org.junit.Assert.assertEquals;

public void testSwitchedOrderOfStatements() {
    var customData = new java.util.HashMap<>();
    customData.put("key", "value");

    String result = testRemoveKey("key");

    assertEquals("value", result); // 'value' should be returned
    assertEquals(false, customData.containsKey("key")); // 'key' should not be in customData
}

private String testRemoveKey(String key) {
    var dataSlot = customData;
    String retval = (dataSlot!= null)? dataSlot.get(key) : null;
    boolean hadKey = (dataSlot!= null) && dataSlot.containsKey(key);

    if (dataSlot!= null) {
        dataSlot.remove(key);
    }

    return hadKey? retval : null;
}