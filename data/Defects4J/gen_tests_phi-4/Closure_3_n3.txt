public void testOptimizationFailsWithVariableInCatchClause() {
    Throwable result = null;
    try {
        try {
            throw new Error("");
        } catch (Throwable err) {
            result = err;
        }
    } catch (Throwable e) {
        fail("Exception should not reach here.");
    }

    assertNotEquals(null, result);
    assertEquals("Exception message", result.getMessage());
}