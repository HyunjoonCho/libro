public void testEventStateNotUpdated() {
    ODEIntegration integration = new ODEIntegration();
    EventHandler eventHandler1 = new EventHandler() {
        @Override
        public void eventOccurred(double t, double[] y) {
            if (y[0] > 0.5) {
                integration.resetState();
            }
        }
    };

    EventHandler eventHandler2 = new EventHandler() {
        @Override
        public void eventOccurred(double t, double[] y) {
            if (y[1] < -0.5) {
                // This handler should not be affected by the reset triggered by eventHandler1
            }
        }
    };

    integration.addEventHandler(eventHandler1);
    integration.addEventHandler(eventHandler2);

    // Initialize integration state
    double[] initialState = {0.0, -1.0};
    integration.setIntegrationState(initialState);

    // Simulate an ODE step
    integration.performStep();

    // Check that eventHandler2 is not affected by the reset
    double[] currentState = integration.getIntegrationState();
    assertTrue(currentState[0] == 0.0); // Should not have changed
    assertTrue(currentState[1] < -0.5);