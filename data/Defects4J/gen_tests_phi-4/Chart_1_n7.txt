public void testIssue983() {
    AbstractCategoryPlot plot = new CategoryPlot();
    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        public int getIndexOf(AbstractCategoryItemRender item) {
            return 0;
        }
    };
    render.setPlot(plot);

    try {
        render.getLegendItems();
    } catch (NullPointerException e) {
        assertTrue(true); // Expected exception
    }
}