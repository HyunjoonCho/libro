public void testJsonIdentityInfoDeserialization() throws Exception {
    String json = "{\n" +
                  "  \"node\": {\n" +
                  "    \"id\": 1,\n" +
                  "    \"children\": [\n" +
                  "      {\n" +
                  "        \"id\": 2,\n" +
                  "        \"parent\": 1\n" +
                  "      }\n" +
                  "    ]\n" +
                  "  }\n" +
                  "}";

    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);
    mapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true);

    Node root = mapper.readValue(json, Node.class);

    assertEquals(1, root.getChildren().get(0).getParent());
}

@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = "id")
class Node {
    private int id;
    private List<Node> children;

    @JsonCreator
    public Node(@JsonProperty("id") int id, @JsonProperty("children") List<Node> children) {
        this.id = id;
        this.children = children;
    }

    public int getId() {