import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertEquals;

public class RecordTypeTest {

    record Results(Object prop1, String prop2, String prop3) {}

    public Results func(boolean a, boolean b) {
        Results results = null;
        if (a) {
            results = new Results(new Object() {{}}, null, null);
        }
        if (b) {
            results = results == null? new Results(null, "prop2", null) : new Results(results.prop1, "prop2", results.prop3);
        } else {
            results = results == null? new Results(null, null, "prop3") : new Results(results.prop1, results.prop2, "prop3");
        }
        return results;
    }

    @Test
    public void testFuncWithBothConditions() {
        Results result = func(true, true);
        assertEquals(new Object() {}, result.prop1);
        assertEquals("prop2", result.prop2);
        assertEquals(null, result.prop3);
    }

    @Test
    public void testFuncWithFirstCondition() {
        Results result = func(true, false);
        assertEquals(new Object() {}, result.prop1);
        assertEquals(null, result.prop2);