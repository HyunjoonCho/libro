```java
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYDataItem;
import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class XYSeriesBugTest {

    @Test
    public void testAddOrUpdateWithDuplicatesAllowed() {
        XYSeries series = new XYSeries("Test Series") {
            @Override
            public void addOrUpdate(Number x, Number y) {
                int index = indexOf(x);
                if (index >= 0 &&!allowDuplicateXValues) {
                    this.data.set(index, new XYDataItem(x, y));
                } else if (index >= 0) {
                    XYDataItem item = new XYDataItem(x, y);
                    int size = this.data.size();
                    while (index < size && item.compareTo(this.data.get(index)) == 0) {
                        index++;
                    }
                    if (index < this.data.size()) {
                        this.data.add(index, item);
                    } else {
                        this.data.add(item);
                    }
                } else {
                    this.data.add(new XYDataItem(x, y));
                }
                if (getItemCount() > this.maximumItemCount) {
                    this.data.remove(0);
                }
            }
        };