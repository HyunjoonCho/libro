public void testAddOrUpdateWithDuplicates() {
    XYSeries series = new XYSeries("Test Series");
    series.setMaximumItemCount(10);
    series.setAllowDuplicateXValues(true);

    series.addOrUpdate(1.0, 2.0);
    series.addOrUpdate(1.0, 3.0);

    XYSeriesCollection dataset = new XYSeriesCollection(series);
    XYAreaRenderer renderer = new XYAreaRenderer();
    JFreeChart chart = ChartFactory.createXYLineChart(
        "Chart Title", "X-Axis", "Y-Axis", dataset, PlotOrientation.VERTICAL, true, true, false);

    XYPlot plot = (XYPlot) chart.getPlot();
    plot.setRenderer(renderer);

    // Verify that both points exist
    assertEquals(2, series.getItemCount());
    assertEquals(2.0, series.getY(0), 0.0);
    assertEquals(3.0, series.getY(1), 0.0);
}