public void testResettingDefaultNamespaceWithAsPath() {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setNamespaceAware(true);
        DocumentBuilder db = dbf.newDocumentBuilder();
        
        // Create the document structure
        Document doc = db.newDocument();
        Element root = doc.createElementNS("bla", "b:foo");
        root.setAttributeNS("bla", "b:bar", "a");
        Element testElement = doc.createElement("test");
        root.appendChild(testElement);
        
        // Set namespace
        root.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "test111");
        root.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:b", "bla");
        root.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "");
        
        doc.appendChild(root);
        
        // Simulate the issue
        XPathFactory xpf = XPathFactory.newInstance();
        XPath xpath = xpf.newXPath();
        xpath.setNamespaceContext(new NamespaceContext() {
            @Override
            public String getNamespaceURI(String prefix) {
                if ("b".equals(prefix)) {
                    return "bla";