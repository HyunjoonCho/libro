public void testStringUtilsJoinWithNullToString() {
    Exception exception = assertThrows(NullPointerException.class, () -> {
        StringUtils.join(new Object[]{
            new Object() {
                @Override
                public String toString() {
                    return null;
                }
            }
        }, ",");
    });

    assertTrue(exception.getMessage().contains("null"));
}