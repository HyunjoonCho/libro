public void testJsonIdentityReferenceClassOnlySetup() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    static class Parent {
        public Child child;
    }

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    static class Child {
        public String name;
    }

    Parent parent = new Parent();
    Child child = new Child();
    child.name = "child";
    parent.child = child;

    String json = mapper.writeValueAsString(parent);
    
    // Expected: {"id":1,"child":{"id":2,"name":"child"}}
    assertEquals("{\"id\":1,\"child\":{\"id\":2,\"name\":\"child\"}}", json);
}