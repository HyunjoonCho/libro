public void testKeyDeserializerFailure() throws IOException {
    ObjectMapper objectMapper = new ObjectMapper();
    Map<FullName, Double> map = objectMapper.readValue("{\"first.last\": 42}", 
        new TypeReference<Map<FullName, Double>>() {});

    // Expecting an InvalidFormatException due to the issue described
    Exception exception = assertThrows(InvalidFormatException.class, () -> {
        Entry<FullName, Double> entry = map.entrySet().iterator().next();
        assertEquals(entry.getKey()._firstname, "first");
        assertEquals(entry.getKey()._lastname, "last");
        assertEquals(entry.getValue().doubleValue(), 42, 0);
    });

    String expectedMessage = "Can not construct Map key of type KeyVsFieldTest$FullName from String \"first.last\": not a valid representation: wrong number of arguments";
    assertTrue(exception.getMessage().contains(expectedMessage));
}