public void testOptimizationFailsWithVariableInCatchClause() {
    Object function = new Object() {
        public String getStack() {
            String stack = null;
            try {
                throw new RuntimeException("");
            } catch (Exception err) {
                stack = err.getStackTrace().toString();
            }
            return stack;
        }
    };

    String result = (String) function.getStack();
    assertNotNull(result);
}