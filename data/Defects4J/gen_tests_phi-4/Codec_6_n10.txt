public void testBase64InputStreamRead() throws IOException {
    String base64Input = "SGVsbG8gd29ybGQ="; // "Hello world" encoded in Base64
    byte[] decodedBytes = Base64.getDecoder().decode(base64Input);
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(decodedBytes);

    Base64InputStream base64InputStream = new Base64InputStream(byteArrayInputStream, true);
    byte[] buffer = new byte[decodedBytes.length];
    int bytesRead = base64InputStream.read(buffer);

    assertEquals(decodedBytes.length, bytesRead);
}