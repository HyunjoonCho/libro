public void testIoUtilsSkipWithCipherInputStream() throws Exception {
    byte[] originalData = "This is a test data for TarInputStream and CipherInputStream.".getBytes();
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    CipherOutputStream cipherOutputStream = new CipherOutputStream(byteArrayOutputStream, getDummyCipher());
    cipherOutputStream.write(originalData);
    cipherOutputStream.close();
    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(byteArrayOutputStream.toByteArray());
    InputStream cipherInputStream = new CipherInputStream(byteArrayInputStream, getDummyCipher());
    TarInputStream tarInputStream = new TarInputStream(cipherInputStream);

    // Attempt to skip bytes
    long skipped = IOUtils.skip(tarInputStream, originalData.length / 2);
    assertEquals(originalData.length / 2, skipped);

    // Verify the skipped bytes
    byte[] buffer = new byte[originalData.length / 2];
    int bytesRead = tarInputStream.read(buffer);
    assertEquals(originalData.length / 2, bytesRead);
    assertArrayEquals(Arrays.copyOfRange(originalData, originalData.length / 2, originalData.length), buffer);
}