public void testRecursiveTypeSerialization() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enableDefaultTyping(new DefaultTyping(DefaultTyping.AsProperty.INSTANCE));
    
    Base base = new Base();
    Sub sub = new Sub();

    String expectedJson = "{\"@type\":\"class com.example.Base\",\"base\":1,\"sub\":2}";
    String actualJson = mapper.writeValueAsString(sub);

    assertEquals(expectedJson, actualJson);
}

Make sure to replace `com.example.Base` with the actual package name where `Base` is located.