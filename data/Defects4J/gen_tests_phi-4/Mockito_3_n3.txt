public void testArgumentCaptorForVarargs() {
    List<String> mockedList = mock(List.class);
    mockedList.add("one");
    mockedList.add("two");
    mockedList.add("three");

    verify(mockedList).add("two");
    verify(mockedList).add("three");

    ArgumentCaptor<String> argument = ArgumentCaptor.forClass(String.class);
    verify(mockedList).addAll(argument.capture());

    List<String> values = argument.getAllValues();
    assertEquals(Arrays.asList("one", "two", "three"), values);
}