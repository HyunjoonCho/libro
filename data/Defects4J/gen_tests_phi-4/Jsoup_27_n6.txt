public void testInvalidHTTPResponseHeader() throws Exception {
    String invalidCharset = "UFT8"; // Incorrect charset
    byte[] byteData = "Sample data".getBytes("UTF-8");
    String baseUri = "http://example.com";
    Parser parser = Parser.htmlParser();

    try {
        Validate.notEmpty(invalidCharset, "Must set charset arg to character set of file to parse. Set to null to attempt to detect from HTML");
        String docData = Charset.forName(invalidCharset).decode(ByteBuffer.wrap(byteData)).toString();
        fail("Expected UnsupportedCharsetException to be thrown");
    } catch (UnsupportedCharsetException e) {
        // Expected exception
    }

    // Verify fallback parsing works
    String result = parseByteData(byteData, null, baseUri, parser);
    assertNotNull(result);
}