public void testPrototypeMethodRemoval() {
    class FooBar {
        public void bar1() {
            System.out.println("bar1");
        }
    }

    class Foo {
        public FooBar bar;
        public FooBar foobar;

        public Foo() {
            bar = new FooBar();
            foobar = new FooBar(bar);
        }
    }

    Foo foo = new Foo();
    foo.foobar.bar1(); // Should print "bar1"
    assertEquals(null, foo.foobar.bar1); // Should fail if method is removed
}