public void testCommandLineOptionValue() {
    Options options = new Options();
    Option debug = Option.builder("d")
                        .hasArg()
                        .withLongOpt("debug")
                        .desc("turn on debugging")
                        .create();

    options.addOption(debug);

    CommandLineParser parser = new DefaultParser();
    String[] args = {"--debug", "true"};

    try {
        CommandLine commandLine = parser.parse(options, args);
        String dbg = commandLine.getOptionValue("debug");
        assertEquals("true", dbg);
    } catch (ParseException e) {
        fail("Parsing failed: " + e.getMessage());
    }
}