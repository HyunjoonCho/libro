public void testTokenBufferDeserialization() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    String json = "{\"a\":1,\"b\":null}";

    // Attempt to deserialize using a TokenBuffer to capture the tokens
    TokenBuffer buffer = new TokenBuffer(mapper.getFactory(), false);
    JsonParser parser = mapper.getFactory().createParser(json);
    buffer.copyCurrentStructure(parser);
    parser.close();

    // Check the current token and buffer content
    assertEquals(JsonToken.START_OBJECT, buffer.getCurrentToken());
    JsonParser bufferParser = buffer.asParser();
    
    // Capture the tokens from the buffer
    List<JsonToken> tokenList = new ArrayList<>();
    while (!bufferParser.isClosed()) {
        tokenList.add(bufferParser.nextToken());
    }
    
    // Expected tokens: [START_OBJECT, FIELD_NAME, VALUE_NUMBER_INT, FIELD_NAME, VALUE_NULL, END_OBJECT]
    List<JsonToken> expectedTokens = Arrays.asList(
        JsonToken.START_OBJECT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NUMBER_INT,
        JsonToken.FIELD_NAME,
        JsonToken.VALUE_NULL,
        JsonToken.END_OBJECT
    );

    assertEquals(expectedTokens, tokenList);
}