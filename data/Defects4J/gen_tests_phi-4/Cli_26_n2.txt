import org.apache.commons.cli.*;
import static org.junit.Assert.*;

public void testOptionBuilderResetAfterIAE() {
    Options options = new Options();
    try {
        OptionBuilder.withArgName("target")
                    .hasArg()
                    .withDescription("The target directory")
                    .create("t");
    } catch (IllegalArgumentException e) {
        // Expected exception handling
    }
    
    OptionBuilder.withArgName("output")
                .hasArg()
                .withDescription("The output file")
                .create("o");
    
    Option option = new Option("t", "target", true, "The target directory");
    options.addOption(option);
    
    // Verify that the option is correctly set without interference from the previous failed creation
    assertTrue(options.hasOption("t"));
    assertTrue(options.hasOption("o"));
}