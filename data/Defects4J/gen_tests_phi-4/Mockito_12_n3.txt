public void testArgumentCaptorVarargsIssue() {
    List<String> mockedList = mock(List.class);

    mockedList.add("first", "second", "third");

    ArgumentCaptor<String> argumentCaptor = ArgumentCaptor.forClass(String.class);

    verify(mockedList).add(argumentCaptor.capture(), argumentCaptor.capture(), argumentCaptor.capture());

    List<String> allValues = argumentCaptor.getAllValues();
    assertEquals(Arrays.asList("first", "second", "third"), allValues);
}