public void testAdvancedOptimizationsIssue() {
    // Prepare the JavaScript code
    String inputJs = "window['anchor'] = function (obj, modifiesProp) {\n" +
                     "return (function (saved) {\n" +
                     "return modifiesProp(obj) + saved;\n" +
                     "})(obj['prop']);\n" +
                     "};\n" +
                     "window['modifiesProp'] = function(obj) {\n" +
                     "obj['prop'] = 10;\n" +
                     "return 5;\n" +
                     "};\n" +
                     "window['obj'] = { 'prop': 3 };\n" +
                     "console.log(window['anchor'](window['obj'], window['modifiesProp']));\n";

    // Expected output should be 15 (5 + 3 before modification)
    String expectedOutput = "15\n";

    // Compile the JavaScript using the specified settings
    String outputJs = compileJavaScript(inputJs);

    // Execute the compiled JavaScript
    String actualOutput = executeJavaScript(outputJs);

    // Assert that the output matches the expected output
    assertEquals(expectedOutput, actualOutput);
}

// Mock methods for compilation