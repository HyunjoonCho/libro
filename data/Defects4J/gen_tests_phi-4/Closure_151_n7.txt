public void testVersionOptionFailure() {
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
    Process process = processBuilder.start();
    
    int exitCode = process.waitFor();
    assertEquals("Expected --version to succeed but encountered an error", 0, exitCode);
    
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getErrorStream()))) {
        String errorLine;
        while ((errorLine = reader.readLine())!= null) {
            if (errorLine.contains("--version is not supported")) {
                fail("Received error indicating --version is not supported: " + errorLine);
            }
        }
    } catch (IOException e) {
        fail("Error reading process output: " + e.getMessage());
    }
}