public void testFailsWithNonFinalTyping() throws JsonParseException, JsonMappingException, IOException {
    ObjectMapper mapper = new ObjectMapper().enableDefaultTyping(DefaultTyping.NON_FINAL);
    TestClass testInstance = mapper.readValue("{\"mapProperty\":[\"java.util.HashMap\",{\"Compound|Key\":\"Value\"}]}",
            TestClass.class);
    String testInstanceSerialized = mapper.writeValueAsString(testInstance);
    String expected = "{\"mapProperty\":{\"Compound|Key\":\"Value\"}}";
    assertEquals(expected, testInstanceSerialized);
}

This test method reproduces the failure behavior described in the bug report by attempting to deserialize and serialize a JSON object with `DefaultTyping.NON_FINAL` enabled, without explicitly registering the custom key deserializer module. The expected serialized output does not match the actual result due to the issue.