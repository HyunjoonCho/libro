public void testInjectMocksFinalField() {
    class TestClass {
        private final Dependency dependency = new Dependency();

        void methodUnderTest() {
            dependency.performAction();
        }
    }

    class Dependency {
        void performAction() {
            // Some action
        }
    }

    TestClass testClass = mock(TestClass.class, withSettings()
       .useConstructor())
       .whenNew()
       .withNoArguments()
       .thenReturn(testClass);

    Dependency dependencyMock = mock(Dependency.class);

    MockitoAnnotations.openMocks(testClass);
    Mockito.when(testClass.dependency).thenReturn(dependencyMock);

    testClass.methodUnderTest();

    verify(dependencyMock).performAction();
}