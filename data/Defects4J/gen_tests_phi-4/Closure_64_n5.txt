public void testECMAScript5StrictOutput() throws Exception {
    String expectedOutput = "'use strict';alert(5);";
    String output = executeCompilerCommand(
        "--language_in=ECMASCRIPT5_STRICT",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--warning_level=VERBOSE",
        "--js", "get_num.js",
        "--js", "alert.js"
    );

    assertEquals(expectedOutput, output);
}

private String executeCompilerCommand(String... args) throws Exception {
    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", args);
    Process process = pb.start();

    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
        return reader.lines().collect(Collectors.joining("\n"));
    }
}