public void testGsonTypeResolution() {
    Gson gson = new Gson();

    // Create an instance to trigger the recursive resolution
    Foo1<?> foo1 = new Foo1<>() {{
        foo2 = new Foo2<>() {{
            foo1 = this; // This creates a circular reference
        }};
    }};
    
    // Attempt to get an adapter, which should trigger the type resolution
    gson.getAdapter(Foo1.class).write(gson, foo1);
}