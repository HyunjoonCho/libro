public void testJsonIgnorePropertiesAllowSetters() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);

    JsonTest json = new JsonTest("user", "password");

    String jsonString = mapper.writeValueAsString(json);
    assertEquals("{\"username\":\"user\"}", jsonString);

    jsonString = "{\"username\":\"username\",\"password\":\"password\"}";

    try {
        json = mapper.readValue(jsonString, JsonTest.class);
        assertEquals("password", json.getPassword());
    } catch (IOException e) {
        e.printStackTrace();
        fail("Deserialization failed");
    }
}