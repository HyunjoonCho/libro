public void testIssue983() {
    AbstractCategoryItemRender itemRender = new AbstractCategoryItemRender() {
        @Override
        public Plot getPlot() {
            return new Plot() {
                @Override
                public int getIndexOf(AbstractCategoryItemRenderer renderer) {
                    return 0;
                }

                @Override
                public CategoryDataset getDataset(int index) {
                    return null;
                }
            };
        }
    };

    try {
        itemRender.getLegendItems();
        fail("Expected NullPointerException");
    } catch (NullPointerException e) {
        // Expected exception due to null dataset
    }
}