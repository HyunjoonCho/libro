public void testJsonWriterLenientModeWithDouble() {
    JsonFactory factory = new JsonFactory();
    StringWriter out = new StringWriter();
    try (JsonWriter writer = factory.createJsonWriter(out)) {
        writer.configure(JsonGenerator.Feature.AUTO_CLOSE_TARGET, false);
        writer.setCodec(new JsonCodec() {
            @Override
            public void configure(JsonGenerator.Feature traceEnable, boolean state) throws IOException {
            }

            @Override
            public void serialize(Object value, JsonGenerator gen) throws IOException {
                gen.value(value);
            }

            @Override
            public void serialize(Object value, JsonGenerator gen, boolean serializeAsArray) throws IOException {
                gen.value(value);
            }
        });
        writer.useDefaultPrettyPrinter();
        writer.configure(JsonGenerator.Feature.ESCAPE_NON_ASCII, false);
        writer.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, false);
        writer.configure(JsonGenerator.Feature.CLOSE_CURLY_BRACE_AT_EOF, false);
        writer.configure(JsonGenerator.Feature.QUOTE_NON_NUMERIC_NUMBERS, false);
        writer.configure(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN, false);
        writer.configure(JsonGenerator.Feature.WRITE_BIG_INTEGER_AS_PLAIN, false);
        writer.configure(JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS, false