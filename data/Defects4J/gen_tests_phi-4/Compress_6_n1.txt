public void testZipFileCreationWithHashCollision() {
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    try (ZipOutputStream zipOutputStream = new ZipOutputStream(byteArrayOutputStream)) {
        String commonName = "file";
        for (int i = 0; i < 1000; i++) {
            String fileName = commonName + i;
            ZipArchiveEntry zipEntry = new ZipArchiveEntry(fileName);
            zipEntry.setSize(0); // Set size to 0 for simplicity
            zipOutputStream.putArchiveEntry(zipEntry);
            zipOutputStream.closeArchiveEntry();
        }
    } catch (IOException e) {
        fail("IOException occurred during zip creation: " + e.getMessage());
    }

    byte[] zipBytes = byteArrayOutputStream.toByteArray();

    try (ZipInputStream zipInputStream = new ZipInputStream(new ByteArrayInputStream(zipBytes))) {
        ZipEntry zipEntry;
        int entryCount = 0;
        while ((zipEntry = zipInputStream.getNextEntry())!= null) {
            zipInputStream.closeEntry();
            entryCount++;
        }
        assertEquals(1000, entryCount);
    } catch (IOException e) {
        fail("IOException occurred during zip reading: " + e.getMessage());
    }
}