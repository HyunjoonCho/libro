public void testAssignmentToObjectInConditional() {
    class Result {
        Object prop1;
        String prop2;
        String prop3;
        
        @Override
        public boolean equals(Object obj) {
            if (this == obj) return true;
            if (obj == null || getClass()!= obj.getClass()) return false;
            Result result = (Result) obj;
            return (prop1 == result.prop1 || (prop1!= null && prop1.equals(result.prop1))) &&
                   (prop2!= null? prop2.equals(result.prop2) : result.prop2 == null) &&
                   (prop3!= null? prop3.equals(result.prop3) : result.prop3 == null);
        }
    }

    Result func(boolean a, boolean b) {
        Result results = null;
        if (a) {
            results = new Result();
            results.prop1 = new Object() {{ int a = 3; }};
        }
        if (b) {
            if (results == null) results = new Result();
            results.prop2 = "prop2";
        } else {
            if (results == null) results = new Result();
            results.prop3 = "prop3";
        }
        return results;