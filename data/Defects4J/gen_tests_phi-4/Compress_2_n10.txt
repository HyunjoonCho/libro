public void testArArchiveDeletion() throws IOException {
    // Create a temporary directory
    Path tempDir = Files.createTempDirectory("arTest");
    Path arFilePath = tempDir.resolve("bla.ar");

    // Create an archive with test1.xml and test2.xml
    try (ArFile arFile = new ArFile(arFilePath.toFile(), "w")) {
        arFile.addEntry(new ArEntry("test1.xml", new ByteArrayInputStream("content1".getBytes())));
        arFile.addEntry(new ArEntry("test2.xml", new ByteArrayInputStream("content2".getBytes())));
    }

    // Open the archive for reading and deleting test2.xml
    try (ArFile arFile = new ArFile(arFilePath.toFile(), "r")) {
        ArEntry nextEntry;
        while ((nextEntry = arFile.getNextEntry())!= null) {
            if ("test2.xml".equals(nextEntry.getFilename())) {
                arFile.deleteEntry();
                break;
            }
            arFile.closeEntry();
        }
    }

    // Verify that test2.xml is still present using command line
    ProcessBuilder pb = new ProcessBuilder("ar", "-t", arFilePath.toString());
    Process process = pb.start();
    try (BufferedReader