public void testJsonWriterValueDoubleNotLenient() {
    JsonWriter writer = new JsonWriter(new StringWriter());
    writer.setLenient(true);
    
    Throwable exception = assertThrows(IllegalArgumentException.class, () -> {
        writer.value(Double.NaN);
    });
    
    String expectedMessage = "Numeric values must be finite, but was NaN";
    assertEquals(expectedMessage, exception.getMessage());
}