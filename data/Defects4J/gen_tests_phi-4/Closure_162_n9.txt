public void testTypeAliasBeforeDefinition() {
    try {
        new foo.Foo(new foo.Foo.Bar()); // This should trigger the error
    } catch (Exception e) {
        assertTrue(e.getMessage().contains("Bad type annotation. Unknown type Foo.Bar"));
    }
}