public void testDefaultDateTypeAdapterNullability() {
    Gson gson = new GsonBuilder()
       .registerTypeAdapter(Date.class, new DefaultDateTypeAdapter())
       .create();

    String json = gson.toJson((Date) null);
    assertNull(json);

    Date date = new Date();
    json = gson.toJson(date);
    assertNotNull(json);

    Date deserializedDate = gson.fromJson(json, Date.class);
    assertNotNull(deserializedDate);
}