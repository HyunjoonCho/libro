public void testSwfobjectError() {
    String input = "\"<>.;";
    boolean hasBadChars = input.matches("[\\\"<>.;]");
    
    // Simulate the closure compiled function
    String encoded = hasBadChars && "undefined"!= "undefined"? java.net.URLEncoder.encode(input, "UTF-8") : input;
    
    // Expect the original input to be encoded due to bad characters
    assertEquals("%22%3C%3E%3B%2E", encoded);
}

This test checks if the `urlEncodeIfNecessary` function correctly identifies and encodes strings with special characters, similar to the original JavaScript function. The test uses Java's `URLEncoder` to mimic `encodeURIComponent`.