public void testUnknownCompressedSizeForBZip2() {
    ZipArchiveEntry entry = new ZipArchiveEntry("test.bz2");
    entry.setCompressedSize(ArchiveEntry.SIZE_UNKNOWN);
    entry.setMethod(ZipMethod.BZIP2.getCode());

    ZipArchiveInputStream zipInputStream = new ZipArchiveInputStream(new ByteArrayInputStream(new byte[0]));
    try {
        zipInputStream.getNextZipEntry(); // Simulate getting the entry
        zipInputStream.getNextZipEntry(); // Simulate getting an entry with unknown compressed size

        // Expect an exception to be thrown due to unknown compressed size
        zipInputStream.read(); // This should trigger the failure
        fail("Expected an exception to be thrown due to unknown compressed size for BZIP2");
    } catch (IOException e) {
        assertTrue(e.getMessage().contains("compressed size is unknown"));
    }
}