public void testBZip2ReadTruncated() throws IOException {
    // Create a truncated BZip2 compressed file
    File tempFile = File.createTempFile("testBzip2", ".bz2");
    tempFile.deleteOnExit();

    try (FileOutputStream fos = new FileOutputStream(tempFile)) {
        try (BZip2CompressorOutputStream bzip2Out = new BZip2CompressorOutputStream(fos)) {
            byte[] data = new byte[1024];
            new SecureRandom().nextBytes(data);
            bzip2Out.write(data, 0, 770); // Write 770 bytes
        }
    }

    // Read from the truncated file
    try (BZip2CompressorInputStream bzip2In = new BZip2CompressorInputStream(new FileInputStream(tempFile))) {
        byte[] buffer = new byte[1024];
        int bytesRead = bzip2In.read(buffer);
        assertEquals(770, bytesRead); // Expecting to read 770 bytes, as CPython does
    }
}