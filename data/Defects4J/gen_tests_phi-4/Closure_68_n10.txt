public void testCrypticErrorMessage() throws Exception {
    String jsCode = 
        "/**\n" +
        " * @type function\n" +
        " */\n" +
        "var callback;";

    ProcessBuilder pb = new ProcessBuilder("java", "-jar", "compiler.jar", "--js", jsCode);
    pb.redirectErrorStream(true);
    Process process = pb.start();

    try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
        String line;
        boolean warningFound = false;
        while ((line = reader.readLine())!= null) {
            if (line.contains("test.js:3: WARNING - Parse error. Unexpected end of file")) {
                warningFound = true;
            }
        }
        assertTrue("Expected a more descriptive warning message", warningFound);
    }
}