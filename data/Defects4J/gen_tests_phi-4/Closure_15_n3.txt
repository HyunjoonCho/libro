import org.junit.Test;
import static org.junit.Assert.*;

public class CustomDataTest {

    @Test
    public void testRemoveKeyOrderChange() {
        var customData = new Object() {{
            final String key = "value";
        }};

        Object testRemoveKey(String key) {
            Object dataSlot = customData;
            Object retval = dataSlot!= null && key.equals(dataSlot);
            boolean hadKey = dataSlot!= null && dataSlot.toString().equals(key);

            if (dataSlot!= null)
                dataSlot = null;

            return hadKey? retval : null;
        }

        assertEquals(null, testRemoveKey("key"));
        assertFalse(customData.toString().equals("key"));
    }
}