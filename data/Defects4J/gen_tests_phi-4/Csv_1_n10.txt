public void testExtendedBufferReaderEOLHandling() {
    String input = "Line1\rLine2\nLine3\r\nLine4";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    assertEquals("Line1", reader.readLine());
    assertEquals("Line2", reader.readLine());
    assertEquals("Line3", reader.readLine());
    assertEquals("Line4", reader.readLine());
    
    int expectedLineCount = 4;
    assertEquals(expectedLineCount, reader.getLineCount());
}