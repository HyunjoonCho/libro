public void testDateTimeSerializerBaseIgnoreFormat() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();

    // Custom format via StdDateFormat
    StdDateFormat customFormat = new StdDateFormat(DateTimeFormatter.ofPattern("yyyy-MM-dd"));
    mapper.registerModule(module);
    mapper.setDateFormat(customFormat);

    // Annotate with @JsonFormat but without specifying a pattern
    class TestClass {
        @JsonFormat(shape = JsonFormat.Shape.STRING)
        public Date date;
    }

    TestClass testInstance = new TestClass();
    testInstance.date = Date.from(LocalDate.of(2023, 10, 1).atStartOfDay(ZoneId.systemDefault()).toInstant());

    // Serialize using the configured custom format
    String serialized = mapper.writeValueAsString(testInstance);

    // Check if the serialized date uses ISO8601 format instead of the custom one
    assertTrue(serialized.contains("\"2023-10-01T00:00:00.000Z\"")); // ISO8601 format
}