public void testJsonWriterValueDoubleLeniency() {
    JsonWriter writer = Json.createWriterFactory(new JsonWriterFactory.Builder()
       .lenient(true)
       .build())
       .createWriter(new StringWriter());

    // Attempt to write NaN in lenient mode using JsonWriter#value(double)
    try {
        writer.value(Double.NaN);
        fail("Expected IllegalArgumentException for NaN in lenient mode using double");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }

    writer.close();
}