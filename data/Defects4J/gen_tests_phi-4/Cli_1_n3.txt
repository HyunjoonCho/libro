public void testCommandLineGetOptionValue() {
    Options options = new Options();
    Option debugOption = Option.builder("debug")
       .withDescription("turn on debugging")
       .create('d');
    options.addOption(debugOption);

    CommandLineParser parser = new DefaultParser();
    CommandLine commandLine = null;

    try {
        commandLine = parser.parse(options, new String[]{"--debug"});
    } catch (ParseException e) {
        fail("Exception should not be thrown");
    }

    String dbg = commandLine.getOptionValue("debug");
    assertNull("Expected null for full string option query", dbg);

    dbg = commandLine.getOptionValue('d');
    assertNotNull("Expected non-null for short option query", dbg);
    assertEquals("Expected 'true' for debug option", "true", dbg);
}