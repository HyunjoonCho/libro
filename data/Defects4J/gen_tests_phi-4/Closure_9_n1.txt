public void testCompilerFindsAmdModuleInSubdirectory() {
    String[] compileCommand = {
        "java", "-jar", "compiler.jar",
        "--transform_amd_modules",
        "--process_common_js_modules",
        "--common_js_entry_module=Bar.js",
        "--compilation_level=ADVANCED_OPTIMIZATIONS",
        "--js_output_file=out.js",
        "--js=Bar.js",
        "--js=lib/Foo.js"
    };

    try {
        Process process = Runtime.getRuntime().exec(compileCommand);
        int exitCode = process.waitFor();
        assertEquals(0, exitCode, "Compiler should succeed without errors");

        // Check if the output file is created
        assertTrue(new File("out.js").exists(), "Output file should be generated");

    } catch (Exception e) {
        fail("Unexpected exception during compilation: " + e.getMessage());
    }
}