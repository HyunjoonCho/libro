public void testBase64InputStreamNullPointerException() {
    byte[] input = "H4sIAAAAAAAAAFvzloG1uIhBKiuxLFGvODW5tCizpFIvODM9LzXFPykrNbmE8//eDC2bq/+ZGJijGdiT8/NKUvNKShiYop2iGTiLgQoTS0qLUgsZ6hgYfRh4SjJSE3PS84GmZOSWMAj5gMzVz0nMS9cP".getBytes();
    byte[] outputBuffer = new byte[1024];
    try (ByteArrayInputStream bais = new ByteArrayInputStream(input);
         Base64InputStream bis = new Base64InputStream(bais)) {
        int bytesRead = bis.read(outputBuffer);
        // Expecting an exception
        assert bytesRead == -1 && bis.read(outputBuffer) == -1;
    } catch (NullPointerException e) {
        // Expected exception
    }
}