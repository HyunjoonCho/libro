public void testPosixParserStopsAtNonOption() {
    PosixParser parser = new PosixParser();
    parser.addOption('a', "a", false, "Option A");
    parser.addOption('b', "b", true, "Option B");
    parser.setStopAtNonOption(true);

    Options options = new Options();
    options.addOption('a', "a");
    options.addOption('b', "b", true, "Option B");
    
    try {
        parser.parse(options, new String[]{"--zop", "-abfoo"});
        fail("Expected ParseException due to unrecognized option '--zop'");
    } catch (ParseException e) {
        assertEquals("Unrecognized option: '--zop'", e.getMessage());
    }
    
    Options parsedOptions;
    try {
        parsedOptions = parser.parse(options, new String[]{"-a", "-bfoo"});
        assertEquals("bfoo", parsedOptions.getOptionValue('b'));
    } catch (ParseException e) {
        fail("Did not expect a ParseException: " + e.getMessage());
    }
}