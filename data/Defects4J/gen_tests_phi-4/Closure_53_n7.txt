public void testCompilerCrash() {
    String jsCode = "function SoundManager2() {" +
                    "  this.players = [];" +
                    "  this.createPlayer(); // This is just a dummy call to mimic the library structure" +
                    "  // More code from the SoundManager2 library" +
                    "}";

    Compiler compiler = new Compiler();
    compiler.setCompilationLevel(Compiler.CompilationLevel.SIMPLE_OPTIMIZATIONS);
    compiler.setOutputFileName("default.js");
    compiler.setCode(jsCode);

    try {
        compiler.compile();
        fail("Expected an IndexOutOfBoundsException due to compiler crash");
    } catch (IndexOutOfBoundsException e) {
        assertTrue(e.getMessage().contains("index(1) must be less than size(1)"));
    }
}