public void testArgumentCaptorForVarargs() {
    List<String> list = mock(List.class);
    Method method = TestClass.class.getMethod("testMethod", String[].class);

    doNothing().when(list).doSomething((String... args) -> {
        assertEquals(3, args.length);
        assertEquals("arg1", args[0]);
        assertEquals("arg2", args[1]);
        assertEquals("arg3", args[2]);
    });

    TestClass testClass = new TestClass(list);
    testClass.testMethod("arg1", "arg2", "arg3");

    verify(list).doSomething("arg1", "arg2", "arg3");
}

// Assuming TestClass and its method are defined as follows:
class TestClass {
    private final List<String> list;

    TestClass(List<String> list) {
        this.list = list;
    }

    void testMethod(String... args) {
        list.doSomething(args);
    }
}