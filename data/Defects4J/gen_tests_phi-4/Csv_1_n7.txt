public void testExtendedBufferReaderEOLHandling() {
    String input = "Line1\rLine2\nLine3\r\nLine4\r";
    ExtendedBufferReader reader = new ExtendedBufferReader(new StringReader(input));
    
    assertEquals("Line1", reader.readLine());
    assertEquals(2, reader.getLineCount()); // CR should increment line count
    assertEquals("Line2", reader.readLine());
    assertEquals(3, reader.getLineCount()); // LF should increment line count
    assertEquals("Line3", reader.readLine());
    assertEquals(4, reader.getLineCount()); // CRLF should increment line count
    assertEquals("Line4", reader.readLine());
    assertEquals(5, reader.getLineCount()); // CR should increment line count
}