public void testCollatedIteratorNaturalOrdering() {
    List<Integer> list = Arrays.asList(3, 1, 2);
    Iterator<Integer> iterator = IteratorUtils.collatedIterator(list, null);
    
    try {
        iterator.next();
        fail("Expected an exception due to missing comparator");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }
    
    List<Integer> sortedList = Arrays.asList(1, 2, 3);
    iterator = IteratorUtils.collatedIterator(list, Comparator.naturalOrder());
    List<Integer> result = new ArrayList<>();
    while (iterator.hasNext()) {
        result.add(iterator.next());
    }
    assertEquals(sortedList, result);
}