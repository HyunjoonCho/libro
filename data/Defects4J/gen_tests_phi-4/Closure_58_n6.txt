public void testClosureCompilerJavaError() throws Exception {
    // Simulate sending JavaScript code to the Closure Compiler
    String url = "http://closure-compiler.appspot.com/compile";
    String jsCode = "function keys(obj) {\n" +
                    "  var a = [], i = 0;\n" +
                    "  for (a[i++] in obj)\n" +
                    "  ;\n" +
                    "  return a;\n" +
                    "}";
    String jsonInput = "{\"js_code\": \"" + jsCode + "\", \"compilation_level\": \"SIMPLE_OPTIMIZATIONS\"}";

    // Use HttpURLConnection to send the request
    URL obj = new URL(url);
    HttpURLConnection con = (HttpURLConnection) obj.openConnection();
    con.setRequestMethod("POST");
    con.setRequestProperty("Content-Type", "application/json");
    con.setDoOutput(true);

    // Send the request
    try (DataOutputStream wr = new DataOutputStream(con.getOutputStream())) {
        wr.writeBytes(jsonInput);
    }

    // Get the response
    int responseCode = con.getResponseCode();
    if (responseCode!= HttpURLConnection.HTTP_OK) {
        throw new RuntimeException("Failed : HTTP error code : " + responseCode