public void testArgumentCaptorWithVarargs() {
    List<Integer> list = mock(List.class);
    int[] numbers = {1, 2, 3};

    list.addAll(Arrays.asList(numbers));

    ArgumentCaptor<int[]> captor = ArgumentCaptor.forClass(int[].class);
    verify(list).addAll(captor.capture());

    assertArrayEquals(new int[]{1, 2, 3}, captor.getValue());
}