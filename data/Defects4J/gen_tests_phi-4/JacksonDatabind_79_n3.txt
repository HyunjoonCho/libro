public void testJsonIdentityReferenceClassOnly() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    static class Entity {
        public int id;
        public Entity() {}
    }

    static class Container {
        @JsonIdentityReference(alwaysAsId = true)
        public Entity entity = new Entity();
    }

    Container container = new Container();
    String json = mapper.writeValueAsString(container);

    // Expecting JSON to serialize entity as an object ID
    assertEquals("{\"entity\":1}", json);
}