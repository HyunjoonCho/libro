public void testArchiveStreamFactoryEncoding() {
    String encoding = "UTF-8";
    ArchiveStreamFactory factory = new ArchiveStreamFactory();

    try (ArjArchiveInputStream arjStream = (ArjArchiveInputStream) factory.createArchiveInputStream(encoding, new ByteArrayInputStream(new byte[0]))) {
        assertEquals(encoding, arjStream.getEncoding());
    }

    try (CpioArchiveInputStream cpioStream = (CpioArchiveInputStream) factory.createArchiveInputStream(encoding, new ByteArrayInputStream(new byte[0]))) {
        assertEquals(encoding, cpioStream.getEncoding());
    }

    try (DumpArchiveInputStream dumpStream = (DumpArchiveInputStream) factory.createArchiveInputStream(encoding, new ByteArrayInputStream(new byte[0]))) {
        assertEquals(encoding, dumpStream.getEncoding());
    }

    try (JarArchiveInputStream jarStream = (JarArchiveInputStream) factory.createArchiveInputStream(encoding, new ByteArrayInputStream(new byte[0]))) {
        assertEquals(encoding, jarStream.getEncoding());
    }

    try (ByteArrayOutputStream baos = new ByteArrayOutputStream();
         JarArchiveOutputStream jarOutputStream = (JarArchiveOutputStream) factory.createArchiveOutputStream(encoding, baos)) {
        assertEquals(encoding, jarOutputStream.getEncoding());
    }
}