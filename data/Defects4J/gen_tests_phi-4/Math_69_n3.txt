public void testPearsonsCorrelationPrecision() {
    double[] x = new double[1000];
    double[] y = new double[1000];
    Arrays.fill(x, 1.0);
    for (int i = 0; i < y.length; i++) {
        y[i] = 0.5 * i;
    }

    PearsonsCorrelation correlation = new PearsonsCorrelation();
    double tStatistic = correlation.correlation(x, y);
    TDistribution tDistribution = new TDistribution(x.length - 2);

    // Original calculation that might result in precision loss
    double originalPValue = 2.0 * (1 - tDistribution.cumulativeProbability(tStatistic));

    // Modified calculation to avoid precision loss
    double correctedPValue = 2.0 * tDistribution.cumulativeProbability(-tStatistic);

    // Assuming a threshold to check if the original calculation results in 0
    final double THRESHOLD = 1e-15;
    assertTrue("Original p-value should not be zero due to precision issues", originalPValue > THRESHOLD);

    // Comparing original and corrected p-values to ensure they are reasonably close
    assertEquals(correctedPValue, originalPValue