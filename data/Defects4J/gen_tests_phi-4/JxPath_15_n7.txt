public void testIssueCoreUnionOperation() {
    Document document = createDocument(
        "<MAIN><A>avalue</A><B>bvalue</B></MAIN>"
    );

    XPathExpression expr = XPathFactory.newInstance().newXPath().compile("/MAIN/B | /MAIN/A");
    String result = (String) expr.evaluate(document, XPathConstants.STRING);

    assertEquals("avalue", result);
}

private Document createDocument(String xmlContent) {
    try {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        return builder.parse(new InputSource(new StringReader(xmlContent)));
    } catch (Exception e) {
        throw new RuntimeException("Error creating Document", e);
    }
}