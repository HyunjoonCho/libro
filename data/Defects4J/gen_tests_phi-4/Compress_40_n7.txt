public void testOverflowInBitInputStream() {
    ByteArrayInputStream in = new ByteArrayInputStream(new byte[] { 87, 45, 66, 15, 90, 29, 88, 61, 33, 74 });
    BitInputStream bin = new BitInputStream(in, ByteOrder.LITTLE_ENDIAN);

    try {
        long ret1 = bin.readBits(5);
        long ret2 = bin.readBits(63);
        long ret3 = bin.readBits(12);
        assertEquals(0x3c0, ret3); // Expected correct result after fixing overflow issue
    } catch (Exception e) {
        fail("Exception thrown during bit reading: " + e.getMessage());
    }
}