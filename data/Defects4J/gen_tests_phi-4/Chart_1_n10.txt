public void testIssue983() {
    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        public Plot getPlot() {
            return new Plot() {
                @Override
                public int getIndexOf(CategoryItemRenderer renderer) {
                    return 0;
                }

                @Override
                public CategoryDataset getDataset(int datasetIndex) {
                    return null; // Simulate dataset being null
                }
            };
        }
    };

    LegendItemCollection legendItems = render.getLegendItems();
    // Verify that no NullPointerException is thrown and an empty collection is returned
    assertNotNull(legendItems);
    assertEquals(0, legendItems.size());
}