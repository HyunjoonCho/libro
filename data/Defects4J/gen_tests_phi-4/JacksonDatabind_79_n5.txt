public void testJsonIdentityReferenceClassOnly() throws Exception {
    ObjectMapper mapper = new ObjectMapper();
    mapper.enable(SerializationFeature.INDENT_OUTPUT);

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    static class Parent {
        public Child child;
        public Parent() {}
    }

    @JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "id")
    static class Child {
        public String name;
        public Child(String name) {
            this.name = name;
        }
    }

    Parent parent = new Parent();
    Child child = new Child("child");
    parent.child = child;

    String json = mapper.writeValueAsString(parent);

    assertEquals("{\"id\":1,\"child\":{\"id\":2,\"name\":\"child\"}}", json);
}