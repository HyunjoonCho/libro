public void testCommaOperatorSideEffects() {
    // Mocking a method `foo` that will be called
    FooClass foo = mock(FooClass.class);

    // Test case 1: foo((1, 2, 42)) should transform to foo((1, 3))
    // and issue a warning for the first element
    assertWarning("Warning for element 1 in foo((1, 2, 42))");
    foo.method((1, 2, 42));
    verify(foo).method((1, 3));

    // Test case 2: foo((bar(), 2, 42)) should transform to foo((bar(), 3))
    // and not issue any warnings
    assertNoWarning("No warning expected for foo((bar(), 2, 42))");
    foo.method((bar(), 2, 42));
    verify(foo).method((bar(), 3));

    // Test case 3: foo(((1, 2, 3), (4, 5, 42))) should transform to
    // foo((1, 4, 42)) and issue warnings for the first elements
    assertWarning("Warning for element