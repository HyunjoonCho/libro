public void testArrayPushWithAssignment() {
    // Simulating the behavior of the Closure Compiler's optimization
    java.util.function.Function<Object[], Object[]> f = () -> {
        Object[] a = new Object[0];
        Object b = new Object();
        a = java.util.Arrays.copyOf(a, a.length + 1);
        a[a.length - 1] = b;
        ((Object[]) b)[0] = 1; // Simulate b[0] = 1;
        return a;
    };

    Object[] result = f.apply(null);
    assertEquals(1, ((Object[]) result[0])[0]); // Expecting b[0] = 1 to be preserved
}