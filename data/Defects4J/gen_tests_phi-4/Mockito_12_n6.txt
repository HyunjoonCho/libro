public void testVarargsArgumentCaptor() {
    MyService service = mock(MyService.class);
    
    List<Object> args = new ArrayList<>();
    args.add(1);
    args.add(2);
    args.add(3);

    service.myMethod(args.toArray(new Object[0]));

    ArgumentCaptor<Object[]> captor = ArgumentCaptor.forClass(Object[].class);
    verify(service).myMethod(captor.capture());

    Object[] capturedArgs = captor.getValue();
    assertEquals(3, capturedArgs.length);
    assertEquals(Integer.valueOf(1), capturedArgs[0]);
    assertEquals(Integer.valueOf(2), capturedArgs[1]);
    assertEquals(Integer.valueOf(3), capturedArgs[2]);
}