import org.junit.Test;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;
import java.util.logging.Level;
import java.util.logging.Logger;

public void testClosureCompilerTypeError() {
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine = manager.getEngineByName("nashorn");

    String jsCode = 
        "function example(a) {" +
        "  var b = a + 1;" +
        "  var a = b + 1;" + // This line triggers the TypeError in Firefox
        "  return a;" +
        "} " +
        "example(1);";

    try {
        engine.eval(jsCode);
    } catch (ScriptException e) {
        Logger.getLogger(this.getClass().getName()).log(Level