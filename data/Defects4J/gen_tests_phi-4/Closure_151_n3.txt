public void testVersionOption() {
    ByteArrayOutputStream outContent = new ByteArrayOutputStream();
    ByteArrayOutputStream errContent = new ByteArrayOutputStream();
    System.setOut(new PrintStream(outContent));
    System.setErr(new PrintStream(errContent));

    String[] command = {"java", "-jar", "compiler.jar", "--version"};
    try {
        Process process = new ProcessBuilder(command).start();
        process.waitFor();
    } catch (Exception e) {
        e.printStackTrace();
    }

    assertFalse("No version output found", errContent.toString().contains("not supported"));
    assertTrue("Version output not displayed", outContent.toString().contains("version statement"));
}