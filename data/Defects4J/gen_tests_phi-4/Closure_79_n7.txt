public void testExternPrototypeCompilationFailure() {
    try {
        // Simulate command line compilation
        new CommandLineRunner().run(new String[]{
            "--compilation_level", "ADVANCED_OPTIMIZATIONS",
            "--externs", "prototype.js",
            "--js", "bootloader.js"
        });

        // If no exception is thrown, fail the test
        fail("Expected RuntimeException when compiling with extern prototype");
    } catch (RuntimeException e) {
        // Check for the specific error message indicating an internal compiler error
        assertTrue(e.getMessage().contains("INTERNAL COMPILER ERROR"));
        assertTrue(e.getCause()!= null);
        assertTrue(e.getCause().getMessage().contains("prototype.js:213:11"));
    }
}