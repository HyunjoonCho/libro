public void testBadVariableInliningInClosure() {
    final int[] result = new int[5];
    int[] arr = {1, 2, 3, 4, 5};
    for (int i = 0, l = arr.length; i < l; i++) {
        int j = arr[i];
        (new Thread(() -> {
            int k = j;
            result[i] = k;
        })).start();
    }
    assertArrayEquals(new int[]{1, 2, 3, 4, 5}, result);
}