public void testSideEffectsAnalysis() {
    Object foo = new Object() {
        private String location;

        public void setLocation(String loc) {
            this.location = loc;
        }
    };

    if (foo instanceof Object) {
        foo.getClass().getMethod("setLocation", String.class).invoke(foo, "http://www.google.com/");
        assertTrue("Location should not have been removed or ignored", foo instanceof Object);
    } else {
        fail("setLocation call was removed or ignored, which is incorrect.");
    }
}