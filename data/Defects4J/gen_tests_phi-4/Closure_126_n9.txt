public void testBreakInFinallyNotOptimized() {
    boolean exceptionCaught = false;

    try {
        try {
            throw new RuntimeException("throw me");
        } finally {
            breakLabel: {
                // fake catcher
                exceptionCaught = true;
                break breakLabel;
            }
        }
    } catch (RuntimeException e) {
        fail("Exception should not be caught: " + e.getMessage());
    }

    assertTrue("Finally block should have handled the break", exceptionCaught);
}