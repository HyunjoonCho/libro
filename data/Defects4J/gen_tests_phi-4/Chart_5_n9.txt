public void testAddOrUpdateWithDuplicatesAllowed() {
    XYSeries series = new XYSeries("Test Series");
    series.setAllowDuplicateXValues(true);
    series.addOrUpdate(1.0, 2.0);
    series.addOrUpdate(1.0, 3.0);

    Object[] data = series.toArray();
    assertEquals(2, data.length);
    assertTrue(data[0] instanceof XYDataItem);
    assertTrue(data[1] instanceof XYDataItem);
    assertEquals(1.0, ((XYDataItem) data[0]).getX(), 0.0);
    assertEquals(2.0, ((XYDataItem) data[0]).getY(), 0.0);
    assertEquals(1.0, ((XYDataItem) data[1]).getX(), 0.0);
    assertEquals(3.0, ((XYDataItem) data[1]).getY(), 0.0);
}