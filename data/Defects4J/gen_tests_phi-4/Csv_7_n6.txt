public void testHeaderMapWithDuplicateColumnNames() throws IOException {
    String csvContent = "Col1,Col2,Col2,Col3,Col4\n1,2,3,4,5\n4,5,6,7,8";
    Reader reader = new StringReader(csvContent);
    CSVFormat myFormat = CSVFormat.RFC4180.withDelimiter(",").withQuoteChar('"')
           .withQuotePolicy(Quote.MINIMAL).withIgnoreSurroundingSpaces(true)
           .withHeader().withSkipHeaderRecord(true);

    Iterable<CSVRecord> records = myFormat.parse(reader);
    List<CSVRecord> recordList = new ArrayList<>();
    recordList.addAll(records);

    Map<String, Integer> headerMap = recordList.get(0).getHeaderMap();
    assertEquals(4, headerMap.size()); // Expecting 4 unique headers: Col1, Col2, Col3, Col4
    assertTrue(headerMap.containsKey("Col1"));
    assertTrue(headerMap.containsKey("Col2"));
    assertTrue(headerMap.containsKey("Col3"));
    assertTrue(headerMap.containsKey("Col4"));
    assertEquals(1, headerMap.get("Col1")); // Col1 should map to index 1
    assertEquals