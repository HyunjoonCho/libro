public void testSplitSurrogateOnWriteRaw() {
    String problematicJson = "{\"key\": \"value with problematic character: \ud83d\udc00 and more text\"}";
    try (JsonFactory factory = new JsonFactory()) {
        JsonGenerator generator = factory.createGenerator(System.out);
        generator.writeRaw(problematicJson);
        generator.flush();
    } catch (JsonGenerationException e) {
        assertEquals("Split surrogate on writeRaw() input (last character)", e.getMessage());
    } catch (IOException e) {
        e.printStackTrace();
        fail("IOException should not have been thrown");
    }
}