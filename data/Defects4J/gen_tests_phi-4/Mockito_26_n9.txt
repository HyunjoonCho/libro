public void testInjectMocksForFinalFields() {
    class TestClass {
        private final Dependency dependency = new Dependency();

        public void performAction() {
            dependency.doSomething();
        }
    }

    class Dependency {
        public void doSomething() {
            // Implementation
        }
    }

    TestClass testClass = mock(TestClass.class, withSettings().useConstructor());
    Dependency mockedDependency = mock(Dependency.class);
    when(mockedDependency.doSomething()).thenReturn(true);

    injectMocks(testClass);
    doCallRealMethod().when(testClass).performAction();

    testClass.performAction();

    verify(mockedDependency).doSomething();
}