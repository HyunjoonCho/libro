public void testJsonWriterLeniencyDifference() {
    JsonFactory factory = new JsonFactory();
    JsonWriter writer = factory.createJsonWriter(new StringWriter(), 128);
    writer.setLenient(true);

    try {
        writer.value(Double.NaN);
        fail("Expected IllegalArgumentException for NaN in value(double)");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }

    try {
        writer.writeValue(Double.NaN);
    } catch (Exception e) {
        fail("Expected no exception for Double.NaN in value(Number)");
    } finally {
        writer.close();
    }
}