import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.exc.InvalidDefinitionException;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertThrows;

public class JsonUnwrappedCaseInsensitiveTest {

    @Test
    public void testAcceptCaseInsensitivePropertiesWithJsonUnwrapped() {
        ObjectMapper mapper = new ObjectMapper();
        mapper.enable(com.fasterxml.jackson.databind.MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES);

        String jsonInput = "{ \"BUSINESSADDRESS\" : { \"street\" : \"Main St\", \"town\" : \"Metropolis\" }}";

        assertThrows(InvalidDefinitionException.class, () -> {
            mapper.readValue(jsonInput, Person.class);
        });
    }

    static class Person {
        private Address businessAddress;

        public Address getBusinessAddress() {
            return businessAddress;
        }

        public void setBusinessAddress(Address businessAddress) {
            this.businessAddress = businessAddress;
        }
    }

    static class Address {
        private String street;
        private String addon;
        private String zip = "";
        private String town;
        private String country;

        // Getters and setters
        public String getStreet() {
            return street;
        }

        public void setStreet(String street) {
            this.street