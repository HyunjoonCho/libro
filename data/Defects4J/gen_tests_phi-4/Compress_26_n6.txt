public void testSkipWithCipherInputStream() throws IOException {
    PipedInputStream pipedInputStream = new PipedInputStream();
    PipedOutputStream pipedOutputStream = new PipedOutputStream(pipedInputStream);
    
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(new byte[16], "AES"), new IvParameterSpec(new byte[16]));
    
    CipherInputStream cipherInputStream = new CipherInputStream(new ByteArrayInputStream(new byte[1024]), cipher);
    OutputStream outputStream = new PipedOutputStream(cipherInputStream);
    
    try {
        // Write data to the PipedOutputStream
        outputStream.write(new byte[512], 0, 512);
        outputStream.flush();
        
        // Skip using IOUtils
        long skipped = IOUtils.skip(cipherInputStream, 1024);
        
        // Check if skipped is less than requested
        assertTrue(skipped < 1024);
    } finally {
        // Ensure streams are closed properly
        pipedOutputStream.close();
        pipedInputStream.close();
        cipherInputStream.close();
        outputStream.close();
    }
}