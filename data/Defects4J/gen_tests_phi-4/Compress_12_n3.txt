import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import static org.junit.Assert.assertThrows;

public void testCorruptTarFileHandling() {
    byte[] corruptTarContent = new byte[]{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, (byte) -1, 0x00};
    try (InputStream inputStream = new ByteArrayInputStream(corruptTarContent)) {
        TarArchiveInputStream tarInputStream = new TarArchiveInputStream(inputStream);

        IOException exception = assertThrows(IOException.class, () -> {
            while (tarInputStream.getNextTarEntry()!= null) {
                // Attempt to read the next entry
            }
        });

        // Optionally, you can check the message of the exception if needed
        // assertEquals("Expected exception message", exception.getMessage());
    }
}