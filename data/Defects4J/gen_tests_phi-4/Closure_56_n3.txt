public void testLastWarningOrErrorTruncation() {
    String expectedOutput = "test.js:1: ERROR - variable foo is undefined\n" +
                            "alert(foo);\n" +
                            "^\n" +
                            "test.js:2: ERROR - variable bar is undefined\n" +
                            "^";

    String output = executeCompilerCommand("--warning_level VERBOSE --js test.js");

    assertEquals(expectedOutput, output);
}

private String executeCompilerCommand(String options) {
    // Simulate execution of the compiler command and capture the output
    // This is a placeholder for the actual execution logic
    // In a real scenario, this would involve executing the Java process
    // and capturing its output
    return "test.js:1: ERROR - variable foo is undefined\n" +
           "alert(foo);\n" +
           "^\n" +
           "test.js:2: ERROR - variable bar is undefined\n" +
           "\n" + // Note the missing caret in the last error
           "2 error(s), 0 warning(s)";
}