import org.junit.Test;
import static org.junit.Assert.fail;

public class AliasTest {

    @Test
    public void testAliasErrorNotReported() {
        try {
            var makeClass = (protoMethods) -> {
                var clazz = () -> {
                    initialize.apply(this, (Object[]) null);
                };
                for (var i : protoMethods.keySet()) {
                    clazz.prototype[i] = protoMethods.get(i);
                }
                return clazz;
            };

            var Person = new Object();
            Person = makeClass(Map.of(
                "initialize", (Person p, String name) -> { p.name = name; },
                "getName", (Person p) -> { return p.name; },
                "say", (Person p, String message) -> {
                    var self = p;
                    java.util.concurrent.CompletableFuture.runAsync(() -> {
                        // Simulating setTimeout
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
                        }
                        System.out.println(self.getName(1) + " says: " + message);
                    });
                }
            ));

            var joe = new Person();
            ((java.io.Serializable) joe).name = "joe";
            ((java