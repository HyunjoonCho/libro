public void testInvalidPropertyInPrototypeFunction() {
    // Setup the necessary classes and functions as described in the bug report
    class Thing {
        Map<String, Object> subthing;
    }

    class MyClass {
        private Thing thing_;

        MyClass(Thing thing) {
            this.thing_ = thing;
        }

        void doIt() {
            // Direct access should throw an error
            // System.out.println(thing_.subthing.get("noprop"));

            // Loop access does not throw an error
            for (int i = 0; i < (Integer) thing_.subthing.get("noprop"); i++) {
                System.out.println(i);
            }
        }
    }

    // Create an instance of Thing without the 'noprop' field
    Map<String, Object> subthing = new HashMap<>();
    subthing.put("prop", 3);
    Thing thing = new Thing();
    thing.subthing = subthing;

    // Instantiate MyClass and call doIt
    MyClass myClassInstance = new MyClass(thing);
    myClassInstance.doIt();
}