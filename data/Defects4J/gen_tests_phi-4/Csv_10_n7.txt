public void testCsvFormatWithHeader() throws IOException {
    PrintWriter writer = new PrintWriter(new StringWriter());
    CSVPrinter csvPrinter = CSVFormat.TDF.withHeader("x").print(writer);
    csvPrinter.printRecord(42);
    csvPrinter.close();
    
    String expectedOutput = "x\n42\n";
    assertEquals(expectedOutput, writer.toString().trim());
}