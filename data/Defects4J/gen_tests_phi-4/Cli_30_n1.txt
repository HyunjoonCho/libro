public void testOptionGroupStateWithDefaultOptions() {
    Options options = new Options();
    OptionGroup group = new OptionGroup();
    Option optionA = new Option("a", "option-a");
    Option optionB = new Option("b", "option-b");
    group.addOption(optionA);
    group.addOption(optionB);
    options.addOptionGroup(group);

    Properties properties = new Properties();
    properties.setProperty("b", "true");

    CommandLineParser parser = new DefaultParser();
    try {
        CommandLine cmd = parser.parse(options, null, false, properties);
        assertTrue(cmd.hasOption('a'));
        assertTrue(cmd.hasOption('b'));
    } catch (ParseException e) {
        fail("ParseException was thrown when it should not have been.");
    }
}