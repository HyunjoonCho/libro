public void testCorruptedTarArchiveInputStream() throws IOException {
    String archivePath = PathUtil.join(testdataDir, "test.tar.bz2");
    TarArchiveInputStream input = new TarArchiveInputStream(new BZip2CompressorInputStream(GoogleFile.SYSTEM.newInputStream(archivePath), true));

    ArchiveEntry nextMatchedEntry = input.getNextEntry();
    boolean entryFound = false;

    while (nextMatchedEntry!= null) {
        entryFound = true;
        nextMatchedEntry = input.getNextEntry();
    }

    if (!entryFound) {
        throw new IOException("No entries found, expected IOException on unexpected EOF");
    }
}