public void testOptionBuilderResetOnIAE() {
    OptionBuilder.hasArg().withLongOpt("target").create();
    try {
        OptionBuilder.hasArg().create();
        fail("Expected IllegalArgumentException");
    } catch (IllegalArgumentException e) {
        // Expected exception
    }

    // After failure, create another option and verify it's reset
    Option option = OptionBuilder.withLongOpt("another").create();
    assertEquals("another", option.getLongOpt());
    assertFalse(option.hasArg());
}