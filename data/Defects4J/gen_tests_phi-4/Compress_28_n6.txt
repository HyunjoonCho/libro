public void testCorruptedTarStream() throws IOException {
    String archivePath = "/path/to/test.tar.bz2"; // Adjust path as needed

    TarArchiveInputStream input = new TarArchiveInputStream(
        new BZip2CompressorInputStream(
            new FileInputStream(archivePath), true
        )
    );

    ArchiveEntry nextMatchedEntry = input.getNextEntry();
    while (nextMatchedEntry!= null) {
        try (OutputStream out = new FileOutputStream("/tmp/" + nextMatchedEntry.getName())) {
            ByteStreams.copy(input, out);
        }
        nextMatchedEntry = input.getNextEntry();
    }

    assertThrows(IOException.class, () -> input.getNextEntry());
}