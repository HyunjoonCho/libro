import static org.junit.jupiter.api.Assertions.assertEquals;

import java.util.HashMap;
import java.util.Map;
import org.junit.jupiter.api.Test;

public class TestAssignmentToObject {

    @Test
    public void testAssignmentToObjectInConditional() {
        Map<String, Object> result = func(true, false);
        assertEquals(3, ((Map<String, Integer>) result.get("prop1")).get("a"));
        assertEquals("prop3", result.get("prop3"));
        assertEquals(null, result.get("prop2"));
    }

    private Map<String, Object> func(boolean a, boolean b) {
        Map<String, Object> results = null;
        if (a) {
            results = new HashMap<>();
            results.put("prop1", Map.of("a", 3));
        }
        if (b) {
            results = results!= null? results : new HashMap<>();
            results.put("prop