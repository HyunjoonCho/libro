public void testIssue983() {
    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        public Plot getPlot() {
            return new CategoryPlot(null, null, null, null) {
                @Override
                public int getIndexOf(Object obj) {
                    return 0;  // Return a valid index to trigger the bug
                }

                @Override
                public CategoryDataset getDataset(int index) {
                    return null;  // Deliberately return null to trigger the NPE
                }
            };
        }
    };

    assertThrows(NullPointerException.class, render::getLegendItems);
}