public void testCompilerFailsToFindAmdModuleInSubdirectory() {
    String[] files = {"Bar.js", "lib/Foo.js"};
    String expectedError = "ERROR - required entry point \"module$lib$Foo\" never provided";
    String command = String.format("java -jar compiler.jar --transform_amd_modules --process_common_js_modules --common_js_entry_module=Bar.js --compilation_level=ADVANCED_OPTIMIZATIONS --js_output_file=out.js --js=Bar.js --js=lib/Foo.js");

    // Execute the command and capture the output
    ProcessBuilder processBuilder = new ProcessBuilder(command.split(" "));
    processBuilder.redirectErrorStream(true);

    try {
        Process process = processBuilder.start();
        String output = new BufferedReader(new InputStreamReader(process.getInputStream())).lines().collect(Collectors.joining("\n"));
        
        // Check if the expected error is in the output
        assertTrue(output.contains(expectedError));

    } catch (IOException e) {
        fail("IOException during command execution: " + e.getMessage());
    }
}