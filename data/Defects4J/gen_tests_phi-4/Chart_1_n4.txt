public void testIssue983() {
    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        protected Plot getPlot() {
            return null; // Simulate plot being null
        }
    };

    try {
        render.getLegendItems();
        fail("Expected NullPointerException was not thrown");
    } catch (NullPointerException e) {
        // Expected exception
    }
}

public void testIssue983WithNonNullPlot() {
    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        protected Plot getPlot() {
            return new Plot() {
                @Override
                public int getIndexOf(ItemRenderer renderer) {
                    return 0; // Simulate valid index
                }

                @Override
                public CategoryDataset getDataset(int index) {
                    return null; // Simulate dataset being null
                }
            };
        }
    };

    try {
        render.getLegendItems();
        fail("Expected NullPointerException was not thrown");
    } catch (NullPointerException e) {
        // Expected exception
    }
}