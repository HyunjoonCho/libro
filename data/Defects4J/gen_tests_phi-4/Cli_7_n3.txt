public void testRequiredOptions() {
    Options options = new Options();
    Option hOption = new Option("h", "help", false, "Display help");
    hOption.setRequired(true);
    options.addOption(hOption);

    Option cOption = new Option("c", "config", true, "Configuration file");
    options.addOption(cOption);

    CommandLineParser parser = new DefaultParser();

    try {
        CommandLine cmd = parser.parse(options, new String[]{"-c", "<arg>"});
        assertEquals(Arrays.asList("-h"), cmd.getArgs());
    } catch (ParseException e) {
        fail("Expected ParseException not to be thrown");
    }
}