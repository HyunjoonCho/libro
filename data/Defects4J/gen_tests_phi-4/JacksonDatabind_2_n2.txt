public void testUnwantedPOJOsInTreeViaSerialization() throws IOException {
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new SimpleModule().addSerializer(List.class, new ListAttributeSerializer()));

    class X<T> {
        String s;
        List<T> items;

        X(String s, List<T> items) {
            this.s = s;
            this.items = items;
        }
    }

    X<String> obj = new X<>("test", Arrays.asList("item1", "item2"));
    byte[] json = mapper.writeValueAsBytes(obj);
    JsonNode tree = mapper.readTree(json);

    JsonNode itemsNode = tree.get("items");
    assertTrue(itemsNode.isObject());
    assertEquals("VALUE_EMBEDDED_OBJECT", itemsNode.get("type").asText());
}