public void testCsvParserGetHeaderMapNpe() {
    try {
        CSVParser parser = CSVFormat.DEFAULT.withFirstRecordAsHeader().parse(new StringReader("col1,col2\nval1,val2"));
        parser.getHeaderMap(); // This should not throw NPE as it has a header

        CSVParser noHeaderParser = CSVFormat.DEFAULT.withHeader().parse(new StringReader("val1,val2"));
        Map<String, Integer> headerMap = noHeaderParser.getHeaderMap();
        assertNull("Expected null for a parser without a headerMap", headerMap);
    } catch (Exception e) {
        fail("Unexpected exception: " + e.getMessage());
    }
}