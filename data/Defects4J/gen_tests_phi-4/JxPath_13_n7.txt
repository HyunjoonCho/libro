public void testUndefinedNamespaceHandling() {
    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    Document doc = builder.newDocument();
    
    // Register namespaces
    doc.appendChild(doc.createProcessingInstruction("xml-stylesheet", "type=\"text/xsl\" href=\"style.xsl\""));
    doc.getDocumentElement().setNamespacePrefix("A", "http://namespaceA.com");
    doc.getDocumentElement().setNamespacePrefix("B", "http://namespaceB.com");
    
    // Create elements with namespaces
    Element elementA = doc.createElementNS("http://namespaceA.com", "A:ElementA");
    elementA.setAttributeNS("http://namespaceA.com", "A:myAttr", "Mytype");
    
    Element elementB = doc.createElementNS("http://namespaceB.com", "B:ElementB");
    elementB.setTextContent("MY VALUE");
    
    elementA.appendChild(elementB);
    doc.appendChild(elementA);
    
    try {
        DOMNodePointer.createAttribute(elementA.getAttributes().getNamedItem("A:myAttr"));
        fail("Expected exception for unknown namespace prefix: A");
    } catch (Exception e) {
        assertTrue(e.getMessage().contains("unknown namespace prefix: A"));
    }
}