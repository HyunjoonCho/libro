public void testClosureDependenciesWhitespaceOnly() {
    CompilerOptions options = new CompilerOptions();
    options.setCompilationLevel(CompilationLevel.WHITESPACE_ONLY);
    options.setManageClosureDependencies(true);

    Compiler compiler = new Compiler();
    try {
        compiler.compile(new SourceFile[] { new SourceFile("test.js", "function foo() {}") }, options);
        fail("Expected IllegalArgumentException for managing dependencies with WHITESPACE_ONLY compilation level");
    } catch (IllegalArgumentException e) {
        assertEquals("Managing dependencies is not supported with WHITESPACE_ONLY compilation level", e.getMessage());
    }
}