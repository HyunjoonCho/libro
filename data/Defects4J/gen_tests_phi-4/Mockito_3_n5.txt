public void testArgumentCaptorVarargs() {
    // Setup
    ArgumentCaptor<String[]> captor = ArgumentCaptor.forClass(String[].class);
    MyClass mock = mock(MyClass.class);
    when(mock.doSomething(anyString())).thenAnswer(invocation -> {
        String[] args = invocation.getArgument(0);
        return args.length > 0? args[0] : null;
    });
    
    // Action
    mock.doSomething("test1", "test2", "test3");
    
    // Assertion
    verify(mock).doSomething(captor.capture());
    String[] capturedArgs = captor.getValue();
    assertEquals(3, capturedArgs.length);
    assertEquals("test1", capturedArgs[0]);
    assertEquals("test2", capturedArgs[1]);
    assertEquals("test3", capturedArgs[2]);
}