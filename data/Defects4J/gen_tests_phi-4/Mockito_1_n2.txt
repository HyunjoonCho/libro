public void testArgumentCaptorVarargs() {
    List<String> list = mock(List.class);
    when(list.size()).thenReturn(2);
    list.add("one");
    list.add("two");

    doAnswer(invocation -> {
        Object[] args = invocation.getArgumentArray();
        assertEquals("one", args[0]);
        assertEquals("two", args[1]);
        return null;
    }).when(list).addAll((String...) anyVararg());

    list.addAll("one", "two");

    verify(list).addAll((String...) anyVararg());
}