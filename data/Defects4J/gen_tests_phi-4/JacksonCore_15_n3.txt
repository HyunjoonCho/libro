public void testAllowMultipleMatches() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addFilteringGenerator(Foo.class, new FilteringGenerator() {
        @Override
        public void serialize(Object value, JsonGenerator gen, SerializerProvider serializers) throws IOException {
            if (_allowMultipleMatches) {
                // custom serialization logic when allowing multiple matches
            } else {
                // default serialization logic
            }
        }
    });
    mapper.registerModule(module);

    Foo foo = new Foo();
    mapper.writeValueAsString(foo); // This should trigger the issue if _allowMultipleMatches is not used
}