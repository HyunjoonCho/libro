public void testLargeWeightsMatrixCreation() {
    int numWeights = 40000; // A large number to simulate the issue
    Weight[] weights = new Weight[numWeights];
    for (int i = 0; i < numWeights; i++) {
        weights[i] = new Weight(1.0 / numWeights);
    }

    // Assuming a multivariate vector optimizer that takes weights and creates a matrix
    MultivariateVectorOptimizer optimizer = new MultivariateVectorOptimizer(weights);
    try {
        optimizer.optimize();
        fail("Expected an OutOfMemoryError due to large matrix creation");
    } catch (OutOfMemoryError e) {
        // Expected behavior
    } catch (Exception e) {
        fail("Expected an OutOfMemoryError, but got " + e.getClass().getSimpleName());
    }
}