import java.io.ByteArrayInputStream;
import java.io.IOException;
import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
import org.junit.Test;

public class TarArchiveInputStreamTest {

    @Test(expected = IOException.class)
    public void testCorruptFileException() throws IOException {
        byte[] corruptData = new byte[] {
            (byte) 0x7f, (byte) 0x00, (byte) 0x00, (byte) 0x00, 
            (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) -1 
        };
        try (TarArchiveInputStream tarInput = new TarArchiveInputStream(new ByteArrayInputStream(corruptData))) {
            tarInput.getNextTarEntry();
        }
    }
}