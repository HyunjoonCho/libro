public void testTextBufferInconsistency() {
    TextBuffer buffer = new TextBuffer(new BufferRecycler());
    buffer.resetWithEmpty();
    
    Object result1 = buffer.getTextBuffer();
    assertEquals(null, result1);
    
    String contentsAsString = buffer.contentsAsString();
    assertEquals("", contentsAsString);
    
    Object result2 = buffer.getTextBuffer();
    assertEquals(new char[0], result2);
}