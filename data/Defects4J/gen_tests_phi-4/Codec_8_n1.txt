public void testBase64InputStreamReads() {
    byte[] input = new byte[10920];
    try (ByteArrayInputStream bais = new ByteArrayInputStream(input);
         Base64InputStream b64stream = new Base64InputStream(bais, true, 0, null)) {

        int n = 0;
        while (b64stream.read()!= -1) {
            n++;
        }
        assertEquals(10920, n);
    } catch (ArrayIndexOutOfBoundsException e) {
        assertEquals(10920, n);
        throw e; // Rethrow to ensure test fails as expected
    }
}