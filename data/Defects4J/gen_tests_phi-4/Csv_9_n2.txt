public void testCSVRecordToMapWithoutHeaders() {
    CSVFormat format = CSVFormat.DEFAULT.withHeader();
    String csvContent = "value1,value2";
    try (StringReader reader = new StringReader(csvContent);
         Reader in = new StringReader(csvContent)) {
        Iterable<CSVRecord> records = CSVFormat.DEFAULT.withHeader().parse(in);
        CSVRecord record = records.iterator().next();
        Map<String, String> map = record.toMap();
        assertNull(map);
    } catch (NullPointerException e) {
        fail("Expected null map, but got NullPointerException");
    }
}