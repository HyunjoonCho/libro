public void testIssue983() {
    // Create a mock plot with necessary methods
    Plot plot = mock(Plot.class);
    CategoryDataset dataset = null; // Intentionally set to null to reproduce the bug

    when(plot.getIndexOf(any(AbstractCategoryItemRender.class))).thenReturn(0);
    when(plot.getDataset(0)).thenReturn(dataset);

    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        public Plot getPlot() {
            return plot;
        }
    };

    // Call the method that triggers the NPE
    render.getLegendItems();
}