public void testClassifyNonRightmostExpressions() {
    // Simulate the transformation and warning system
    String transformedExpression1 = transformAndCheck("foo((1, 2, 42))");
    String transformedExpression2 = transformAndCheck("foo((bar(), 2, 42))");
    String transformedExpression3 = transformAndCheck("foo(((1, 2, 3), (4, 5, 42)))");

    assertEquals("foo((1, 3))", transformedExpression1);
    assertEquals("foo((bar(), 3))", transformedExpression2);
    assertEquals("foo((1, 4, 42))", transformedExpression3);

    // Check for warnings
    int warnings1 = checkWarnings("foo((1, 2, 42))");
    int warnings2 = checkWarnings("foo((bar(), 2, 42))");
    int warnings3 = checkWarnings("foo(((1, 2, 3), (4, 5, 42)))");

    assertEquals(1, warnings1); // Warning only for the first element
    assertEquals(0, warnings2); // No warning due to bar() side effect
    assertEquals(2, warnings