public void testTruncatedZipArchiveInputStream() throws IOException {
    byte[] data = {0x50, 0x4B, 0x03, 0x04, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
    ByteArrayInputStream bais = new ByteArrayInputStream(data);
    ZipInputStream zipIn = new ZipInputStream(bais);
    ZipArchiveInputStream zipArchiveIn = new ZipArchiveInputStream(zipIn);

    int read = 0;
    while ((read = zipArchiveIn.read())!= -1) {
        // Expect this to loop indefinitely or throw an exception in a fixed version
    }
    
    // Since the bug prevents -1 from being returned, we expect this to never happen
    fail("Expected an IOException for truncated ZIP file");
}