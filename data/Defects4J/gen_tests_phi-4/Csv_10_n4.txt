public void testCsvFormatWithHeader() throws IOException {
    Path path = Paths.get("data.csv");
    if (Files.exists(path)) {
        Files.delete(path);
    }

    try (CSVPrinter csvPrinter = CSVFormat.TDF
       .withHeader("x")
       .print(Files.newBufferedWriter(path))) {
        csvPrinter.printRecord(42);
    }

    String content = new String(Files.readAllBytes(path));
    assertEquals("x\n42\n", content);
}