public void testJsonGenerationException() {
    String problematicJson = "{\"key\": \"Some text here x\uD800x more text here\"}";
    ObjectMapper mapper = new ObjectMapper();
    try {
        mapper.writeValue(new File("output.json"), problematicJson);
        fail("Expected JsonGenerationException to be thrown");
    } catch (JsonGenerationException e) {
        assertTrue(e.getMessage().contains("Split surrogate on writeRaw() input"));
    } catch (IOException e) {
        fail("Expected JsonGenerationException, but encountered IOException");
    }
}