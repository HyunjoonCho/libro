public void testCommandLineOptionValueBehavior() {
    Options options = new Options();
    Option debug = Option.builder("debug")
                        .withDescription("turn on debugging")
                        .withLongOpt("debug")
                        .hasArg()
                        .create('d');
    options.addOption(debug);

    CommandLineParser parser = new DefaultParser();
    CommandLine commandLine = parser.parse(options, new String[]{"--debug", "true"});

    String dbg = commandLine.getOptionValue("debug");
    assertEquals("true", dbg);

    dbg = commandLine.getOptionValue('d');
    assertEquals("true", dbg);
}