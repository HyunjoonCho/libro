public void testTruncatedLastWarningOrError() {
    String[] expectedOutput = {
        "test.js:1: ERROR - variable foo is undefined",
        "alert(foo);",
        " ^",
        "test.js:2: ERROR - variable bar is undefined",
        "2 error(s), 0 warning(s)"
    };

    String actualOutput = compileJavaScript("test.js");

    for (int i = 0; i < expectedOutput.length; i++) {
        assertEquals(expectedOutput[i], actualOutput.split("\n")[i]);
    }
}

private String compileJavaScript(String fileName) {
    // This method should simulate running the compiler with the given file
    // and return the output as a single string.
    // This is a placeholder for the actual implementation.
    return "test.js:1: ERROR - variable foo is undefined\nalert(foo);\n ^\ntest.js:2: ERROR - variable bar is undefined\n2 error(s), 0 warning(s)\n";
}