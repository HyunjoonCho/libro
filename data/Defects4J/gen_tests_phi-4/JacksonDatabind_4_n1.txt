public void testIndexNotSetInInvalidFormatException() {
    String json = "[{\"invalid\":\"json\"}]";
    ObjectMapper mapper = new ObjectMapper();
    ObjectReader reader = mapper.readerFor(new TypeReference<List<Map<String, String>>>() {});

    try {
        reader.readValue(json);
    } catch (JsonMappingException e) {
        InvalidFormatException ife = (InvalidFormatException) e.getCause();
        assertEquals(-1, ife.getIndex());
        assertEquals(0, ife.getPath().length());
    }
}