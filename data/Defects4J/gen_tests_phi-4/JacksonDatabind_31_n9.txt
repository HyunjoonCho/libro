public void testJsonStreamContextsIssue() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept("name");
    FilterProvider provider = new SimpleFilterProvider().addFilter("filter", filter);

    // Convert example
    String jsonConvert = mapper.writer(provider).writeValueAsString(new TestObject("test"));
    assertEquals("{\"name\":\"test\"}", jsonConvert);

    // Write example
    StringWriter writer = new StringWriter();
    mapper.writer(provider).writeValue(writer, new TestObject("test"));
    String jsonResponse = writer.toString();
    assertEquals("{\"name\":\"test\"}", jsonResponse);
}

class TestObject {
    public String name;

    public TestObject(String name) {
        this.name = name;
    }
}