public void testJsonParserSequenceIssue() throws IOException {
    JsonFactory factory = new JsonFactory();
    JsonParser parser1 = factory.createParser("{\"key1\": \"value1\"}");
    parser1.nextToken();
    parser1.nextToken();
    parser1.nextToken(); // Move to the end
    JsonParser parser2 = factory.createParser("{\"key2\": \"value2\"}");
    parser2.nextToken();
    JsonParserSequence sequence = JsonParserSequence.createFlattened(parser1, parser2);

    assertEquals(JsonToken.FIELD_NAME, sequence.nextToken());
    assertEquals("key1", sequence.getText());
    assertEquals(JsonToken.VALUE_STRING, sequence.nextToken());
    assertEquals("value1", sequence.getText());
    assertEquals(JsonToken.END_OBJECT, sequence.nextToken());

    // Now expecting key2 from parser2
    assertEquals(JsonToken.FIELD_NAME, sequence.nextToken());
    assertEquals("key2", sequence.getText());
    assertEquals(JsonToken.VALUE_STRING, sequence.nextToken());
    assertEquals("value2", sequence.getText());
    assertEquals(JsonToken.END_OBJECT, sequence.nextToken());
}