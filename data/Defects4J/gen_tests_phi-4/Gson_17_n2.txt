public void testDefaultDateTypeAdapterNullability() {
    Gson gson = new GsonBuilder()
       .registerTypeAdapter(Date.class, new DefaultDateTypeAdapter())
       .create();

    // Serialization
    String json = gson.toJson((Date) null);
    assertNull(json);

    // Deserialization
    String dateJson = gson.toJson(new Date());
    assertNull(gson.fromJson(dateJson, Date.class));
}