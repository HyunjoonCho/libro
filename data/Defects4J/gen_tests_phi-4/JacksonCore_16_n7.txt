public void testJsonParserSequenceSkipsToken() throws Exception {
    JsonFactory factory = new JsonFactory();
    Reader reader1 = new StringReader("{\"key1\": \"value1\"}");
    JsonParser parser1 = factory.createParser(reader1);

    Reader reader2 = new StringReader("{\"key2\": \"value2\"}");
    JsonParser parser2 = factory.createParser(reader2);

    JsonParserSequence sequence = JsonParserSequence.createFlattened(parser1, parser2);

    // First parser
    assertEquals(JsonToken.FIELD_NAME, sequence.nextToken());
    assertEquals("key1", sequence.getCurrentName());
    assertEquals(JsonToken.VALUE_STRING, sequence.nextToken());
    assertEquals("value1", sequence.getText());

    // Switch to second parser
    assertEquals(JsonToken.END_OBJECT, sequence.nextToken());

    // Second parser should not skip the first token
    assertEquals(JsonToken.FIELD_NAME, sequence.nextToken());
    assertEquals("key2", sequence.getCurrentName());
    assertEquals(JsonToken.VALUE_STRING, sequence.nextToken());
    assertEquals("value2", sequence.getText());

    sequence.close();
}