public void testTypeHierarchyAdapter() {
    ObjectMapper mapper = new ObjectMapper();
    SimpleModule module = new SimpleModule();
    module.addSubtype(Car.class, "car");
    module.addSubtype(Truck.class, "truck");
    mapper.registerModule(module);

    String jsonTruck = "{\"@type\":\"truck\",\"engineType\":\"diesel\"}";
    try {
        Car car = mapper.readValue(jsonTruck, Car.class);
        fail("Expected JsonMappingException");
    } catch (JsonMappingException e) {
        // Expected exception when attempting to decode a Truck as a Car
    }
}