public void testFailsWithNonFinalTyping() throws JsonParseException, JsonMappingException, IOException {
    ObjectMapper mapper = new ObjectMapper().enableDefaultTyping(DefaultTyping.NON_FINAL);
    String inputJson = "{\"mapProperty\":[\"java.util.HashMap\",{\"Compound|Key\":\"Value\"}]}";
    TestClass testInstance = mapper.readValue(inputJson, TestClass.class);
    String outputJson = mapper.writeValueAsString(testInstance);
    String expectedJson = "{\"mapProperty\":{\"Compound|Key\":\"Value\"}}";
    assertEquals(expectedJson, outputJson);
}