public void testRequiredOptions() {
    Options options = new Options();
    Option helpOption = Option.builder("h").required(true).build();
    options.addOption(helpOption);

    String[] args = {"-c", "<arg>"};
    CommandLineParser parser = new GnuParser();

    try {
        CommandLine cmd = parser.parse(options, args);
        assertTrue(cmd.hasOption("h"));
    } catch (ParseException e) {
        fail("Expected ParseException due to missing required option 'h', but got a different exception");
    }
}