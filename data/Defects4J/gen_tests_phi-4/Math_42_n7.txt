public void testNegativeValueWithRestrictNonNegative() {
    // Define the function: 1 * x + 1 * y + 0
    LinearObjectiveFunction function = new LinearObjectiveFunction(new double[]{1, 1, 0}, 0);

    // Define the constraint: 1 * x + 0 * y = 1
    LinearConstraint constraint = new LinearConstraint(new double[]{1, 0, 0}, Relationship.EQUAL, 1);

    // Create a SimplexSolver instance
    SimplexSolver solver = new SimplexSolver();

    // Attempt to optimize the function with the constraint and restrict to non-negative values
    double[] solution = solver.optimize(function, new LinearConstraint[]{constraint}, GoalType.MINIMIZE, true);

    // Assert that x = 1 and y = -1, which indicates a failure when restrictToNonnegative is true
    assertEquals(1.0, solution[0], 1e-10);
    assertEquals(-1.0, solution[1], 1e-10);
}