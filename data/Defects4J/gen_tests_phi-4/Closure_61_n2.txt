public void testClosureRemovesNeededCode() {
    // Setup the test in a way that mimics the JavaScript environment
    // Note: This is Java code, but we are simulating the logic described in the bug report
    Object test = new Object();
    Runnable closureMock = () -> {
        // Simulating the Closure behavior
        String originalCode = "Math.blah = function(test) { test.a = 5; }; var test = new Object(); Math.blah(test);";
        String optimizedCode = "Math.blah=function(a){a.a=5};var test={};";
        
        // Check if the expected code is removed
        assertFalse(optimizedCode.contains("Math.blah(test);"));
    };
    
    // Run the mock closure optimization
    closureMock.run();
    
    // Simulate the side-effect
    testObject = new Object();
    testObject.a = 5;
    
    // Verify the side-effect
    assertEquals(5, testObject.a);
}

Note: This Java test simulates the logic described in the bug report. Since Java doesn't directly interact with JavaScript's Closure Compiler, this test is a conceptual representation of the issue.