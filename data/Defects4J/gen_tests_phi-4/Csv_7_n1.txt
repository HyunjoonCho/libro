public void testDuplicateHeaderNames() throws IOException {
    String csvData = "Col1,Col2,Col2,Col3,Col4\n1,2,3,4,5\n4,5,6,7,8\n";
    Reader reader = new StringReader(csvData);
    
    CSVFormat format = CSVFormat.RFC4180.withDelimiter(',').withQuoteChar('"')
           .withQuotePolicy(Quote.MINIMAL).withIgnoreSurroundingSpaces(true)
           .withHeader().withSkipHeaderRecord(true);
    
    Iterable<CSVRecord> records = format.parse(reader);
    CSVRecord header = format.getHeader();
    
    Map<String, Integer> headerMap = header.toMap();
    
    assertEquals(3, headerMap.size()); // Expecting only 3 unique column indices.
    assertTrue(headerMap.containsKey("Col1"));
    assertTrue(headerMap.containsKey("Col2")); // Only one "Col2" should be present
    assertTrue(headerMap.containsKey("Col3"));
    assertTrue(!headerMap.containsKey("Col4")); // "Col4" should not be present
}