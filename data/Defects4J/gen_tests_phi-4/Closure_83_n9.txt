public void testVersionOption() {
    ProcessBuilder processBuilder = new ProcessBuilder("java", "-jar", "compiler.jar", "--version");
    Process process = null;
    try {
        process = processBuilder.start();
        String expectedOutput = "Closure Compiler (http://code.google.com/closure/compiler)\n"
                + "Version: 698\n"
                + "Built on: 2011/01/17 12:16\n";
        assertEquals(expectedOutput, new BufferedReader(new InputStreamReader(process.getInputStream())).lines().collect(Collectors.joining("\n")));
    } catch (Exception e) {
        fail("Exception during process execution: " + e.getMessage());
    } finally {
        if (process!= null) {
            process.destroy();
        }
    }
}