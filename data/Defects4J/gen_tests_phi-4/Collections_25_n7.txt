public void testCollatedIteratorNaturalOrdering() {
    List<Integer> list = Arrays.asList(3, 1, 2);
    Iterator<Integer> iterator = IteratorUtils.collatedIterator(list, null);
    try {
        while (iterator.hasNext()) {
            iterator.next();
        }
        fail("Expected an IllegalStateException due to null comparator");
    } catch (IllegalStateException e) {
        assertTrue(e.getMessage().contains("comparator is required"));
    }
}