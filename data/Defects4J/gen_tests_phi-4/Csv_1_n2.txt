public void testExtendedBufferReaderEOLHandling() {
    String input = "Line1\rLine2\nLine3\r\nLine4";
    ExtendedBufferReader reader = new ExtendedBufferReader(input);
    String line;
    
    assertEquals("Line1", reader.readLine());
    assertEquals(2, reader.getLineCount());
    
    assertEquals("Line2", reader.readLine());
    assertEquals(3, reader.getLineCount());
    
    assertEquals("Line3", reader.readLine());
    assertEquals(4, reader.getLineCount());
    
    assertEquals("Line4", reader.readLine());
    assertEquals(5, reader.getLineCount());
}