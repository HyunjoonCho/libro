public void testIssue983() {
    AbstractCategoryItemRender render = new AbstractCategoryItemRender() {
        @Override
        protected Plot getPlot() {
            return new Plot() {
                @Override
                public int getIndexOf(ItemRenderer renderer) {
                    return 0;
                }

                @Override
                public CategoryDataset getDataset(int index) {
                    return null;
                }
            };
        }
    };

    // This should not throw a NullPointerException
    render.getLegendItems();
}