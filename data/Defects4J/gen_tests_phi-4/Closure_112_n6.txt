public void testTemplateInference() {
    @SuppressWarnings("unchecked")
    Object classInstance = new Object() {
        @FunctionalInterface
        interface Function<T> {
            T apply(T input);
        }

        String foo(Function<Object> a) {
            return "string";
        }
    };

    Object a = new Object() {
        String apply(Object input) {
            return "";
        }
    };

    try {
        classInstance.foo((FunctionalInterface.Function<Object>) a);
        fail("Expected compilation failure due to template inference issue");
    } catch (Exception e) {
        // Expected exception due to incorrect type inference
    }
}