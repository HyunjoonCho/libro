import org.junit.jupiter.api.Test;
import java.io.BufferedReader;
import java.io.InputStreamReader;

import static org.junit.jupiter.api.Assertions.assertTrue;

public class ClosureCompilerTest {

    @Test
    public void testDangerousUseOfGlobalThisObject() throws Exception {
        String code = 
            "// ==ClosureCompiler==\n" +
            "// @compilation_level ADVANCED_OPTIMIZATIONS\n" +
            "// @output_file_name default.js\n" +
            "// ==/ClosureCompiler==\n\n" +
            "/** @constructor */\n" +
            "function Foo()\n" +
            "{\n" +
            " this._bar = null;\n" +
            "}\n;\n\n" +
            "/** @this {Foo} */\n" +
            "function writeMethodWithAnnotation()\n" +
            "{\n" +