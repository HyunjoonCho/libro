public void testCsvFormatWithHeader() throws IOException {
    Path path = Paths.get("data.csv");
    CSVPrinter csvPrinter = CSVFormat.TDF
       .withHeader("x")
       .print(Files.newBufferedWriter(path));

    csvPrinter.printRecord(42);
    csvPrinter.close();

    List<String> lines = Files.readAllLines(path);
    assertEquals("x", lines.get(0));
    assertEquals("42", lines.get(1));
}