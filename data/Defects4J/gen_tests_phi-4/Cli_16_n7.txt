public void testGroupConstraints() {
    Options options = new Options();

    Option groupA = Option.builder("a")
                         .argName("groupA")
                         .hasArg()
                         .desc("Group A")
                         .build();

    Option groupB = Option.builder("b")
                         .argName("groupB")
                         .hasArg()
                         .desc("Group B")
                         .build();

    Option childOfGroupA = Option.builder("c")
                                .argName("childOfGroupA")
                                .hasArg()
                                .desc("Child of Group A")
                                .build();

    Group groupAOptions = new Group("Group A", "Group A options", groupA, childOfGroupA);
    Group groupBOptions = new Group("Group B", "Group B options", groupB, groupAOptions);

    options.addOption(groupBOptions);

    CommandLineParser parser = new DefaultParser();
    CommandLine cmd = parser.parse(options, new String[]{"-b", "-c", "value"});

    assertEquals(1, cmd.getOptionValues(groupBOptions.getOptions().get(0)).size());
    assertEquals(1, cmd.getOptionValues(groupAOptions.getOptions().get(1)).size());
}