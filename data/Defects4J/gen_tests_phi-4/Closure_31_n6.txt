public void testClosureDependenciesWithWhitespaceOnly() {
    // Setup a compiler with WHITESPACE_ONLY compilation level
    Compiler compiler = getCompiler();
    compiler.setCompilationLevel(CompilationLevel.WHITESPACE_ONLY);

    // Enable dependency management explicitly
    compiler.setManageClosureDependencies(true);

    // Set source files and expected behavior
    SourceFile sourceFile1 = getSourceFile("source1.js");
    SourceFile sourceFile2 = getSourceFile("source2.js");
    SourceFile sourceFile3 = getSourceFile("source3.js"); // Depends on source2.js

    compiler.addSource(sourceFile1);
    compiler.addSource(sourceFile2);
    compiler.addSource(sourceFile3);

    try {
        compiler.compile();
        fail("Expected a failure due to missing dependency management at WHITESPACE_ONLY level.");
    } catch (CompilerException e) {
        assertTrue(e.getMessage().contains("Dependency management is required but not supported"));
    }
}