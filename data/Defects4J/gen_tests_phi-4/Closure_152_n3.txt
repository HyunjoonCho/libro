public void testResolveTypesCastIssue() {
    // Simulate the setup that triggers the bug
    Compiler compiler = new Compiler();
    compiler.setOptions(createCompilerOptions());

    // Add JavaScript input that causes the issue
    compiler.addSource("function example() { return arg; }");
    compiler.addSource("example(42);");

    // Run the compiler and expect a ClassCastException
    try {
        compiler.compile();
        fail("Expected ClassCastException to be thrown");
    } catch (RuntimeException e) {
        assertTrue("Expected ClassCastException", e.getCause() instanceof ClassCastException);
    }
}

private CompilerOptions createCompilerOptions() {
    CompilerOptions options = new CompilerOptions();
    options.setFlag("create_name_map_files", true);
    options.setWarningLevel("VERBOSE");
    options.setProcessClosurePrimitives(true);
    options.setErrorCheckingLevel(ErrorCheckingLevel.STRICTMODE);
    options.setCompilationLevel(CompilationLevel.ADVANCED_OPTIMIZATIONS);
    options.setWarning("missingProperties");
    options.setWarning("undefinedVars");
    options.setWarning("checkTypes");
    options.setWarning("strictModuleDepCheck");
    options.setWarning("invalidCasts");
    return options;
}