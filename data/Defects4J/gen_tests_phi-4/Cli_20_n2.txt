public void testPosixParserStopAtNonOption() {
    PosixParser parser = new PosixParser();
    parser.addOption(new PosixOption("a", false, 'a', false));
    parser.addOption(new PosixOption("b", true, 'b', false));

    try {
        OptionSet options = parser.parse(Arrays.asList("--zop", "-abfoo"));
        assertFalse(options.has("zop"));
        assertTrue(options.has("a"));
        assertTrue(options.has("b"));
        assertEquals("foo", options.valueOf("b"));
        
        // Check that the last token remains unchanged
        assertSame("foo", options.values().iterator().next().value());
    } catch (ParseException e) {
        fail("Parsing should not throw an exception");
    }
}