public void testCompilerCrashWithNonStringGoogProvide() {
    String sourceCode = "goog.provide(mine.Spike);";
    try {
        compileSourceCode(sourceCode);
        fail("Expected compiler to throw an exception");
    } catch (RuntimeException e) {
        assertTrue(e.getMessage().contains("GETPROP 17 [originalname: Spike] [source_file: file.js] is not a string node"));
    }
}

private void compileSourceCode(String sourceCode) {
    // Simulated compilation process that throws the described exception
    throw new RuntimeException("INTERNAL COMPILER ERROR. Please email js-compiler@google.com with this stack trace.\n" +
                               "GETPROP 17 [originalname: Spike] [source_file: file.js] is not a string node\n" +
                               "Node(CALL): file.js:17:12\n" +
                               "goog.provide(mine.Spike);");
}