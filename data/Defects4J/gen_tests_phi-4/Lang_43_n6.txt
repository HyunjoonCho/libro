public void testExtendedMessageFormatOutOfMemory() {
    Map<String, Object> formatRegistry = new HashMap<>();
    formatRegistry.put("dummy_format", new DummyFormatFactory());

    ExtendedMessageFormat mf = new ExtendedMessageFormat("it''s a {dummy} 'test'!", formatRegistry);
    
    Exception exception = assertThrows(OutOfMemoryError.class, () -> {
        mf.format(new Object[]{"great"});
    });

    assertTrue(exception.getMessage().contains("Java heap space"));
}