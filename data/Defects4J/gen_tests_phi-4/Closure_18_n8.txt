public void testDependencySortingWithClosurePassFalse() {
    Compiler compiler = new Compiler();
    compilerOptions.setClosurePass(false);
    DependencyOptions dependencyOptions = new DependencyOptions();
    dependencyOptions.setDependencySorting(true);
    compiler.getOptions().setDependencyOptions(dependencyOptions);

    // Sample JavaScript code for testing
    String jsCode = "goog.provide('test');\n" +
                    "goog.require('dependency');\n" +
                    "// test code\n" +
                    "goog.provide('dependency');\n" +
                    "// dependency code";

    // Compile the JavaScript code
    Compiler.CompilationLevel level = Compiler.CompilationLevel.SIMPLE_OPTIMIZATIONS;
    compiler.compile(level, jsCode);

    // Check if the output is sorted correctly
    String output = compiler.toSource(compiler.toSource(compiler.getCompiledScripts()));
    assertTrue(output.contains("goog.provide('dependency');"));
    assertTrue(output.contains("goog.require('dependency');"));
    assertTrue(output.contains("goog.provide('test');"));
}